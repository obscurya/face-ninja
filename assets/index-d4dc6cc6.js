var St=Object.defineProperty;var Et=(t,e,r)=>e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Tt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Xe=(t,e,r)=>(Et(t,typeof e!="symbol"?e+"":e,r),r);var Rt=Tt(exports=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const style="";/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="155",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",KeepStencilOp=7680,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(r)===-1&&s[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const s=this._listeners[e.type];if(s!==void 0){e.target=this;const n=s.slice(0);for(let i=0,o=n.length;i<o;i++)n[i].call(this,e);e.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(_lut[t&255]+_lut[t>>8&255]+_lut[t>>16&255]+_lut[t>>24&255]+"-"+_lut[e&255]+_lut[e>>8&255]+"-"+_lut[e>>16&15|64]+_lut[e>>24&255]+"-"+_lut[r&63|128]+_lut[r>>8&255]+"-"+_lut[r>>16&255]+_lut[r>>24&255]+_lut[s&255]+_lut[s>>8&255]+_lut[s>>16&255]+_lut[s>>24&255]).toLowerCase()}function clamp(t,e,r){return Math.max(e,Math.min(r,t))}function euclideanModulo(t,e){return(t%e+e)%e}function mapLinear(t,e,r,s,n){return s+(t-e)*(n-s)/(r-e)}function inverseLerp(t,e,r){return t!==e?(r-t)/(e-t):0}function lerp(t,e,r){return(1-r)*t+r*e}function damp(t,e,r,s){return lerp(t,e,1-Math.exp(-r*s))}function pingpong(t,e=1){return e-Math.abs(euclideanModulo(t,e*2)-e)}function smoothstep(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*(3-2*t))}function smootherstep(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*t*(t*(t*6-15)+10))}function randInt(t,e){return t+Math.floor(Math.random()*(e-t+1))}function randFloat(t,e){return t+Math.random()*(e-t)}function randFloatSpread(t){return t*(.5-Math.random())}function seededRandom(t){t!==void 0&&(_seed=t);let e=_seed+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function degToRad(t){return t*DEG2RAD}function radToDeg(t){return t*RAD2DEG}function isPowerOfTwo(t){return(t&t-1)===0&&t!==0}function ceilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function floorPowerOfTwo(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function setQuaternionFromProperEuler(t,e,r,s,n){const i=Math.cos,o=Math.sin,p=i(r/2),l=o(r/2),c=i((e+s)/2),f=o((e+s)/2),d=i((e-s)/2),g=o((e-s)/2),u=i((s-e)/2),h=o((s-e)/2);switch(n){case"XYX":t.set(p*f,l*d,l*g,p*c);break;case"YZY":t.set(l*g,p*f,l*d,p*c);break;case"ZXZ":t.set(l*d,l*g,p*f,p*c);break;case"XZX":t.set(p*f,l*h,l*u,p*c);break;case"YXY":t.set(l*u,p*f,l*h,p*c);break;case"ZYZ":t.set(l*h,l*u,p*f,p*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function denormalize(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function normalize(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(e=0,r=0){Vector2.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,s=this.y,n=e.elements;return this.x=n[0]*r+n[3]*s+n[6],this.y=n[1]*r+n[4]*s+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this}clampLength(e,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(r,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const s=this.dot(e)/r;return Math.acos(clamp(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,s=this.y-e.y;return r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,s){return this.x=e.x+(r.x-e.x)*s,this.y=e.y+(r.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const s=Math.cos(r),n=Math.sin(r),i=this.x-e.x,o=this.y-e.y;return this.x=i*s-o*n+e.x,this.y=i*n+o*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(e,r,s,n,i,o,p,l,c){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,s,n,i,o,p,l,c)}set(e,r,s,n,i,o,p,l,c){const f=this.elements;return f[0]=e,f[1]=n,f[2]=p,f[3]=r,f[4]=i,f[5]=l,f[6]=s,f[7]=o,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,s=e.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this}extractBasis(e,r,s){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const s=e.elements,n=r.elements,i=this.elements,o=s[0],p=s[3],l=s[6],c=s[1],f=s[4],d=s[7],g=s[2],u=s[5],h=s[8],y=n[0],m=n[3],_=n[6],b=n[1],M=n[4],S=n[7],v=n[2],E=n[5],T=n[8];return i[0]=o*y+p*b+l*v,i[3]=o*m+p*M+l*E,i[6]=o*_+p*S+l*T,i[1]=c*y+f*b+d*v,i[4]=c*m+f*M+d*E,i[7]=c*_+f*S+d*T,i[2]=g*y+u*b+h*v,i[5]=g*m+u*M+h*E,i[8]=g*_+u*S+h*T,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],p=e[5],l=e[6],c=e[7],f=e[8];return r*o*f-r*p*c-s*i*f+s*p*l+n*i*c-n*o*l}invert(){const e=this.elements,r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],p=e[5],l=e[6],c=e[7],f=e[8],d=f*o-p*c,g=p*l-f*i,u=c*i-o*l,h=r*d+s*g+n*u;if(h===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/h;return e[0]=d*y,e[1]=(n*c-f*s)*y,e[2]=(p*s-n*o)*y,e[3]=g*y,e[4]=(f*r-n*l)*y,e[5]=(n*i-p*r)*y,e[6]=u*y,e[7]=(s*l-c*r)*y,e[8]=(o*r-s*i)*y,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,s,n,i,o,p){const l=Math.cos(i),c=Math.sin(i);return this.set(s*l,s*c,-s*(l*o+c*p)+o+e,-n*c,n*l,-n*(-c*o+l*p)+p+r,0,0,1),this}scale(e,r){return this.premultiply(_m3.makeScale(e,r)),this}rotate(e){return this.premultiply(_m3.makeRotation(-e)),this}translate(e,r){return this.premultiply(_m3.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),s=Math.sin(e);return this.set(r,-s,0,s,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,s=e.elements;for(let n=0;n<9;n++)if(r[n]!==s[n])return!1;return!0}fromArray(e,r=0){for(let s=0;s<9;s++)this.elements[s]=e[s+r];return this}toArray(e=[],r=0){const s=this.elements;return e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3],e[r+4]=s[4],e[r+5]=s[5],e[r+6]=s[6],e[r+7]=s[7],e[r+8]=s[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function createElementNS(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const _cache={};function warnOnce(t){t in _cache||(_cache[t]=!0,console.warn(t))}function SRGBToLinear(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function LinearToSRGB(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function DisplayP3ToLinearSRGB(t){return t.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB)}function LinearSRGBToDisplayP3(t){return t.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:t=>t,[SRGBColorSpace]:t=>t.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:t=>t,[SRGBColorSpace]:t=>t.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,r){if(this.enabled===!1||e===r||!e||!r)return t;const s=TO_LINEAR[e],n=FROM_LINEAR[r];if(s===void 0||n===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${r}".`);return n(s(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=e.width,_canvas.height=e.height;const s=_canvas.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),r=_canvas}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=createElementNS("canvas");r.width=e.width,r.height=e.height;const s=r.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const n=s.getImageData(0,0,e.width,e.height),i=n.data;for(let o=0;o<i.length;o++)i[o]=SRGBToLinear(i[o]/255)*255;return s.putImageData(n,0,0),r}else if(e.data){const r=e.data.slice(0);for(let s=0;s<r.length;s++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[s]=Math.floor(SRGBToLinear(r[s]/255)*255):r[s]=SRGBToLinear(r[s]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let sourceId=0;class Source{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sourceId++}),this.uuid=generateUUID(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const s={uuid:this.uuid,url:""},n=this.data;if(n!==null){let i;if(Array.isArray(n)){i=[];for(let o=0,p=n.length;o<p;o++)n[o].isDataTexture?i.push(serializeImage(n[o].image)):i.push(serializeImage(n[o]))}else i=serializeImage(n);s.url=i}return r||(e.images[this.uuid]=s),s}}function serializeImage(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?ImageUtils.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(e=Texture.DEFAULT_IMAGE,r=Texture.DEFAULT_MAPPING,s=ClampToEdgeWrapping,n=ClampToEdgeWrapping,i=LinearFilter,o=LinearMipmapLinearFilter,p=RGBAFormat,l=UnsignedByteType,c=Texture.DEFAULT_ANISOTROPY,f=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=s,this.wrapT=n,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=p,this.internalFormat=null,this.type=l,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const s={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),r||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(e){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(e=0,r=0,s=0,n=1){Vector4.prototype.isVector4=!0,this.x=e,this.y=r,this.z=s,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,s,n){return this.x=e,this.y=r,this.z=s,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,s=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*r+o[4]*s+o[8]*n+o[12]*i,this.y=o[1]*r+o[5]*s+o[9]*n+o[13]*i,this.z=o[2]*r+o[6]*s+o[10]*n+o[14]*i,this.w=o[3]*r+o[7]*s+o[11]*n+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,s,n,i;const l=e.elements,c=l[0],f=l[4],d=l[8],g=l[1],u=l[5],h=l[9],y=l[2],m=l[6],_=l[10];if(Math.abs(f-g)<.01&&Math.abs(d-y)<.01&&Math.abs(h-m)<.01){if(Math.abs(f+g)<.1&&Math.abs(d+y)<.1&&Math.abs(h+m)<.1&&Math.abs(c+u+_-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const M=(c+1)/2,S=(u+1)/2,v=(_+1)/2,E=(f+g)/4,T=(d+y)/4,A=(h+m)/4;return M>S&&M>v?M<.01?(s=0,n=.707106781,i=.707106781):(s=Math.sqrt(M),n=E/s,i=T/s):S>v?S<.01?(s=.707106781,n=0,i=.707106781):(n=Math.sqrt(S),s=E/n,i=A/n):v<.01?(s=.707106781,n=.707106781,i=0):(i=Math.sqrt(v),s=T/i,n=A/i),this.set(s,n,i,r),this}let b=Math.sqrt((m-h)*(m-h)+(d-y)*(d-y)+(g-f)*(g-f));return Math.abs(b)<.001&&(b=1),this.x=(m-h)/b,this.y=(d-y)/b,this.z=(g-f)/b,this.w=Math.acos((c+u+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this.w=Math.max(e,Math.min(r,this.w)),this}clampLength(e,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(r,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,s){return this.x=e.x+(r.x-e.x)*s,this.y=e.y+(r.y-e.y)*s,this.z=e.z+(r.z-e.z)*s,this.w=e.w+(r.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(e=1,r=1,s={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new Vector4(0,0,e,r),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,r);const n={width:e,height:r,depth:1};s.encoding!==void 0&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),s.colorSpace=s.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new Texture(n,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.internalFormat=s.internalFormat!==void 0?s.internalFormat:null,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:LinearFilter,this.depthBuffer=s.depthBuffer!==void 0?s.depthBuffer:!0,this.stencilBuffer=s.stencilBuffer!==void 0?s.stencilBuffer:!1,this.depthTexture=s.depthTexture!==void 0?s.depthTexture:null,this.samples=s.samples!==void 0?s.samples:0}setSize(e,r,s=1){(this.width!==e||this.height!==r||this.depth!==s)&&(this.width=e,this.height=r,this.depth=s,this.texture.image.width=e,this.texture.image.height=r,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new Source(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(e=1,r=1,s={}){super(e,r,s),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(e=null,r=1,s=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:s,depth:n},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Data3DTexture extends Texture{constructor(e=null,r=1,s=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:s,depth:n},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(e=0,r=0,s=0,n=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=s,this._w=n}static slerpFlat(e,r,s,n,i,o,p){let l=s[n+0],c=s[n+1],f=s[n+2],d=s[n+3];const g=i[o+0],u=i[o+1],h=i[o+2],y=i[o+3];if(p===0){e[r+0]=l,e[r+1]=c,e[r+2]=f,e[r+3]=d;return}if(p===1){e[r+0]=g,e[r+1]=u,e[r+2]=h,e[r+3]=y;return}if(d!==y||l!==g||c!==u||f!==h){let m=1-p;const _=l*g+c*u+f*h+d*y,b=_>=0?1:-1,M=1-_*_;if(M>Number.EPSILON){const v=Math.sqrt(M),E=Math.atan2(v,_*b);m=Math.sin(m*E)/v,p=Math.sin(p*E)/v}const S=p*b;if(l=l*m+g*S,c=c*m+u*S,f=f*m+h*S,d=d*m+y*S,m===1-p){const v=1/Math.sqrt(l*l+c*c+f*f+d*d);l*=v,c*=v,f*=v,d*=v}}e[r]=l,e[r+1]=c,e[r+2]=f,e[r+3]=d}static multiplyQuaternionsFlat(e,r,s,n,i,o){const p=s[n],l=s[n+1],c=s[n+2],f=s[n+3],d=i[o],g=i[o+1],u=i[o+2],h=i[o+3];return e[r]=p*h+f*d+l*u-c*g,e[r+1]=l*h+f*g+c*d-p*u,e[r+2]=c*h+f*u+p*g-l*d,e[r+3]=f*h-p*d-l*g-c*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,s,n){return this._x=e,this._y=r,this._z=s,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r){const s=e._x,n=e._y,i=e._z,o=e._order,p=Math.cos,l=Math.sin,c=p(s/2),f=p(n/2),d=p(i/2),g=l(s/2),u=l(n/2),h=l(i/2);switch(o){case"XYZ":this._x=g*f*d+c*u*h,this._y=c*u*d-g*f*h,this._z=c*f*h+g*u*d,this._w=c*f*d-g*u*h;break;case"YXZ":this._x=g*f*d+c*u*h,this._y=c*u*d-g*f*h,this._z=c*f*h-g*u*d,this._w=c*f*d+g*u*h;break;case"ZXY":this._x=g*f*d-c*u*h,this._y=c*u*d+g*f*h,this._z=c*f*h+g*u*d,this._w=c*f*d-g*u*h;break;case"ZYX":this._x=g*f*d-c*u*h,this._y=c*u*d+g*f*h,this._z=c*f*h-g*u*d,this._w=c*f*d+g*u*h;break;case"YZX":this._x=g*f*d+c*u*h,this._y=c*u*d+g*f*h,this._z=c*f*h-g*u*d,this._w=c*f*d-g*u*h;break;case"XZY":this._x=g*f*d-c*u*h,this._y=c*u*d-g*f*h,this._z=c*f*h+g*u*d,this._w=c*f*d+g*u*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const s=r/2,n=Math.sin(s);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,s=r[0],n=r[4],i=r[8],o=r[1],p=r[5],l=r[9],c=r[2],f=r[6],d=r[10],g=s+p+d;if(g>0){const u=.5/Math.sqrt(g+1);this._w=.25/u,this._x=(f-l)*u,this._y=(i-c)*u,this._z=(o-n)*u}else if(s>p&&s>d){const u=2*Math.sqrt(1+s-p-d);this._w=(f-l)/u,this._x=.25*u,this._y=(n+o)/u,this._z=(i+c)/u}else if(p>d){const u=2*Math.sqrt(1+p-s-d);this._w=(i-c)/u,this._x=(n+o)/u,this._y=.25*u,this._z=(l+f)/u}else{const u=2*Math.sqrt(1+d-s-p);this._w=(o-n)/u,this._x=(i+c)/u,this._y=(l+f)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let s=e.dot(r)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp(this.dot(e),-1,1)))}rotateTowards(e,r){const s=this.angleTo(e);if(s===0)return this;const n=Math.min(1,r/s);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const s=e._x,n=e._y,i=e._z,o=e._w,p=r._x,l=r._y,c=r._z,f=r._w;return this._x=s*f+o*p+n*c-i*l,this._y=n*f+o*l+i*p-s*c,this._z=i*f+o*c+s*l-n*p,this._w=o*f-s*p-n*l-i*c,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const s=this._x,n=this._y,i=this._z,o=this._w;let p=o*e._w+s*e._x+n*e._y+i*e._z;if(p<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,p=-p):this.copy(e),p>=1)return this._w=o,this._x=s,this._y=n,this._z=i,this;const l=1-p*p;if(l<=Number.EPSILON){const u=1-r;return this._w=u*o+r*this._w,this._x=u*s+r*this._x,this._y=u*n+r*this._y,this._z=u*i+r*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),f=Math.atan2(c,p),d=Math.sin((1-r)*f)/c,g=Math.sin(r*f)/c;return this._w=o*d+this._w*g,this._x=s*d+this._x*g,this._y=n*d+this._y*g,this._z=i*d+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,r,s){return this.copy(e).slerp(r,s)}random(){const e=Math.random(),r=Math.sqrt(1-e),s=Math.sqrt(e),n=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(r*Math.cos(n),s*Math.sin(i),s*Math.cos(i),r*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(e=0,r=0,s=0){Vector3.prototype.isVector3=!0,this.x=e,this.y=r,this.z=s}set(e,r,s){return s===void 0&&(s=this.z),this.x=e,this.y=r,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(_quaternion$4.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,s=this.y,n=this.z,i=e.elements;return this.x=i[0]*r+i[3]*s+i[6]*n,this.y=i[1]*r+i[4]*s+i[7]*n,this.z=i[2]*r+i[5]*s+i[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,s=this.y,n=this.z,i=e.elements,o=1/(i[3]*r+i[7]*s+i[11]*n+i[15]);return this.x=(i[0]*r+i[4]*s+i[8]*n+i[12])*o,this.y=(i[1]*r+i[5]*s+i[9]*n+i[13])*o,this.z=(i[2]*r+i[6]*s+i[10]*n+i[14])*o,this}applyQuaternion(e){const r=this.x,s=this.y,n=this.z,i=e.x,o=e.y,p=e.z,l=e.w,c=l*r+o*n-p*s,f=l*s+p*r-i*n,d=l*n+i*s-o*r,g=-i*r-o*s-p*n;return this.x=c*l+g*-i+f*-p-d*-o,this.y=f*l+g*-o+d*-i-c*-p,this.z=d*l+g*-p+c*-o-f*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,s=this.y,n=this.z,i=e.elements;return this.x=i[0]*r+i[4]*s+i[8]*n,this.y=i[1]*r+i[5]*s+i[9]*n,this.z=i[2]*r+i[6]*s+i[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this}clampLength(e,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(r,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,s){return this.x=e.x+(r.x-e.x)*s,this.y=e.y+(r.y-e.y)*s,this.z=e.z+(r.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const s=e.x,n=e.y,i=e.z,o=r.x,p=r.y,l=r.z;return this.x=n*l-i*p,this.y=i*o-s*l,this.z=s*p-n*o,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const s=e.dot(this)/r;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return _vector$b.copy(this).projectOnVector(e),this.sub(_vector$b)}reflect(e){return this.sub(_vector$b.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const s=this.dot(e)/r;return Math.acos(clamp(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,s=this.y-e.y,n=this.z-e.z;return r*r+s*s+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,s){const n=Math.sin(r)*e;return this.x=n*Math.sin(s),this.y=Math.cos(r)*e,this.z=n*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,s){return this.x=e*Math.sin(r),this.y=s,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=s,this.z=n,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(r),this.y=s*Math.sin(r),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$b=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(e=new Vector3(1/0,1/0,1/0),r=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,s=e.length;r<s;r+=3)this.expandByPoint(_vector$a.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,s=e.count;r<s;r++)this.expandByPoint(_vector$a.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,s=e.length;r<s;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const s=_vector$a.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),_box$3.copy(e.boundingBox),_box$3.applyMatrix4(e.matrixWorld),this.union(_box$3);else{const n=e.geometry;if(n!==void 0)if(r&&n.attributes!==void 0&&n.attributes.position!==void 0){const i=n.attributes.position;for(let o=0,p=i.count;o<p;o++)_vector$a.fromBufferAttribute(i,o).applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$a)}else n.boundingBox===null&&n.computeBoundingBox(),_box$3.copy(n.boundingBox),_box$3.applyMatrix4(e.matrixWorld),this.union(_box$3)}const s=e.children;for(let n=0,i=s.length;n<i;n++)this.expandByObject(s[n],r);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_vector$a),_vector$a.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,s;return e.normal.x>0?(r=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),r<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(e.a,_center),_v1$7.subVectors(e.b,_center),_v2$4.subVectors(e.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let r=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(r,_v0$2,_v1$7,_v2$4,_extents)||(r=[1,0,0,0,1,0,0,0,1],!satForAxes(r,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),r=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(r,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$a).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_vector$a).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$a=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(t,e,r,s,n){for(let i=0,o=t.length-3;i<=o;i+=3){_testAxis.fromArray(t,i);const p=n.x*Math.abs(_testAxis.x)+n.y*Math.abs(_testAxis.y)+n.z*Math.abs(_testAxis.z),l=e.dot(_testAxis),c=r.dot(_testAxis),f=s.dot(_testAxis);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>p)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(e=new Vector3,r=-1){this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const s=this.center;r!==void 0?s.copy(r):_box$2.setFromPoints(e).getCenter(s);let n=0;for(let i=0,o=e.length;i<o;i++)n=Math.max(n,s.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const s=this.center.distanceToSquared(e);return r.copy(e),s>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v1$6.subVectors(e,this.center);const r=_v1$6.lengthSq();if(r>this.radius*this.radius){const s=Math.sqrt(r),n=(s-this.radius)*.5;this.center.addScaledVector(_v1$6,n/s),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_v2$3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v1$6.copy(e.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(e.center).sub(_v2$3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$9=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(e=new Vector3,r=new Vector3(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$9)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const s=r.dot(this.direction);return s<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=_vector$9.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(_vector$9.copy(this.origin).addScaledVector(this.direction,r),_vector$9.distanceToSquared(e))}distanceSqToSegment(e,r,s,n){_segCenter.copy(e).add(r).multiplyScalar(.5),_segDir.copy(r).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const i=e.distanceTo(r)*.5,o=-this.direction.dot(_segDir),p=_diff.dot(this.direction),l=-_diff.dot(_segDir),c=_diff.lengthSq(),f=Math.abs(1-o*o);let d,g,u,h;if(f>0)if(d=o*l-p,g=o*p-l,h=i*f,d>=0)if(g>=-h)if(g<=h){const y=1/f;d*=y,g*=y,u=d*(d+o*g+2*p)+g*(o*d+g+2*l)+c}else g=i,d=Math.max(0,-(o*g+p)),u=-d*d+g*(g+2*l)+c;else g=-i,d=Math.max(0,-(o*g+p)),u=-d*d+g*(g+2*l)+c;else g<=-h?(d=Math.max(0,-(-o*i+p)),g=d>0?-i:Math.min(Math.max(-i,-l),i),u=-d*d+g*(g+2*l)+c):g<=h?(d=0,g=Math.min(Math.max(-i,-l),i),u=g*(g+2*l)+c):(d=Math.max(0,-(o*i+p)),g=d>0?i:Math.min(Math.max(-i,-l),i),u=-d*d+g*(g+2*l)+c);else g=o>0?-i:i,d=Math.max(0,-(o*g+p)),u=-d*d+g*(g+2*l)+c;return s&&s.copy(this.origin).addScaledVector(this.direction,d),n&&n.copy(_segCenter).addScaledVector(_segDir,g),u}intersectSphere(e,r){_vector$9.subVectors(e.center,this.origin);const s=_vector$9.dot(this.direction),n=_vector$9.dot(_vector$9)-s*s,i=e.radius*e.radius;if(n>i)return null;const o=Math.sqrt(i-n),p=s-o,l=s+o;return l<0?null:p<0?this.at(l,r):this.at(p,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/r;return s>=0?s:null}intersectPlane(e,r){const s=this.distanceToPlane(e);return s===null?null:this.at(s,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let s,n,i,o,p,l;const c=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,g=this.origin;return c>=0?(s=(e.min.x-g.x)*c,n=(e.max.x-g.x)*c):(s=(e.max.x-g.x)*c,n=(e.min.x-g.x)*c),f>=0?(i=(e.min.y-g.y)*f,o=(e.max.y-g.y)*f):(i=(e.max.y-g.y)*f,o=(e.min.y-g.y)*f),s>o||i>n||((i>s||isNaN(s))&&(s=i),(o<n||isNaN(n))&&(n=o),d>=0?(p=(e.min.z-g.z)*d,l=(e.max.z-g.z)*d):(p=(e.max.z-g.z)*d,l=(e.min.z-g.z)*d),s>l||p>n)||((p>s||s!==s)&&(s=p),(l<n||n!==n)&&(n=l),n<0)?null:this.at(s>=0?s:n,r)}intersectsBox(e){return this.intersectBox(e,_vector$9)!==null}intersectTriangle(e,r,s,n,i){_edge1.subVectors(r,e),_edge2.subVectors(s,e),_normal$1.crossVectors(_edge1,_edge2);let o=this.direction.dot(_normal$1),p;if(o>0){if(n)return null;p=1}else if(o<0)p=-1,o=-o;else return null;_diff.subVectors(this.origin,e);const l=p*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(l<0)return null;const c=p*this.direction.dot(_edge1.cross(_diff));if(c<0||l+c>o)return null;const f=-p*_diff.dot(_normal$1);return f<0?null:this.at(f/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(e,r,s,n,i,o,p,l,c,f,d,g,u,h,y,m){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,s,n,i,o,p,l,c,f,d,g,u,h,y,m)}set(e,r,s,n,i,o,p,l,c,f,d,g,u,h,y,m){const _=this.elements;return _[0]=e,_[4]=r,_[8]=s,_[12]=n,_[1]=i,_[5]=o,_[9]=p,_[13]=l,_[2]=c,_[6]=f,_[10]=d,_[14]=g,_[3]=u,_[7]=h,_[11]=y,_[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(e){const r=this.elements,s=e.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],this}copyPosition(e){const r=this.elements,s=e.elements;return r[12]=s[12],r[13]=s[13],r[14]=s[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,s){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,r,s){return this.set(e.x,r.x,s.x,0,e.y,r.y,s.y,0,e.z,r.z,s.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,s=e.elements,n=1/_v1$5.setFromMatrixColumn(e,0).length(),i=1/_v1$5.setFromMatrixColumn(e,1).length(),o=1/_v1$5.setFromMatrixColumn(e,2).length();return r[0]=s[0]*n,r[1]=s[1]*n,r[2]=s[2]*n,r[3]=0,r[4]=s[4]*i,r[5]=s[5]*i,r[6]=s[6]*i,r[7]=0,r[8]=s[8]*o,r[9]=s[9]*o,r[10]=s[10]*o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,s=e.x,n=e.y,i=e.z,o=Math.cos(s),p=Math.sin(s),l=Math.cos(n),c=Math.sin(n),f=Math.cos(i),d=Math.sin(i);if(e.order==="XYZ"){const g=o*f,u=o*d,h=p*f,y=p*d;r[0]=l*f,r[4]=-l*d,r[8]=c,r[1]=u+h*c,r[5]=g-y*c,r[9]=-p*l,r[2]=y-g*c,r[6]=h+u*c,r[10]=o*l}else if(e.order==="YXZ"){const g=l*f,u=l*d,h=c*f,y=c*d;r[0]=g+y*p,r[4]=h*p-u,r[8]=o*c,r[1]=o*d,r[5]=o*f,r[9]=-p,r[2]=u*p-h,r[6]=y+g*p,r[10]=o*l}else if(e.order==="ZXY"){const g=l*f,u=l*d,h=c*f,y=c*d;r[0]=g-y*p,r[4]=-o*d,r[8]=h+u*p,r[1]=u+h*p,r[5]=o*f,r[9]=y-g*p,r[2]=-o*c,r[6]=p,r[10]=o*l}else if(e.order==="ZYX"){const g=o*f,u=o*d,h=p*f,y=p*d;r[0]=l*f,r[4]=h*c-u,r[8]=g*c+y,r[1]=l*d,r[5]=y*c+g,r[9]=u*c-h,r[2]=-c,r[6]=p*l,r[10]=o*l}else if(e.order==="YZX"){const g=o*l,u=o*c,h=p*l,y=p*c;r[0]=l*f,r[4]=y-g*d,r[8]=h*d+u,r[1]=d,r[5]=o*f,r[9]=-p*f,r[2]=-c*f,r[6]=u*d+h,r[10]=g-y*d}else if(e.order==="XZY"){const g=o*l,u=o*c,h=p*l,y=p*c;r[0]=l*f,r[4]=-d,r[8]=c*f,r[1]=g*d+y,r[5]=o*f,r[9]=u*d-h,r[2]=h*d-u,r[6]=p*f,r[10]=y*d+g}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,r,s){const n=this.elements;return _z.subVectors(e,r),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(s,_z),_x.lengthSq()===0&&(Math.abs(s.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(s,_z)),_x.normalize(),_y.crossVectors(_z,_x),n[0]=_x.x,n[4]=_y.x,n[8]=_z.x,n[1]=_x.y,n[5]=_y.y,n[9]=_z.y,n[2]=_x.z,n[6]=_y.z,n[10]=_z.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const s=e.elements,n=r.elements,i=this.elements,o=s[0],p=s[4],l=s[8],c=s[12],f=s[1],d=s[5],g=s[9],u=s[13],h=s[2],y=s[6],m=s[10],_=s[14],b=s[3],M=s[7],S=s[11],v=s[15],E=n[0],T=n[4],A=n[8],R=n[12],x=n[1],C=n[5],O=n[9],F=n[13],L=n[2],I=n[6],N=n[10],k=n[14],U=n[3],H=n[7],W=n[11],z=n[15];return i[0]=o*E+p*x+l*L+c*U,i[4]=o*T+p*C+l*I+c*H,i[8]=o*A+p*O+l*N+c*W,i[12]=o*R+p*F+l*k+c*z,i[1]=f*E+d*x+g*L+u*U,i[5]=f*T+d*C+g*I+u*H,i[9]=f*A+d*O+g*N+u*W,i[13]=f*R+d*F+g*k+u*z,i[2]=h*E+y*x+m*L+_*U,i[6]=h*T+y*C+m*I+_*H,i[10]=h*A+y*O+m*N+_*W,i[14]=h*R+y*F+m*k+_*z,i[3]=b*E+M*x+S*L+v*U,i[7]=b*T+M*C+S*I+v*H,i[11]=b*A+M*O+S*N+v*W,i[15]=b*R+M*F+S*k+v*z,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],s=e[4],n=e[8],i=e[12],o=e[1],p=e[5],l=e[9],c=e[13],f=e[2],d=e[6],g=e[10],u=e[14],h=e[3],y=e[7],m=e[11],_=e[15];return h*(+i*l*d-n*c*d-i*p*g+s*c*g+n*p*u-s*l*u)+y*(+r*l*u-r*c*g+i*o*g-n*o*u+n*c*f-i*l*f)+m*(+r*c*d-r*p*u-i*o*d+s*o*u+i*p*f-s*c*f)+_*(-n*p*f-r*l*d+r*p*g+n*o*d-s*o*g+s*l*f)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,s){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=r,n[14]=s),this}invert(){const e=this.elements,r=e[0],s=e[1],n=e[2],i=e[3],o=e[4],p=e[5],l=e[6],c=e[7],f=e[8],d=e[9],g=e[10],u=e[11],h=e[12],y=e[13],m=e[14],_=e[15],b=d*m*c-y*g*c+y*l*u-p*m*u-d*l*_+p*g*_,M=h*g*c-f*m*c-h*l*u+o*m*u+f*l*_-o*g*_,S=f*y*c-h*d*c+h*p*u-o*y*u-f*p*_+o*d*_,v=h*d*l-f*y*l-h*p*g+o*y*g+f*p*m-o*d*m,E=r*b+s*M+n*S+i*v;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/E;return e[0]=b*T,e[1]=(y*g*i-d*m*i-y*n*u+s*m*u+d*n*_-s*g*_)*T,e[2]=(p*m*i-y*l*i+y*n*c-s*m*c-p*n*_+s*l*_)*T,e[3]=(d*l*i-p*g*i-d*n*c+s*g*c+p*n*u-s*l*u)*T,e[4]=M*T,e[5]=(f*m*i-h*g*i+h*n*u-r*m*u-f*n*_+r*g*_)*T,e[6]=(h*l*i-o*m*i-h*n*c+r*m*c+o*n*_-r*l*_)*T,e[7]=(o*g*i-f*l*i+f*n*c-r*g*c-o*n*u+r*l*u)*T,e[8]=S*T,e[9]=(h*d*i-f*y*i-h*s*u+r*y*u+f*s*_-r*d*_)*T,e[10]=(o*y*i-h*p*i+h*s*c-r*y*c-o*s*_+r*p*_)*T,e[11]=(f*p*i-o*d*i-f*s*c+r*d*c+o*s*u-r*p*u)*T,e[12]=v*T,e[13]=(f*y*n-h*d*n+h*s*g-r*y*g-f*s*m+r*d*m)*T,e[14]=(h*p*n-o*y*n-h*s*l+r*y*l+o*s*m-r*p*m)*T,e[15]=(o*d*n-f*p*n+f*s*l-r*d*l-o*s*g+r*p*g)*T,this}scale(e){const r=this.elements,s=e.x,n=e.y,i=e.z;return r[0]*=s,r[4]*=n,r[8]*=i,r[1]*=s,r[5]*=n,r[9]*=i,r[2]*=s,r[6]*=n,r[10]*=i,r[3]*=s,r[7]*=n,r[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,s,n))}makeTranslation(e,r,s){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,s,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,r,-s,0,0,s,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),s=Math.sin(e);return this.set(r,0,s,0,0,1,0,0,-s,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),s=Math.sin(e);return this.set(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const s=Math.cos(r),n=Math.sin(r),i=1-s,o=e.x,p=e.y,l=e.z,c=i*o,f=i*p;return this.set(c*o+s,c*p-n*l,c*l+n*p,0,c*p+n*l,f*p+s,f*l-n*o,0,c*l-n*p,f*l+n*o,i*l*l+s,0,0,0,0,1),this}makeScale(e,r,s){return this.set(e,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,r,s,n,i,o){return this.set(1,s,i,0,e,1,o,0,r,n,1,0,0,0,0,1),this}compose(e,r,s){const n=this.elements,i=r._x,o=r._y,p=r._z,l=r._w,c=i+i,f=o+o,d=p+p,g=i*c,u=i*f,h=i*d,y=o*f,m=o*d,_=p*d,b=l*c,M=l*f,S=l*d,v=s.x,E=s.y,T=s.z;return n[0]=(1-(y+_))*v,n[1]=(u+S)*v,n[2]=(h-M)*v,n[3]=0,n[4]=(u-S)*E,n[5]=(1-(g+_))*E,n[6]=(m+b)*E,n[7]=0,n[8]=(h+M)*T,n[9]=(m-b)*T,n[10]=(1-(g+y))*T,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,r,s){const n=this.elements;let i=_v1$5.set(n[0],n[1],n[2]).length();const o=_v1$5.set(n[4],n[5],n[6]).length(),p=_v1$5.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],_m1$2.copy(this);const c=1/i,f=1/o,d=1/p;return _m1$2.elements[0]*=c,_m1$2.elements[1]*=c,_m1$2.elements[2]*=c,_m1$2.elements[4]*=f,_m1$2.elements[5]*=f,_m1$2.elements[6]*=f,_m1$2.elements[8]*=d,_m1$2.elements[9]*=d,_m1$2.elements[10]*=d,r.setFromRotationMatrix(_m1$2),s.x=i,s.y=o,s.z=p,this}makePerspective(e,r,s,n,i,o,p=WebGLCoordinateSystem){const l=this.elements,c=2*i/(r-e),f=2*i/(s-n),d=(r+e)/(r-e),g=(s+n)/(s-n);let u,h;if(p===WebGLCoordinateSystem)u=-(o+i)/(o-i),h=-2*o*i/(o-i);else if(p===WebGPUCoordinateSystem)u=-o/(o-i),h=-o*i/(o-i);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+p);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=f,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=u,l[14]=h,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,r,s,n,i,o,p=WebGLCoordinateSystem){const l=this.elements,c=1/(r-e),f=1/(s-n),d=1/(o-i),g=(r+e)*c,u=(s+n)*f;let h,y;if(p===WebGLCoordinateSystem)h=(o+i)*d,y=-2*d;else if(p===WebGPUCoordinateSystem)h=i*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+p);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-u,l[2]=0,l[6]=0,l[10]=y,l[14]=-h,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const r=this.elements,s=e.elements;for(let n=0;n<16;n++)if(r[n]!==s[n])return!1;return!0}fromArray(e,r=0){for(let s=0;s<16;s++)this.elements[s]=e[s+r];return this}toArray(e=[],r=0){const s=this.elements;return e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3],e[r+4]=s[4],e[r+5]=s[5],e[r+6]=s[6],e[r+7]=s[7],e[r+8]=s[8],e[r+9]=s[9],e[r+10]=s[10],e[r+11]=s[11],e[r+12]=s[12],e[r+13]=s[13],e[r+14]=s[14],e[r+15]=s[15],e}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(e=0,r=0,s=0,n=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=s,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,s,n=this._order){return this._x=e,this._y=r,this._z=s,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,s=!0){const n=e.elements,i=n[0],o=n[4],p=n[8],l=n[1],c=n[5],f=n[9],d=n[2],g=n[6],u=n[10];switch(r){case"XYZ":this._y=Math.asin(clamp(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-f,u),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(g,c),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(p,u),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-d,u),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,i));break;case"ZYX":this._y=Math.asin(-clamp(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(g,u),this._z=Math.atan2(l,i)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(clamp(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(p,u));break;case"XZY":this._z=Math.asin(-clamp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,c),this._y=Math.atan2(p,i)):(this._x=Math.atan2(-f,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,s===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,s){return _matrix.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix,r,s)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const e=new Vector3,r=new Euler,s=new Quaternion,n=new Vector3(1,1,1);function i(){s.setFromEuler(r,!1)}function o(){r.setFromQuaternion(s,void 0,!1)}r._onChange(i),s._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return _q1.setFromAxisAngle(e,r),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(e,r){return _q1.setFromAxisAngle(e,r),this.quaternion.premultiply(_q1),this}rotateX(e){return this.rotateOnAxis(_xAxis,e)}rotateY(e){return this.rotateOnAxis(_yAxis,e)}rotateZ(e){return this.rotateOnAxis(_zAxis,e)}translateOnAxis(e,r){return _v1$4.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(_xAxis,e)}translateY(e){return this.translateOnAxis(_yAxis,e)}translateZ(e){return this.translateOnAxis(_zAxis,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(e,r,s){e.isVector3?_target.copy(e):_target.set(e,r,s);const n=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),n&&(_m1$1.extractRotation(n.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(_removedEvent)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const r=this.children[e];r.parent=null,r.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let s=0,n=this.children.length;s<n;s++){const o=this.children[s].getObjectByProperty(e,r);if(o!==void 0)return o}}getObjectsByProperty(e,r){let s=[];this[e]===r&&s.push(this);for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectsByProperty(e,r);o.length>0&&(s=s.concat(o))}return s}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,e,_scale$2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let s=0,n=r.length;s<n;s++)r[s].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let s=0,n=r.length;s<n;s++)r[s].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let s=0,n=r.length;s<n;s++){const i=r[s];(i.matrixWorldAutoUpdate===!0||e===!0)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,r){const s=this.parent;if(e===!0&&s!==null&&s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){const n=this.children;for(let i=0,o=n.length;i<o;i++){const p=n[i];p.matrixWorldAutoUpdate===!0&&p.updateWorldMatrix(!1,!0)}}}toJSON(e){const r=e===void 0||typeof e=="string",s={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function i(p,l){return p[l.uuid]===void 0&&(p[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);const p=this.geometry.parameters;if(p!==void 0&&p.shapes!==void 0){const l=p.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){const d=l[c];i(e.shapes,d)}else i(e.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const p=[];for(let l=0,c=this.material.length;l<c;l++)p.push(i(e.materials,this.material[l]));n.material=p}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(let p=0;p<this.children.length;p++)n.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let p=0;p<this.animations.length;p++){const l=this.animations[p];n.animations.push(i(e.animations,l))}}if(r){const p=o(e.geometries),l=o(e.materials),c=o(e.textures),f=o(e.images),d=o(e.shapes),g=o(e.skeletons),u=o(e.animations),h=o(e.nodes);p.length>0&&(s.geometries=p),l.length>0&&(s.materials=l),c.length>0&&(s.textures=c),f.length>0&&(s.images=f),d.length>0&&(s.shapes=d),g.length>0&&(s.skeletons=g),u.length>0&&(s.animations=u),h.length>0&&(s.nodes=h)}return s.object=n,s;function o(p){const l=[];for(const c in p){const f=p[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let s=0;s<e.children.length;s++){const n=e.children[s];this.add(n.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let warnedGetUV=!1;class Triangle{constructor(e=new Vector3,r=new Vector3,s=new Vector3){this.a=e,this.b=r,this.c=s}static getNormal(e,r,s,n){n.subVectors(s,r),_v0$1.subVectors(e,r),n.cross(_v0$1);const i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(e,r,s,n,i){_v0$1.subVectors(n,r),_v1$3.subVectors(s,r),_v2$2.subVectors(e,r);const o=_v0$1.dot(_v0$1),p=_v0$1.dot(_v1$3),l=_v0$1.dot(_v2$2),c=_v1$3.dot(_v1$3),f=_v1$3.dot(_v2$2),d=o*c-p*p;if(d===0)return i.set(-2,-1,-1);const g=1/d,u=(c*l-p*f)*g,h=(o*f-p*l)*g;return i.set(1-u-h,h,u)}static containsPoint(e,r,s,n){return this.getBarycoord(e,r,s,n,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(e,r,s,n,i,o,p,l){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),this.getInterpolation(e,r,s,n,i,o,p,l)}static getInterpolation(e,r,s,n,i,o,p,l){return this.getBarycoord(e,r,s,n,_v3$1),l.setScalar(0),l.addScaledVector(i,_v3$1.x),l.addScaledVector(o,_v3$1.y),l.addScaledVector(p,_v3$1.z),l}static isFrontFacing(e,r,s,n){return _v0$1.subVectors(s,r),_v1$3.subVectors(e,r),_v0$1.cross(_v1$3).dot(n)<0}set(e,r,s){return this.a.copy(e),this.b.copy(r),this.c.copy(s),this}setFromPointsAndIndices(e,r,s,n){return this.a.copy(e[r]),this.b.copy(e[s]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,r,s,n){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return Triangle.getBarycoord(e,this.a,this.b,this.c,r)}getUV(e,r,s,n,i){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),Triangle.getInterpolation(e,this.a,this.b,this.c,r,s,n,i)}getInterpolation(e,r,s,n,i){return Triangle.getInterpolation(e,this.a,this.b,this.c,r,s,n,i)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const s=this.a,n=this.b,i=this.c;let o,p;_vab.subVectors(n,s),_vac.subVectors(i,s),_vap.subVectors(e,s);const l=_vab.dot(_vap),c=_vac.dot(_vap);if(l<=0&&c<=0)return r.copy(s);_vbp.subVectors(e,n);const f=_vab.dot(_vbp),d=_vac.dot(_vbp);if(f>=0&&d<=f)return r.copy(n);const g=l*d-f*c;if(g<=0&&l>=0&&f<=0)return o=l/(l-f),r.copy(s).addScaledVector(_vab,o);_vcp.subVectors(e,i);const u=_vab.dot(_vcp),h=_vac.dot(_vcp);if(h>=0&&u<=h)return r.copy(i);const y=u*c-l*h;if(y<=0&&c>=0&&h<=0)return p=c/(c-h),r.copy(s).addScaledVector(_vac,p);const m=f*h-u*d;if(m<=0&&d-f>=0&&u-h>=0)return _vbc.subVectors(i,n),p=(d-f)/(d-f+(u-h)),r.copy(n).addScaledVector(_vbc,p);const _=1/(m+y+g);return o=y*_,p=g*_,r.copy(s).addScaledVector(_vab,o).addScaledVector(_vac,p)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const s=e[r];if(s===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const n=this[r];if(n===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(s):n&&n.isVector3&&s&&s.isVector3?n.copy(s):this[r]=s}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(s.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(s.blending=this.blending),this.side!==FrontSide&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaHash===!0&&(s.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(s.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(s.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=this.flatShading),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function n(i){const o=[];for(const p in i){const l=i[p];delete l.metadata,o.push(l)}return o}if(r){const i=n(e.textures),o=n(e.images);i.length>0&&(s.textures=i),o.length>0&&(s.images=o)}return s}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let s=null;if(r!==null){const n=r.length;s=new Array(n);for(let i=0;i!==n;++i)s[i]=r[i].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*6*(2/3-r):t}class Color{constructor(e,r,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,s)}set(e,r,s){if(r===void 0&&s===void 0){const n=e;n&&n.isColor?this.copy(n):typeof n=="number"?this.setHex(n):typeof n=="string"&&this.setStyle(n)}else this.setRGB(e,r,s);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=SRGBColorSpace){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ColorManagement.toWorkingColorSpace(this,r),this}setRGB(e,r,s,n=ColorManagement.workingColorSpace){return this.r=e,this.g=r,this.b=s,ColorManagement.toWorkingColorSpace(this,n),this}setHSL(e,r,s,n=ColorManagement.workingColorSpace){if(e=euclideanModulo(e,1),r=clamp(r,0,1),s=clamp(s,0,1),r===0)this.r=this.g=this.b=s;else{const i=s<=.5?s*(1+r):s+r-s*r,o=2*s-i;this.r=hue2rgb(o,i,e+1/3),this.g=hue2rgb(o,i,e),this.b=hue2rgb(o,i,e-1/3)}return ColorManagement.toWorkingColorSpace(this,n),this}setStyle(e,r=SRGBColorSpace){function s(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=n[1],p=n[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return s(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,r);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return s(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,r);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return s(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=n[1],o=i.length;if(o===3)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,r);if(o===6)return this.setHex(parseInt(i,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=SRGBColorSpace){const s=_colorKeywords[e.toLowerCase()];return s!==void 0?this.setHex(s,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),e),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(e=SRGBColorSpace){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),r);const s=_color.r,n=_color.g,i=_color.b,o=Math.max(s,n,i),p=Math.min(s,n,i);let l,c;const f=(p+o)/2;if(p===o)l=0,c=0;else{const d=o-p;switch(c=f<=.5?d/(o+p):d/(2-o-p),o){case s:l=(n-i)/d+(n<i?6:0);break;case n:l=(i-s)/d+2;break;case i:l=(s-n)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=f,e}getRGB(e,r=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),r),e.r=_color.r,e.g=_color.g,e.b=_color.b,e}getStyle(e=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),e);const r=_color.r,s=_color.g,n=_color.b;return e!==SRGBColorSpace?`color(${e} ${r.toFixed(3)} ${s.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(s*255)},${Math.round(n*255)})`}offsetHSL(e,r,s){return this.getHSL(_hslA),_hslA.h+=e,_hslA.s+=r,_hslA.l+=s,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,s){return this.r=e.r+(r.r-e.r)*s,this.g=e.g+(r.g-e.g)*s,this.b=e.b+(r.b-e.b)*s,this}lerpHSL(e,r){this.getHSL(_hslA),e.getHSL(_hslB);const s=lerp(_hslA.h,_hslB.h,r),n=lerp(_hslA.s,_hslB.s,r),i=lerp(_hslA.l,_hslB.l,r);return this.setHSL(s,n,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,s=this.g,n=this.b,i=e.elements;return this.r=i[0]*r+i[3]*s+i[6]*n,this.g=i[1]*r+i[4]*s+i[7]*n,this.b=i[2]*r+i[5]*s+i[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _vector$8=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(e,r,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=s,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,s){e*=this.itemSize,s*=r.itemSize;for(let n=0,i=this.itemSize;n<i;n++)this.array[e+n]=r.array[s+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,s=this.count;r<s;r++)_vector2$1.fromBufferAttribute(this,r),_vector2$1.applyMatrix3(e),this.setXY(r,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let r=0,s=this.count;r<s;r++)_vector$8.fromBufferAttribute(this,r),_vector$8.applyMatrix3(e),this.setXYZ(r,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyMatrix4(e){for(let r=0,s=this.count;r<s;r++)_vector$8.fromBufferAttribute(this,r),_vector$8.applyMatrix4(e),this.setXYZ(r,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyNormalMatrix(e){for(let r=0,s=this.count;r<s;r++)_vector$8.fromBufferAttribute(this,r),_vector$8.applyNormalMatrix(e),this.setXYZ(r,_vector$8.x,_vector$8.y,_vector$8.z);return this}transformDirection(e){for(let r=0,s=this.count;r<s;r++)_vector$8.fromBufferAttribute(this,r),_vector$8.transformDirection(e),this.setXYZ(r,_vector$8.x,_vector$8.y,_vector$8.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let s=this.array[e*this.itemSize+r];return this.normalized&&(s=denormalize(s,this.array)),s}setComponent(e,r,s){return this.normalized&&(s=normalize(s,this.array)),this.array[e*this.itemSize+r]=s,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=denormalize(r,this.array)),r}setX(e,r){return this.normalized&&(r=normalize(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=denormalize(r,this.array)),r}setY(e,r){return this.normalized&&(r=normalize(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=denormalize(r,this.array)),r}setZ(e,r){return this.normalized&&(r=normalize(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=denormalize(r,this.array)),r}setW(e,r){return this.normalized&&(r=normalize(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,s){return e*=this.itemSize,this.normalized&&(r=normalize(r,this.array),s=normalize(s,this.array)),this.array[e+0]=r,this.array[e+1]=s,this}setXYZ(e,r,s,n){return e*=this.itemSize,this.normalized&&(r=normalize(r,this.array),s=normalize(s,this.array),n=normalize(n,this.array)),this.array[e+0]=r,this.array[e+1]=s,this.array[e+2]=n,this}setXYZW(e,r,s,n,i){return e*=this.itemSize,this.normalized&&(r=normalize(r,this.array),s=normalize(s,this.array),n=normalize(n,this.array),i=normalize(i,this.array)),this.array[e+0]=r,this.array[e+1]=s,this.array[e+2]=n,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==StaticDrawUsage&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,r,s){super(new Uint16Array(e),r,s)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,r,s){super(new Uint32Array(e),r,s)}}class Float32BufferAttribute extends BufferAttribute{constructor(e,r,s){super(new Float32Array(e),r,s)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$7=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,s=0){this.groups.push({start:e,count:r,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const i=new Matrix3().getNormalMatrix(e);s.applyNormalMatrix(i),s.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1.makeRotationFromQuaternion(e),this.applyMatrix4(_m1),this}rotateX(e){return _m1.makeRotationX(e),this.applyMatrix4(_m1),this}rotateY(e){return _m1.makeRotationY(e),this.applyMatrix4(_m1),this}rotateZ(e){return _m1.makeRotationZ(e),this.applyMatrix4(_m1),this}translate(e,r,s){return _m1.makeTranslation(e,r,s),this.applyMatrix4(_m1),this}scale(e,r,s){return _m1.makeScale(e,r,s),this.applyMatrix4(_m1),this}lookAt(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(e){const r=[];for(let s=0,n=e.length;s<n;s++){const i=e[s];r.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Float32BufferAttribute(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let s=0,n=r.length;s<n;s++){const i=r[s];_box$1.setFromBufferAttribute(i),this.morphTargetsRelative?(_vector$7.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$7),_vector$7.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$7)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(e){const s=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(e),r)for(let i=0,o=r.length;i<o;i++){const p=r[i];_boxMorphTargets.setFromBufferAttribute(p),this.morphTargetsRelative?(_vector$7.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$7),_vector$7.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$7)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(s);let n=0;for(let i=0,o=e.count;i<o;i++)_vector$7.fromBufferAttribute(e,i),n=Math.max(n,s.distanceToSquared(_vector$7));if(r)for(let i=0,o=r.length;i<o;i++){const p=r[i],l=this.morphTargetsRelative;for(let c=0,f=p.count;c<f;c++)_vector$7.fromBufferAttribute(p,c),l&&(_offset.fromBufferAttribute(e,c),_vector$7.add(_offset)),n=Math.max(n,s.distanceToSquared(_vector$7))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=e.array,n=r.position.array,i=r.normal.array,o=r.uv.array,p=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*p),4));const l=this.getAttribute("tangent").array,c=[],f=[];for(let x=0;x<p;x++)c[x]=new Vector3,f[x]=new Vector3;const d=new Vector3,g=new Vector3,u=new Vector3,h=new Vector2,y=new Vector2,m=new Vector2,_=new Vector3,b=new Vector3;function M(x,C,O){d.fromArray(n,x*3),g.fromArray(n,C*3),u.fromArray(n,O*3),h.fromArray(o,x*2),y.fromArray(o,C*2),m.fromArray(o,O*2),g.sub(d),u.sub(d),y.sub(h),m.sub(h);const F=1/(y.x*m.y-m.x*y.y);isFinite(F)&&(_.copy(g).multiplyScalar(m.y).addScaledVector(u,-y.y).multiplyScalar(F),b.copy(u).multiplyScalar(y.x).addScaledVector(g,-m.x).multiplyScalar(F),c[x].add(_),c[C].add(_),c[O].add(_),f[x].add(b),f[C].add(b),f[O].add(b))}let S=this.groups;S.length===0&&(S=[{start:0,count:s.length}]);for(let x=0,C=S.length;x<C;++x){const O=S[x],F=O.start,L=O.count;for(let I=F,N=F+L;I<N;I+=3)M(s[I+0],s[I+1],s[I+2])}const v=new Vector3,E=new Vector3,T=new Vector3,A=new Vector3;function R(x){T.fromArray(i,x*3),A.copy(T);const C=c[x];v.copy(C),v.sub(T.multiplyScalar(T.dot(C))).normalize(),E.crossVectors(A,C);const F=E.dot(f[x])<0?-1:1;l[x*4]=v.x,l[x*4+1]=v.y,l[x*4+2]=v.z,l[x*4+3]=F}for(let x=0,C=S.length;x<C;++x){const O=S[x],F=O.start,L=O.count;for(let I=F,N=F+L;I<N;I+=3)R(s[I+0]),R(s[I+1]),R(s[I+2])}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new BufferAttribute(new Float32Array(r.count*3),3),this.setAttribute("normal",s);else for(let g=0,u=s.count;g<u;g++)s.setXYZ(g,0,0,0);const n=new Vector3,i=new Vector3,o=new Vector3,p=new Vector3,l=new Vector3,c=new Vector3,f=new Vector3,d=new Vector3;if(e)for(let g=0,u=e.count;g<u;g+=3){const h=e.getX(g+0),y=e.getX(g+1),m=e.getX(g+2);n.fromBufferAttribute(r,h),i.fromBufferAttribute(r,y),o.fromBufferAttribute(r,m),f.subVectors(o,i),d.subVectors(n,i),f.cross(d),p.fromBufferAttribute(s,h),l.fromBufferAttribute(s,y),c.fromBufferAttribute(s,m),p.add(f),l.add(f),c.add(f),s.setXYZ(h,p.x,p.y,p.z),s.setXYZ(y,l.x,l.y,l.z),s.setXYZ(m,c.x,c.y,c.z)}else for(let g=0,u=r.count;g<u;g+=3)n.fromBufferAttribute(r,g+0),i.fromBufferAttribute(r,g+1),o.fromBufferAttribute(r,g+2),f.subVectors(o,i),d.subVectors(n,i),f.cross(d),s.setXYZ(g+0,f.x,f.y,f.z),s.setXYZ(g+1,f.x,f.y,f.z),s.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,s=e.count;r<s;r++)_vector$7.fromBufferAttribute(e,r),_vector$7.normalize(),e.setXYZ(r,_vector$7.x,_vector$7.y,_vector$7.z)}toNonIndexed(){function e(p,l){const c=p.array,f=p.itemSize,d=p.normalized,g=new c.constructor(l.length*f);let u=0,h=0;for(let y=0,m=l.length;y<m;y++){p.isInterleavedBufferAttribute?u=l[y]*p.data.stride+p.offset:u=l[y]*f;for(let _=0;_<f;_++)g[h++]=c[u++]}return new BufferAttribute(g,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new BufferGeometry,s=this.index.array,n=this.attributes;for(const p in n){const l=n[p],c=e(l,s);r.setAttribute(p,c)}const i=this.morphAttributes;for(const p in i){const l=[],c=i[p];for(let f=0,d=c.length;f<d;f++){const g=c[f],u=e(g,s);l.push(u)}r.morphAttributes[p]=l}r.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let p=0,l=o.length;p<l;p++){const c=o[p];r.addGroup(c.start,c.count,c.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const s=this.attributes;for(const l in s){const c=s[l];e.data.attributes[l]=c.toJSON(e.data)}const n={};let i=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],f=[];for(let d=0,g=c.length;d<g;d++){const u=c[d];f.push(u.toJSON(e.data))}f.length>0&&(n[l]=f,i=!0)}i&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const p=this.boundingSphere;return p!==null&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const s=e.index;s!==null&&this.setIndex(s.clone(r));const n=e.attributes;for(const c in n){const f=n[c];this.setAttribute(c,f.clone(r))}const i=e.morphAttributes;for(const c in i){const f=[],d=i[c];for(let g=0,u=d.length;g<u;g++)f.push(d[g].clone(r));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const p=e.boundingBox;p!==null&&(this.boundingBox=p.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$5=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(e=new BufferGeometry,r=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const n=r[s[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=n.length;i<o;i++){const p=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[p]=i}}}}getVertexPosition(e,r){const s=this.geometry,n=s.attributes.position,i=s.morphAttributes.position,o=s.morphTargetsRelative;r.fromBufferAttribute(n,e);const p=this.morphTargetInfluences;if(i&&p){_morphA.set(0,0,0);for(let l=0,c=i.length;l<c;l++){const f=p[l],d=i[l];f!==0&&(_tempA.fromBufferAttribute(d,e),o?_morphA.addScaledVector(_tempA,f):_morphA.addScaledVector(_tempA.sub(r),f))}r.add(_morphA)}return r}raycast(e,r){const s=this.geometry,n=this.material,i=this.matrixWorld;n!==void 0&&(s.boundingSphere===null&&s.computeBoundingSphere(),_sphere$5.copy(s.boundingSphere),_sphere$5.applyMatrix4(i),_ray$3.copy(e.ray).recast(e.near),!(_sphere$5.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$5,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(e.far-e.near)**2))&&(_inverseMatrix$3.copy(i).invert(),_ray$3.copy(e.ray).applyMatrix4(_inverseMatrix$3),!(s.boundingBox!==null&&_ray$3.intersectsBox(s.boundingBox)===!1)&&this._computeIntersections(e,r,_ray$3)))}_computeIntersections(e,r,s){let n;const i=this.geometry,o=this.material,p=i.index,l=i.attributes.position,c=i.attributes.uv,f=i.attributes.uv1,d=i.attributes.normal,g=i.groups,u=i.drawRange;if(p!==null)if(Array.isArray(o))for(let h=0,y=g.length;h<y;h++){const m=g[h],_=o[m.materialIndex],b=Math.max(m.start,u.start),M=Math.min(p.count,Math.min(m.start+m.count,u.start+u.count));for(let S=b,v=M;S<v;S+=3){const E=p.getX(S),T=p.getX(S+1),A=p.getX(S+2);n=checkGeometryIntersection(this,_,e,s,c,f,d,E,T,A),n&&(n.faceIndex=Math.floor(S/3),n.face.materialIndex=m.materialIndex,r.push(n))}}else{const h=Math.max(0,u.start),y=Math.min(p.count,u.start+u.count);for(let m=h,_=y;m<_;m+=3){const b=p.getX(m),M=p.getX(m+1),S=p.getX(m+2);n=checkGeometryIntersection(this,o,e,s,c,f,d,b,M,S),n&&(n.faceIndex=Math.floor(m/3),r.push(n))}}else if(l!==void 0)if(Array.isArray(o))for(let h=0,y=g.length;h<y;h++){const m=g[h],_=o[m.materialIndex],b=Math.max(m.start,u.start),M=Math.min(l.count,Math.min(m.start+m.count,u.start+u.count));for(let S=b,v=M;S<v;S+=3){const E=S,T=S+1,A=S+2;n=checkGeometryIntersection(this,_,e,s,c,f,d,E,T,A),n&&(n.faceIndex=Math.floor(S/3),n.face.materialIndex=m.materialIndex,r.push(n))}}else{const h=Math.max(0,u.start),y=Math.min(l.count,u.start+u.count);for(let m=h,_=y;m<_;m+=3){const b=m,M=m+1,S=m+2;n=checkGeometryIntersection(this,o,e,s,c,f,d,b,M,S),n&&(n.faceIndex=Math.floor(m/3),r.push(n))}}}}function checkIntersection(t,e,r,s,n,i,o,p){let l;if(e.side===BackSide?l=s.intersectTriangle(o,i,n,!0,p):l=s.intersectTriangle(n,i,o,e.side===FrontSide,p),l===null)return null;_intersectionPointWorld.copy(p),_intersectionPointWorld.applyMatrix4(t.matrixWorld);const c=r.ray.origin.distanceTo(_intersectionPointWorld);return c<r.near||c>r.far?null:{distance:c,point:_intersectionPointWorld.clone(),object:t}}function checkGeometryIntersection(t,e,r,s,n,i,o,p,l,c){t.getVertexPosition(p,_vA$1),t.getVertexPosition(l,_vB$1),t.getVertexPosition(c,_vC$1);const f=checkIntersection(t,e,r,s,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(f){n&&(_uvA$1.fromBufferAttribute(n,p),_uvB$1.fromBufferAttribute(n,l),_uvC$1.fromBufferAttribute(n,c),f.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),i&&(_uvA$1.fromBufferAttribute(i,p),_uvB$1.fromBufferAttribute(i,l),_uvC$1.fromBufferAttribute(i,c),f.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),f.uv2=f.uv1),o&&(_normalA.fromBufferAttribute(o,p),_normalB.fromBufferAttribute(o,l),_normalC.fromBufferAttribute(o,c),f.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),f.normal.dot(s.direction)>0&&f.normal.multiplyScalar(-1));const d={a:p,b:l,c,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,d.normal),f.face=d}return f}class BoxGeometry extends BufferGeometry{constructor(e=1,r=1,s=1,n=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:s,widthSegments:n,heightSegments:i,depthSegments:o};const p=this;n=Math.floor(n),i=Math.floor(i),o=Math.floor(o);const l=[],c=[],f=[],d=[];let g=0,u=0;h("z","y","x",-1,-1,s,r,e,o,i,0),h("z","y","x",1,-1,s,r,-e,o,i,1),h("x","z","y",1,1,e,s,r,n,o,2),h("x","z","y",1,-1,e,s,-r,n,o,3),h("x","y","z",1,-1,e,r,s,n,i,4),h("x","y","z",-1,-1,e,r,-s,n,i,5),this.setIndex(l),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2));function h(y,m,_,b,M,S,v,E,T,A,R){const x=S/T,C=v/A,O=S/2,F=v/2,L=E/2,I=T+1,N=A+1;let k=0,U=0;const H=new Vector3;for(let W=0;W<N;W++){const z=W*C-F;for(let j=0;j<I;j++){const ee=j*x-O;H[y]=ee*b,H[m]=z*M,H[_]=L,c.push(H.x,H.y,H.z),H[y]=0,H[m]=0,H[_]=E>0?1:-1,f.push(H.x,H.y,H.z),d.push(j/T),d.push(1-W/A),k+=1}}for(let W=0;W<A;W++)for(let z=0;z<T;z++){const j=g+z+I*W,ee=g+z+I*(W+1),te=g+(z+1)+I*(W+1),ie=g+(z+1)+I*W;l.push(j,ee,ie),l.push(ee,te,ie),U+=6}p.addGroup(u,U,R),u+=U,g+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cloneUniforms(t){const e={};for(const r in t){e[r]={};for(const s in t[r]){const n=t[r][s];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][s]=null):e[r][s]=n.clone():Array.isArray(n)?e[r][s]=n.slice():e[r][s]=n}}return e}function mergeUniforms(t){const e={};for(let r=0;r<t.length;r++){const s=cloneUniforms(t[r]);for(const n in s)e[n]=s[n]}return e}function cloneUniformsGroups(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}function getUnlitUniformColorSpace(t){return t.getRenderTarget()===null?t.outputColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=cloneUniformsGroups(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const n in this.uniforms){const o=this.uniforms[n].value;o&&o.isTexture?r.uniforms[n]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?r.uniforms[n]={type:"c",value:o.getHex()}:o&&o.isVector2?r.uniforms[n]={type:"v2",value:o.toArray()}:o&&o.isVector3?r.uniforms[n]={type:"v3",value:o.toArray()}:o&&o.isVector4?r.uniforms[n]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?r.uniforms[n]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?r.uniforms[n]={type:"m4",value:o.toArray()}:r.uniforms[n]={value:o}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const s={};for(const n in this.extensions)this.extensions[n]===!0&&(s[n]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(e=50,r=1,s=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=n,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=RAD2DEG*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,r,s,n,i,o){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,s=2*r,n=this.aspect*s,i=-.5*n;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;i+=o.offsetX*n/l,r-=o.offsetY*s/c,n*=o.width/l,s*=o.height/c}const p=this.filmOffset;p!==0&&(i+=e*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,r,r-s,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(e,r,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null;const n=new PerspectiveCamera(fov,aspect,e,r);n.layers=this.layers,this.add(n);const i=new PerspectiveCamera(fov,aspect,e,r);i.layers=this.layers,this.add(i);const o=new PerspectiveCamera(fov,aspect,e,r);o.layers=this.layers,this.add(o);const p=new PerspectiveCamera(fov,aspect,e,r);p.layers=this.layers,this.add(p);const l=new PerspectiveCamera(fov,aspect,e,r);l.layers=this.layers,this.add(l);const c=new PerspectiveCamera(fov,aspect,e,r);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[s,n,i,o,p,l]=r;for(const c of r)this.remove(c);if(e===WebGLCoordinateSystem)s.up.set(0,1,0),s.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),p.up.set(0,1,0),p.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===WebGPUCoordinateSystem)s.up.set(0,-1,0),s.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),p.up.set(0,-1,0),p.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of r)this.add(c),c.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const s=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[n,i,o,p,l,c]=this.children,f=e.getRenderTarget(),d=e.xr.enabled;e.xr.enabled=!1;const g=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(r,n),e.setRenderTarget(s,1),e.render(r,i),e.setRenderTarget(s,2),e.render(r,o),e.setRenderTarget(s,3),e.render(r,p),e.setRenderTarget(s,4),e.render(r,l),s.texture.generateMipmaps=g,e.setRenderTarget(s,5),e.render(r,c),e.setRenderTarget(f),e.xr.enabled=d,s.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(e,r,s,n,i,o,p,l,c,f){e=e!==void 0?e:[],r=r!==void 0?r:CubeReflectionMapping,super(e,r,s,n,i,o,p,l,c,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1},n=[s,s,s,s,s,s];r.encoding!==void 0&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:LinearFilter}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new BoxGeometry(5,5,5),i=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:BackSide,blending:NoBlending});i.uniforms.tEquirect.value=r;const o=new Mesh(n,i),p=r.minFilter;return r.minFilter===LinearMipmapLinearFilter&&(r.minFilter=LinearFilter),new CubeCamera(1,10,this).update(e,o),r.minFilter=p,o.geometry.dispose(),o.material.dispose(),this}clear(e,r,s,n){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(r,s,n);e.setRenderTarget(i)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(e=new Vector3(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,s,n){return this.normal.set(e,r,s),this.constant=n,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,s){const n=_vector1.subVectors(s,r).cross(_vector2.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const s=e.delta(_vector1),n=this.normal.dot(s);if(n===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/n;return i<0||i>1?null:r.copy(e.start).addScaledVector(s,i)}intersectsLine(e){const r=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return r<0&&s>0||s<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const s=r||_normalMatrix.getNormalMatrix(e),n=this.coplanarPoint(_vector1).applyMatrix4(e),i=this.normal.applyMatrix3(s).normalize();return this.constant=-n.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$4=new Sphere,_vector$6=new Vector3;class Frustum{constructor(e=new Plane,r=new Plane,s=new Plane,n=new Plane,i=new Plane,o=new Plane){this.planes=[e,r,s,n,i,o]}set(e,r,s,n,i,o){const p=this.planes;return p[0].copy(e),p[1].copy(r),p[2].copy(s),p[3].copy(n),p[4].copy(i),p[5].copy(o),this}copy(e){const r=this.planes;for(let s=0;s<6;s++)r[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e,r=WebGLCoordinateSystem){const s=this.planes,n=e.elements,i=n[0],o=n[1],p=n[2],l=n[3],c=n[4],f=n[5],d=n[6],g=n[7],u=n[8],h=n[9],y=n[10],m=n[11],_=n[12],b=n[13],M=n[14],S=n[15];if(s[0].setComponents(l-i,g-c,m-u,S-_).normalize(),s[1].setComponents(l+i,g+c,m+u,S+_).normalize(),s[2].setComponents(l+o,g+f,m+h,S+b).normalize(),s[3].setComponents(l-o,g-f,m-h,S-b).normalize(),s[4].setComponents(l-p,g-d,m-y,S-M).normalize(),r===WebGLCoordinateSystem)s[5].setComponents(l+p,g+d,m+y,S+M).normalize();else if(r===WebGPUCoordinateSystem)s[5].setComponents(p,d,y,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_sphere$4.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),_sphere$4.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_sphere$4)}intersectsSprite(e){return _sphere$4.center.set(0,0,0),_sphere$4.radius=.7071067811865476,_sphere$4.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$4)}intersectsSphere(e){const r=this.planes,s=e.center,n=-e.radius;for(let i=0;i<6;i++)if(r[i].distanceToPoint(s)<n)return!1;return!0}intersectsBox(e){const r=this.planes;for(let s=0;s<6;s++){const n=r[s];if(_vector$6.x=n.normal.x>0?e.max.x:e.min.x,_vector$6.y=n.normal.y>0?e.max.y:e.min.y,_vector$6.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let s=0;s<6;s++)if(r[s].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let t=null,e=!1,r=null,s=null;function n(i,o){r(i,o),s=t.requestAnimationFrame(n)}return{start:function(){e!==!0&&r!==null&&(s=t.requestAnimationFrame(n),e=!0)},stop:function(){t.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(i){r=i},setContext:function(i){t=i}}}function WebGLAttributes(t,e){const r=e.isWebGL2,s=new WeakMap;function n(c,f){const d=c.array,g=c.usage,u=t.createBuffer();t.bindBuffer(f,u),t.bufferData(f,d,g),c.onUploadCallback();let h;if(d instanceof Float32Array)h=t.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(r)h=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else h=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)h=t.SHORT;else if(d instanceof Uint32Array)h=t.UNSIGNED_INT;else if(d instanceof Int32Array)h=t.INT;else if(d instanceof Int8Array)h=t.BYTE;else if(d instanceof Uint8Array)h=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)h=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:u,type:h,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function i(c,f,d){const g=f.array,u=f.updateRange;t.bindBuffer(d,c),u.count===-1?t.bufferSubData(d,0,g):(r?t.bufferSubData(d,u.offset*g.BYTES_PER_ELEMENT,g,u.offset,u.count):t.bufferSubData(d,u.offset*g.BYTES_PER_ELEMENT,g.subarray(u.offset,u.offset+u.count)),u.count=-1),f.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),s.get(c)}function p(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=s.get(c);f&&(t.deleteBuffer(f.buffer),s.delete(c))}function l(c,f){if(c.isGLBufferAttribute){const g=s.get(c);(!g||g.version<c.version)&&s.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=s.get(c);d===void 0?s.set(c,n(c,f)):d.version<c.version&&(i(d.buffer,c,f),d.version=c.version)}return{get:o,remove:p,update:l}}class PlaneGeometry extends BufferGeometry{constructor(e=1,r=1,s=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:s,heightSegments:n};const i=e/2,o=r/2,p=Math.floor(s),l=Math.floor(n),c=p+1,f=l+1,d=e/p,g=r/l,u=[],h=[],y=[],m=[];for(let _=0;_<f;_++){const b=_*g-o;for(let M=0;M<c;M++){const S=M*d-i;h.push(S,-b,0),y.push(0,0,1),m.push(M/p),m.push(1-_/l)}}for(let _=0;_<l;_++)for(let b=0;b<p;b++){const M=b+c*_,S=b+c*(_+1),v=b+1+c*(_+1),E=b+1+c*_;u.push(M,S,E),u.push(S,v,E)}this.setIndex(u),this.setAttribute("position",new Float32BufferAttribute(h,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(t,e,r,s,n,i,o){const p=new Color(0);let l=i===!0?0:1,c,f,d=null,g=0,u=null;function h(m,_){let b=!1,M=_.isScene===!0?_.background:null;switch(M&&M.isTexture&&(M=(_.backgroundBlurriness>0?r:e).get(M)),M===null?y(p,l):M&&M.isColor&&(y(M,1),b=!0),t.xr.getEnvironmentBlendMode()){case"opaque":b=!0;break;case"additive":s.buffers.color.setClear(0,0,0,1,o),b=!0;break;case"alpha-blend":s.buffers.color.setClear(0,0,0,0,o),b=!0;break}(t.autoClear||b)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),M&&(M.isCubeTexture||M.mapping===CubeUVReflectionMapping)?(f===void 0&&(f=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(E,T,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(f)),f.material.uniforms.envMap.value=M,f.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,f.material.toneMapped=M.colorSpace!==SRGBColorSpace,(d!==M||g!==M.version||u!==t.toneMapping)&&(f.material.needsUpdate=!0,d=M,g=M.version,u=t.toneMapping),f.layers.enableAll(),m.unshift(f,f.geometry,f.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=M.colorSpace!==SRGBColorSpace,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||g!==M.version||u!==t.toneMapping)&&(c.material.needsUpdate=!0,d=M,g=M.version,u=t.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}function y(m,_){m.getRGB(_rgb,getUnlitUniformColorSpace(t)),s.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,_,o)}return{getClearColor:function(){return p},setClearColor:function(m,_=1){p.set(m),l=_,y(p,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,y(p,l)},render:h}}function WebGLBindingStates(t,e,r,s){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i=s.isWebGL2?null:e.get("OES_vertex_array_object"),o=s.isWebGL2||i!==null,p={},l=m(null);let c=l,f=!1;function d(L,I,N,k,U){let H=!1;if(o){const W=y(k,N,I);c!==W&&(c=W,u(c.object)),H=_(L,k,N,U),H&&b(L,k,N,U)}else{const W=I.wireframe===!0;(c.geometry!==k.id||c.program!==N.id||c.wireframe!==W)&&(c.geometry=k.id,c.program=N.id,c.wireframe=W,H=!0)}U!==null&&r.update(U,t.ELEMENT_ARRAY_BUFFER),(H||f)&&(f=!1,A(L,I,N,k),U!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.get(U).buffer))}function g(){return s.isWebGL2?t.createVertexArray():i.createVertexArrayOES()}function u(L){return s.isWebGL2?t.bindVertexArray(L):i.bindVertexArrayOES(L)}function h(L){return s.isWebGL2?t.deleteVertexArray(L):i.deleteVertexArrayOES(L)}function y(L,I,N){const k=N.wireframe===!0;let U=p[L.id];U===void 0&&(U={},p[L.id]=U);let H=U[I.id];H===void 0&&(H={},U[I.id]=H);let W=H[k];return W===void 0&&(W=m(g()),H[k]=W),W}function m(L){const I=[],N=[],k=[];for(let U=0;U<n;U++)I[U]=0,N[U]=0,k[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:N,attributeDivisors:k,object:L,attributes:{},index:null}}function _(L,I,N,k){const U=c.attributes,H=I.attributes;let W=0;const z=N.getAttributes();for(const j in z)if(z[j].location>=0){const te=U[j];let ie=H[j];if(ie===void 0&&(j==="instanceMatrix"&&L.instanceMatrix&&(ie=L.instanceMatrix),j==="instanceColor"&&L.instanceColor&&(ie=L.instanceColor)),te===void 0||te.attribute!==ie||ie&&te.data!==ie.data)return!0;W++}return c.attributesNum!==W||c.index!==k}function b(L,I,N,k){const U={},H=I.attributes;let W=0;const z=N.getAttributes();for(const j in z)if(z[j].location>=0){let te=H[j];te===void 0&&(j==="instanceMatrix"&&L.instanceMatrix&&(te=L.instanceMatrix),j==="instanceColor"&&L.instanceColor&&(te=L.instanceColor));const ie={};ie.attribute=te,te&&te.data&&(ie.data=te.data),U[j]=ie,W++}c.attributes=U,c.attributesNum=W,c.index=k}function M(){const L=c.newAttributes;for(let I=0,N=L.length;I<N;I++)L[I]=0}function S(L){v(L,0)}function v(L,I){const N=c.newAttributes,k=c.enabledAttributes,U=c.attributeDivisors;N[L]=1,k[L]===0&&(t.enableVertexAttribArray(L),k[L]=1),U[L]!==I&&((s.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,I),U[L]=I)}function E(){const L=c.newAttributes,I=c.enabledAttributes;for(let N=0,k=I.length;N<k;N++)I[N]!==L[N]&&(t.disableVertexAttribArray(N),I[N]=0)}function T(L,I,N,k,U,H,W){W===!0?t.vertexAttribIPointer(L,I,N,U,H):t.vertexAttribPointer(L,I,N,k,U,H)}function A(L,I,N,k){if(s.isWebGL2===!1&&(L.isInstancedMesh||k.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;M();const U=k.attributes,H=N.getAttributes(),W=I.defaultAttributeValues;for(const z in H){const j=H[z];if(j.location>=0){let ee=U[z];if(ee===void 0&&(z==="instanceMatrix"&&L.instanceMatrix&&(ee=L.instanceMatrix),z==="instanceColor"&&L.instanceColor&&(ee=L.instanceColor)),ee!==void 0){const te=ee.normalized,ie=ee.itemSize,le=r.get(ee);if(le===void 0)continue;const me=le.buffer,fe=le.type,Oe=le.bytesPerElement,Ue=s.isWebGL2===!0&&(fe===t.INT||fe===t.UNSIGNED_INT||ee.gpuType===IntType);if(ee.isInterleavedBufferAttribute){const Ee=ee.data,q=Ee.stride,je=ee.offset;if(Ee.isInstancedInterleavedBuffer){for(let _e=0;_e<j.locationSize;_e++)v(j.location+_e,Ee.meshPerAttribute);L.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let _e=0;_e<j.locationSize;_e++)S(j.location+_e);t.bindBuffer(t.ARRAY_BUFFER,me);for(let _e=0;_e<j.locationSize;_e++)T(j.location+_e,ie/j.locationSize,fe,te,q*Oe,(je+ie/j.locationSize*_e)*Oe,Ue)}else{if(ee.isInstancedBufferAttribute){for(let Ee=0;Ee<j.locationSize;Ee++)v(j.location+Ee,ee.meshPerAttribute);L.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Ee=0;Ee<j.locationSize;Ee++)S(j.location+Ee);t.bindBuffer(t.ARRAY_BUFFER,me);for(let Ee=0;Ee<j.locationSize;Ee++)T(j.location+Ee,ie/j.locationSize,fe,te,ie*Oe,ie/j.locationSize*Ee*Oe,Ue)}}else if(W!==void 0){const te=W[z];if(te!==void 0)switch(te.length){case 2:t.vertexAttrib2fv(j.location,te);break;case 3:t.vertexAttrib3fv(j.location,te);break;case 4:t.vertexAttrib4fv(j.location,te);break;default:t.vertexAttrib1fv(j.location,te)}}}}E()}function R(){O();for(const L in p){const I=p[L];for(const N in I){const k=I[N];for(const U in k)h(k[U].object),delete k[U];delete I[N]}delete p[L]}}function x(L){if(p[L.id]===void 0)return;const I=p[L.id];for(const N in I){const k=I[N];for(const U in k)h(k[U].object),delete k[U];delete I[N]}delete p[L.id]}function C(L){for(const I in p){const N=p[I];if(N[L.id]===void 0)continue;const k=N[L.id];for(const U in k)h(k[U].object),delete k[U];delete N[L.id]}}function O(){F(),f=!0,c!==l&&(c=l,u(c.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:O,resetDefaultState:F,dispose:R,releaseStatesOfGeometry:x,releaseStatesOfProgram:C,initAttributes:M,enableAttribute:S,disableUnusedAttributes:E}}function WebGLBufferRenderer(t,e,r,s){const n=s.isWebGL2;let i;function o(c){i=c}function p(c,f){t.drawArrays(i,c,f),r.update(f,i,1)}function l(c,f,d){if(d===0)return;let g,u;if(n)g=t,u="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[u](i,c,f,d),r.update(f,i,d)}this.setMode=o,this.render=p,this.renderInstances=l}function WebGLCapabilities(t,e,r){let s;function n(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");s=t.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function i(T){if(T==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let p=r.precision!==void 0?r.precision:"highp";const l=i(p);l!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",l,"instead."),p=l);const c=o||e.has("WEBGL_draw_buffers"),f=r.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),h=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),b=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),M=g>0,S=o||e.has("OES_texture_float"),v=M&&S,E=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:i,precision:p,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:g,maxTextureSize:u,maxCubemapSize:h,maxAttributes:y,maxVertexUniforms:m,maxVaryings:_,maxFragmentUniforms:b,vertexTextures:M,floatFragmentTextures:S,floatVertexTextures:v,maxSamples:E}}function WebGLClipping(t){const e=this;let r=null,s=0,n=!1,i=!1;const o=new Plane,p=new Matrix3,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,g){const u=d.length!==0||g||s!==0||n;return n=g,s=d.length,u},this.beginShadows=function(){i=!0,f(null)},this.endShadows=function(){i=!1},this.setGlobalState=function(d,g){r=f(d,g,0)},this.setState=function(d,g,u){const h=d.clippingPlanes,y=d.clipIntersection,m=d.clipShadows,_=t.get(d);if(!n||h===null||h.length===0||i&&!m)i?f(null):c();else{const b=i?0:s,M=b*4;let S=_.clippingState||null;l.value=S,S=f(h,g,M,u);for(let v=0;v!==M;++v)S[v]=r[v];_.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==r&&(l.value=r,l.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}function f(d,g,u,h){const y=d!==null?d.length:0;let m=null;if(y!==0){if(m=l.value,h!==!0||m===null){const _=u+y*4,b=g.matrixWorldInverse;p.getNormalMatrix(b),(m===null||m.length<_)&&(m=new Float32Array(_));for(let M=0,S=u;M!==y;++M,S+=4)o.copy(d[M]).applyMatrix4(b,p),o.normal.toArray(m,S),m[S+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,m}}function WebGLCubeMaps(t){let e=new WeakMap;function r(o,p){return p===EquirectangularReflectionMapping?o.mapping=CubeReflectionMapping:p===EquirectangularRefractionMapping&&(o.mapping=CubeRefractionMapping),o}function s(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const p=o.mapping;if(p===EquirectangularReflectionMapping||p===EquirectangularRefractionMapping)if(e.has(o)){const l=e.get(o).texture;return r(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new WebGLCubeRenderTarget(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",n),r(c.texture,o.mapping)}else return null}}return o}function n(o){const p=o.target;p.removeEventListener("dispose",n);const l=e.get(p);l!==void 0&&(e.delete(p),l.dispose())}function i(){e=new WeakMap}return{get:s,dispose:i}}class OrthographicCamera extends Camera{constructor(e=-1,r=1,s=1,n=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=s,this.bottom=n,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,s,n,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let i=s-e,o=s+e,p=n+r,l=n-r;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=c*this.view.offsetX,o=i+c*this.view.width,p-=f*this.view.offsetY,l=p-f*this.view.height}this.projectionMatrix.makeOrthographic(i,o,p,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,s=.1,n=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,s,n,i),r>0&&this._blur(i,0,0,r),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_oldTarget),e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_oldTarget=this._renderer.getRenderTarget();const s=r||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,s={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},n=_createRenderTarget(e,r,s);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,r,s);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(i)),this._blurMaterial=_getBlurShader(i,e,r)}return n}_compileMaterial(e){const r=new Mesh(this._lodPlanes[0],e);this._renderer.compile(r,_flatCamera)}_sceneToCubeUV(e,r,s,n){const p=new PerspectiveCamera(90,1,r,s),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,g=f.toneMapping;f.getClearColor(_clearColor),f.toneMapping=NoToneMapping,f.autoClear=!1;const u=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),h=new Mesh(new BoxGeometry,u);let y=!1;const m=e.background;m?m.isColor&&(u.color.copy(m),e.background=null,y=!0):(u.color.copy(_clearColor),y=!0);for(let _=0;_<6;_++){const b=_%3;b===0?(p.up.set(0,l[_],0),p.lookAt(c[_],0,0)):b===1?(p.up.set(0,0,l[_]),p.lookAt(0,c[_],0)):(p.up.set(0,l[_],0),p.lookAt(0,0,c[_]));const M=this._cubeSize;_setViewport(n,b*M,_>2?M:0,M,M),f.setRenderTarget(n),y&&f.render(h,p),f.render(e,p)}h.geometry.dispose(),h.material.dispose(),f.toneMapping=g,f.autoClear=d,e.background=m}_textureToCubeUV(e,r){const s=this._renderer,n=e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const i=n?this._cubemapMaterial:this._equirectMaterial,o=new Mesh(this._lodPlanes[0],i),p=i.uniforms;p.envMap.value=e;const l=this._cubeSize;_setViewport(r,0,0,3*l,2*l),s.setRenderTarget(r),s.render(o,_flatCamera)}_applyPMREM(e){const r=this._renderer,s=r.autoClear;r.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const i=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=_axisDirections[(n-1)%_axisDirections.length];this._blur(e,n-1,n,i,o)}r.autoClear=s}_blur(e,r,s,n,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,r,s,n,"latitudinal",i),this._halfBlur(o,e,s,s,n,"longitudinal",i)}_halfBlur(e,r,s,n,i,o,p){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Mesh(this._lodPlanes[n],c),g=c.uniforms,u=this._sizeLods[s]-1,h=isFinite(i)?Math.PI/(2*u):2*Math.PI/(2*MAX_SAMPLES-1),y=i/h,m=isFinite(i)?1+Math.floor(f*y):MAX_SAMPLES;m>MAX_SAMPLES&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${MAX_SAMPLES}`);const _=[];let b=0;for(let T=0;T<MAX_SAMPLES;++T){const A=T/y,R=Math.exp(-A*A/2);_.push(R),T===0?b+=R:T<m&&(b+=2*R)}for(let T=0;T<_.length;T++)_[T]=_[T]/b;g.envMap.value=e.texture,g.samples.value=m,g.weights.value=_,g.latitudinal.value=o==="latitudinal",p&&(g.poleAxis.value=p);const{_lodMax:M}=this;g.dTheta.value=h,g.mipInt.value=M-s;const S=this._sizeLods[n],v=3*S*(n>M-LOD_MIN?n-M+LOD_MIN:0),E=4*(this._cubeSize-S);_setViewport(r,v,E,3*S,2*S),l.setRenderTarget(r),l.render(d,_flatCamera)}}function _createPlanes(t){const e=[],r=[],s=[];let n=t;const i=t-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let o=0;o<i;o++){const p=Math.pow(2,n);r.push(p);let l=1/p;o>t-LOD_MIN?l=EXTRA_LOD_SIGMA[o-t+LOD_MIN-1]:o===0&&(l=0),s.push(l);const c=1/(p-2),f=-c,d=1+c,g=[f,f,d,f,d,d,f,f,d,d,f,d],u=6,h=6,y=3,m=2,_=1,b=new Float32Array(y*h*u),M=new Float32Array(m*h*u),S=new Float32Array(_*h*u);for(let E=0;E<u;E++){const T=E%3*2/3-1,A=E>2?0:-1,R=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];b.set(R,y*h*E),M.set(g,m*h*E);const x=[E,E,E,E,E,E];S.set(x,_*h*E)}const v=new BufferGeometry;v.setAttribute("position",new BufferAttribute(b,y)),v.setAttribute("uv",new BufferAttribute(M,m)),v.setAttribute("faceIndex",new BufferAttribute(S,_)),e.push(v),n>LOD_MIN&&n--}return{lodPlanes:e,sizeLods:r,sigmas:s}}function _createRenderTarget(t,e,r){const s=new WebGLRenderTarget(t,e,r);return s.texture.mapping=CubeUVReflectionMapping,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function _setViewport(t,e,r,s,n){t.viewport.set(e,r,s,n),t.scissor.set(e,r,s,n)}function _getBlurShader(t,e,r){const s=new Float32Array(MAX_SAMPLES),n=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(t){let e=new WeakMap,r=null;function s(p){if(p&&p.isTexture){const l=p.mapping,c=l===EquirectangularReflectionMapping||l===EquirectangularRefractionMapping,f=l===CubeReflectionMapping||l===CubeRefractionMapping;if(c||f)if(p.isRenderTargetTexture&&p.needsPMREMUpdate===!0){p.needsPMREMUpdate=!1;let d=e.get(p);return r===null&&(r=new PMREMGenerator(t)),d=c?r.fromEquirectangular(p,d):r.fromCubemap(p,d),e.set(p,d),d.texture}else{if(e.has(p))return e.get(p).texture;{const d=p.image;if(c&&d&&d.height>0||f&&d&&n(d)){r===null&&(r=new PMREMGenerator(t));const g=c?r.fromEquirectangular(p):r.fromCubemap(p);return e.set(p,g),p.addEventListener("dispose",i),g.texture}else return null}}}return p}function n(p){let l=0;const c=6;for(let f=0;f<c;f++)p[f]!==void 0&&l++;return l===c}function i(p){const l=p.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:s,dispose:o}}function WebGLExtensions(t){const e={};function r(s){if(e[s]!==void 0)return e[s];let n;switch(s){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(s)}return e[s]=n,n}return{has:function(s){return r(s)!==null},init:function(s){s.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(s){const n=r(s);return n===null&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),n}}}function WebGLGeometries(t,e,r,s){const n={},i=new WeakMap;function o(d){const g=d.target;g.index!==null&&e.remove(g.index);for(const h in g.attributes)e.remove(g.attributes[h]);for(const h in g.morphAttributes){const y=g.morphAttributes[h];for(let m=0,_=y.length;m<_;m++)e.remove(y[m])}g.removeEventListener("dispose",o),delete n[g.id];const u=i.get(g);u&&(e.remove(u),i.delete(g)),s.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,r.memory.geometries--}function p(d,g){return n[g.id]===!0||(g.addEventListener("dispose",o),n[g.id]=!0,r.memory.geometries++),g}function l(d){const g=d.attributes;for(const h in g)e.update(g[h],t.ARRAY_BUFFER);const u=d.morphAttributes;for(const h in u){const y=u[h];for(let m=0,_=y.length;m<_;m++)e.update(y[m],t.ARRAY_BUFFER)}}function c(d){const g=[],u=d.index,h=d.attributes.position;let y=0;if(u!==null){const b=u.array;y=u.version;for(let M=0,S=b.length;M<S;M+=3){const v=b[M+0],E=b[M+1],T=b[M+2];g.push(v,E,E,T,T,v)}}else if(h!==void 0){const b=h.array;y=h.version;for(let M=0,S=b.length/3-1;M<S;M+=3){const v=M+0,E=M+1,T=M+2;g.push(v,E,E,T,T,v)}}else return;const m=new(arrayNeedsUint32(g)?Uint32BufferAttribute:Uint16BufferAttribute)(g,1);m.version=y;const _=i.get(d);_&&e.remove(_),i.set(d,m)}function f(d){const g=i.get(d);if(g){const u=d.index;u!==null&&g.version<u.version&&c(d)}else c(d);return i.get(d)}return{get:p,update:l,getWireframeAttribute:f}}function WebGLIndexedBufferRenderer(t,e,r,s){const n=s.isWebGL2;let i;function o(g){i=g}let p,l;function c(g){p=g.type,l=g.bytesPerElement}function f(g,u){t.drawElements(i,u,p,g*l),r.update(u,i,1)}function d(g,u,h){if(h===0)return;let y,m;if(n)y=t,m="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[m](i,u,p,g*l,h),r.update(u,i,h)}this.setMode=o,this.setIndex=c,this.render=f,this.renderInstances=d}function WebGLInfo(t){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function s(i,o,p){switch(r.calls++,o){case t.TRIANGLES:r.triangles+=p*(i/3);break;case t.LINES:r.lines+=p*(i/2);break;case t.LINE_STRIP:r.lines+=p*(i-1);break;case t.LINE_LOOP:r.lines+=p*i;break;case t.POINTS:r.points+=p*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:n,update:s}}function numericalSort(t,e){return t[0]-e[0]}function absNumericalSort(t,e){return Math.abs(e[1])-Math.abs(t[1])}function WebGLMorphtargets(t,e,r){const s={},n=new Float32Array(8),i=new WeakMap,o=new Vector4,p=[];for(let c=0;c<8;c++)p[c]=[c,0];function l(c,f,d){const g=c.morphTargetInfluences;if(e.isWebGL2===!0){const h=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,y=h!==void 0?h.length:0;let m=i.get(f);if(m===void 0||m.count!==y){let I=function(){F.dispose(),i.delete(f),f.removeEventListener("dispose",I)};var u=I;m!==void 0&&m.texture.dispose();const M=f.morphAttributes.position!==void 0,S=f.morphAttributes.normal!==void 0,v=f.morphAttributes.color!==void 0,E=f.morphAttributes.position||[],T=f.morphAttributes.normal||[],A=f.morphAttributes.color||[];let R=0;M===!0&&(R=1),S===!0&&(R=2),v===!0&&(R=3);let x=f.attributes.position.count*R,C=1;x>e.maxTextureSize&&(C=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const O=new Float32Array(x*C*4*y),F=new DataArrayTexture(O,x,C,y);F.type=FloatType,F.needsUpdate=!0;const L=R*4;for(let N=0;N<y;N++){const k=E[N],U=T[N],H=A[N],W=x*C*4*N;for(let z=0;z<k.count;z++){const j=z*L;M===!0&&(o.fromBufferAttribute(k,z),O[W+j+0]=o.x,O[W+j+1]=o.y,O[W+j+2]=o.z,O[W+j+3]=0),S===!0&&(o.fromBufferAttribute(U,z),O[W+j+4]=o.x,O[W+j+5]=o.y,O[W+j+6]=o.z,O[W+j+7]=0),v===!0&&(o.fromBufferAttribute(H,z),O[W+j+8]=o.x,O[W+j+9]=o.y,O[W+j+10]=o.z,O[W+j+11]=H.itemSize===4?o.w:1)}}m={count:y,texture:F,size:new Vector2(x,C)},i.set(f,m),f.addEventListener("dispose",I)}let _=0;for(let M=0;M<g.length;M++)_+=g[M];const b=f.morphTargetsRelative?1:1-_;d.getUniforms().setValue(t,"morphTargetBaseInfluence",b),d.getUniforms().setValue(t,"morphTargetInfluences",g),d.getUniforms().setValue(t,"morphTargetsTexture",m.texture,r),d.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const h=g===void 0?0:g.length;let y=s[f.id];if(y===void 0||y.length!==h){y=[];for(let S=0;S<h;S++)y[S]=[S,0];s[f.id]=y}for(let S=0;S<h;S++){const v=y[S];v[0]=S,v[1]=g[S]}y.sort(absNumericalSort);for(let S=0;S<8;S++)S<h&&y[S][1]?(p[S][0]=y[S][0],p[S][1]=y[S][1]):(p[S][0]=Number.MAX_SAFE_INTEGER,p[S][1]=0);p.sort(numericalSort);const m=f.morphAttributes.position,_=f.morphAttributes.normal;let b=0;for(let S=0;S<8;S++){const v=p[S],E=v[0],T=v[1];E!==Number.MAX_SAFE_INTEGER&&T?(m&&f.getAttribute("morphTarget"+S)!==m[E]&&f.setAttribute("morphTarget"+S,m[E]),_&&f.getAttribute("morphNormal"+S)!==_[E]&&f.setAttribute("morphNormal"+S,_[E]),n[S]=T,b+=T):(m&&f.hasAttribute("morphTarget"+S)===!0&&f.deleteAttribute("morphTarget"+S),_&&f.hasAttribute("morphNormal"+S)===!0&&f.deleteAttribute("morphNormal"+S),n[S]=0)}const M=f.morphTargetsRelative?1:1-b;d.getUniforms().setValue(t,"morphTargetBaseInfluence",M),d.getUniforms().setValue(t,"morphTargetInfluences",n)}}return{update:l}}function WebGLObjects(t,e,r,s){let n=new WeakMap;function i(l){const c=s.render.frame,f=l.geometry,d=e.get(l,f);if(n.get(d)!==c&&(e.update(d),n.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",p)===!1&&l.addEventListener("dispose",p),n.get(l)!==c&&(r.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&r.update(l.instanceColor,t.ARRAY_BUFFER),n.set(l,c))),l.isSkinnedMesh){const g=l.skeleton;n.get(g)!==c&&(g.update(),n.set(g,c))}return d}function o(){n=new WeakMap}function p(l){const c=l.target;c.removeEventListener("dispose",p),r.remove(c.instanceMatrix),c.instanceColor!==null&&r.remove(c.instanceColor)}return{update:i,dispose:o}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(t,e,r){const s=t[0];if(s<=0||s>0)return t;const n=e*r;let i=arrayCacheF32[n];if(i===void 0&&(i=new Float32Array(n),arrayCacheF32[n]=i),e!==0){s.toArray(i,0);for(let o=1,p=0;o!==e;++o)p+=r,t[o].toArray(i,p)}return i}function arraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0,s=t.length;r<s;r++)if(t[r]!==e[r])return!1;return!0}function copyArray(t,e){for(let r=0,s=e.length;r<s;r++)t[r]=e[r]}function allocTexUnits(t,e){let r=arrayCacheI32[e];r===void 0&&(r=new Int32Array(e),arrayCacheI32[e]=r);for(let s=0;s!==e;++s)r[s]=t.allocateTextureUnit();return r}function setValueV1f(t,e){const r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function setValueV2f(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(arraysEqual(r,e))return;t.uniform2fv(this.addr,e),copyArray(r,e)}}function setValueV3f(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(arraysEqual(r,e))return;t.uniform3fv(this.addr,e),copyArray(r,e)}}function setValueV4f(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(arraysEqual(r,e))return;t.uniform4fv(this.addr,e),copyArray(r,e)}}function setValueM2(t,e){const r=this.cache,s=e.elements;if(s===void 0){if(arraysEqual(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),copyArray(r,e)}else{if(arraysEqual(r,s))return;mat2array.set(s),t.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(r,s)}}function setValueM3(t,e){const r=this.cache,s=e.elements;if(s===void 0){if(arraysEqual(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),copyArray(r,e)}else{if(arraysEqual(r,s))return;mat3array.set(s),t.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(r,s)}}function setValueM4(t,e){const r=this.cache,s=e.elements;if(s===void 0){if(arraysEqual(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),copyArray(r,e)}else{if(arraysEqual(r,s))return;mat4array.set(s),t.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(r,s)}}function setValueV1i(t,e){const r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function setValueV2i(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(arraysEqual(r,e))return;t.uniform2iv(this.addr,e),copyArray(r,e)}}function setValueV3i(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(arraysEqual(r,e))return;t.uniform3iv(this.addr,e),copyArray(r,e)}}function setValueV4i(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(arraysEqual(r,e))return;t.uniform4iv(this.addr,e),copyArray(r,e)}}function setValueV1ui(t,e){const r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function setValueV2ui(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(arraysEqual(r,e))return;t.uniform2uiv(this.addr,e),copyArray(r,e)}}function setValueV3ui(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(arraysEqual(r,e))return;t.uniform3uiv(this.addr,e),copyArray(r,e)}}function setValueV4ui(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(arraysEqual(r,e))return;t.uniform4uiv(this.addr,e),copyArray(r,e)}}function setValueT1(t,e,r){const s=this.cache,n=r.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),r.setTexture2D(e||emptyTexture,n)}function setValueT3D1(t,e,r){const s=this.cache,n=r.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),r.setTexture3D(e||empty3dTexture,n)}function setValueT6(t,e,r){const s=this.cache,n=r.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),r.setTextureCube(e||emptyCubeTexture,n)}function setValueT2DArray1(t,e,r){const s=this.cache,n=r.allocateTextureUnit();s[0]!==n&&(t.uniform1i(this.addr,n),s[0]=n),r.setTexture2DArray(e||emptyArrayTexture,n)}function getSingularSetter(t){switch(t){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(t,e){t.uniform1fv(this.addr,e)}function setValueV2fArray(t,e){const r=flatten(e,this.size,2);t.uniform2fv(this.addr,r)}function setValueV3fArray(t,e){const r=flatten(e,this.size,3);t.uniform3fv(this.addr,r)}function setValueV4fArray(t,e){const r=flatten(e,this.size,4);t.uniform4fv(this.addr,r)}function setValueM2Array(t,e){const r=flatten(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function setValueM3Array(t,e){const r=flatten(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function setValueM4Array(t,e){const r=flatten(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function setValueV1iArray(t,e){t.uniform1iv(this.addr,e)}function setValueV2iArray(t,e){t.uniform2iv(this.addr,e)}function setValueV3iArray(t,e){t.uniform3iv(this.addr,e)}function setValueV4iArray(t,e){t.uniform4iv(this.addr,e)}function setValueV1uiArray(t,e){t.uniform1uiv(this.addr,e)}function setValueV2uiArray(t,e){t.uniform2uiv(this.addr,e)}function setValueV3uiArray(t,e){t.uniform3uiv(this.addr,e)}function setValueV4uiArray(t,e){t.uniform4uiv(this.addr,e)}function setValueT1Array(t,e,r){const s=this.cache,n=e.length,i=allocTexUnits(r,n);arraysEqual(s,i)||(t.uniform1iv(this.addr,i),copyArray(s,i));for(let o=0;o!==n;++o)r.setTexture2D(e[o]||emptyTexture,i[o])}function setValueT3DArray(t,e,r){const s=this.cache,n=e.length,i=allocTexUnits(r,n);arraysEqual(s,i)||(t.uniform1iv(this.addr,i),copyArray(s,i));for(let o=0;o!==n;++o)r.setTexture3D(e[o]||empty3dTexture,i[o])}function setValueT6Array(t,e,r){const s=this.cache,n=e.length,i=allocTexUnits(r,n);arraysEqual(s,i)||(t.uniform1iv(this.addr,i),copyArray(s,i));for(let o=0;o!==n;++o)r.setTextureCube(e[o]||emptyCubeTexture,i[o])}function setValueT2DArrayArray(t,e,r){const s=this.cache,n=e.length,i=allocTexUnits(r,n);arraysEqual(s,i)||(t.uniform1iv(this.addr,i),copyArray(s,i));for(let o=0;o!==n;++o)r.setTexture2DArray(e[o]||emptyArrayTexture,i[o])}function getPureArraySetter(t){switch(t){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(e,r,s){this.id=e,this.addr=s,this.cache=[],this.setValue=getSingularSetter(r.type)}}class PureArrayUniform{constructor(e,r,s){this.id=e,this.addr=s,this.cache=[],this.size=r.size,this.setValue=getPureArraySetter(r.type)}}class StructuredUniform{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,s){const n=this.seq;for(let i=0,o=n.length;i!==o;++i){const p=n[i];p.setValue(e,r[p.id],s)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(t,e){t.seq.push(e),t.map[e.id]=e}function parseUniform(t,e,r){const s=t.name,n=s.length;for(RePathPart.lastIndex=0;;){const i=RePathPart.exec(s),o=RePathPart.lastIndex;let p=i[1];const l=i[2]==="]",c=i[3];if(l&&(p=p|0),c===void 0||c==="["&&o+2===n){addUniform(r,c===void 0?new SingleUniform(p,t,e):new PureArrayUniform(p,t,e));break}else{let d=r.map[p];d===void 0&&(d=new StructuredUniform(p),addUniform(r,d)),r=d}}}class WebGLUniforms{constructor(e,r){this.seq=[],this.map={};const s=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let n=0;n<s;++n){const i=e.getActiveUniform(r,n),o=e.getUniformLocation(r,i.name);parseUniform(i,o,this)}}setValue(e,r,s,n){const i=this.map[r];i!==void 0&&i.setValue(e,s,n)}setOptional(e,r,s){const n=r[s];n!==void 0&&this.setValue(e,s,n)}static upload(e,r,s,n){for(let i=0,o=r.length;i!==o;++i){const p=r[i],l=s[p.id];l.needsUpdate!==!1&&p.setValue(e,l.value,n)}}static seqWithValue(e,r){const s=[];for(let n=0,i=e.length;n!==i;++n){const o=e[n];o.id in r&&s.push(o)}return s}}function WebGLShader(t,e,r){const s=t.createShader(e);return t.shaderSource(s,r),t.compileShader(s),s}let programIdCount=0;function handleSource(t,e){const r=t.split(`
`),s=[],n=Math.max(e-6,0),i=Math.min(e+6,r.length);for(let o=n;o<i;o++){const p=o+1;s.push(`${p===e?">":" "} ${p}: ${r[o]}`)}return s.join(`
`)}function getEncodingComponents(t){switch(t){case LinearSRGBColorSpace:return["Linear","( value )"];case SRGBColorSpace:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function getShaderErrors(t,e,r){const s=t.getShaderParameter(e,t.COMPILE_STATUS),n=t.getShaderInfoLog(e).trim();if(s&&n==="")return"";const i=/ERROR: 0:(\d+)/.exec(n);if(i){const o=parseInt(i[1]);return r.toUpperCase()+`

`+n+`

`+handleSource(t.getShaderSource(e),o)}else return n}function getTexelEncodingFunction(t,e){const r=getEncodingComponents(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function getToneMappingFunction(t,e){let r;switch(e){case LinearToneMapping:r="Linear";break;case ReinhardToneMapping:r="Reinhard";break;case CineonToneMapping:r="OptimizedCineon";break;case ACESFilmicToneMapping:r="ACESFilmic";break;case CustomToneMapping:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function generateExtensions(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(t){const e=[];for(const r in t){const s=t[r];s!==!1&&e.push("#define "+r+" "+s)}return e.join(`
`)}function fetchAttributeLocations(t,e){const r={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const i=t.getActiveAttrib(e,n),o=i.name;let p=1;i.type===t.FLOAT_MAT2&&(p=2),i.type===t.FLOAT_MAT3&&(p=3),i.type===t.FLOAT_MAT4&&(p=4),r[o]={type:i.type,location:t.getAttribLocation(e,o),locationSize:p}}return r}function filterEmptyLine(t){return t!==""}function replaceLightNums(t,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function replaceClippingPlaneNums(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(t){return t.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function includeReplacer(t,e){let r=ShaderChunk[e];if(r===void 0){const s=shaderChunkMap.get(e);if(s!==void 0)r=ShaderChunk[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,s);else throw new Error("Can not resolve #include <"+e+">")}return resolveIncludes(r)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(t){return t.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(t,e,r,s){let n="";for(let i=parseInt(e);i<parseInt(r);i++)n+=s.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return n}function generatePrecision(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function generateShadowMapTypeDefine(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===PCFShadowMap?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===PCFSoftShadowMap?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===VSMShadowMap&&(e="SHADOWMAP_TYPE_VSM"),e}function generateEnvMapTypeDefine(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:e="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:e="ENVMAP_TYPE_CUBE_UV";break}return e}function generateEnvMapModeDefine(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case CubeRefractionMapping:e="ENVMAP_MODE_REFRACTION";break}return e}function generateEnvMapBlendingDefine(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case MultiplyOperation:e="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:e="ENVMAP_BLENDING_MIX";break;case AddOperation:e="ENVMAP_BLENDING_ADD";break}return e}function generateCubeUVSize(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:s,maxMip:r}}function WebGLProgram(t,e,r,s){const n=t.getContext(),i=r.defines;let o=r.vertexShader,p=r.fragmentShader;const l=generateShadowMapTypeDefine(r),c=generateEnvMapTypeDefine(r),f=generateEnvMapModeDefine(r),d=generateEnvMapBlendingDefine(r),g=generateCubeUVSize(r),u=r.isWebGL2?"":generateExtensions(r),h=generateDefines(i),y=n.createProgram();let m,_,b=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,h].filter(filterEmptyLine).join(`
`),m.length>0&&(m+=`
`),_=[u,"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,h].filter(filterEmptyLine).join(`
`),_.length>0&&(_+=`
`)):(m=[generatePrecision(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,h,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.useLegacyLights?"#define LEGACY_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),_=[u,generatePrecision(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,h,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+f:"",r.envMap?"#define "+d:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.useLegacyLights?"#define LEGACY_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",r.outputColorSpace),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),o=resolveIncludes(o),o=replaceLightNums(o,r),o=replaceClippingPlaneNums(o,r),p=resolveIncludes(p),p=replaceLightNums(p,r),p=replaceClippingPlaneNums(p,r),o=unrollLoops(o),p=unrollLoops(p),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,_=["#define varying in",r.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const M=b+m+o,S=b+_+p,v=WebGLShader(n,n.VERTEX_SHADER,M),E=WebGLShader(n,n.FRAGMENT_SHADER,S);if(n.attachShader(y,v),n.attachShader(y,E),r.index0AttributeName!==void 0?n.bindAttribLocation(y,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(y,0,"position"),n.linkProgram(y),t.debug.checkShaderErrors){const R=n.getProgramInfoLog(y).trim(),x=n.getShaderInfoLog(v).trim(),C=n.getShaderInfoLog(E).trim();let O=!0,F=!0;if(n.getProgramParameter(y,n.LINK_STATUS)===!1)if(O=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(n,y,v,E);else{const L=getShaderErrors(n,v,"vertex"),I=getShaderErrors(n,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(y,n.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+L+`
`+I)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(x===""||C==="")&&(F=!1);F&&(this.diagnostics={runnable:O,programLog:R,vertexShader:{log:x,prefix:m},fragmentShader:{log:C,prefix:_}})}n.deleteShader(v),n.deleteShader(E);let T;this.getUniforms=function(){return T===void 0&&(T=new WebGLUniforms(n,y)),T};let A;return this.getAttributes=function(){return A===void 0&&(A=fetchAttributeLocations(n,y)),A},this.destroy=function(){s.releaseStatesOfProgram(this),n.deleteProgram(y),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=programIdCount++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=v,this.fragmentShader=E,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,s=e.fragmentShader,n=this._getShaderStage(r),i=this._getShaderStage(s),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(i)===!1&&(o.add(i),i.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const s of r)s.usedTimes--,s.usedTimes===0&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let s=r.get(e);return s===void 0&&(s=new Set,r.set(e,s)),s}_getShaderStage(e){const r=this.shaderCache;let s=r.get(e);return s===void 0&&(s=new WebGLShaderStage(e),r.set(e,s)),s}}class WebGLShaderStage{constructor(e){this.id=_id++,this.code=e,this.usedTimes=0}}function WebGLPrograms(t,e,r,s,n,i,o){const p=new Layers,l=new WebGLShaderCache,c=[],f=n.isWebGL2,d=n.logarithmicDepthBuffer,g=n.vertexTextures;let u=n.precision;const h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(R){return R===0?"uv":`uv${R}`}function m(R,x,C,O,F){const L=O.fog,I=F.geometry,N=R.isMeshStandardMaterial?O.environment:null,k=(R.isMeshStandardMaterial?r:e).get(R.envMap||N),U=k&&k.mapping===CubeUVReflectionMapping?k.image.height:null,H=h[R.type];R.precision!==null&&(u=n.getMaxPrecision(R.precision),u!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",u,"instead."));const W=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,z=W!==void 0?W.length:0;let j=0;I.morphAttributes.position!==void 0&&(j=1),I.morphAttributes.normal!==void 0&&(j=2),I.morphAttributes.color!==void 0&&(j=3);let ee,te,ie,le;if(H){const Ge=ShaderLib[H];ee=Ge.vertexShader,te=Ge.fragmentShader}else ee=R.vertexShader,te=R.fragmentShader,l.update(R),ie=l.getVertexShaderID(R),le=l.getFragmentShaderID(R);const me=t.getRenderTarget(),fe=F.isInstancedMesh===!0,Oe=!!R.map,Ue=!!R.matcap,Ee=!!k,q=!!R.aoMap,je=!!R.lightMap,_e=!!R.bumpMap,ve=!!R.normalMap,Me=!!R.displacementMap,ke=!!R.emissiveMap,Ce=!!R.metalnessMap,Te=!!R.roughnessMap,Ie=R.anisotropy>0,We=R.clearcoat>0,ze=R.iridescence>0,D=R.sheen>0,w=R.transmission>0,X=Ie&&!!R.anisotropyMap,ne=We&&!!R.clearcoatMap,re=We&&!!R.clearcoatNormalMap,ae=We&&!!R.clearcoatRoughnessMap,ye=ze&&!!R.iridescenceMap,se=ze&&!!R.iridescenceThicknessMap,K=D&&!!R.sheenColorMap,P=D&&!!R.sheenRoughnessMap,Q=!!R.specularMap,ge=!!R.specularColorMap,pe=!!R.specularIntensityMap,ue=w&&!!R.transmissionMap,Ae=w&&!!R.thicknessMap,De=!!R.gradientMap,G=!!R.alphaMap,de=R.alphaTest>0,Y=!!R.alphaHash,oe=!!R.extensions,ce=!!I.attributes.uv1,we=!!I.attributes.uv2,Pe=!!I.attributes.uv3;let Ne=NoToneMapping;return R.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(Ne=t.toneMapping),{isWebGL2:f,shaderID:H,shaderType:R.type,shaderName:R.name,vertexShader:ee,fragmentShader:te,defines:R.defines,customVertexShaderID:ie,customFragmentShaderID:le,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:u,instancing:fe,instancingColor:fe&&F.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:me===null?t.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:LinearSRGBColorSpace,map:Oe,matcap:Ue,envMap:Ee,envMapMode:Ee&&k.mapping,envMapCubeUVHeight:U,aoMap:q,lightMap:je,bumpMap:_e,normalMap:ve,displacementMap:g&&Me,emissiveMap:ke,normalMapObjectSpace:ve&&R.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:ve&&R.normalMapType===TangentSpaceNormalMap,metalnessMap:Ce,roughnessMap:Te,anisotropy:Ie,anisotropyMap:X,clearcoat:We,clearcoatMap:ne,clearcoatNormalMap:re,clearcoatRoughnessMap:ae,iridescence:ze,iridescenceMap:ye,iridescenceThicknessMap:se,sheen:D,sheenColorMap:K,sheenRoughnessMap:P,specularMap:Q,specularColorMap:ge,specularIntensityMap:pe,transmission:w,transmissionMap:ue,thicknessMap:Ae,gradientMap:De,opaque:R.transparent===!1&&R.blending===NormalBlending,alphaMap:G,alphaTest:de,alphaHash:Y,combine:R.combine,mapUv:Oe&&y(R.map.channel),aoMapUv:q&&y(R.aoMap.channel),lightMapUv:je&&y(R.lightMap.channel),bumpMapUv:_e&&y(R.bumpMap.channel),normalMapUv:ve&&y(R.normalMap.channel),displacementMapUv:Me&&y(R.displacementMap.channel),emissiveMapUv:ke&&y(R.emissiveMap.channel),metalnessMapUv:Ce&&y(R.metalnessMap.channel),roughnessMapUv:Te&&y(R.roughnessMap.channel),anisotropyMapUv:X&&y(R.anisotropyMap.channel),clearcoatMapUv:ne&&y(R.clearcoatMap.channel),clearcoatNormalMapUv:re&&y(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ae&&y(R.clearcoatRoughnessMap.channel),iridescenceMapUv:ye&&y(R.iridescenceMap.channel),iridescenceThicknessMapUv:se&&y(R.iridescenceThicknessMap.channel),sheenColorMapUv:K&&y(R.sheenColorMap.channel),sheenRoughnessMapUv:P&&y(R.sheenRoughnessMap.channel),specularMapUv:Q&&y(R.specularMap.channel),specularColorMapUv:ge&&y(R.specularColorMap.channel),specularIntensityMapUv:pe&&y(R.specularIntensityMap.channel),transmissionMapUv:ue&&y(R.transmissionMap.channel),thicknessMapUv:Ae&&y(R.thicknessMap.channel),alphaMapUv:G&&y(R.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(ve||Ie),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,vertexUv1s:ce,vertexUv2s:we,vertexUv3s:Pe,pointsUvs:F.isPoints===!0&&!!I.attributes.uv&&(Oe||G),fog:!!L,useFog:R.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:F.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:j,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numSpotLightMaps:x.spotLightMap.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numSpotLightShadowsWithMaps:x.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:t.shadowMap.enabled&&C.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ne,useLegacyLights:t._useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===DoubleSide,flipSided:R.side===BackSide,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:oe&&R.extensions.derivatives===!0,extensionFragDepth:oe&&R.extensions.fragDepth===!0,extensionDrawBuffers:oe&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:oe&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:f||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||s.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function _(R){const x=[];if(R.shaderID?x.push(R.shaderID):(x.push(R.customVertexShaderID),x.push(R.customFragmentShaderID)),R.defines!==void 0)for(const C in R.defines)x.push(C),x.push(R.defines[C]);return R.isRawShaderMaterial===!1&&(b(x,R),M(x,R),x.push(t.outputColorSpace)),x.push(R.customProgramCacheKey),x.join()}function b(R,x){R.push(x.precision),R.push(x.outputColorSpace),R.push(x.envMapMode),R.push(x.envMapCubeUVHeight),R.push(x.mapUv),R.push(x.alphaMapUv),R.push(x.lightMapUv),R.push(x.aoMapUv),R.push(x.bumpMapUv),R.push(x.normalMapUv),R.push(x.displacementMapUv),R.push(x.emissiveMapUv),R.push(x.metalnessMapUv),R.push(x.roughnessMapUv),R.push(x.anisotropyMapUv),R.push(x.clearcoatMapUv),R.push(x.clearcoatNormalMapUv),R.push(x.clearcoatRoughnessMapUv),R.push(x.iridescenceMapUv),R.push(x.iridescenceThicknessMapUv),R.push(x.sheenColorMapUv),R.push(x.sheenRoughnessMapUv),R.push(x.specularMapUv),R.push(x.specularColorMapUv),R.push(x.specularIntensityMapUv),R.push(x.transmissionMapUv),R.push(x.thicknessMapUv),R.push(x.combine),R.push(x.fogExp2),R.push(x.sizeAttenuation),R.push(x.morphTargetsCount),R.push(x.morphAttributeCount),R.push(x.numDirLights),R.push(x.numPointLights),R.push(x.numSpotLights),R.push(x.numSpotLightMaps),R.push(x.numHemiLights),R.push(x.numRectAreaLights),R.push(x.numDirLightShadows),R.push(x.numPointLightShadows),R.push(x.numSpotLightShadows),R.push(x.numSpotLightShadowsWithMaps),R.push(x.shadowMapType),R.push(x.toneMapping),R.push(x.numClippingPlanes),R.push(x.numClipIntersection),R.push(x.depthPacking)}function M(R,x){p.disableAll(),x.isWebGL2&&p.enable(0),x.supportsVertexTextures&&p.enable(1),x.instancing&&p.enable(2),x.instancingColor&&p.enable(3),x.matcap&&p.enable(4),x.envMap&&p.enable(5),x.normalMapObjectSpace&&p.enable(6),x.normalMapTangentSpace&&p.enable(7),x.clearcoat&&p.enable(8),x.iridescence&&p.enable(9),x.alphaTest&&p.enable(10),x.vertexColors&&p.enable(11),x.vertexAlphas&&p.enable(12),x.vertexUv1s&&p.enable(13),x.vertexUv2s&&p.enable(14),x.vertexUv3s&&p.enable(15),x.vertexTangents&&p.enable(16),x.anisotropy&&p.enable(17),R.push(p.mask),p.disableAll(),x.fog&&p.enable(0),x.useFog&&p.enable(1),x.flatShading&&p.enable(2),x.logarithmicDepthBuffer&&p.enable(3),x.skinning&&p.enable(4),x.morphTargets&&p.enable(5),x.morphNormals&&p.enable(6),x.morphColors&&p.enable(7),x.premultipliedAlpha&&p.enable(8),x.shadowMapEnabled&&p.enable(9),x.useLegacyLights&&p.enable(10),x.doubleSided&&p.enable(11),x.flipSided&&p.enable(12),x.useDepthPacking&&p.enable(13),x.dithering&&p.enable(14),x.transmission&&p.enable(15),x.sheen&&p.enable(16),x.opaque&&p.enable(17),x.pointsUvs&&p.enable(18),R.push(p.mask)}function S(R){const x=h[R.type];let C;if(x){const O=ShaderLib[x];C=UniformsUtils.clone(O.uniforms)}else C=R.uniforms;return C}function v(R,x){let C;for(let O=0,F=c.length;O<F;O++){const L=c[O];if(L.cacheKey===x){C=L,++C.usedTimes;break}}return C===void 0&&(C=new WebGLProgram(t,x,R,i),c.push(C)),C}function E(R){if(--R.usedTimes===0){const x=c.indexOf(R);c[x]=c[c.length-1],c.pop(),R.destroy()}}function T(R){l.remove(R)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:_,getUniforms:S,acquireProgram:v,releaseProgram:E,releaseShaderCache:T,programs:c,dispose:A}}function WebGLProperties(){let t=new WeakMap;function e(i){let o=t.get(i);return o===void 0&&(o={},t.set(i,o)),o}function r(i){t.delete(i)}function s(i,o,p){t.get(i)[o]=p}function n(){t=new WeakMap}return{get:e,remove:r,update:s,dispose:n}}function painterSortStable(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function reversePainterSortStable(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function WebGLRenderList(){const t=[];let e=0;const r=[],s=[],n=[];function i(){e=0,r.length=0,s.length=0,n.length=0}function o(d,g,u,h,y,m){let _=t[e];return _===void 0?(_={id:d.id,object:d,geometry:g,material:u,groupOrder:h,renderOrder:d.renderOrder,z:y,group:m},t[e]=_):(_.id=d.id,_.object=d,_.geometry=g,_.material=u,_.groupOrder=h,_.renderOrder=d.renderOrder,_.z=y,_.group=m),e++,_}function p(d,g,u,h,y,m){const _=o(d,g,u,h,y,m);u.transmission>0?s.push(_):u.transparent===!0?n.push(_):r.push(_)}function l(d,g,u,h,y,m){const _=o(d,g,u,h,y,m);u.transmission>0?s.unshift(_):u.transparent===!0?n.unshift(_):r.unshift(_)}function c(d,g){r.length>1&&r.sort(d||painterSortStable),s.length>1&&s.sort(g||reversePainterSortStable),n.length>1&&n.sort(g||reversePainterSortStable)}function f(){for(let d=e,g=t.length;d<g;d++){const u=t[d];if(u.id===null)break;u.id=null,u.object=null,u.geometry=null,u.material=null,u.group=null}}return{opaque:r,transmissive:s,transparent:n,init:i,push:p,unshift:l,finish:f,sort:c}}function WebGLRenderLists(){let t=new WeakMap;function e(s,n){const i=t.get(s);let o;return i===void 0?(o=new WebGLRenderList,t.set(s,[o])):n>=i.length?(o=new WebGLRenderList,i.push(o)):o=i[n],o}function r(){t=new WeakMap}return{get:e,dispose:r}}function UniformsCache(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Vector3,color:new Color};break;case"SpotLight":r={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":r={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return t[e.id]=r,r}}}function ShadowUniformsCache(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=r,r}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function WebGLLights(t,e){const r=new UniformsCache,s=ShadowUniformsCache(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let f=0;f<9;f++)n.probe.push(new Vector3);const i=new Vector3,o=new Matrix4,p=new Matrix4;function l(f,d){let g=0,u=0,h=0;for(let C=0;C<9;C++)n.probe[C].set(0,0,0);let y=0,m=0,_=0,b=0,M=0,S=0,v=0,E=0,T=0,A=0;f.sort(shadowCastingAndTexturingLightsFirst);const R=d===!0?Math.PI:1;for(let C=0,O=f.length;C<O;C++){const F=f[C],L=F.color,I=F.intensity,N=F.distance,k=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)g+=L.r*I*R,u+=L.g*I*R,h+=L.b*I*R;else if(F.isLightProbe)for(let U=0;U<9;U++)n.probe[U].addScaledVector(F.sh.coefficients[U],I);else if(F.isDirectionalLight){const U=r.get(F);if(U.color.copy(F.color).multiplyScalar(F.intensity*R),F.castShadow){const H=F.shadow,W=s.get(F);W.shadowBias=H.bias,W.shadowNormalBias=H.normalBias,W.shadowRadius=H.radius,W.shadowMapSize=H.mapSize,n.directionalShadow[y]=W,n.directionalShadowMap[y]=k,n.directionalShadowMatrix[y]=F.shadow.matrix,S++}n.directional[y]=U,y++}else if(F.isSpotLight){const U=r.get(F);U.position.setFromMatrixPosition(F.matrixWorld),U.color.copy(L).multiplyScalar(I*R),U.distance=N,U.coneCos=Math.cos(F.angle),U.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),U.decay=F.decay,n.spot[_]=U;const H=F.shadow;if(F.map&&(n.spotLightMap[T]=F.map,T++,H.updateMatrices(F),F.castShadow&&A++),n.spotLightMatrix[_]=H.matrix,F.castShadow){const W=s.get(F);W.shadowBias=H.bias,W.shadowNormalBias=H.normalBias,W.shadowRadius=H.radius,W.shadowMapSize=H.mapSize,n.spotShadow[_]=W,n.spotShadowMap[_]=k,E++}_++}else if(F.isRectAreaLight){const U=r.get(F);U.color.copy(L).multiplyScalar(I),U.halfWidth.set(F.width*.5,0,0),U.halfHeight.set(0,F.height*.5,0),n.rectArea[b]=U,b++}else if(F.isPointLight){const U=r.get(F);if(U.color.copy(F.color).multiplyScalar(F.intensity*R),U.distance=F.distance,U.decay=F.decay,F.castShadow){const H=F.shadow,W=s.get(F);W.shadowBias=H.bias,W.shadowNormalBias=H.normalBias,W.shadowRadius=H.radius,W.shadowMapSize=H.mapSize,W.shadowCameraNear=H.camera.near,W.shadowCameraFar=H.camera.far,n.pointShadow[m]=W,n.pointShadowMap[m]=k,n.pointShadowMatrix[m]=F.shadow.matrix,v++}n.point[m]=U,m++}else if(F.isHemisphereLight){const U=r.get(F);U.skyColor.copy(F.color).multiplyScalar(I*R),U.groundColor.copy(F.groundColor).multiplyScalar(I*R),n.hemi[M]=U,M++}}b>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,n.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=UniformsLib.LTC_HALF_1,n.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=g,n.ambient[1]=u,n.ambient[2]=h;const x=n.hash;(x.directionalLength!==y||x.pointLength!==m||x.spotLength!==_||x.rectAreaLength!==b||x.hemiLength!==M||x.numDirectionalShadows!==S||x.numPointShadows!==v||x.numSpotShadows!==E||x.numSpotMaps!==T)&&(n.directional.length=y,n.spot.length=_,n.rectArea.length=b,n.point.length=m,n.hemi.length=M,n.directionalShadow.length=S,n.directionalShadowMap.length=S,n.pointShadow.length=v,n.pointShadowMap.length=v,n.spotShadow.length=E,n.spotShadowMap.length=E,n.directionalShadowMatrix.length=S,n.pointShadowMatrix.length=v,n.spotLightMatrix.length=E+T-A,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=A,x.directionalLength=y,x.pointLength=m,x.spotLength=_,x.rectAreaLength=b,x.hemiLength=M,x.numDirectionalShadows=S,x.numPointShadows=v,x.numSpotShadows=E,x.numSpotMaps=T,n.version=nextVersion++)}function c(f,d){let g=0,u=0,h=0,y=0,m=0;const _=d.matrixWorldInverse;for(let b=0,M=f.length;b<M;b++){const S=f[b];if(S.isDirectionalLight){const v=n.directional[g];v.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),v.direction.sub(i),v.direction.transformDirection(_),g++}else if(S.isSpotLight){const v=n.spot[h];v.position.setFromMatrixPosition(S.matrixWorld),v.position.applyMatrix4(_),v.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),v.direction.sub(i),v.direction.transformDirection(_),h++}else if(S.isRectAreaLight){const v=n.rectArea[y];v.position.setFromMatrixPosition(S.matrixWorld),v.position.applyMatrix4(_),p.identity(),o.copy(S.matrixWorld),o.premultiply(_),p.extractRotation(o),v.halfWidth.set(S.width*.5,0,0),v.halfHeight.set(0,S.height*.5,0),v.halfWidth.applyMatrix4(p),v.halfHeight.applyMatrix4(p),y++}else if(S.isPointLight){const v=n.point[u];v.position.setFromMatrixPosition(S.matrixWorld),v.position.applyMatrix4(_),u++}else if(S.isHemisphereLight){const v=n.hemi[m];v.direction.setFromMatrixPosition(S.matrixWorld),v.direction.transformDirection(_),m++}}}return{setup:l,setupView:c,state:n}}function WebGLRenderState(t,e){const r=new WebGLLights(t,e),s=[],n=[];function i(){s.length=0,n.length=0}function o(d){s.push(d)}function p(d){n.push(d)}function l(d){r.setup(s,d)}function c(d){r.setupView(s,d)}return{init:i,state:{lightsArray:s,shadowsArray:n,lights:r},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:p}}function WebGLRenderStates(t,e){let r=new WeakMap;function s(i,o=0){const p=r.get(i);let l;return p===void 0?(l=new WebGLRenderState(t,e),r.set(i,[l])):o>=p.length?(l=new WebGLRenderState(t,e),p.push(l)):l=p[o],l}function n(){r=new WeakMap}return{get:s,dispose:n}}class MeshDepthMaterial extends Material{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(t,e,r){let s=new Frustum;const n=new Vector2,i=new Vector2,o=new Vector4,p=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),l=new MeshDistanceMaterial,c={},f=r.maxTextureSize,d={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},g=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),u=g.clone();u.defines.HORIZONTAL_PASS=1;const h=new BufferGeometry;h.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Mesh(h,g),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let _=this.type;this.render=function(v,E,T){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||v.length===0)return;const A=t.getRenderTarget(),R=t.getActiveCubeFace(),x=t.getActiveMipmapLevel(),C=t.state;C.setBlending(NoBlending),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);const O=_!==VSMShadowMap&&this.type===VSMShadowMap,F=_===VSMShadowMap&&this.type!==VSMShadowMap;for(let L=0,I=v.length;L<I;L++){const N=v[L],k=N.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;n.copy(k.mapSize);const U=k.getFrameExtents();if(n.multiply(U),i.copy(k.mapSize),(n.x>f||n.y>f)&&(n.x>f&&(i.x=Math.floor(f/U.x),n.x=i.x*U.x,k.mapSize.x=i.x),n.y>f&&(i.y=Math.floor(f/U.y),n.y=i.y*U.y,k.mapSize.y=i.y)),k.map===null||O===!0||F===!0){const W=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};k.map!==null&&k.map.dispose(),k.map=new WebGLRenderTarget(n.x,n.y,W),k.map.texture.name=N.name+".shadowMap",k.camera.updateProjectionMatrix()}t.setRenderTarget(k.map),t.clear();const H=k.getViewportCount();for(let W=0;W<H;W++){const z=k.getViewport(W);o.set(i.x*z.x,i.y*z.y,i.x*z.z,i.y*z.w),C.viewport(o),k.updateMatrices(N,W),s=k.getFrustum(),S(E,T,k.camera,N,this.type)}k.isPointLightShadow!==!0&&this.type===VSMShadowMap&&b(k,T),k.needsUpdate=!1}_=this.type,m.needsUpdate=!1,t.setRenderTarget(A,R,x)};function b(v,E){const T=e.update(y);g.defines.VSM_SAMPLES!==v.blurSamples&&(g.defines.VSM_SAMPLES=v.blurSamples,u.defines.VSM_SAMPLES=v.blurSamples,g.needsUpdate=!0,u.needsUpdate=!0),v.mapPass===null&&(v.mapPass=new WebGLRenderTarget(n.x,n.y)),g.uniforms.shadow_pass.value=v.map.texture,g.uniforms.resolution.value=v.mapSize,g.uniforms.radius.value=v.radius,t.setRenderTarget(v.mapPass),t.clear(),t.renderBufferDirect(E,null,T,g,y,null),u.uniforms.shadow_pass.value=v.mapPass.texture,u.uniforms.resolution.value=v.mapSize,u.uniforms.radius.value=v.radius,t.setRenderTarget(v.map),t.clear(),t.renderBufferDirect(E,null,T,u,y,null)}function M(v,E,T,A){let R=null;const x=T.isPointLight===!0?v.customDistanceMaterial:v.customDepthMaterial;if(x!==void 0)R=x;else if(R=T.isPointLight===!0?l:p,t.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const C=R.uuid,O=E.uuid;let F=c[C];F===void 0&&(F={},c[C]=F);let L=F[O];L===void 0&&(L=R.clone(),F[O]=L),R=L}if(R.visible=E.visible,R.wireframe=E.wireframe,A===VSMShadowMap?R.side=E.shadowSide!==null?E.shadowSide:E.side:R.side=E.shadowSide!==null?E.shadowSide:d[E.side],R.alphaMap=E.alphaMap,R.alphaTest=E.alphaTest,R.map=E.map,R.clipShadows=E.clipShadows,R.clippingPlanes=E.clippingPlanes,R.clipIntersection=E.clipIntersection,R.displacementMap=E.displacementMap,R.displacementScale=E.displacementScale,R.displacementBias=E.displacementBias,R.wireframeLinewidth=E.wireframeLinewidth,R.linewidth=E.linewidth,T.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const C=t.properties.get(R);C.light=T}return R}function S(v,E,T,A,R){if(v.visible===!1)return;if(v.layers.test(E.layers)&&(v.isMesh||v.isLine||v.isPoints)&&(v.castShadow||v.receiveShadow&&R===VSMShadowMap)&&(!v.frustumCulled||s.intersectsObject(v))){v.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,v.matrixWorld);const O=e.update(v),F=v.material;if(Array.isArray(F)){const L=O.groups;for(let I=0,N=L.length;I<N;I++){const k=L[I],U=F[k.materialIndex];if(U&&U.visible){const H=M(v,U,A,R);t.renderBufferDirect(T,null,O,H,v,k)}}}else if(F.visible){const L=M(v,F,A,R);t.renderBufferDirect(T,null,O,L,v,null)}}const C=v.children;for(let O=0,F=C.length;O<F;O++)S(C[O],E,T,A,R)}}function WebGLState(t,e,r){const s=r.isWebGL2;function n(){let G=!1;const de=new Vector4;let Y=null;const oe=new Vector4(0,0,0,0);return{setMask:function(ce){Y!==ce&&!G&&(t.colorMask(ce,ce,ce,ce),Y=ce)},setLocked:function(ce){G=ce},setClear:function(ce,we,Pe,Ne,tt){tt===!0&&(ce*=Ne,we*=Ne,Pe*=Ne),de.set(ce,we,Pe,Ne),oe.equals(de)===!1&&(t.clearColor(ce,we,Pe,Ne),oe.copy(de))},reset:function(){G=!1,Y=null,oe.set(-1,0,0,0)}}}function i(){let G=!1,de=null,Y=null,oe=null;return{setTest:function(ce){ce?me(t.DEPTH_TEST):fe(t.DEPTH_TEST)},setMask:function(ce){de!==ce&&!G&&(t.depthMask(ce),de=ce)},setFunc:function(ce){if(Y!==ce){switch(ce){case NeverDepth:t.depthFunc(t.NEVER);break;case AlwaysDepth:t.depthFunc(t.ALWAYS);break;case LessDepth:t.depthFunc(t.LESS);break;case LessEqualDepth:t.depthFunc(t.LEQUAL);break;case EqualDepth:t.depthFunc(t.EQUAL);break;case GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case GreaterDepth:t.depthFunc(t.GREATER);break;case NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Y=ce}},setLocked:function(ce){G=ce},setClear:function(ce){oe!==ce&&(t.clearDepth(ce),oe=ce)},reset:function(){G=!1,de=null,Y=null,oe=null}}}function o(){let G=!1,de=null,Y=null,oe=null,ce=null,we=null,Pe=null,Ne=null,tt=null;return{setTest:function(Ge){G||(Ge?me(t.STENCIL_TEST):fe(t.STENCIL_TEST))},setMask:function(Ge){de!==Ge&&!G&&(t.stencilMask(Ge),de=Ge)},setFunc:function(Ge,Qe,Ye){(Y!==Ge||oe!==Qe||ce!==Ye)&&(t.stencilFunc(Ge,Qe,Ye),Y=Ge,oe=Qe,ce=Ye)},setOp:function(Ge,Qe,Ye){(we!==Ge||Pe!==Qe||Ne!==Ye)&&(t.stencilOp(Ge,Qe,Ye),we=Ge,Pe=Qe,Ne=Ye)},setLocked:function(Ge){G=Ge},setClear:function(Ge){tt!==Ge&&(t.clearStencil(Ge),tt=Ge)},reset:function(){G=!1,de=null,Y=null,oe=null,ce=null,we=null,Pe=null,Ne=null,tt=null}}}const p=new n,l=new i,c=new o,f=new WeakMap,d=new WeakMap;let g={},u={},h=new WeakMap,y=[],m=null,_=!1,b=null,M=null,S=null,v=null,E=null,T=null,A=null,R=!1,x=null,C=null,O=null,F=null,L=null;const I=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,k=0;const U=t.getParameter(t.VERSION);U.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(U)[1]),N=k>=1):U.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),N=k>=2);let H=null,W={};const z=t.getParameter(t.SCISSOR_BOX),j=t.getParameter(t.VIEWPORT),ee=new Vector4().fromArray(z),te=new Vector4().fromArray(j);function ie(G,de,Y,oe){const ce=new Uint8Array(4),we=t.createTexture();t.bindTexture(G,we),t.texParameteri(G,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(G,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Pe=0;Pe<Y;Pe++)s&&(G===t.TEXTURE_3D||G===t.TEXTURE_2D_ARRAY)?t.texImage3D(de,0,t.RGBA,1,1,oe,0,t.RGBA,t.UNSIGNED_BYTE,ce):t.texImage2D(de+Pe,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ce);return we}const le={};le[t.TEXTURE_2D]=ie(t.TEXTURE_2D,t.TEXTURE_2D,1),le[t.TEXTURE_CUBE_MAP]=ie(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),s&&(le[t.TEXTURE_2D_ARRAY]=ie(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),le[t.TEXTURE_3D]=ie(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),p.setClear(0,0,0,1),l.setClear(1),c.setClear(0),me(t.DEPTH_TEST),l.setFunc(LessEqualDepth),Me(!1),ke(CullFaceBack),me(t.CULL_FACE),_e(NoBlending);function me(G){g[G]!==!0&&(t.enable(G),g[G]=!0)}function fe(G){g[G]!==!1&&(t.disable(G),g[G]=!1)}function Oe(G,de){return u[G]!==de?(t.bindFramebuffer(G,de),u[G]=de,s&&(G===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=de),G===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=de)),!0):!1}function Ue(G,de){let Y=y,oe=!1;if(G)if(Y=h.get(de),Y===void 0&&(Y=[],h.set(de,Y)),G.isWebGLMultipleRenderTargets){const ce=G.texture;if(Y.length!==ce.length||Y[0]!==t.COLOR_ATTACHMENT0){for(let we=0,Pe=ce.length;we<Pe;we++)Y[we]=t.COLOR_ATTACHMENT0+we;Y.length=ce.length,oe=!0}}else Y[0]!==t.COLOR_ATTACHMENT0&&(Y[0]=t.COLOR_ATTACHMENT0,oe=!0);else Y[0]!==t.BACK&&(Y[0]=t.BACK,oe=!0);oe&&(r.isWebGL2?t.drawBuffers(Y):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Y))}function Ee(G){return m!==G?(t.useProgram(G),m=G,!0):!1}const q={[AddEquation]:t.FUNC_ADD,[SubtractEquation]:t.FUNC_SUBTRACT,[ReverseSubtractEquation]:t.FUNC_REVERSE_SUBTRACT};if(s)q[MinEquation]=t.MIN,q[MaxEquation]=t.MAX;else{const G=e.get("EXT_blend_minmax");G!==null&&(q[MinEquation]=G.MIN_EXT,q[MaxEquation]=G.MAX_EXT)}const je={[ZeroFactor]:t.ZERO,[OneFactor]:t.ONE,[SrcColorFactor]:t.SRC_COLOR,[SrcAlphaFactor]:t.SRC_ALPHA,[SrcAlphaSaturateFactor]:t.SRC_ALPHA_SATURATE,[DstColorFactor]:t.DST_COLOR,[DstAlphaFactor]:t.DST_ALPHA,[OneMinusSrcColorFactor]:t.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:t.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:t.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:t.ONE_MINUS_DST_ALPHA};function _e(G,de,Y,oe,ce,we,Pe,Ne){if(G===NoBlending){_===!0&&(fe(t.BLEND),_=!1);return}if(_===!1&&(me(t.BLEND),_=!0),G!==CustomBlending){if(G!==b||Ne!==R){if((M!==AddEquation||E!==AddEquation)&&(t.blendEquation(t.FUNC_ADD),M=AddEquation,E=AddEquation),Ne)switch(G){case NormalBlending:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:t.blendFunc(t.ONE,t.ONE);break;case SubtractiveBlending:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case MultiplyBlending:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}else switch(G){case NormalBlending:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case SubtractiveBlending:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case MultiplyBlending:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",G);break}S=null,v=null,T=null,A=null,b=G,R=Ne}return}ce=ce||de,we=we||Y,Pe=Pe||oe,(de!==M||ce!==E)&&(t.blendEquationSeparate(q[de],q[ce]),M=de,E=ce),(Y!==S||oe!==v||we!==T||Pe!==A)&&(t.blendFuncSeparate(je[Y],je[oe],je[we],je[Pe]),S=Y,v=oe,T=we,A=Pe),b=G,R=!1}function ve(G,de){G.side===DoubleSide?fe(t.CULL_FACE):me(t.CULL_FACE);let Y=G.side===BackSide;de&&(Y=!Y),Me(Y),G.blending===NormalBlending&&G.transparent===!1?_e(NoBlending):_e(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha),l.setFunc(G.depthFunc),l.setTest(G.depthTest),l.setMask(G.depthWrite),p.setMask(G.colorWrite);const oe=G.stencilWrite;c.setTest(oe),oe&&(c.setMask(G.stencilWriteMask),c.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),c.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),Te(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?me(t.SAMPLE_ALPHA_TO_COVERAGE):fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Me(G){x!==G&&(G?t.frontFace(t.CW):t.frontFace(t.CCW),x=G)}function ke(G){G!==CullFaceNone?(me(t.CULL_FACE),G!==C&&(G===CullFaceBack?t.cullFace(t.BACK):G===CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):fe(t.CULL_FACE),C=G}function Ce(G){G!==O&&(N&&t.lineWidth(G),O=G)}function Te(G,de,Y){G?(me(t.POLYGON_OFFSET_FILL),(F!==de||L!==Y)&&(t.polygonOffset(de,Y),F=de,L=Y)):fe(t.POLYGON_OFFSET_FILL)}function Ie(G){G?me(t.SCISSOR_TEST):fe(t.SCISSOR_TEST)}function We(G){G===void 0&&(G=t.TEXTURE0+I-1),H!==G&&(t.activeTexture(G),H=G)}function ze(G,de,Y){Y===void 0&&(H===null?Y=t.TEXTURE0+I-1:Y=H);let oe=W[Y];oe===void 0&&(oe={type:void 0,texture:void 0},W[Y]=oe),(oe.type!==G||oe.texture!==de)&&(H!==Y&&(t.activeTexture(Y),H=Y),t.bindTexture(G,de||le[G]),oe.type=G,oe.texture=de)}function D(){const G=W[H];G!==void 0&&G.type!==void 0&&(t.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function w(){try{t.compressedTexImage2D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function X(){try{t.compressedTexImage3D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ne(){try{t.texSubImage2D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function re(){try{t.texSubImage3D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ae(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ye(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function se(){try{t.texStorage2D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function K(){try{t.texStorage3D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function P(){try{t.texImage2D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function Q(){try{t.texImage3D.apply(t,arguments)}catch(G){console.error("THREE.WebGLState:",G)}}function ge(G){ee.equals(G)===!1&&(t.scissor(G.x,G.y,G.z,G.w),ee.copy(G))}function pe(G){te.equals(G)===!1&&(t.viewport(G.x,G.y,G.z,G.w),te.copy(G))}function ue(G,de){let Y=d.get(de);Y===void 0&&(Y=new WeakMap,d.set(de,Y));let oe=Y.get(G);oe===void 0&&(oe=t.getUniformBlockIndex(de,G.name),Y.set(G,oe))}function Ae(G,de){const oe=d.get(de).get(G);f.get(de)!==oe&&(t.uniformBlockBinding(de,oe,G.__bindingPointIndex),f.set(de,oe))}function De(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),s===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),g={},H=null,W={},u={},h=new WeakMap,y=[],m=null,_=!1,b=null,M=null,S=null,v=null,E=null,T=null,A=null,R=!1,x=null,C=null,O=null,F=null,L=null,ee.set(0,0,t.canvas.width,t.canvas.height),te.set(0,0,t.canvas.width,t.canvas.height),p.reset(),l.reset(),c.reset()}return{buffers:{color:p,depth:l,stencil:c},enable:me,disable:fe,bindFramebuffer:Oe,drawBuffers:Ue,useProgram:Ee,setBlending:_e,setMaterial:ve,setFlipSided:Me,setCullFace:ke,setLineWidth:Ce,setPolygonOffset:Te,setScissorTest:Ie,activeTexture:We,bindTexture:ze,unbindTexture:D,compressedTexImage2D:w,compressedTexImage3D:X,texImage2D:P,texImage3D:Q,updateUBOMapping:ue,uniformBlockBinding:Ae,texStorage2D:se,texStorage3D:K,texSubImage2D:ne,texSubImage3D:re,compressedTexSubImage2D:ae,compressedTexSubImage3D:ye,scissor:ge,viewport:pe,reset:De}}function WebGLTextures(t,e,r,s,n,i,o){const p=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,f=n.maxTextureSize,d=n.maxSamples,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let y;const m=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(D,w){return _?new OffscreenCanvas(D,w):createElementNS("canvas")}function M(D,w,X,ne){let re=1;if((D.width>ne||D.height>ne)&&(re=ne/Math.max(D.width,D.height)),re<1||w===!0)if(typeof HTMLImageElement<"u"&&D instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&D instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&D instanceof ImageBitmap){const ae=w?floorPowerOfTwo:Math.floor,ye=ae(re*D.width),se=ae(re*D.height);y===void 0&&(y=b(ye,se));const K=X?b(ye,se):y;return K.width=ye,K.height=se,K.getContext("2d").drawImage(D,0,0,ye,se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+D.width+"x"+D.height+") to ("+ye+"x"+se+")."),K}else return"data"in D&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+D.width+"x"+D.height+")."),D;return D}function S(D){return isPowerOfTwo(D.width)&&isPowerOfTwo(D.height)}function v(D){return p?!1:D.wrapS!==ClampToEdgeWrapping||D.wrapT!==ClampToEdgeWrapping||D.minFilter!==NearestFilter&&D.minFilter!==LinearFilter}function E(D,w){return D.generateMipmaps&&w&&D.minFilter!==NearestFilter&&D.minFilter!==LinearFilter}function T(D){t.generateMipmap(D)}function A(D,w,X,ne,re=!1){if(p===!1)return w;if(D!==null){if(t[D]!==void 0)return t[D];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+D+"'")}let ae=w;return w===t.RED&&(X===t.FLOAT&&(ae=t.R32F),X===t.HALF_FLOAT&&(ae=t.R16F),X===t.UNSIGNED_BYTE&&(ae=t.R8)),w===t.RED_INTEGER&&(X===t.UNSIGNED_BYTE&&(ae=t.R8UI),X===t.UNSIGNED_SHORT&&(ae=t.R16UI),X===t.UNSIGNED_INT&&(ae=t.R32UI),X===t.BYTE&&(ae=t.R8I),X===t.SHORT&&(ae=t.R16I),X===t.INT&&(ae=t.R32I)),w===t.RG&&(X===t.FLOAT&&(ae=t.RG32F),X===t.HALF_FLOAT&&(ae=t.RG16F),X===t.UNSIGNED_BYTE&&(ae=t.RG8)),w===t.RGBA&&(X===t.FLOAT&&(ae=t.RGBA32F),X===t.HALF_FLOAT&&(ae=t.RGBA16F),X===t.UNSIGNED_BYTE&&(ae=ne===SRGBColorSpace&&re===!1?t.SRGB8_ALPHA8:t.RGBA8),X===t.UNSIGNED_SHORT_4_4_4_4&&(ae=t.RGBA4),X===t.UNSIGNED_SHORT_5_5_5_1&&(ae=t.RGB5_A1)),(ae===t.R16F||ae===t.R32F||ae===t.RG16F||ae===t.RG32F||ae===t.RGBA16F||ae===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ae}function R(D,w,X){return E(D,X)===!0||D.isFramebufferTexture&&D.minFilter!==NearestFilter&&D.minFilter!==LinearFilter?Math.log2(Math.max(w.width,w.height))+1:D.mipmaps!==void 0&&D.mipmaps.length>0?D.mipmaps.length:D.isCompressedTexture&&Array.isArray(D.image)?w.mipmaps.length:1}function x(D){return D===NearestFilter||D===NearestMipmapNearestFilter||D===NearestMipmapLinearFilter?t.NEAREST:t.LINEAR}function C(D){const w=D.target;w.removeEventListener("dispose",C),F(w),w.isVideoTexture&&h.delete(w)}function O(D){const w=D.target;w.removeEventListener("dispose",O),I(w)}function F(D){const w=s.get(D);if(w.__webglInit===void 0)return;const X=D.source,ne=m.get(X);if(ne){const re=ne[w.__cacheKey];re.usedTimes--,re.usedTimes===0&&L(D),Object.keys(ne).length===0&&m.delete(X)}s.remove(D)}function L(D){const w=s.get(D);t.deleteTexture(w.__webglTexture);const X=D.source,ne=m.get(X);delete ne[w.__cacheKey],o.memory.textures--}function I(D){const w=D.texture,X=s.get(D),ne=s.get(w);if(ne.__webglTexture!==void 0&&(t.deleteTexture(ne.__webglTexture),o.memory.textures--),D.depthTexture&&D.depthTexture.dispose(),D.isWebGLCubeRenderTarget)for(let re=0;re<6;re++){if(Array.isArray(X.__webglFramebuffer[re]))for(let ae=0;ae<X.__webglFramebuffer[re].length;ae++)t.deleteFramebuffer(X.__webglFramebuffer[re][ae]);else t.deleteFramebuffer(X.__webglFramebuffer[re]);X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer[re])}else{if(Array.isArray(X.__webglFramebuffer))for(let re=0;re<X.__webglFramebuffer.length;re++)t.deleteFramebuffer(X.__webglFramebuffer[re]);else t.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&t.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let re=0;re<X.__webglColorRenderbuffer.length;re++)X.__webglColorRenderbuffer[re]&&t.deleteRenderbuffer(X.__webglColorRenderbuffer[re]);X.__webglDepthRenderbuffer&&t.deleteRenderbuffer(X.__webglDepthRenderbuffer)}if(D.isWebGLMultipleRenderTargets)for(let re=0,ae=w.length;re<ae;re++){const ye=s.get(w[re]);ye.__webglTexture&&(t.deleteTexture(ye.__webglTexture),o.memory.textures--),s.remove(w[re])}s.remove(w),s.remove(D)}let N=0;function k(){N=0}function U(){const D=N;return D>=l&&console.warn("THREE.WebGLTextures: Trying to use "+D+" texture units while this GPU supports only "+l),N+=1,D}function H(D){const w=[];return w.push(D.wrapS),w.push(D.wrapT),w.push(D.wrapR||0),w.push(D.magFilter),w.push(D.minFilter),w.push(D.anisotropy),w.push(D.internalFormat),w.push(D.format),w.push(D.type),w.push(D.generateMipmaps),w.push(D.premultiplyAlpha),w.push(D.flipY),w.push(D.unpackAlignment),w.push(D.colorSpace),w.join()}function W(D,w){const X=s.get(D);if(D.isVideoTexture&&We(D),D.isRenderTargetTexture===!1&&D.version>0&&X.__version!==D.version){const ne=D.image;if(ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(X,D,w);return}}r.bindTexture(t.TEXTURE_2D,X.__webglTexture,t.TEXTURE0+w)}function z(D,w){const X=s.get(D);if(D.version>0&&X.__version!==D.version){Oe(X,D,w);return}r.bindTexture(t.TEXTURE_2D_ARRAY,X.__webglTexture,t.TEXTURE0+w)}function j(D,w){const X=s.get(D);if(D.version>0&&X.__version!==D.version){Oe(X,D,w);return}r.bindTexture(t.TEXTURE_3D,X.__webglTexture,t.TEXTURE0+w)}function ee(D,w){const X=s.get(D);if(D.version>0&&X.__version!==D.version){Ue(X,D,w);return}r.bindTexture(t.TEXTURE_CUBE_MAP,X.__webglTexture,t.TEXTURE0+w)}const te={[RepeatWrapping]:t.REPEAT,[ClampToEdgeWrapping]:t.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:t.MIRRORED_REPEAT},ie={[NearestFilter]:t.NEAREST,[NearestMipmapNearestFilter]:t.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:t.NEAREST_MIPMAP_LINEAR,[LinearFilter]:t.LINEAR,[LinearMipmapNearestFilter]:t.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:t.LINEAR_MIPMAP_LINEAR},le={[NeverCompare]:t.NEVER,[AlwaysCompare]:t.ALWAYS,[LessCompare]:t.LESS,[LessEqualCompare]:t.LEQUAL,[EqualCompare]:t.EQUAL,[GreaterEqualCompare]:t.GEQUAL,[GreaterCompare]:t.GREATER,[NotEqualCompare]:t.NOTEQUAL};function me(D,w,X){if(X?(t.texParameteri(D,t.TEXTURE_WRAP_S,te[w.wrapS]),t.texParameteri(D,t.TEXTURE_WRAP_T,te[w.wrapT]),(D===t.TEXTURE_3D||D===t.TEXTURE_2D_ARRAY)&&t.texParameteri(D,t.TEXTURE_WRAP_R,te[w.wrapR]),t.texParameteri(D,t.TEXTURE_MAG_FILTER,ie[w.magFilter]),t.texParameteri(D,t.TEXTURE_MIN_FILTER,ie[w.minFilter])):(t.texParameteri(D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(D===t.TEXTURE_3D||D===t.TEXTURE_2D_ARRAY)&&t.texParameteri(D,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(w.wrapS!==ClampToEdgeWrapping||w.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(D,t.TEXTURE_MAG_FILTER,x(w.magFilter)),t.texParameteri(D,t.TEXTURE_MIN_FILTER,x(w.minFilter)),w.minFilter!==NearestFilter&&w.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),w.compareFunction&&(t.texParameteri(D,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(D,t.TEXTURE_COMPARE_FUNC,le[w.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ne=e.get("EXT_texture_filter_anisotropic");if(w.magFilter===NearestFilter||w.minFilter!==NearestMipmapLinearFilter&&w.minFilter!==LinearMipmapLinearFilter||w.type===FloatType&&e.has("OES_texture_float_linear")===!1||p===!1&&w.type===HalfFloatType&&e.has("OES_texture_half_float_linear")===!1)return;(w.anisotropy>1||s.get(w).__currentAnisotropy)&&(t.texParameterf(D,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(w.anisotropy,n.getMaxAnisotropy())),s.get(w).__currentAnisotropy=w.anisotropy)}}function fe(D,w){let X=!1;D.__webglInit===void 0&&(D.__webglInit=!0,w.addEventListener("dispose",C));const ne=w.source;let re=m.get(ne);re===void 0&&(re={},m.set(ne,re));const ae=H(w);if(ae!==D.__cacheKey){re[ae]===void 0&&(re[ae]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,X=!0),re[ae].usedTimes++;const ye=re[D.__cacheKey];ye!==void 0&&(re[D.__cacheKey].usedTimes--,ye.usedTimes===0&&L(w)),D.__cacheKey=ae,D.__webglTexture=re[ae].texture}return X}function Oe(D,w,X){let ne=t.TEXTURE_2D;(w.isDataArrayTexture||w.isCompressedArrayTexture)&&(ne=t.TEXTURE_2D_ARRAY),w.isData3DTexture&&(ne=t.TEXTURE_3D);const re=fe(D,w),ae=w.source;r.bindTexture(ne,D.__webglTexture,t.TEXTURE0+X);const ye=s.get(ae);if(ae.version!==ye.__version||re===!0){r.activeTexture(t.TEXTURE0+X),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,w.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,w.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const se=v(w)&&S(w.image)===!1;let K=M(w.image,se,!1,f);K=ze(w,K);const P=S(K)||p,Q=i.convert(w.format,w.colorSpace);let ge=i.convert(w.type),pe=A(w.internalFormat,Q,ge,w.colorSpace);me(ne,w,P);let ue;const Ae=w.mipmaps,De=p&&w.isVideoTexture!==!0,G=ye.__version===void 0||re===!0,de=R(w,K,P);if(w.isDepthTexture)pe=t.DEPTH_COMPONENT,p?w.type===FloatType?pe=t.DEPTH_COMPONENT32F:w.type===UnsignedIntType?pe=t.DEPTH_COMPONENT24:w.type===UnsignedInt248Type?pe=t.DEPTH24_STENCIL8:pe=t.DEPTH_COMPONENT16:w.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),w.format===DepthFormat&&pe===t.DEPTH_COMPONENT&&w.type!==UnsignedShortType&&w.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),w.type=UnsignedIntType,ge=i.convert(w.type)),w.format===DepthStencilFormat&&pe===t.DEPTH_COMPONENT&&(pe=t.DEPTH_STENCIL,w.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),w.type=UnsignedInt248Type,ge=i.convert(w.type))),G&&(De?r.texStorage2D(t.TEXTURE_2D,1,pe,K.width,K.height):r.texImage2D(t.TEXTURE_2D,0,pe,K.width,K.height,0,Q,ge,null));else if(w.isDataTexture)if(Ae.length>0&&P){De&&G&&r.texStorage2D(t.TEXTURE_2D,de,pe,Ae[0].width,Ae[0].height);for(let Y=0,oe=Ae.length;Y<oe;Y++)ue=Ae[Y],De?r.texSubImage2D(t.TEXTURE_2D,Y,0,0,ue.width,ue.height,Q,ge,ue.data):r.texImage2D(t.TEXTURE_2D,Y,pe,ue.width,ue.height,0,Q,ge,ue.data);w.generateMipmaps=!1}else De?(G&&r.texStorage2D(t.TEXTURE_2D,de,pe,K.width,K.height),r.texSubImage2D(t.TEXTURE_2D,0,0,0,K.width,K.height,Q,ge,K.data)):r.texImage2D(t.TEXTURE_2D,0,pe,K.width,K.height,0,Q,ge,K.data);else if(w.isCompressedTexture)if(w.isCompressedArrayTexture){De&&G&&r.texStorage3D(t.TEXTURE_2D_ARRAY,de,pe,Ae[0].width,Ae[0].height,K.depth);for(let Y=0,oe=Ae.length;Y<oe;Y++)ue=Ae[Y],w.format!==RGBAFormat?Q!==null?De?r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Y,0,0,0,ue.width,ue.height,K.depth,Q,ue.data,0,0):r.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Y,pe,ue.width,ue.height,K.depth,0,ue.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?r.texSubImage3D(t.TEXTURE_2D_ARRAY,Y,0,0,0,ue.width,ue.height,K.depth,Q,ge,ue.data):r.texImage3D(t.TEXTURE_2D_ARRAY,Y,pe,ue.width,ue.height,K.depth,0,Q,ge,ue.data)}else{De&&G&&r.texStorage2D(t.TEXTURE_2D,de,pe,Ae[0].width,Ae[0].height);for(let Y=0,oe=Ae.length;Y<oe;Y++)ue=Ae[Y],w.format!==RGBAFormat?Q!==null?De?r.compressedTexSubImage2D(t.TEXTURE_2D,Y,0,0,ue.width,ue.height,Q,ue.data):r.compressedTexImage2D(t.TEXTURE_2D,Y,pe,ue.width,ue.height,0,ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?r.texSubImage2D(t.TEXTURE_2D,Y,0,0,ue.width,ue.height,Q,ge,ue.data):r.texImage2D(t.TEXTURE_2D,Y,pe,ue.width,ue.height,0,Q,ge,ue.data)}else if(w.isDataArrayTexture)De?(G&&r.texStorage3D(t.TEXTURE_2D_ARRAY,de,pe,K.width,K.height,K.depth),r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,K.width,K.height,K.depth,Q,ge,K.data)):r.texImage3D(t.TEXTURE_2D_ARRAY,0,pe,K.width,K.height,K.depth,0,Q,ge,K.data);else if(w.isData3DTexture)De?(G&&r.texStorage3D(t.TEXTURE_3D,de,pe,K.width,K.height,K.depth),r.texSubImage3D(t.TEXTURE_3D,0,0,0,0,K.width,K.height,K.depth,Q,ge,K.data)):r.texImage3D(t.TEXTURE_3D,0,pe,K.width,K.height,K.depth,0,Q,ge,K.data);else if(w.isFramebufferTexture){if(G)if(De)r.texStorage2D(t.TEXTURE_2D,de,pe,K.width,K.height);else{let Y=K.width,oe=K.height;for(let ce=0;ce<de;ce++)r.texImage2D(t.TEXTURE_2D,ce,pe,Y,oe,0,Q,ge,null),Y>>=1,oe>>=1}}else if(Ae.length>0&&P){De&&G&&r.texStorage2D(t.TEXTURE_2D,de,pe,Ae[0].width,Ae[0].height);for(let Y=0,oe=Ae.length;Y<oe;Y++)ue=Ae[Y],De?r.texSubImage2D(t.TEXTURE_2D,Y,0,0,Q,ge,ue):r.texImage2D(t.TEXTURE_2D,Y,pe,Q,ge,ue);w.generateMipmaps=!1}else De?(G&&r.texStorage2D(t.TEXTURE_2D,de,pe,K.width,K.height),r.texSubImage2D(t.TEXTURE_2D,0,0,0,Q,ge,K)):r.texImage2D(t.TEXTURE_2D,0,pe,Q,ge,K);E(w,P)&&T(ne),ye.__version=ae.version,w.onUpdate&&w.onUpdate(w)}D.__version=w.version}function Ue(D,w,X){if(w.image.length!==6)return;const ne=fe(D,w),re=w.source;r.bindTexture(t.TEXTURE_CUBE_MAP,D.__webglTexture,t.TEXTURE0+X);const ae=s.get(re);if(re.version!==ae.__version||ne===!0){r.activeTexture(t.TEXTURE0+X),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,w.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,w.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const ye=w.isCompressedTexture||w.image[0].isCompressedTexture,se=w.image[0]&&w.image[0].isDataTexture,K=[];for(let Y=0;Y<6;Y++)!ye&&!se?K[Y]=M(w.image[Y],!1,!0,c):K[Y]=se?w.image[Y].image:w.image[Y],K[Y]=ze(w,K[Y]);const P=K[0],Q=S(P)||p,ge=i.convert(w.format,w.colorSpace),pe=i.convert(w.type),ue=A(w.internalFormat,ge,pe,w.colorSpace),Ae=p&&w.isVideoTexture!==!0,De=ae.__version===void 0||ne===!0;let G=R(w,P,Q);me(t.TEXTURE_CUBE_MAP,w,Q);let de;if(ye){Ae&&De&&r.texStorage2D(t.TEXTURE_CUBE_MAP,G,ue,P.width,P.height);for(let Y=0;Y<6;Y++){de=K[Y].mipmaps;for(let oe=0;oe<de.length;oe++){const ce=de[oe];w.format!==RGBAFormat?ge!==null?Ae?r.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe,0,0,ce.width,ce.height,ge,ce.data):r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe,ue,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ae?r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe,0,0,ce.width,ce.height,ge,pe,ce.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe,ue,ce.width,ce.height,0,ge,pe,ce.data)}}}else{de=w.mipmaps,Ae&&De&&(de.length>0&&G++,r.texStorage2D(t.TEXTURE_CUBE_MAP,G,ue,K[0].width,K[0].height));for(let Y=0;Y<6;Y++)if(se){Ae?r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,0,0,K[Y].width,K[Y].height,ge,pe,K[Y].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,ue,K[Y].width,K[Y].height,0,ge,pe,K[Y].data);for(let oe=0;oe<de.length;oe++){const we=de[oe].image[Y].image;Ae?r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe+1,0,0,we.width,we.height,ge,pe,we.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe+1,ue,we.width,we.height,0,ge,pe,we.data)}}else{Ae?r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,0,0,ge,pe,K[Y]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,ue,ge,pe,K[Y]);for(let oe=0;oe<de.length;oe++){const ce=de[oe];Ae?r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe+1,0,0,ge,pe,ce.image[Y]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Y,oe+1,ue,ge,pe,ce.image[Y])}}}E(w,Q)&&T(t.TEXTURE_CUBE_MAP),ae.__version=re.version,w.onUpdate&&w.onUpdate(w)}D.__version=w.version}function Ee(D,w,X,ne,re,ae){const ye=i.convert(X.format,X.colorSpace),se=i.convert(X.type),K=A(X.internalFormat,ye,se,X.colorSpace);if(!s.get(w).__hasExternalTextures){const Q=Math.max(1,w.width>>ae),ge=Math.max(1,w.height>>ae);re===t.TEXTURE_3D||re===t.TEXTURE_2D_ARRAY?r.texImage3D(re,ae,K,Q,ge,w.depth,0,ye,se,null):r.texImage2D(re,ae,K,Q,ge,0,ye,se,null)}r.bindFramebuffer(t.FRAMEBUFFER,D),Ie(w)?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ne,re,s.get(X).__webglTexture,0,Te(w)):(re===t.TEXTURE_2D||re>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&re<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ne,re,s.get(X).__webglTexture,ae),r.bindFramebuffer(t.FRAMEBUFFER,null)}function q(D,w,X){if(t.bindRenderbuffer(t.RENDERBUFFER,D),w.depthBuffer&&!w.stencilBuffer){let ne=t.DEPTH_COMPONENT16;if(X||Ie(w)){const re=w.depthTexture;re&&re.isDepthTexture&&(re.type===FloatType?ne=t.DEPTH_COMPONENT32F:re.type===UnsignedIntType&&(ne=t.DEPTH_COMPONENT24));const ae=Te(w);Ie(w)?g.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ae,ne,w.width,w.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,ae,ne,w.width,w.height)}else t.renderbufferStorage(t.RENDERBUFFER,ne,w.width,w.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,D)}else if(w.depthBuffer&&w.stencilBuffer){const ne=Te(w);X&&Ie(w)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ne,t.DEPTH24_STENCIL8,w.width,w.height):Ie(w)?g.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ne,t.DEPTH24_STENCIL8,w.width,w.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,w.width,w.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,D)}else{const ne=w.isWebGLMultipleRenderTargets===!0?w.texture:[w.texture];for(let re=0;re<ne.length;re++){const ae=ne[re],ye=i.convert(ae.format,ae.colorSpace),se=i.convert(ae.type),K=A(ae.internalFormat,ye,se,ae.colorSpace),P=Te(w);X&&Ie(w)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,P,K,w.width,w.height):Ie(w)?g.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,P,K,w.width,w.height):t.renderbufferStorage(t.RENDERBUFFER,K,w.width,w.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function je(D,w){if(w&&w.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(t.FRAMEBUFFER,D),!(w.depthTexture&&w.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(w.depthTexture).__webglTexture||w.depthTexture.image.width!==w.width||w.depthTexture.image.height!==w.height)&&(w.depthTexture.image.width=w.width,w.depthTexture.image.height=w.height,w.depthTexture.needsUpdate=!0),W(w.depthTexture,0);const ne=s.get(w.depthTexture).__webglTexture,re=Te(w);if(w.depthTexture.format===DepthFormat)Ie(w)?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ne,0,re):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ne,0);else if(w.depthTexture.format===DepthStencilFormat)Ie(w)?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ne,0,re):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ne,0);else throw new Error("Unknown depthTexture format")}function _e(D){const w=s.get(D),X=D.isWebGLCubeRenderTarget===!0;if(D.depthTexture&&!w.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");je(w.__webglFramebuffer,D)}else if(X){w.__webglDepthbuffer=[];for(let ne=0;ne<6;ne++)r.bindFramebuffer(t.FRAMEBUFFER,w.__webglFramebuffer[ne]),w.__webglDepthbuffer[ne]=t.createRenderbuffer(),q(w.__webglDepthbuffer[ne],D,!1)}else r.bindFramebuffer(t.FRAMEBUFFER,w.__webglFramebuffer),w.__webglDepthbuffer=t.createRenderbuffer(),q(w.__webglDepthbuffer,D,!1);r.bindFramebuffer(t.FRAMEBUFFER,null)}function ve(D,w,X){const ne=s.get(D);w!==void 0&&Ee(ne.__webglFramebuffer,D,D.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),X!==void 0&&_e(D)}function Me(D){const w=D.texture,X=s.get(D),ne=s.get(w);D.addEventListener("dispose",O),D.isWebGLMultipleRenderTargets!==!0&&(ne.__webglTexture===void 0&&(ne.__webglTexture=t.createTexture()),ne.__version=w.version,o.memory.textures++);const re=D.isWebGLCubeRenderTarget===!0,ae=D.isWebGLMultipleRenderTargets===!0,ye=S(D)||p;if(re){X.__webglFramebuffer=[];for(let se=0;se<6;se++)if(p&&w.mipmaps&&w.mipmaps.length>0){X.__webglFramebuffer[se]=[];for(let K=0;K<w.mipmaps.length;K++)X.__webglFramebuffer[se][K]=t.createFramebuffer()}else X.__webglFramebuffer[se]=t.createFramebuffer()}else{if(p&&w.mipmaps&&w.mipmaps.length>0){X.__webglFramebuffer=[];for(let se=0;se<w.mipmaps.length;se++)X.__webglFramebuffer[se]=t.createFramebuffer()}else X.__webglFramebuffer=t.createFramebuffer();if(ae)if(n.drawBuffers){const se=D.texture;for(let K=0,P=se.length;K<P;K++){const Q=s.get(se[K]);Q.__webglTexture===void 0&&(Q.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(p&&D.samples>0&&Ie(D)===!1){const se=ae?w:[w];X.__webglMultisampledFramebuffer=t.createFramebuffer(),X.__webglColorRenderbuffer=[],r.bindFramebuffer(t.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let K=0;K<se.length;K++){const P=se[K];X.__webglColorRenderbuffer[K]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,X.__webglColorRenderbuffer[K]);const Q=i.convert(P.format,P.colorSpace),ge=i.convert(P.type),pe=A(P.internalFormat,Q,ge,P.colorSpace,D.isXRRenderTarget===!0),ue=Te(D);t.renderbufferStorageMultisample(t.RENDERBUFFER,ue,pe,D.width,D.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+K,t.RENDERBUFFER,X.__webglColorRenderbuffer[K])}t.bindRenderbuffer(t.RENDERBUFFER,null),D.depthBuffer&&(X.__webglDepthRenderbuffer=t.createRenderbuffer(),q(X.__webglDepthRenderbuffer,D,!0)),r.bindFramebuffer(t.FRAMEBUFFER,null)}}if(re){r.bindTexture(t.TEXTURE_CUBE_MAP,ne.__webglTexture),me(t.TEXTURE_CUBE_MAP,w,ye);for(let se=0;se<6;se++)if(p&&w.mipmaps&&w.mipmaps.length>0)for(let K=0;K<w.mipmaps.length;K++)Ee(X.__webglFramebuffer[se][K],D,w,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+se,K);else Ee(X.__webglFramebuffer[se],D,w,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+se,0);E(w,ye)&&T(t.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(ae){const se=D.texture;for(let K=0,P=se.length;K<P;K++){const Q=se[K],ge=s.get(Q);r.bindTexture(t.TEXTURE_2D,ge.__webglTexture),me(t.TEXTURE_2D,Q,ye),Ee(X.__webglFramebuffer,D,Q,t.COLOR_ATTACHMENT0+K,t.TEXTURE_2D,0),E(Q,ye)&&T(t.TEXTURE_2D)}r.unbindTexture()}else{let se=t.TEXTURE_2D;if((D.isWebGL3DRenderTarget||D.isWebGLArrayRenderTarget)&&(p?se=D.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(se,ne.__webglTexture),me(se,w,ye),p&&w.mipmaps&&w.mipmaps.length>0)for(let K=0;K<w.mipmaps.length;K++)Ee(X.__webglFramebuffer[K],D,w,t.COLOR_ATTACHMENT0,se,K);else Ee(X.__webglFramebuffer,D,w,t.COLOR_ATTACHMENT0,se,0);E(w,ye)&&T(se),r.unbindTexture()}D.depthBuffer&&_e(D)}function ke(D){const w=S(D)||p,X=D.isWebGLMultipleRenderTargets===!0?D.texture:[D.texture];for(let ne=0,re=X.length;ne<re;ne++){const ae=X[ne];if(E(ae,w)){const ye=D.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,se=s.get(ae).__webglTexture;r.bindTexture(ye,se),T(ye),r.unbindTexture()}}}function Ce(D){if(p&&D.samples>0&&Ie(D)===!1){const w=D.isWebGLMultipleRenderTargets?D.texture:[D.texture],X=D.width,ne=D.height;let re=t.COLOR_BUFFER_BIT;const ae=[],ye=D.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,se=s.get(D),K=D.isWebGLMultipleRenderTargets===!0;if(K)for(let P=0;P<w.length;P++)r.bindFramebuffer(t.FRAMEBUFFER,se.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.RENDERBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,se.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.TEXTURE_2D,null,0);r.bindFramebuffer(t.READ_FRAMEBUFFER,se.__webglMultisampledFramebuffer),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,se.__webglFramebuffer);for(let P=0;P<w.length;P++){ae.push(t.COLOR_ATTACHMENT0+P),D.depthBuffer&&ae.push(ye);const Q=se.__ignoreDepthValues!==void 0?se.__ignoreDepthValues:!1;if(Q===!1&&(D.depthBuffer&&(re|=t.DEPTH_BUFFER_BIT),D.stencilBuffer&&(re|=t.STENCIL_BUFFER_BIT)),K&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,se.__webglColorRenderbuffer[P]),Q===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[ye]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[ye])),K){const ge=s.get(w[P]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ge,0)}t.blitFramebuffer(0,0,X,ne,0,0,X,ne,re,t.NEAREST),u&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ae)}if(r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),K)for(let P=0;P<w.length;P++){r.bindFramebuffer(t.FRAMEBUFFER,se.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.RENDERBUFFER,se.__webglColorRenderbuffer[P]);const Q=s.get(w[P]).__webglTexture;r.bindFramebuffer(t.FRAMEBUFFER,se.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.TEXTURE_2D,Q,0)}r.bindFramebuffer(t.DRAW_FRAMEBUFFER,se.__webglMultisampledFramebuffer)}}function Te(D){return Math.min(d,D.samples)}function Ie(D){const w=s.get(D);return p&&D.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&w.__useRenderToTexture!==!1}function We(D){const w=o.render.frame;h.get(D)!==w&&(h.set(D,w),D.update())}function ze(D,w){const X=D.colorSpace,ne=D.format,re=D.type;return D.isCompressedTexture===!0||D.format===_SRGBAFormat||X!==LinearSRGBColorSpace&&X!==NoColorSpace&&(X===SRGBColorSpace?p===!1?e.has("EXT_sRGB")===!0&&ne===RGBAFormat?(D.format=_SRGBAFormat,D.minFilter=LinearFilter,D.generateMipmaps=!1):w=ImageUtils.sRGBToLinear(w):(ne!==RGBAFormat||re!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",X)),w}this.allocateTextureUnit=U,this.resetTextureUnits=k,this.setTexture2D=W,this.setTexture2DArray=z,this.setTexture3D=j,this.setTextureCube=ee,this.rebindTextures=ve,this.setupRenderTarget=Me,this.updateRenderTargetMipmap=ke,this.updateMultisampleRenderTarget=Ce,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=Ie}function WebGLUtils(t,e,r){const s=r.isWebGL2;function n(i,o=NoColorSpace){let p;if(i===UnsignedByteType)return t.UNSIGNED_BYTE;if(i===UnsignedShort4444Type)return t.UNSIGNED_SHORT_4_4_4_4;if(i===UnsignedShort5551Type)return t.UNSIGNED_SHORT_5_5_5_1;if(i===ByteType)return t.BYTE;if(i===ShortType)return t.SHORT;if(i===UnsignedShortType)return t.UNSIGNED_SHORT;if(i===IntType)return t.INT;if(i===UnsignedIntType)return t.UNSIGNED_INT;if(i===FloatType)return t.FLOAT;if(i===HalfFloatType)return s?t.HALF_FLOAT:(p=e.get("OES_texture_half_float"),p!==null?p.HALF_FLOAT_OES:null);if(i===AlphaFormat)return t.ALPHA;if(i===RGBAFormat)return t.RGBA;if(i===LuminanceFormat)return t.LUMINANCE;if(i===LuminanceAlphaFormat)return t.LUMINANCE_ALPHA;if(i===DepthFormat)return t.DEPTH_COMPONENT;if(i===DepthStencilFormat)return t.DEPTH_STENCIL;if(i===_SRGBAFormat)return p=e.get("EXT_sRGB"),p!==null?p.SRGB_ALPHA_EXT:null;if(i===RedFormat)return t.RED;if(i===RedIntegerFormat)return t.RED_INTEGER;if(i===RGFormat)return t.RG;if(i===RGIntegerFormat)return t.RG_INTEGER;if(i===RGBAIntegerFormat)return t.RGBA_INTEGER;if(i===RGB_S3TC_DXT1_Format||i===RGBA_S3TC_DXT1_Format||i===RGBA_S3TC_DXT3_Format||i===RGBA_S3TC_DXT5_Format)if(o===SRGBColorSpace)if(p=e.get("WEBGL_compressed_texture_s3tc_srgb"),p!==null){if(i===RGB_S3TC_DXT1_Format)return p.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===RGBA_S3TC_DXT1_Format)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===RGBA_S3TC_DXT3_Format)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===RGBA_S3TC_DXT5_Format)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(p=e.get("WEBGL_compressed_texture_s3tc"),p!==null){if(i===RGB_S3TC_DXT1_Format)return p.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===RGBA_S3TC_DXT1_Format)return p.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===RGBA_S3TC_DXT3_Format)return p.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===RGBA_S3TC_DXT5_Format)return p.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===RGB_PVRTC_4BPPV1_Format||i===RGB_PVRTC_2BPPV1_Format||i===RGBA_PVRTC_4BPPV1_Format||i===RGBA_PVRTC_2BPPV1_Format)if(p=e.get("WEBGL_compressed_texture_pvrtc"),p!==null){if(i===RGB_PVRTC_4BPPV1_Format)return p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===RGB_PVRTC_2BPPV1_Format)return p.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===RGBA_PVRTC_4BPPV1_Format)return p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===RGBA_PVRTC_2BPPV1_Format)return p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===RGB_ETC1_Format)return p=e.get("WEBGL_compressed_texture_etc1"),p!==null?p.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===RGB_ETC2_Format||i===RGBA_ETC2_EAC_Format)if(p=e.get("WEBGL_compressed_texture_etc"),p!==null){if(i===RGB_ETC2_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ETC2:p.COMPRESSED_RGB8_ETC2;if(i===RGBA_ETC2_EAC_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:p.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===RGBA_ASTC_4x4_Format||i===RGBA_ASTC_5x4_Format||i===RGBA_ASTC_5x5_Format||i===RGBA_ASTC_6x5_Format||i===RGBA_ASTC_6x6_Format||i===RGBA_ASTC_8x5_Format||i===RGBA_ASTC_8x6_Format||i===RGBA_ASTC_8x8_Format||i===RGBA_ASTC_10x5_Format||i===RGBA_ASTC_10x6_Format||i===RGBA_ASTC_10x8_Format||i===RGBA_ASTC_10x10_Format||i===RGBA_ASTC_12x10_Format||i===RGBA_ASTC_12x12_Format)if(p=e.get("WEBGL_compressed_texture_astc"),p!==null){if(i===RGBA_ASTC_4x4_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:p.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===RGBA_ASTC_5x4_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:p.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===RGBA_ASTC_5x5_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:p.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===RGBA_ASTC_6x5_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:p.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===RGBA_ASTC_6x6_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:p.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===RGBA_ASTC_8x5_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:p.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===RGBA_ASTC_8x6_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:p.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===RGBA_ASTC_8x8_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:p.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===RGBA_ASTC_10x5_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:p.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===RGBA_ASTC_10x6_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:p.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===RGBA_ASTC_10x8_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:p.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===RGBA_ASTC_10x10_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:p.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===RGBA_ASTC_12x10_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:p.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===RGBA_ASTC_12x12_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:p.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===RGBA_BPTC_Format)if(p=e.get("EXT_texture_compression_bptc"),p!==null){if(i===RGBA_BPTC_Format)return o===SRGBColorSpace?p.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:p.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(i===RED_RGTC1_Format||i===SIGNED_RED_RGTC1_Format||i===RED_GREEN_RGTC2_Format||i===SIGNED_RED_GREEN_RGTC2_Format)if(p=e.get("EXT_texture_compression_rgtc"),p!==null){if(i===RGBA_BPTC_Format)return p.COMPRESSED_RED_RGTC1_EXT;if(i===SIGNED_RED_RGTC1_Format)return p.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===RED_GREEN_RGTC2_Format)return p.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===SIGNED_RED_GREEN_RGTC2_Format)return p.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===UnsignedInt248Type?s?t.UNSIGNED_INT_24_8:(p=e.get("WEBGL_depth_texture"),p!==null?p.UNSIGNED_INT_24_8_WEBGL:null):t[i]!==void 0?t[i]:null}return{convert:n}}class ArrayCamera extends PerspectiveCamera{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const s of e.hand.values())this._getHandJoint(r,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,s){let n=null,i=null,o=null;const p=this._targetRay,l=this._grip,c=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const m=r.getJointPose(y,s),_=this._getHandJoint(c,y);m!==null&&(_.matrix.fromArray(m.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=m.radius),_.visible=m!==null}const f=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],g=f.position.distanceTo(d.position),u=.02,h=.005;c.inputState.pinching&&g>u+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&g<=u-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(i=r.getPose(e.gripSpace,s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1));p!==null&&(n=r.getPose(e.targetRaySpace,s),n===null&&i!==null&&(n=i),n!==null&&(p.matrix.fromArray(n.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,n.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(n.linearVelocity)):p.hasLinearVelocity=!1,n.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(n.angularVelocity)):p.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return p!==null&&(p.visible=n!==null),l!==null&&(l.visible=i!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const s=new Group;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[r.jointName]=s,e.add(s)}return e.joints[r.jointName]}}class DepthTexture extends Texture{constructor(e,r,s,n,i,o,p,l,c,f){if(f=f!==void 0?f:DepthFormat,f!==DepthFormat&&f!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");s===void 0&&f===DepthFormat&&(s=UnsignedIntType),s===void 0&&f===DepthStencilFormat&&(s=UnsignedInt248Type),super(null,n,i,o,p,l,f,s,c),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=p!==void 0?p:NearestFilter,this.minFilter=l!==void 0?l:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class WebXRManager extends EventDispatcher{constructor(e,r){super();const s=this;let n=null,i=1,o=null,p="local-floor",l=1,c=null,f=null,d=null,g=null,u=null,h=null;const y=r.getContextAttributes();let m=null,_=null;const b=[],M=[],S=new PerspectiveCamera;S.layers.enable(1),S.viewport=new Vector4;const v=new PerspectiveCamera;v.layers.enable(2),v.viewport=new Vector4;const E=[S,v],T=new ArrayCamera;T.layers.enable(1),T.layers.enable(2);let A=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let j=b[z];return j===void 0&&(j=new WebXRController,b[z]=j),j.getTargetRaySpace()},this.getControllerGrip=function(z){let j=b[z];return j===void 0&&(j=new WebXRController,b[z]=j),j.getGripSpace()},this.getHand=function(z){let j=b[z];return j===void 0&&(j=new WebXRController,b[z]=j),j.getHandSpace()};function x(z){const j=M.indexOf(z.inputSource);if(j===-1)return;const ee=b[j];ee!==void 0&&(ee.update(z.inputSource,z.frame,c||o),ee.dispatchEvent({type:z.type,data:z.inputSource}))}function C(){n.removeEventListener("select",x),n.removeEventListener("selectstart",x),n.removeEventListener("selectend",x),n.removeEventListener("squeeze",x),n.removeEventListener("squeezestart",x),n.removeEventListener("squeezeend",x),n.removeEventListener("end",C),n.removeEventListener("inputsourceschange",O);for(let z=0;z<b.length;z++){const j=M[z];j!==null&&(M[z]=null,b[z].disconnect(j))}A=null,R=null,e.setRenderTarget(m),u=null,g=null,d=null,n=null,_=null,W.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){i=z,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){p=z,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return g!==null?g:u},this.getBinding=function(){return d},this.getFrame=function(){return h},this.getSession=function(){return n},this.setSession=async function(z){if(n=z,n!==null){if(m=e.getRenderTarget(),n.addEventListener("select",x),n.addEventListener("selectstart",x),n.addEventListener("selectend",x),n.addEventListener("squeeze",x),n.addEventListener("squeezestart",x),n.addEventListener("squeezeend",x),n.addEventListener("end",C),n.addEventListener("inputsourceschange",O),y.xrCompatible!==!0&&await r.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const j={antialias:n.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:i};u=new XRWebGLLayer(n,r,j),n.updateRenderState({baseLayer:u}),_=new WebGLRenderTarget(u.framebufferWidth,u.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let j=null,ee=null,te=null;y.depth&&(te=y.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,j=y.stencil?DepthStencilFormat:DepthFormat,ee=y.stencil?UnsignedInt248Type:UnsignedIntType);const ie={colorFormat:r.RGBA8,depthFormat:te,scaleFactor:i};d=new XRWebGLBinding(n,r),g=d.createProjectionLayer(ie),n.updateRenderState({layers:[g]}),_=new WebGLRenderTarget(g.textureWidth,g.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(g.textureWidth,g.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const le=e.properties.get(_);le.__ignoreDepthValues=g.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await n.requestReferenceSpace(p),W.setContext(n),W.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(n!==null)return n.environmentBlendMode};function O(z){for(let j=0;j<z.removed.length;j++){const ee=z.removed[j],te=M.indexOf(ee);te>=0&&(M[te]=null,b[te].disconnect(ee))}for(let j=0;j<z.added.length;j++){const ee=z.added[j];let te=M.indexOf(ee);if(te===-1){for(let le=0;le<b.length;le++)if(le>=M.length){M.push(ee),te=le;break}else if(M[le]===null){M[le]=ee,te=le;break}if(te===-1)break}const ie=b[te];ie&&ie.connect(ee)}}const F=new Vector3,L=new Vector3;function I(z,j,ee){F.setFromMatrixPosition(j.matrixWorld),L.setFromMatrixPosition(ee.matrixWorld);const te=F.distanceTo(L),ie=j.projectionMatrix.elements,le=ee.projectionMatrix.elements,me=ie[14]/(ie[10]-1),fe=ie[14]/(ie[10]+1),Oe=(ie[9]+1)/ie[5],Ue=(ie[9]-1)/ie[5],Ee=(ie[8]-1)/ie[0],q=(le[8]+1)/le[0],je=me*Ee,_e=me*q,ve=te/(-Ee+q),Me=ve*-Ee;j.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(Me),z.translateZ(ve),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const ke=me+ve,Ce=fe+ve,Te=je-Me,Ie=_e+(te-Me),We=Oe*fe/Ce*ke,ze=Ue*fe/Ce*ke;z.projectionMatrix.makePerspective(Te,Ie,We,ze,ke,Ce),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}function N(z,j){j===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(j.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(n===null)return;T.near=v.near=S.near=z.near,T.far=v.far=S.far=z.far,(A!==T.near||R!==T.far)&&(n.updateRenderState({depthNear:T.near,depthFar:T.far}),A=T.near,R=T.far);const j=z.parent,ee=T.cameras;N(T,j);for(let te=0;te<ee.length;te++)N(ee[te],j);ee.length===2?I(T,S,v):T.projectionMatrix.copy(S.projectionMatrix),k(z,T,j)};function k(z,j,ee){ee===null?z.matrix.copy(j.matrixWorld):(z.matrix.copy(ee.matrixWorld),z.matrix.invert(),z.matrix.multiply(j.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0);const te=z.children;for(let ie=0,le=te.length;ie<le;ie++)te[ie].updateMatrixWorld(!0);z.projectionMatrix.copy(j.projectionMatrix),z.projectionMatrixInverse.copy(j.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=RAD2DEG*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(g===null&&u===null))return l},this.setFoveation=function(z){l=z,g!==null&&(g.fixedFoveation=z),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=z)};let U=null;function H(z,j){if(f=j.getViewerPose(c||o),h=j,f!==null){const ee=f.views;u!==null&&(e.setRenderTargetFramebuffer(_,u.framebuffer),e.setRenderTarget(_));let te=!1;ee.length!==T.cameras.length&&(T.cameras.length=0,te=!0);for(let ie=0;ie<ee.length;ie++){const le=ee[ie];let me=null;if(u!==null)me=u.getViewport(le);else{const Oe=d.getViewSubImage(g,le);me=Oe.viewport,ie===0&&(e.setRenderTargetTextures(_,Oe.colorTexture,g.ignoreDepthValues?void 0:Oe.depthStencilTexture),e.setRenderTarget(_))}let fe=E[ie];fe===void 0&&(fe=new PerspectiveCamera,fe.layers.enable(ie),fe.viewport=new Vector4,E[ie]=fe),fe.matrix.fromArray(le.transform.matrix),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.projectionMatrix.fromArray(le.projectionMatrix),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert(),fe.viewport.set(me.x,me.y,me.width,me.height),ie===0&&(T.matrix.copy(fe.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),te===!0&&T.cameras.push(fe)}}for(let ee=0;ee<b.length;ee++){const te=M[ee],ie=b[ee];te!==null&&ie!==void 0&&ie.update(te,j,c||o)}U&&U(z,j),j.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:j}),h=null}const W=new WebGLAnimation;W.setAnimationLoop(H),this.setAnimationLoop=function(z){U=z},this.dispose=function(){}}}function WebGLMaterials(t,e){function r(m,_){m.matrixAutoUpdate===!0&&m.updateMatrix(),_.value.copy(m.matrix)}function s(m,_){_.color.getRGB(m.fogColor.value,getUnlitUniformColorSpace(t)),_.isFog?(m.fogNear.value=_.near,m.fogFar.value=_.far):_.isFogExp2&&(m.fogDensity.value=_.density)}function n(m,_,b,M,S){_.isMeshBasicMaterial||_.isMeshLambertMaterial?i(m,_):_.isMeshToonMaterial?(i(m,_),d(m,_)):_.isMeshPhongMaterial?(i(m,_),f(m,_)):_.isMeshStandardMaterial?(i(m,_),g(m,_),_.isMeshPhysicalMaterial&&u(m,_,S)):_.isMeshMatcapMaterial?(i(m,_),h(m,_)):_.isMeshDepthMaterial?i(m,_):_.isMeshDistanceMaterial?(i(m,_),y(m,_)):_.isMeshNormalMaterial?i(m,_):_.isLineBasicMaterial?(o(m,_),_.isLineDashedMaterial&&p(m,_)):_.isPointsMaterial?l(m,_,b,M):_.isSpriteMaterial?c(m,_):_.isShadowMaterial?(m.color.value.copy(_.color),m.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function i(m,_){m.opacity.value=_.opacity,_.color&&m.diffuse.value.copy(_.color),_.emissive&&m.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(m.map.value=_.map,r(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,r(_.alphaMap,m.alphaMapTransform)),_.bumpMap&&(m.bumpMap.value=_.bumpMap,r(_.bumpMap,m.bumpMapTransform),m.bumpScale.value=_.bumpScale,_.side===BackSide&&(m.bumpScale.value*=-1)),_.normalMap&&(m.normalMap.value=_.normalMap,r(_.normalMap,m.normalMapTransform),m.normalScale.value.copy(_.normalScale),_.side===BackSide&&m.normalScale.value.negate()),_.displacementMap&&(m.displacementMap.value=_.displacementMap,r(_.displacementMap,m.displacementMapTransform),m.displacementScale.value=_.displacementScale,m.displacementBias.value=_.displacementBias),_.emissiveMap&&(m.emissiveMap.value=_.emissiveMap,r(_.emissiveMap,m.emissiveMapTransform)),_.specularMap&&(m.specularMap.value=_.specularMap,r(_.specularMap,m.specularMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest);const b=e.get(_).envMap;if(b&&(m.envMap.value=b,m.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=_.reflectivity,m.ior.value=_.ior,m.refractionRatio.value=_.refractionRatio),_.lightMap){m.lightMap.value=_.lightMap;const M=t._useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=_.lightMapIntensity*M,r(_.lightMap,m.lightMapTransform)}_.aoMap&&(m.aoMap.value=_.aoMap,m.aoMapIntensity.value=_.aoMapIntensity,r(_.aoMap,m.aoMapTransform))}function o(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,_.map&&(m.map.value=_.map,r(_.map,m.mapTransform))}function p(m,_){m.dashSize.value=_.dashSize,m.totalSize.value=_.dashSize+_.gapSize,m.scale.value=_.scale}function l(m,_,b,M){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.size.value=_.size*b,m.scale.value=M*.5,_.map&&(m.map.value=_.map,r(_.map,m.uvTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,r(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}function c(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.rotation.value=_.rotation,_.map&&(m.map.value=_.map,r(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,r(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}function f(m,_){m.specular.value.copy(_.specular),m.shininess.value=Math.max(_.shininess,1e-4)}function d(m,_){_.gradientMap&&(m.gradientMap.value=_.gradientMap)}function g(m,_){m.metalness.value=_.metalness,_.metalnessMap&&(m.metalnessMap.value=_.metalnessMap,r(_.metalnessMap,m.metalnessMapTransform)),m.roughness.value=_.roughness,_.roughnessMap&&(m.roughnessMap.value=_.roughnessMap,r(_.roughnessMap,m.roughnessMapTransform)),e.get(_).envMap&&(m.envMapIntensity.value=_.envMapIntensity)}function u(m,_,b){m.ior.value=_.ior,_.sheen>0&&(m.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),m.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(m.sheenColorMap.value=_.sheenColorMap,r(_.sheenColorMap,m.sheenColorMapTransform)),_.sheenRoughnessMap&&(m.sheenRoughnessMap.value=_.sheenRoughnessMap,r(_.sheenRoughnessMap,m.sheenRoughnessMapTransform))),_.clearcoat>0&&(m.clearcoat.value=_.clearcoat,m.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(m.clearcoatMap.value=_.clearcoatMap,r(_.clearcoatMap,m.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,r(_.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(m.clearcoatNormalMap.value=_.clearcoatNormalMap,r(_.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===BackSide&&m.clearcoatNormalScale.value.negate())),_.iridescence>0&&(m.iridescence.value=_.iridescence,m.iridescenceIOR.value=_.iridescenceIOR,m.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(m.iridescenceMap.value=_.iridescenceMap,r(_.iridescenceMap,m.iridescenceMapTransform)),_.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=_.iridescenceThicknessMap,r(_.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),_.transmission>0&&(m.transmission.value=_.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),_.transmissionMap&&(m.transmissionMap.value=_.transmissionMap,r(_.transmissionMap,m.transmissionMapTransform)),m.thickness.value=_.thickness,_.thicknessMap&&(m.thicknessMap.value=_.thicknessMap,r(_.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=_.attenuationDistance,m.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(m.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(m.anisotropyMap.value=_.anisotropyMap,r(_.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=_.specularIntensity,m.specularColor.value.copy(_.specularColor),_.specularColorMap&&(m.specularColorMap.value=_.specularColorMap,r(_.specularColorMap,m.specularColorMapTransform)),_.specularIntensityMap&&(m.specularIntensityMap.value=_.specularIntensityMap,r(_.specularIntensityMap,m.specularIntensityMapTransform))}function h(m,_){_.matcap&&(m.matcap.value=_.matcap)}function y(m,_){const b=e.get(_).light;m.referencePosition.value.setFromMatrixPosition(b.matrixWorld),m.nearDistance.value=b.shadow.camera.near,m.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:s,refreshMaterialUniforms:n}}function WebGLUniformsGroups(t,e,r,s){let n={},i={},o=[];const p=r.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(b,M){const S=M.program;s.uniformBlockBinding(b,S)}function c(b,M){let S=n[b.id];S===void 0&&(h(b),S=f(b),n[b.id]=S,b.addEventListener("dispose",m));const v=M.program;s.updateUBOMapping(b,v);const E=e.render.frame;i[b.id]!==E&&(g(b),i[b.id]=E)}function f(b){const M=d();b.__bindingPointIndex=M;const S=t.createBuffer(),v=b.__size,E=b.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,v,E),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,M,S),S}function d(){for(let b=0;b<p;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(b){const M=n[b.id],S=b.uniforms,v=b.__cache;t.bindBuffer(t.UNIFORM_BUFFER,M);for(let E=0,T=S.length;E<T;E++){const A=S[E];if(u(A,E,v)===!0){const R=A.__offset,x=Array.isArray(A.value)?A.value:[A.value];let C=0;for(let O=0;O<x.length;O++){const F=x[O],L=y(F);typeof F=="number"?(A.__data[0]=F,t.bufferSubData(t.UNIFORM_BUFFER,R+C,A.__data)):F.isMatrix3?(A.__data[0]=F.elements[0],A.__data[1]=F.elements[1],A.__data[2]=F.elements[2],A.__data[3]=F.elements[0],A.__data[4]=F.elements[3],A.__data[5]=F.elements[4],A.__data[6]=F.elements[5],A.__data[7]=F.elements[0],A.__data[8]=F.elements[6],A.__data[9]=F.elements[7],A.__data[10]=F.elements[8],A.__data[11]=F.elements[0]):(F.toArray(A.__data,C),C+=L.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,R,A.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function u(b,M,S){const v=b.value;if(S[M]===void 0){if(typeof v=="number")S[M]=v;else{const E=Array.isArray(v)?v:[v],T=[];for(let A=0;A<E.length;A++)T.push(E[A].clone());S[M]=T}return!0}else if(typeof v=="number"){if(S[M]!==v)return S[M]=v,!0}else{const E=Array.isArray(S[M])?S[M]:[S[M]],T=Array.isArray(v)?v:[v];for(let A=0;A<E.length;A++){const R=E[A];if(R.equals(T[A])===!1)return R.copy(T[A]),!0}}return!1}function h(b){const M=b.uniforms;let S=0;const v=16;let E=0;for(let T=0,A=M.length;T<A;T++){const R=M[T],x={boundary:0,storage:0},C=Array.isArray(R.value)?R.value:[R.value];for(let O=0,F=C.length;O<F;O++){const L=C[O],I=y(L);x.boundary+=I.boundary,x.storage+=I.storage}if(R.__data=new Float32Array(x.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=S,T>0){E=S%v;const O=v-E;E!==0&&O-x.boundary<0&&(S+=v-E,R.__offset=S)}S+=x.storage}return E=S%v,E>0&&(S+=v-E),b.__size=S,b.__cache={},this}function y(b){const M={boundary:0,storage:0};return typeof b=="number"?(M.boundary=4,M.storage=4):b.isVector2?(M.boundary=8,M.storage=8):b.isVector3||b.isColor?(M.boundary=16,M.storage=12):b.isVector4?(M.boundary=16,M.storage=16):b.isMatrix3?(M.boundary=48,M.storage=48):b.isMatrix4?(M.boundary=64,M.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),M}function m(b){const M=b.target;M.removeEventListener("dispose",m);const S=o.indexOf(M.__bindingPointIndex);o.splice(S,1),t.deleteBuffer(n[M.id]),delete n[M.id],delete i[M.id]}function _(){for(const b in n)t.deleteBuffer(n[b]);o=[],n={},i={}}return{bind:l,update:c,dispose:_}}function createCanvasElement(){const t=createElementNS("canvas");return t.style.display="block",t}class WebGLRenderer{constructor(e={}){const{canvas:r=createCanvasElement(),context:s=null,depth:n=!0,stencil:i=!0,alpha:o=!1,antialias:p=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let g;s!==null?g=s.getContextAttributes().alpha:g=o;const u=new Uint32Array(4),h=new Int32Array(4);let y=null,m=null;const _=[],b=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const M=this;let S=!1,v=0,E=0,T=null,A=-1,R=null;const x=new Vector4,C=new Vector4;let O=null;const F=new Color(0);let L=0,I=r.width,N=r.height,k=1,U=null,H=null;const W=new Vector4(0,0,I,N),z=new Vector4(0,0,I,N);let j=!1;const ee=new Frustum;let te=!1,ie=!1,le=null;const me=new Matrix4,fe=new Vector2,Oe=new Vector3,Ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return T===null?k:1}let q=s;function je(B,$){for(let J=0;J<B.length;J++){const V=B[J],Z=r.getContext(V,$);if(Z!==null)return Z}return null}try{const B={alpha:!0,depth:n,stencil:i,antialias:p,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${REVISION}`),r.addEventListener("webglcontextlost",de,!1),r.addEventListener("webglcontextrestored",Y,!1),r.addEventListener("webglcontextcreationerror",oe,!1),q===null){const $=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&$.shift(),q=je($,B),q===null)throw je($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&q instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let _e,ve,Me,ke,Ce,Te,Ie,We,ze,D,w,X,ne,re,ae,ye,se,K,P,Q,ge,pe,ue,Ae;function De(){_e=new WebGLExtensions(q),ve=new WebGLCapabilities(q,_e,e),_e.init(ve),pe=new WebGLUtils(q,_e,ve),Me=new WebGLState(q,_e,ve),ke=new WebGLInfo(q),Ce=new WebGLProperties,Te=new WebGLTextures(q,_e,Me,Ce,ve,pe,ke),Ie=new WebGLCubeMaps(M),We=new WebGLCubeUVMaps(M),ze=new WebGLAttributes(q,ve),ue=new WebGLBindingStates(q,_e,ze,ve),D=new WebGLGeometries(q,ze,ke,ue),w=new WebGLObjects(q,D,ze,ke),P=new WebGLMorphtargets(q,ve,Te),ye=new WebGLClipping(Ce),X=new WebGLPrograms(M,Ie,We,_e,ve,ue,ye),ne=new WebGLMaterials(M,Ce),re=new WebGLRenderLists,ae=new WebGLRenderStates(_e,ve),K=new WebGLBackground(M,Ie,We,Me,w,g,l),se=new WebGLShadowMap(M,w,ve),Ae=new WebGLUniformsGroups(q,ke,ve,Me),Q=new WebGLBufferRenderer(q,_e,ke,ve),ge=new WebGLIndexedBufferRenderer(q,_e,ke,ve),ke.programs=X.programs,M.capabilities=ve,M.extensions=_e,M.properties=Ce,M.renderLists=re,M.shadowMap=se,M.state=Me,M.info=ke}De();const G=new WebXRManager(M,q);this.xr=G,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const B=_e.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=_e.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(B){B!==void 0&&(k=B,this.setSize(I,N,!1))},this.getSize=function(B){return B.set(I,N)},this.setSize=function(B,$,J=!0){if(G.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}I=B,N=$,r.width=Math.floor(B*k),r.height=Math.floor($*k),J===!0&&(r.style.width=B+"px",r.style.height=$+"px"),this.setViewport(0,0,B,$)},this.getDrawingBufferSize=function(B){return B.set(I*k,N*k).floor()},this.setDrawingBufferSize=function(B,$,J){I=B,N=$,k=J,r.width=Math.floor(B*J),r.height=Math.floor($*J),this.setViewport(0,0,B,$)},this.getCurrentViewport=function(B){return B.copy(x)},this.getViewport=function(B){return B.copy(W)},this.setViewport=function(B,$,J,V){B.isVector4?W.set(B.x,B.y,B.z,B.w):W.set(B,$,J,V),Me.viewport(x.copy(W).multiplyScalar(k).floor())},this.getScissor=function(B){return B.copy(z)},this.setScissor=function(B,$,J,V){B.isVector4?z.set(B.x,B.y,B.z,B.w):z.set(B,$,J,V),Me.scissor(C.copy(z).multiplyScalar(k).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(B){Me.setScissorTest(j=B)},this.setOpaqueSort=function(B){U=B},this.setTransparentSort=function(B){H=B},this.getClearColor=function(B){return B.copy(K.getClearColor())},this.setClearColor=function(){K.setClearColor.apply(K,arguments)},this.getClearAlpha=function(){return K.getClearAlpha()},this.setClearAlpha=function(){K.setClearAlpha.apply(K,arguments)},this.clear=function(B=!0,$=!0,J=!0){let V=0;if(B){let Z=!1;if(T!==null){const he=T.texture.format;Z=he===RGBAIntegerFormat||he===RGIntegerFormat||he===RedIntegerFormat}if(Z){const he=T.texture.type,be=he===UnsignedByteType||he===UnsignedIntType||he===UnsignedShortType||he===UnsignedInt248Type||he===UnsignedShort4444Type||he===UnsignedShort5551Type,Re=K.getClearColor(),xe=K.getClearAlpha(),Le=Re.r,Se=Re.g,Fe=Re.b;be?(u[0]=Le,u[1]=Se,u[2]=Fe,u[3]=xe,q.clearBufferuiv(q.COLOR,0,u)):(h[0]=Le,h[1]=Se,h[2]=Fe,h[3]=xe,q.clearBufferiv(q.COLOR,0,h))}else V|=q.COLOR_BUFFER_BIT}$&&(V|=q.DEPTH_BUFFER_BIT),J&&(V|=q.STENCIL_BUFFER_BIT),q.clear(V)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",de,!1),r.removeEventListener("webglcontextrestored",Y,!1),r.removeEventListener("webglcontextcreationerror",oe,!1),re.dispose(),ae.dispose(),Ce.dispose(),Ie.dispose(),We.dispose(),w.dispose(),ue.dispose(),Ae.dispose(),X.dispose(),G.dispose(),G.removeEventListener("sessionstart",Ge),G.removeEventListener("sessionend",Qe),le&&(le.dispose(),le=null),Ye.stop()};function de(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Y(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const B=ke.autoReset,$=se.enabled,J=se.autoUpdate,V=se.needsUpdate,Z=se.type;De(),ke.autoReset=B,se.enabled=$,se.autoUpdate=J,se.needsUpdate=V,se.type=Z}function oe(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function ce(B){const $=B.target;$.removeEventListener("dispose",ce),we($)}function we(B){Pe(B),Ce.remove(B)}function Pe(B){const $=Ce.get(B).programs;$!==void 0&&($.forEach(function(J){X.releaseProgram(J)}),B.isShaderMaterial&&X.releaseShaderCache(B))}this.renderBufferDirect=function(B,$,J,V,Z,he){$===null&&($=Ue);const be=Z.isMesh&&Z.matrixWorld.determinant()<0,Re=_t(B,$,J,V,Z);Me.setMaterial(V,be);let xe=J.index,Le=1;if(V.wireframe===!0){if(xe=D.getWireframeAttribute(J),xe===void 0)return;Le=2}const Se=J.drawRange,Fe=J.attributes.position;let He=Se.start*Le,Ve=(Se.start+Se.count)*Le;he!==null&&(He=Math.max(He,he.start*Le),Ve=Math.min(Ve,(he.start+he.count)*Le)),xe!==null?(He=Math.max(He,0),Ve=Math.min(Ve,xe.count)):Fe!=null&&(He=Math.max(He,0),Ve=Math.min(Ve,Fe.count));const Je=Ve-He;if(Je<0||Je===1/0)return;ue.setup(Z,V,Re,J,xe);let et,qe=Q;if(xe!==null&&(et=ze.get(xe),qe=ge,qe.setIndex(et)),Z.isMesh)V.wireframe===!0?(Me.setLineWidth(V.wireframeLinewidth*Ee()),qe.setMode(q.LINES)):qe.setMode(q.TRIANGLES);else if(Z.isLine){let Be=V.linewidth;Be===void 0&&(Be=1),Me.setLineWidth(Be*Ee()),Z.isLineSegments?qe.setMode(q.LINES):Z.isLineLoop?qe.setMode(q.LINE_LOOP):qe.setMode(q.LINE_STRIP)}else Z.isPoints?qe.setMode(q.POINTS):Z.isSprite&&qe.setMode(q.TRIANGLES);if(Z.isInstancedMesh)qe.renderInstances(He,Je,Z.count);else if(J.isInstancedBufferGeometry){const Be=J._maxInstanceCount!==void 0?J._maxInstanceCount:1/0,st=Math.min(J.instanceCount,Be);qe.renderInstances(He,Je,st)}else qe.render(He,Je)},this.compile=function(B,$){function J(V,Z,he){V.transparent===!0&&V.side===DoubleSide&&V.forceSinglePass===!1?(V.side=BackSide,V.needsUpdate=!0,at(V,Z,he),V.side=FrontSide,V.needsUpdate=!0,at(V,Z,he),V.side=DoubleSide):at(V,Z,he)}m=ae.get(B),m.init(),b.push(m),B.traverseVisible(function(V){V.isLight&&V.layers.test($.layers)&&(m.pushLight(V),V.castShadow&&m.pushShadow(V))}),m.setupLights(M._useLegacyLights),B.traverse(function(V){const Z=V.material;if(Z)if(Array.isArray(Z))for(let he=0;he<Z.length;he++){const be=Z[he];J(be,B,V)}else J(Z,B,V)}),b.pop(),m=null};let Ne=null;function tt(B){Ne&&Ne(B)}function Ge(){Ye.stop()}function Qe(){Ye.start()}const Ye=new WebGLAnimation;Ye.setAnimationLoop(tt),typeof self<"u"&&Ye.setContext(self),this.setAnimationLoop=function(B){Ne=B,G.setAnimationLoop(B),B===null?Ye.stop():Ye.start()},G.addEventListener("sessionstart",Ge),G.addEventListener("sessionend",Qe),this.render=function(B,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),G.enabled===!0&&G.isPresenting===!0&&(G.cameraAutoUpdate===!0&&G.updateCamera($),$=G.getCamera()),B.isScene===!0&&B.onBeforeRender(M,B,$,T),m=ae.get(B,b.length),m.init(),b.push(m),me.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),ee.setFromProjectionMatrix(me),ie=this.localClippingEnabled,te=ye.init(this.clippingPlanes,ie),y=re.get(B,_.length),y.init(),_.push(y),ct(B,$,0,M.sortObjects),y.finish(),M.sortObjects===!0&&y.sort(U,H),this.info.render.frame++,te===!0&&ye.beginShadows();const J=m.state.shadowsArray;if(se.render(J,B,$),te===!0&&ye.endShadows(),this.info.autoReset===!0&&this.info.reset(),K.render(y,B),m.setupLights(M._useLegacyLights),$.isArrayCamera){const V=$.cameras;for(let Z=0,he=V.length;Z<he;Z++){const be=V[Z];ut(y,B,be,be.viewport)}}else ut(y,B,$);T!==null&&(Te.updateMultisampleRenderTarget(T),Te.updateRenderTargetMipmap(T)),B.isScene===!0&&B.onAfterRender(M,B,$),ue.resetDefaultState(),A=-1,R=null,b.pop(),b.length>0?m=b[b.length-1]:m=null,_.pop(),_.length>0?y=_[_.length-1]:y=null};function ct(B,$,J,V){if(B.visible===!1)return;if(B.layers.test($.layers)){if(B.isGroup)J=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update($);else if(B.isLight)m.pushLight(B),B.castShadow&&m.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||ee.intersectsSprite(B)){V&&Oe.setFromMatrixPosition(B.matrixWorld).applyMatrix4(me);const be=w.update(B),Re=B.material;Re.visible&&y.push(B,be,Re,J,Oe.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||ee.intersectsObject(B))){const be=w.update(B),Re=B.material;if(V&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),Oe.copy(B.boundingSphere.center)):(be.boundingSphere===null&&be.computeBoundingSphere(),Oe.copy(be.boundingSphere.center)),Oe.applyMatrix4(B.matrixWorld).applyMatrix4(me)),Array.isArray(Re)){const xe=be.groups;for(let Le=0,Se=xe.length;Le<Se;Le++){const Fe=xe[Le],He=Re[Fe.materialIndex];He&&He.visible&&y.push(B,be,He,J,Oe.z,Fe)}}else Re.visible&&y.push(B,be,Re,J,Oe.z,null)}}const he=B.children;for(let be=0,Re=he.length;be<Re;be++)ct(he[be],$,J,V)}function ut(B,$,J,V){const Z=B.opaque,he=B.transmissive,be=B.transparent;m.setupLightsView(J),te===!0&&ye.setGlobalState(M.clippingPlanes,J),he.length>0&&yt(Z,he,$,J),V&&Me.viewport(x.copy(V)),Z.length>0&&ot(Z,$,J),he.length>0&&ot(he,$,J),be.length>0&&ot(be,$,J),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function yt(B,$,J,V){const Z=ve.isWebGL2;le===null&&(le=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:_e.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:Z?4:0})),M.getDrawingBufferSize(fe),Z?le.setSize(fe.x,fe.y):le.setSize(floorPowerOfTwo(fe.x),floorPowerOfTwo(fe.y));const he=M.getRenderTarget();M.setRenderTarget(le),M.getClearColor(F),L=M.getClearAlpha(),L<1&&M.setClearColor(16777215,.5),M.clear();const be=M.toneMapping;M.toneMapping=NoToneMapping,ot(B,J,V),Te.updateMultisampleRenderTarget(le),Te.updateRenderTargetMipmap(le);let Re=!1;for(let xe=0,Le=$.length;xe<Le;xe++){const Se=$[xe],Fe=Se.object,He=Se.geometry,Ve=Se.material,Je=Se.group;if(Ve.side===DoubleSide&&Fe.layers.test(V.layers)){const et=Ve.side;Ve.side=BackSide,Ve.needsUpdate=!0,gt(Fe,J,V,He,Ve,Je),Ve.side=et,Ve.needsUpdate=!0,Re=!0}}Re===!0&&(Te.updateMultisampleRenderTarget(le),Te.updateRenderTargetMipmap(le)),M.setRenderTarget(he),M.setClearColor(F,L),M.toneMapping=be}function ot(B,$,J){const V=$.isScene===!0?$.overrideMaterial:null;for(let Z=0,he=B.length;Z<he;Z++){const be=B[Z],Re=be.object,xe=be.geometry,Le=V===null?be.material:V,Se=be.group;Re.layers.test(J.layers)&&gt(Re,$,J,xe,Le,Se)}}function gt(B,$,J,V,Z,he){B.onBeforeRender(M,$,J,V,Z,he),B.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),Z.onBeforeRender(M,$,J,V,B,he),Z.transparent===!0&&Z.side===DoubleSide&&Z.forceSinglePass===!1?(Z.side=BackSide,Z.needsUpdate=!0,M.renderBufferDirect(J,$,V,Z,B,he),Z.side=FrontSide,Z.needsUpdate=!0,M.renderBufferDirect(J,$,V,Z,B,he),Z.side=DoubleSide):M.renderBufferDirect(J,$,V,Z,B,he),B.onAfterRender(M,$,J,V,Z,he)}function at(B,$,J){$.isScene!==!0&&($=Ue);const V=Ce.get(B),Z=m.state.lights,he=m.state.shadowsArray,be=Z.state.version,Re=X.getParameters(B,Z.state,he,$,J),xe=X.getProgramCacheKey(Re);let Le=V.programs;V.environment=B.isMeshStandardMaterial?$.environment:null,V.fog=$.fog,V.envMap=(B.isMeshStandardMaterial?We:Ie).get(B.envMap||V.environment),Le===void 0&&(B.addEventListener("dispose",ce),Le=new Map,V.programs=Le);let Se=Le.get(xe);if(Se!==void 0){if(V.currentProgram===Se&&V.lightsStateVersion===be)return ft(B,Re),Se}else Re.uniforms=X.getUniforms(B),B.onBuild(J,Re,M),B.onBeforeCompile(Re,M),Se=X.acquireProgram(Re,xe),Le.set(xe,Se),V.uniforms=Re.uniforms;const Fe=V.uniforms;(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(Fe.clippingPlanes=ye.uniform),ft(B,Re),V.needsLights=bt(B),V.lightsStateVersion=be,V.needsLights&&(Fe.ambientLightColor.value=Z.state.ambient,Fe.lightProbe.value=Z.state.probe,Fe.directionalLights.value=Z.state.directional,Fe.directionalLightShadows.value=Z.state.directionalShadow,Fe.spotLights.value=Z.state.spot,Fe.spotLightShadows.value=Z.state.spotShadow,Fe.rectAreaLights.value=Z.state.rectArea,Fe.ltc_1.value=Z.state.rectAreaLTC1,Fe.ltc_2.value=Z.state.rectAreaLTC2,Fe.pointLights.value=Z.state.point,Fe.pointLightShadows.value=Z.state.pointShadow,Fe.hemisphereLights.value=Z.state.hemi,Fe.directionalShadowMap.value=Z.state.directionalShadowMap,Fe.directionalShadowMatrix.value=Z.state.directionalShadowMatrix,Fe.spotShadowMap.value=Z.state.spotShadowMap,Fe.spotLightMatrix.value=Z.state.spotLightMatrix,Fe.spotLightMap.value=Z.state.spotLightMap,Fe.pointShadowMap.value=Z.state.pointShadowMap,Fe.pointShadowMatrix.value=Z.state.pointShadowMatrix);const He=Se.getUniforms(),Ve=WebGLUniforms.seqWithValue(He.seq,Fe);return V.currentProgram=Se,V.uniformsList=Ve,Se}function ft(B,$){const J=Ce.get(B);J.outputColorSpace=$.outputColorSpace,J.instancing=$.instancing,J.instancingColor=$.instancingColor,J.skinning=$.skinning,J.morphTargets=$.morphTargets,J.morphNormals=$.morphNormals,J.morphColors=$.morphColors,J.morphTargetsCount=$.morphTargetsCount,J.numClippingPlanes=$.numClippingPlanes,J.numIntersection=$.numClipIntersection,J.vertexAlphas=$.vertexAlphas,J.vertexTangents=$.vertexTangents,J.toneMapping=$.toneMapping}function _t(B,$,J,V,Z){$.isScene!==!0&&($=Ue),Te.resetTextureUnits();const he=$.fog,be=V.isMeshStandardMaterial?$.environment:null,Re=T===null?M.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:LinearSRGBColorSpace,xe=(V.isMeshStandardMaterial?We:Ie).get(V.envMap||be),Le=V.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,Se=!!J.attributes.tangent&&(!!V.normalMap||V.anisotropy>0),Fe=!!J.morphAttributes.position,He=!!J.morphAttributes.normal,Ve=!!J.morphAttributes.color;let Je=NoToneMapping;V.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(Je=M.toneMapping);const et=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,qe=et!==void 0?et.length:0,Be=Ce.get(V),st=m.state.lights;if(te===!0&&(ie===!0||B!==R)){const Ze=B===R&&V.id===A;ye.setState(V,B,Ze)}let $e=!1;V.version===Be.__version?(Be.needsLights&&Be.lightsStateVersion!==st.state.version||Be.outputColorSpace!==Re||Z.isInstancedMesh&&Be.instancing===!1||!Z.isInstancedMesh&&Be.instancing===!0||Z.isSkinnedMesh&&Be.skinning===!1||!Z.isSkinnedMesh&&Be.skinning===!0||Z.isInstancedMesh&&Be.instancingColor===!0&&Z.instanceColor===null||Z.isInstancedMesh&&Be.instancingColor===!1&&Z.instanceColor!==null||Be.envMap!==xe||V.fog===!0&&Be.fog!==he||Be.numClippingPlanes!==void 0&&(Be.numClippingPlanes!==ye.numPlanes||Be.numIntersection!==ye.numIntersection)||Be.vertexAlphas!==Le||Be.vertexTangents!==Se||Be.morphTargets!==Fe||Be.morphNormals!==He||Be.morphColors!==Ve||Be.toneMapping!==Je||ve.isWebGL2===!0&&Be.morphTargetsCount!==qe)&&($e=!0):($e=!0,Be.__version=V.version);let rt=Be.currentProgram;$e===!0&&(rt=at(V,$,Z));let ht=!1,nt=!1,pt=!1;const Ke=rt.getUniforms(),it=Be.uniforms;if(Me.useProgram(rt.program)&&(ht=!0,nt=!0,pt=!0),V.id!==A&&(A=V.id,nt=!0),ht||R!==B){if(Ke.setValue(q,"projectionMatrix",B.projectionMatrix),ve.logarithmicDepthBuffer&&Ke.setValue(q,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),R!==B&&(R=B,nt=!0,pt=!0),V.isShaderMaterial||V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshStandardMaterial||V.envMap){const Ze=Ke.map.cameraPosition;Ze!==void 0&&Ze.setValue(q,Oe.setFromMatrixPosition(B.matrixWorld))}(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial)&&Ke.setValue(q,"isOrthographic",B.isOrthographicCamera===!0),(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial||V.isShadowMaterial||Z.isSkinnedMesh)&&Ke.setValue(q,"viewMatrix",B.matrixWorldInverse)}if(Z.isSkinnedMesh){Ke.setOptional(q,Z,"bindMatrix"),Ke.setOptional(q,Z,"bindMatrixInverse");const Ze=Z.skeleton;Ze&&(ve.floatVertexTextures?(Ze.boneTexture===null&&Ze.computeBoneTexture(),Ke.setValue(q,"boneTexture",Ze.boneTexture,Te),Ke.setValue(q,"boneTextureSize",Ze.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const lt=J.morphAttributes;if((lt.position!==void 0||lt.normal!==void 0||lt.color!==void 0&&ve.isWebGL2===!0)&&P.update(Z,J,rt),(nt||Be.receiveShadow!==Z.receiveShadow)&&(Be.receiveShadow=Z.receiveShadow,Ke.setValue(q,"receiveShadow",Z.receiveShadow)),V.isMeshGouraudMaterial&&V.envMap!==null&&(it.envMap.value=xe,it.flipEnvMap.value=xe.isCubeTexture&&xe.isRenderTargetTexture===!1?-1:1),nt&&(Ke.setValue(q,"toneMappingExposure",M.toneMappingExposure),Be.needsLights&&vt(it,pt),he&&V.fog===!0&&ne.refreshFogUniforms(it,he),ne.refreshMaterialUniforms(it,V,k,N,le),WebGLUniforms.upload(q,Be.uniformsList,it,Te)),V.isShaderMaterial&&V.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(q,Be.uniformsList,it,Te),V.uniformsNeedUpdate=!1),V.isSpriteMaterial&&Ke.setValue(q,"center",Z.center),Ke.setValue(q,"modelViewMatrix",Z.modelViewMatrix),Ke.setValue(q,"normalMatrix",Z.normalMatrix),Ke.setValue(q,"modelMatrix",Z.matrixWorld),V.isShaderMaterial||V.isRawShaderMaterial){const Ze=V.uniformsGroups;for(let dt=0,Mt=Ze.length;dt<Mt;dt++)if(ve.isWebGL2){const mt=Ze[dt];Ae.update(mt,rt),Ae.bind(mt,rt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rt}function vt(B,$){B.ambientLightColor.needsUpdate=$,B.lightProbe.needsUpdate=$,B.directionalLights.needsUpdate=$,B.directionalLightShadows.needsUpdate=$,B.pointLights.needsUpdate=$,B.pointLightShadows.needsUpdate=$,B.spotLights.needsUpdate=$,B.spotLightShadows.needsUpdate=$,B.rectAreaLights.needsUpdate=$,B.hemisphereLights.needsUpdate=$}function bt(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(B,$,J){Ce.get(B.texture).__webglTexture=$,Ce.get(B.depthTexture).__webglTexture=J;const V=Ce.get(B);V.__hasExternalTextures=!0,V.__hasExternalTextures&&(V.__autoAllocateDepthBuffer=J===void 0,V.__autoAllocateDepthBuffer||_e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),V.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,$){const J=Ce.get(B);J.__webglFramebuffer=$,J.__useDefaultFramebuffer=$===void 0},this.setRenderTarget=function(B,$=0,J=0){T=B,v=$,E=J;let V=!0,Z=null,he=!1,be=!1;if(B){const xe=Ce.get(B);xe.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(q.FRAMEBUFFER,null),V=!1):xe.__webglFramebuffer===void 0?Te.setupRenderTarget(B):xe.__hasExternalTextures&&Te.rebindTextures(B,Ce.get(B.texture).__webglTexture,Ce.get(B.depthTexture).__webglTexture);const Le=B.texture;(Le.isData3DTexture||Le.isDataArrayTexture||Le.isCompressedArrayTexture)&&(be=!0);const Se=Ce.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(Se[$])?Z=Se[$][J]:Z=Se[$],he=!0):ve.isWebGL2&&B.samples>0&&Te.useMultisampledRTT(B)===!1?Z=Ce.get(B).__webglMultisampledFramebuffer:Array.isArray(Se)?Z=Se[J]:Z=Se,x.copy(B.viewport),C.copy(B.scissor),O=B.scissorTest}else x.copy(W).multiplyScalar(k).floor(),C.copy(z).multiplyScalar(k).floor(),O=j;if(Me.bindFramebuffer(q.FRAMEBUFFER,Z)&&ve.drawBuffers&&V&&Me.drawBuffers(B,Z),Me.viewport(x),Me.scissor(C),Me.setScissorTest(O),he){const xe=Ce.get(B.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+$,xe.__webglTexture,J)}else if(be){const xe=Ce.get(B.texture),Le=$||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,xe.__webglTexture,J||0,Le)}A=-1},this.readRenderTargetPixels=function(B,$,J,V,Z,he,be){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Re=Ce.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&be!==void 0&&(Re=Re[be]),Re){Me.bindFramebuffer(q.FRAMEBUFFER,Re);try{const xe=B.texture,Le=xe.format,Se=xe.type;if(Le!==RGBAFormat&&pe.convert(Le)!==q.getParameter(q.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Fe=Se===HalfFloatType&&(_e.has("EXT_color_buffer_half_float")||ve.isWebGL2&&_e.has("EXT_color_buffer_float"));if(Se!==UnsignedByteType&&pe.convert(Se)!==q.getParameter(q.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Se===FloatType&&(ve.isWebGL2||_e.has("OES_texture_float")||_e.has("WEBGL_color_buffer_float")))&&!Fe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=B.width-V&&J>=0&&J<=B.height-Z&&q.readPixels($,J,V,Z,pe.convert(Le),pe.convert(Se),he)}finally{const xe=T!==null?Ce.get(T).__webglFramebuffer:null;Me.bindFramebuffer(q.FRAMEBUFFER,xe)}}},this.copyFramebufferToTexture=function(B,$,J=0){const V=Math.pow(2,-J),Z=Math.floor($.image.width*V),he=Math.floor($.image.height*V);Te.setTexture2D($,0),q.copyTexSubImage2D(q.TEXTURE_2D,J,0,0,B.x,B.y,Z,he),Me.unbindTexture()},this.copyTextureToTexture=function(B,$,J,V=0){const Z=$.image.width,he=$.image.height,be=pe.convert(J.format),Re=pe.convert(J.type);Te.setTexture2D(J,0),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,J.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,J.unpackAlignment),$.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,V,B.x,B.y,Z,he,be,Re,$.image.data):$.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,V,B.x,B.y,$.mipmaps[0].width,$.mipmaps[0].height,be,$.mipmaps[0].data):q.texSubImage2D(q.TEXTURE_2D,V,B.x,B.y,be,Re,$.image),V===0&&J.generateMipmaps&&q.generateMipmap(q.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(B,$,J,V,Z=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const he=B.max.x-B.min.x+1,be=B.max.y-B.min.y+1,Re=B.max.z-B.min.z+1,xe=pe.convert(V.format),Le=pe.convert(V.type);let Se;if(V.isData3DTexture)Te.setTexture3D(V,0),Se=q.TEXTURE_3D;else if(V.isDataArrayTexture)Te.setTexture2DArray(V,0),Se=q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,V.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,V.unpackAlignment);const Fe=q.getParameter(q.UNPACK_ROW_LENGTH),He=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Ve=q.getParameter(q.UNPACK_SKIP_PIXELS),Je=q.getParameter(q.UNPACK_SKIP_ROWS),et=q.getParameter(q.UNPACK_SKIP_IMAGES),qe=J.isCompressedTexture?J.mipmaps[0]:J.image;q.pixelStorei(q.UNPACK_ROW_LENGTH,qe.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,qe.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,B.min.x),q.pixelStorei(q.UNPACK_SKIP_ROWS,B.min.y),q.pixelStorei(q.UNPACK_SKIP_IMAGES,B.min.z),J.isDataTexture||J.isData3DTexture?q.texSubImage3D(Se,Z,$.x,$.y,$.z,he,be,Re,xe,Le,qe.data):J.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(Se,Z,$.x,$.y,$.z,he,be,Re,xe,qe.data)):q.texSubImage3D(Se,Z,$.x,$.y,$.z,he,be,Re,xe,Le,qe),q.pixelStorei(q.UNPACK_ROW_LENGTH,Fe),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,He),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Ve),q.pixelStorei(q.UNPACK_SKIP_ROWS,Je),q.pixelStorei(q.UNPACK_SKIP_IMAGES,et),Z===0&&V.generateMipmaps&&q.generateMipmap(Se),Me.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?Te.setTextureCube(B,0):B.isData3DTexture?Te.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?Te.setTexture2DArray(B,0):Te.setTexture2D(B,0),Me.unbindTexture()},this.resetState=function(){v=0,E=0,T=null,Me.reset(),ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r}}class LineBasicMaterial extends Material{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(e=new BufferGeometry,r=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,s=[0];for(let n=1,i=r.count;n<i;n++)_start$1.fromBufferAttribute(r,n-1),_end$1.fromBufferAttribute(r,n),s[n]=s[n-1],s[n]+=_start$1.distanceTo(_end$1);e.setAttribute("lineDistance",new Float32BufferAttribute(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const s=this.geometry,n=this.matrixWorld,i=e.params.Line.threshold,o=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),_sphere$1.copy(s.boundingSphere),_sphere$1.applyMatrix4(n),_sphere$1.radius+=i,e.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(n).invert(),_ray$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);const p=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=p*p,c=new Vector3,f=new Vector3,d=new Vector3,g=new Vector3,u=this.isLineSegments?2:1,h=s.index,m=s.attributes.position;if(h!==null){const _=Math.max(0,o.start),b=Math.min(h.count,o.start+o.count);for(let M=_,S=b-1;M<S;M+=u){const v=h.getX(M),E=h.getX(M+1);if(c.fromBufferAttribute(m,v),f.fromBufferAttribute(m,E),_ray$1.distanceSqToSegment(c,f,g,d)>l)continue;g.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(g);A<e.near||A>e.far||r.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let M=_,S=b-1;M<S;M+=u){if(c.fromBufferAttribute(m,M),f.fromBufferAttribute(m,M+1),_ray$1.distanceSqToSegment(c,f,g,d)>l)continue;g.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(g);E<e.near||E>e.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const n=r[s[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=n.length;i<o;i++){const p=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[p]=i}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(e,r){super(e,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,s=[];for(let n=0,i=r.count;n<i;n+=2)_start.fromBufferAttribute(r,n),_end.fromBufferAttribute(r,n+1),s[n]=n===0?0:s[n-1],s[n+1]=s[n]+_start.distanceTo(_end);e.setAttribute("lineDistance",new Float32BufferAttribute(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class CircleGeometry extends BufferGeometry{constructor(e=1,r=32,s=0,n=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:r,thetaStart:s,thetaLength:n},r=Math.max(3,r);const i=[],o=[],p=[],l=[],c=new Vector3,f=new Vector2;o.push(0,0,0),p.push(0,0,1),l.push(.5,.5);for(let d=0,g=3;d<=r;d++,g+=3){const u=s+d/r*n;c.x=e*Math.cos(u),c.y=e*Math.sin(u),o.push(c.x,c.y,c.z),p.push(0,0,1),f.x=(o[g]/e+1)/2,f.y=(o[g+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=r;d++)i.push(d,d+1,0);this.setIndex(i),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("normal",new Float32BufferAttribute(p,3)),this.setAttribute("uv",new Float32BufferAttribute(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(e=1,r=1,s=1,n=32,i=1,o=!1,p=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:s,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:p,thetaLength:l};const c=this;n=Math.floor(n),i=Math.floor(i);const f=[],d=[],g=[],u=[];let h=0;const y=[],m=s/2;let _=0;b(),o===!1&&(e>0&&M(!0),r>0&&M(!1)),this.setIndex(f),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(g,3)),this.setAttribute("uv",new Float32BufferAttribute(u,2));function b(){const S=new Vector3,v=new Vector3;let E=0;const T=(r-e)/s;for(let A=0;A<=i;A++){const R=[],x=A/i,C=x*(r-e)+e;for(let O=0;O<=n;O++){const F=O/n,L=F*l+p,I=Math.sin(L),N=Math.cos(L);v.x=C*I,v.y=-x*s+m,v.z=C*N,d.push(v.x,v.y,v.z),S.set(I,T,N).normalize(),g.push(S.x,S.y,S.z),u.push(F,1-x),R.push(h++)}y.push(R)}for(let A=0;A<n;A++)for(let R=0;R<i;R++){const x=y[R][A],C=y[R+1][A],O=y[R+1][A+1],F=y[R][A+1];f.push(x,C,F),f.push(C,O,F),E+=6}c.addGroup(_,E,0),_+=E}function M(S){const v=h,E=new Vector2,T=new Vector3;let A=0;const R=S===!0?e:r,x=S===!0?1:-1;for(let O=1;O<=n;O++)d.push(0,m*x,0),g.push(0,x,0),u.push(.5,.5),h++;const C=h;for(let O=0;O<=n;O++){const L=O/n*l+p,I=Math.cos(L),N=Math.sin(L);T.x=R*N,T.y=m*x,T.z=R*I,d.push(T.x,T.y,T.z),g.push(0,x,0),E.x=I*.5+.5,E.y=N*.5*x+.5,u.push(E.x,E.y),h++}for(let O=0;O<n;O++){const F=v+O,L=C+O;S===!0?f.push(L,L+1,F):f.push(L+1,L,F),A+=3}c.addGroup(_,A,S===!0?1:2),_+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class SphereGeometry extends BufferGeometry{constructor(e=1,r=32,s=16,n=0,i=Math.PI*2,o=0,p=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:s,phiStart:n,phiLength:i,thetaStart:o,thetaLength:p},r=Math.max(3,Math.floor(r)),s=Math.max(2,Math.floor(s));const l=Math.min(o+p,Math.PI);let c=0;const f=[],d=new Vector3,g=new Vector3,u=[],h=[],y=[],m=[];for(let _=0;_<=s;_++){const b=[],M=_/s;let S=0;_===0&&o===0?S=.5/r:_===s&&l===Math.PI&&(S=-.5/r);for(let v=0;v<=r;v++){const E=v/r;d.x=-e*Math.cos(n+E*i)*Math.sin(o+M*p),d.y=e*Math.cos(o+M*p),d.z=e*Math.sin(n+E*i)*Math.sin(o+M*p),h.push(d.x,d.y,d.z),g.copy(d).normalize(),y.push(g.x,g.y,g.z),m.push(E+S,1-M),b.push(c++)}f.push(b)}for(let _=0;_<s;_++)for(let b=0;b<r;b++){const M=f[_][b+1],S=f[_][b],v=f[_+1][b],E=f[_+1][b+1];(_!==0||o>0)&&u.push(M,S,E),(_!==s-1||l<Math.PI)&&u.push(S,v,E)}this.setIndex(u),this.setAttribute("position",new Float32BufferAttribute(h,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class MeshNormalMaterial extends Material{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Spherical{constructor(e=1,r=0,s=0){return this.radius=e,this.phi=r,this.theta=s,this}set(e,r,s){return this.radius=e,this.phi=r,this.theta=s,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,s){return this.radius=Math.sqrt(e*e+r*r+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(clamp(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const _vector$1=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(e){const r=new BufferGeometry,s=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],o={};p("n1","n2"),p("n2","n4"),p("n4","n3"),p("n3","n1"),p("f1","f2"),p("f2","f4"),p("f4","f3"),p("f3","f1"),p("n1","f1"),p("n2","f2"),p("n3","f3"),p("n4","f4"),p("p","n1"),p("p","n2"),p("p","n3"),p("p","n4"),p("u1","u2"),p("u2","u3"),p("u3","u1"),p("c","t"),p("p","c"),p("cn1","cn2"),p("cn3","cn4"),p("cf1","cf2"),p("cf3","cf4");function p(h,y){l(h),l(y)}function l(h){n.push(0,0,0),i.push(0,0,0),o[h]===void 0&&(o[h]=[]),o[h].push(n.length/3-1)}r.setAttribute("position",new Float32BufferAttribute(n,3)),r.setAttribute("color",new Float32BufferAttribute(i,3)),super(r,s),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Color(16755200),f=new Color(16711680),d=new Color(43775),g=new Color(16777215),u=new Color(3355443);this.setColors(c,f,d,g,u)}setColors(e,r,s,n,i){const p=this.geometry.getAttribute("color");p.setXYZ(0,e.r,e.g,e.b),p.setXYZ(1,e.r,e.g,e.b),p.setXYZ(2,e.r,e.g,e.b),p.setXYZ(3,e.r,e.g,e.b),p.setXYZ(4,e.r,e.g,e.b),p.setXYZ(5,e.r,e.g,e.b),p.setXYZ(6,e.r,e.g,e.b),p.setXYZ(7,e.r,e.g,e.b),p.setXYZ(8,e.r,e.g,e.b),p.setXYZ(9,e.r,e.g,e.b),p.setXYZ(10,e.r,e.g,e.b),p.setXYZ(11,e.r,e.g,e.b),p.setXYZ(12,e.r,e.g,e.b),p.setXYZ(13,e.r,e.g,e.b),p.setXYZ(14,e.r,e.g,e.b),p.setXYZ(15,e.r,e.g,e.b),p.setXYZ(16,e.r,e.g,e.b),p.setXYZ(17,e.r,e.g,e.b),p.setXYZ(18,e.r,e.g,e.b),p.setXYZ(19,e.r,e.g,e.b),p.setXYZ(20,e.r,e.g,e.b),p.setXYZ(21,e.r,e.g,e.b),p.setXYZ(22,e.r,e.g,e.b),p.setXYZ(23,e.r,e.g,e.b),p.setXYZ(24,r.r,r.g,r.b),p.setXYZ(25,r.r,r.g,r.b),p.setXYZ(26,r.r,r.g,r.b),p.setXYZ(27,r.r,r.g,r.b),p.setXYZ(28,r.r,r.g,r.b),p.setXYZ(29,r.r,r.g,r.b),p.setXYZ(30,r.r,r.g,r.b),p.setXYZ(31,r.r,r.g,r.b),p.setXYZ(32,s.r,s.g,s.b),p.setXYZ(33,s.r,s.g,s.b),p.setXYZ(34,s.r,s.g,s.b),p.setXYZ(35,s.r,s.g,s.b),p.setXYZ(36,s.r,s.g,s.b),p.setXYZ(37,s.r,s.g,s.b),p.setXYZ(38,n.r,n.g,n.b),p.setXYZ(39,n.r,n.g,n.b),p.setXYZ(40,i.r,i.g,i.b),p.setXYZ(41,i.r,i.g,i.b),p.setXYZ(42,i.r,i.g,i.b),p.setXYZ(43,i.r,i.g,i.b),p.setXYZ(44,i.r,i.g,i.b),p.setXYZ(45,i.r,i.g,i.b),p.setXYZ(46,i.r,i.g,i.b),p.setXYZ(47,i.r,i.g,i.b),p.setXYZ(48,i.r,i.g,i.b),p.setXYZ(49,i.r,i.g,i.b),p.needsUpdate=!0}update(){const e=this.geometry,r=this.pointMap,s=1,n=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",r,e,_camera,0,0,-1),setPoint("t",r,e,_camera,0,0,1),setPoint("n1",r,e,_camera,-s,-n,-1),setPoint("n2",r,e,_camera,s,-n,-1),setPoint("n3",r,e,_camera,-s,n,-1),setPoint("n4",r,e,_camera,s,n,-1),setPoint("f1",r,e,_camera,-s,-n,1),setPoint("f2",r,e,_camera,s,-n,1),setPoint("f3",r,e,_camera,-s,n,1),setPoint("f4",r,e,_camera,s,n,1),setPoint("u1",r,e,_camera,s*.7,n*1.1,-1),setPoint("u2",r,e,_camera,-s*.7,n*1.1,-1),setPoint("u3",r,e,_camera,0,n*2,-1),setPoint("cf1",r,e,_camera,-s,0,1),setPoint("cf2",r,e,_camera,s,0,1),setPoint("cf3",r,e,_camera,0,-n,1),setPoint("cf4",r,e,_camera,0,n,1),setPoint("cn1",r,e,_camera,-s,0,-1),setPoint("cn2",r,e,_camera,s,0,-1),setPoint("cn3",r,e,_camera,0,-n,-1),setPoint("cn4",r,e,_camera,0,n,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(t,e,r,s,n,i,o){_vector$1.set(n,i,o).unproject(s);const p=e[t];if(p!==void 0){const l=r.getAttribute("position");for(let c=0,f=p.length;c<f;c++)l.setXYZ(p[c],_vector$1.x,_vector$1.y,_vector$1.z)}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(e=new Vector3(0,0,1),r=new Vector3(0,0,0),s=1,n=16776960,i=s*.2,o=i*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(r),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(s,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(e.z,0,-e.x).normalize();const r=Math.acos(e.y);this.quaternion.setFromAxisAngle(_axis,r)}}setLength(e,r=e*.2,s=r*.2){this.line.scale.set(1,Math.max(1e-4,e-r),1),this.line.updateMatrix(),this.cone.scale.set(s,r,s),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const registeredObservationModels={},registeredDynamicModels={};var modelCollection$1={registerObservation(t,e){registeredObservationModels[t]=e},registerDynamic(t,e){registeredDynamicModels[t]=e},buildObservation(t){if(typeof registeredObservationModels[t.name]!="function")throw new TypeError(`The provided observation model name (${t.name}) is not registered`);return registeredObservationModels[t.name](t)},buildDynamic(t,e){if(typeof registeredDynamicModels[t.name]!="function")throw new TypeError(`The provided dynamic model (${t.name}) name is not registered`);return registeredDynamicModels[t.name](t,e)}},elemWise$3=function(t,e){return t[0].map((r,s)=>r.map((n,i)=>{const o=t.map(p=>p[s][i]);return e(o,s,i)}))};const elemWise$2=elemWise$3;var add=function(...t){return elemWise$2(t,e=>e.reduce((r,s)=>r===null||s===null?null:r+s,0))},dotProduct$1=function(t,e){if(t.length!==e.length)throw new Error("Lengths not maching");let r=0;for(const[s,n]of t.entries())r+=n*e[s];return r},norm$1=function(t){let e=0;for(const r of t)e+=r*r;return Math.sqrt(e)};const dotProduct=dotProduct$1,norm=norm$1;var cosSimilarity=function(t,e){if(t.length!==e.length)throw new Error("The lengths of the vectors do not match");const r=norm(t)*norm(e);return r===0?0:dotProduct(t,e)/r},euclideanDist=function(t,e){if(t.length!==e.length)throw new Error("Invalid array lengths");if(!Array.isArray(t))throw console.log({array1:t}),new Error("Invalid array");const r=t.map((s,n)=>s-e[n]).map(s=>s*s);return Math.sqrt(r.reduce((s,n)=>s+n))},zeros$1=function(t,e){return new Array(t).fill(1).map(()=>new Array(e).fill(0))};const zeros=zeros$1;var diag$4=function(t){const e=zeros(t.length,t.length);for(const[r,s]of t.entries())e[r][r]=s;return e},identity$9=function(t){const e=[];for(let r=0;r<t;r++){const s=[];for(let n=0;n<t;n++)r===n?s.push(1):s.push(0);e.push(s)}return e};const identity$8=identity$9;var diagBlock=function({blocks:t,order:e=null}){const r=t.map(i=>i.length).reduce((i,o)=>i+o,0),s=identity$8(r);let n=0;for(const i of t){for(const[o]of i.entries())for(const[p]of i.entries())s[o+n][p+n]=i[o][p];n+=i.length}return e?e.map(i=>e.map(o=>s[i][o])):s},trace$1=function(t){let e=0;for(const[r,s]of t.entries())e+=s[r];return e},transpose$1=function(t){return t[0].map((e,r)=>t.map(s=>s[r]))};const elemWise$1=elemWise$3;var subtract$1=function(...t){return elemWise$1(t,([e,r])=>e-r)},matMul$1=function(t,e){const r=[];for(let s=0;s<t.length;s++){r[s]=[];for(let n=0;n<e[0].length;n++){let i=0,o=!1;for(let p=0;p<t[0].length;p++)(t[s][p]===null&&e[p][n]!==0||e[p][n]===null&&t[s][p]!==0)&&(o=!0),i+=t[s][p]*e[p][n];r[s][n]=o?null:i}}return r},sum$1=function(t){let e=0;for(let r=0;r<t.length;r++)for(let s=0;s<t.length;s++)e+=t[r][s];return e};const trace=trace$1,transpose=transpose$1,matSub=subtract$1,matMul=matMul$1,sum=sum$1;var frobenius=function(t,e){if(t===void 0)return sum(e);if(e===void 0)return sum(t);const r=matSub(t,e),s=matMul(transpose(r),r);return Math.sqrt(trace(s))},Sylvester={};Sylvester.Matrix=function(){};Sylvester.Matrix.create=function(t){var e=new Sylvester.Matrix;return e.setElements(t)};Sylvester.Matrix.I=function(t){for(var e=[],r=t,s;r--;)for(s=t,e[r]=[];s--;)e[r][s]=r===s?1:0;return Sylvester.Matrix.create(e)};Sylvester.Matrix.prototype={dup:function(){return Sylvester.Matrix.create(this.elements)},isSquare:function(){var t=this.elements.length===0?0:this.elements[0].length;return this.elements.length===t},toRightTriangular:function(){if(this.elements.length===0)return Sylvester.Matrix.create([]);var t=this.dup(),e,r=this.elements.length,s,n,i=this.elements[0].length,o;for(s=0;s<r;s++){if(t.elements[s][s]===0){for(n=s+1;n<r;n++)if(t.elements[n][s]!==0){for(e=[],o=0;o<i;o++)e.push(t.elements[s][o]+t.elements[n][o]);t.elements[s]=e;break}}if(t.elements[s][s]!==0)for(n=s+1;n<r;n++){var p=t.elements[n][s]/t.elements[s][s];for(e=[],o=0;o<i;o++)e.push(o<=s?0:t.elements[n][o]-t.elements[s][o]*p);t.elements[n]=e}}return t},determinant:function(){if(this.elements.length===0)return 1;if(!this.isSquare())return null;for(var t=this.toRightTriangular(),e=t.elements[0][0],r=t.elements.length,s=1;s<r;s++)e=e*t.elements[s][s];return e},isSingular:function(){return this.isSquare()&&this.determinant()===0},augment:function(t){if(this.elements.length===0)return this.dup();var e=t.elements||t;typeof e[0][0]>"u"&&(e=Sylvester.Matrix.create(e).elements);var r=this.dup(),s=r.elements[0].length,n=r.elements.length,i=e[0].length,o;if(n!==e.length)return null;for(;n--;)for(o=i;o--;)r.elements[n][s+o]=e[n][o];return r},inverse:function(){if(this.elements.length===0||!this.isSquare()||this.isSingular())return null;for(var t=this.elements.length,e=t,r,s=this.augment(Sylvester.Matrix.I(t)).toRightTriangular(),n=s.elements[0].length,i,o,p,l=[],c;e--;){for(o=[],l[e]=[],p=s.elements[e][e],i=0;i<n;i++)c=s.elements[e][i]/p,o.push(c),i>=t&&l[e].push(c);for(s.elements[e]=o,r=e;r--;){for(o=[],i=0;i<n;i++)o.push(s.elements[r][i]-s.elements[e][i]*s.elements[r][e]);s.elements[r]=o}}return Sylvester.Matrix.create(l)},setElements:function(t){var e,r,s=t.elements||t;if(s[0]&&typeof s[0][0]<"u"){for(e=s.length,this.elements=[];e--;)for(r=s[e].length,this.elements[e]=[];r--;)this.elements[e][r]=s[e][r];return this}var n=s.length;for(this.elements=[],e=0;e<n;e++)this.elements.push([s[e]]);return this}};var matrixInverse$1=function(t){const e=Sylvester.Matrix.create(t).inverse();return e!==null?e.elements:null};const matrixInverse=matrixInverse$1;var invert=function(t){return matrixInverse(t)},mapMatrix=function(t,e){return t.map((r,s)=>r.map((n,i)=>e(n,s,i)))},matPermutation$2=function({matrix:t,outputSize:e,rowIndexes:r,colIndexes:s}){const[n,i]=e;if(!Array.isArray(r))throw new TypeError(`Invalid rowIndexes ${r}`);if(!Array.isArray(s))throw new TypeError(`Invalid colIndexes ${s}`);return new Array(n).fill(0).map((o,p)=>new Array(i).fill(0).map((l,c)=>s.includes(c)&&r.includes(p)?t[r.indexOf(p)][s.indexOf(c)]:0))};const matPermutation$1=matPermutation$2;var padWithZeroCols=function(t,{columns:e}){if(e<t[0].length)throw new TypeError(`Output columns ${e} is greater than input columns ${t[0].length}`);return matPermutation$1({matrix:t,outputSize:[t.length,e],rowIndexes:new Array(t.length).fill(0).map((r,s)=>s),colIndexes:new Array(t[0].length).fill(0).map((r,s)=>s)})},subSquareMatrix=(t,e)=>e.map(r=>e.map(s=>t[r][s])),lib$2={add,cosSimilarity,euclideanDist,diag:diag$4,diagBlock,dotProduct:dotProduct$1,elemWise:elemWise$3,frobenius,identity:identity$9,invert,mapMatrix,matMul:matMul$1,matPermutation:matPermutation$2,padWithZeroCols,subtract:subtract$1,subSquareMatrix,sum:sum$1,trace:trace$1,transpose:transpose$1,zeros:zeros$1,norm:norm$1},simpleLinalg=lib$2;const{identity:identity$7}=simpleLinalg;var constantPosition=function(t,e){let{dimension:r}=t;const s=e.dimension,{observedProjection:n}=e,{stateProjection:i}=e;let{covariance:o}=t;t.dimension||(s?r=s:n?r=n[0].length:i&&(r=i[0].length));const p=identity$7(r);return o=o||identity$7(r),Object.assign({},t,{dimension:r,transition:p,covariance:o})};const{identity:identity$6}=simpleLinalg;var constantSpeed=function(t,e){const r=t.timeStep||1,{observedProjection:s}=e,{stateProjection:n}=e,i=e.dimension;let o;if(n&&Number.isInteger(n[0].length/2))o=e.stateProjection[0].length;else if(s)o=s[0].length*2;else if(i)o=i*2;else throw new Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");const p=o/2,l=identity$6(o);for(let d=0;d<p;d++)l[d][d+p]=r;const c=new Array(p).fill(1).concat(new Array(p).fill(r*r)),f=t.covariance||c;return Object.assign({},t,{dimension:o,transition:l,covariance:f})};const{identity:identity$5}=simpleLinalg;var constantAcceleration=function(t,e){const r=t.timeStep||1,{observedProjection:s}=e,{stateProjection:n}=e,i=e.dimension;let o;if(n&&Number.isInteger(n[0].length/3))o=e.stateProjection[0].length;else if(s)o=s[0].length*3;else if(i)o=i*3;else throw new Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");const p=o/3,l=identity$5(o);for(let d=0;d<p;d++)l[d][d+p]=r,l[d][d+2*p]=.5*r**2,l[d+p][d+2*p]=r;const c=new Array(p).fill(1).concat(new Array(p).fill(r*r)).concat(new Array(p).fill(r**4)),f=t.covariance||c;return Object.assign({},t,{dimension:o,transition:l,covariance:f})};const{buildDynamic}=modelCollection$1;var composition=function({perName:t},e){const{observedProjection:r}=e,s=r[0].length,n=Object.keys(t),i={};let o=s,p=0;n.forEach(f=>{const d=t[f].obsDynaIndexes;if(typeof t[f].name=="string"&&t[f].name!==f)throw new Error(`${t[f].name} and "${f}" should match`);t[f].name=f;const{dimension:g,transition:u,covariance:h,init:y}=buildDynamic(t[f],e),m=[];for(let _=0;_<g;_++){const b=_<d.length;let M;if(b){if(M=p,M!==d[_])throw new Error("thsoe should match");p++}else M=o,o++;m.push(M)}i[f]={dynamicIndexes:m,transition:u,dimension:g,covariance:h,init:y}});const l=n.map(f=>i[f].dimension).reduce((f,d)=>f+d,0);if(o!==l)throw new Error("miscalculation of transition");const c={index:-1,mean:new Array(l),covariance:new Array(l).fill(0).map(()=>new Array(l).fill(0))};return n.forEach(f=>{const{dynamicIndexes:d,init:g}=i[f];if(typeof g!="object")throw new TypeError("Init is mandatory");d.forEach((u,h)=>d.forEach((y,m)=>{c.covariance[u][y]=g.covariance[h][m]})),d.forEach((u,h)=>{c.mean[u]=g.mean[h]})}),{dimension:l,init:c,transition(f){const{previousCorrected:d}=f,g=new Array(l).fill().map(()=>new Array(l).fill(0));return n.forEach(u=>{const{dynamicIndexes:h,transition:y}=i[u],m=Object.assign({},f,{previousCorrected:d.subState(h)}),_=y(m);h.forEach((b,M)=>h.forEach((S,v)=>{g[b][S]=_[M][v]}))}),g},covariance(f){const{previousCorrected:d}=f,g=new Array(l).fill().map(()=>new Array(l).fill(0));return n.forEach(u=>{const{dynamicIndexes:h,covariance:y}=i[u],m=Object.assign({},f,{previousCorrected:d.subState(h)}),_=y(m);h.forEach((b,M)=>h.forEach((S,v)=>{g[b][S]=_[M][v]}))}),g}}};const{identity:identity$4,diag:diag$3}=simpleLinalg,huge$1=1e6,constantPositionWithNull=function({staticCovariance:t,obsDynaIndexes:e,init:r}){const s=e.length;if(r||(r={mean:new Array(e.length).fill(0).map(()=>[0]),covariance:diag$3(new Array(e.length).fill(huge$1)),index:-1}),t&&t.length!==s)throw new Error("staticCovariance has wrong size");return{dimension:s,transition(){return identity$4(s)},covariance({previousCorrected:n,index:i}){const o=i-n.index;return t?t.map(p=>p.map(l=>l*o)):identity$4(s)},init:r}};var constantPositionWithNull_1=constantPositionWithNull;const{identity:identity$3,diag:diag$2}=simpleLinalg,nullModels={linear(t){return t},one(){return 1},square(t){return t*t}},huge=1e6,constantSpeedWithNull=function({staticCovariance:t,obsDynaIndexes:e,nullGapModel:r=null,init:s},n){if(!e){const o=n.observedProjection[0].length;e=new Array(o).fill(0).map((p,l)=>l)}if(t&&Number.isNaN(t[0][0]))throw new Error("NaN staticCovariance");const i=2*e.length;return s||(s={mean:new Array(e.length*2).fill(0).map(()=>[0]),covariance:diag$2(new Array(e.length*2).fill(huge)),index:-1}),r||(r=new Array(i).fill(0).map(()=>"linear")),{dimension:i,init:s,transition({previousCorrected:o,index:p}){const l=p-o.index;if(Number.isNaN(l))throw new TypeError("diffBetweenIndexes is NaN");const c=new Array(i).fill(new Array(i).fill()),f=i/2;return c.map((g,u)=>g.map((h,y)=>u===y?1:u+f===y?p===0?0:l:0))},covariance({previousCorrected:o,index:p}){const l=p-o.index;return t?t.map((f,d)=>f.map((g,u)=>{const h=Math.sqrt(nullModels[r[d]](l)*nullModels[r[u]](l));return g*h})):identity$3(i)}}};var constantSpeedWithNull_1=constantSpeedWithNull;const{diag:diag$1}=simpleLinalg,constantSpeedDynamic$1=function({staticCovariance:t,avSpeed:e,center:r},s){const n=s.observedProjection[0].length,i=2*n;if(r===void 0)throw new TypeError("Center must be defined");if(r.length!==n)throw new TypeError(`Center size should be ${n}`);if(e.length!==n)throw new TypeError(`avSpeed size should be ${n}`);const o=diag$1(r.map(f=>f*f/3).concat(e.map(f=>f*f/3)));return{init:{mean:r.map(f=>[f]).concat(r.map(()=>[0])),covariance:o,index:-1},dimension:i,transition:({getTime:f,index:d,previousCorrected:g})=>{const u=f(d)-f(g.index);if(typeof u!="number"||Number.isNaN(u))throw new TypeError(`dT (${u}) should be a number`);const h=diag$1(r.map(()=>1).concat(r.map(()=>1)));for(let y=0;y<n;y++)h[y][n+y]=u;if(Number.isNaN(h[0][2]))throw new TypeError("nan mat");return h},covariance:({index:f,previousCorrected:d,getTime:g})=>{const u=g(f)-g(d.index);if(typeof u!="number")throw new TypeError(`dT (${u}) should be a number`);const h=Math.sqrt(u);if(Number.isNaN(h))throw console.log({lastPreviousIndex:d.index,index:f}),console.log(u,d.index,f,g(f),g(d.index)),new Error("Sqrt(dT) is NaN");return diag$1(t.map(y=>y*h))}}};var constantSpeedDynamic_1=constantSpeedDynamic$1;const{elemWise,diag}=simpleLinalg,constantSpeedDynamic=constantSpeedDynamic_1,safeDiv=function(t,e){return t===0?0:e===0?1:t/e};var shorttermConstantSpeed=function(t,e){const{typicalTimes:r}=t;if(!Array.isArray(r))throw new TypeError("typicalTimes must be defined");const s=constantSpeedDynamic(t,e),{dimension:n,init:i}=s;if(r.length!==n)throw new TypeError(`typicalTimes (${r.length}) length is not as expected (${n})`);const o=function({ratios:p,aMat:l,bMat:c}){return elemWise([l,c],([f,d],g,u)=>{const h=g===u?p[g]:(p[g]+p[u])/2;return h*f+(1-h)*d})};return{dimension:n,init:i,transition(p){const l=s.transition(p),{getTime:c,index:f,previousCorrected:d}=p,g=c(f)-c(d.index),u=r.map(y=>Math.exp(-1*g/y)),h=diag(elemWise([i.mean,d.mean],([y,m])=>safeDiv(y,m)).reduce((y,m)=>y.concat(m)));return o({ratios:u,aMat:l,bMat:h})},covariance(p,l){const{getTime:c,index:f,previousCorrected:d}=p,g=c(f)-c(d.index),u=r.map(y=>Math.exp(-1*g/y)),h=s.covariance(p,l);return o({ratios:u,aMat:h,bMat:i.covariance})}}},dynamic={"constant-position":constantPosition,"constant-speed":constantSpeed,"constant-acceleration":constantAcceleration,composition,"constant-position-with-null":constantPositionWithNull_1,"constant-speed-with-null":constantSpeedWithNull_1,"constant-speed-dynamic":constantSpeedDynamic_1,"shortterm-constant-speed":shorttermConstantSpeed},checkShape_1,hasRequiredCheckShape;function requireCheckShape(){if(hasRequiredCheckShape)return checkShape_1;hasRequiredCheckShape=1;const t=function(e,r,s="checkShape"){if(e.length!==r[0])throw new Error(`[${s}] expected size (${r[0]}) and length (${e.length}) does not match`);if(r.length>1)return e.forEach(n=>t(n,r.slice(1),s))};return checkShape_1=t,checkShape_1}var checkMatrix$1,hasRequiredCheckMatrix;function requireCheckMatrix(){if(hasRequiredCheckMatrix)return checkMatrix$1;hasRequiredCheckMatrix=1;const t=requireCheckShape();return checkMatrix$1=function(e,r,s="checkMatrix"){if(!Array.isArray(e))throw new TypeError(`[${s}] should be a 2-level array matrix and is ${e}`);for(const n of e)if(!Array.isArray(n))throw new TypeError(`[${s}] 1-level array should be a matrix ${JSON.stringify(e)}`);if(e.reduce((n,i)=>n.concat(i)).some(n=>Number.isNaN(n)))throw new Error(`[${s}] Matrix should not have a NaN
In : 
`+e.join(`
`));r&&t(e,r,s)},checkMatrix$1}var polymorphMatrix$1,hasRequiredPolymorphMatrix;function requirePolymorphMatrix(){if(hasRequiredPolymorphMatrix)return polymorphMatrix$1;hasRequiredPolymorphMatrix=1;const{diag:t}=simpleLinalg,e=requireCheckMatrix();return polymorphMatrix$1=function(r,{dimension:s,title:n="polymorph"}={}){if(typeof r=="number"||Array.isArray(r)){if(typeof r=="number"&&typeof s=="number")return t(new Array(s).fill(r));if(Array.isArray(r)&&Array.isArray(r[0])){let i;return typeof s=="number"&&(i=[s,s]),e(r,i,n),r}if(Array.isArray(r)&&typeof r[0]=="number")return t(r)}return r},polymorphMatrix$1}const{identity:identity$2}=simpleLinalg,polymorphMatrix=requirePolymorphMatrix(),checkMatrix=requireCheckMatrix(),copy=t=>t.map(e=>e.concat());var sensor=function(t){const{sensorDimension:e=1,sensorCovariance:r=1,nSensors:s=1}=t,n=polymorphMatrix(r,{dimension:e});checkMatrix(n,[e,e],"observation.sensorCovariance");const i=identity$2(e);let o=[];const p=e*s,l=identity$2(p);for(let c=0;c<s;c++){o=o.concat(copy(i));for(const[f,d]of n.entries())for(const[g,u]of d.entries())l[f+c*e][g+c*e]=u}return Object.assign({},t,{dimension:p,observedProjection:o,covariance:l})};const{identity:identity$1}=simpleLinalg,{buildObservation}=modelCollection$1,nullableSensor=function(t){const{dimension:e,observedProjection:r,covariance:s}=buildObservation(Object.assign({},t,{name:"sensor"}));return{dimension:e,observedProjection:r,covariance(n){const i=identity$1(e),{variance:o}=n;return o.forEach((p,l)=>{i[l][l]=p*s[l][l]}),i}}};var sensorLocalVariance=nullableSensor,isNumber,hasRequiredIsNumber;function requireIsNumber(){return hasRequiredIsNumber||(hasRequiredIsNumber=1,isNumber=function(e){return Number.isFinite(e)}),isNumber}var isMatrix,hasRequiredIsMatrix;function requireIsMatrix(){if(hasRequiredIsMatrix)return isMatrix;hasRequiredIsMatrix=1;var t=requireIsNumber();return isMatrix=function(r){if(!Array.isArray(r))return!1;var s=r.length;if(s===0)return!0;var n=r[0];if(!Array.isArray(n))return!1;var i=n.length;if(i===0)return!1;for(var o=0;o<s;o++){var p=r[o];if(!Array.isArray(p)||p.length!==i)return!1;for(var l=0;l<i;l++)if(!t(p[l]))return!1}return!0},isMatrix}var _Error,hasRequired_Error;function require_Error(){return hasRequired_Error||(hasRequired_Error=1,_Error={INVALID_ARRAY:"Invalid argument: Received a non-array argument",INVALID_MATRIX:"Invalid argument: Received an invalid matrix",INVALID_SQUARE_MATRIX:"Invalid argument: Received a non-square matrix",INVALID_UPPER_TRIANGULAR_MATRIX:"Invalid argument: Received a non upper-triangular matrix",INVALID_LOWER_TRIANGULAR_MATRIX:"Invalid argument: Received a non lower-triangular matrix",INVALID_EXPONENT:"Invalid argument: Expected a non-negative integer exponent",INVALID_ROW_COL:"Invalid argument: Expected non-negative integer row and column",INVALID_ROW:"Invalid argument: Expected non-negative integer row",INVALID_COLUMN:"Invalid argument: Expected non-negative integer column",INVALID_ROWS_EXPRESSION:"Invalid argument: Received invalid rows expression",INVALID_COLUMNS_EXPRESSION:"Invalid argument: Received invalid columns expression",INVALID_P_NORM:"Invalid argument: Received invalid p-norm",OVERFLOW_INDEX:"Invalid argument: Matrix index overflow",OVERFLOW_COLUMN:"Invalid argument: Column index overflow",OVERFLOW_ROW:"Invalid argument: Row index overflow",NO_UNIQUE_SOLUTION:"Arithmetic Exception: The system has no unique solution",SIZE_INCOMPATIBLE:"Invalid argument: Matrix size-incompatible",SINGULAR_MATRIX:"Arithmetic Exception: The matrix is not invertible",EXPECTED_STRING_NUMBER_AT_POS_1_2:"Invalid argument: Expected a string or a number at arguments[1] and arguments[2]",EXPECTED_ARRAY_OF_NUMBERS_OR_MATRICES:"Invalid argument: Expected either an array of numbers or an array of square matrices"}),_Error}var isDiagonal_1,hasRequiredIsDiagonal;function requireIsDiagonal(){if(hasRequiredIsDiagonal)return isDiagonal_1;hasRequiredIsDiagonal=1;function t(p,l){return i(p)||n(p,l)||r(p,l)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(p,l){if(p){if(typeof p=="string")return s(p,l);var c=Object.prototype.toString.call(p).slice(8,-1);if(c==="Object"&&p.constructor&&(c=p.constructor.name),c==="Map"||c==="Set")return Array.from(p);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return s(p,l)}}function s(p,l){(l==null||l>p.length)&&(l=p.length);for(var c=0,f=new Array(l);c<l;c++)f[c]=p[c];return f}function n(p,l){var c=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(c!=null){var f=[],d=!0,g=!1,u,h;try{for(c=c.call(p);!(d=(u=c.next()).done)&&(f.push(u.value),!(l&&f.length===l));d=!0);}catch(y){g=!0,h=y}finally{try{!d&&c.return!=null&&c.return()}finally{if(g)throw h}}return f}}function i(p){if(Array.isArray(p))return p}function o(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isDiagonal!==void 0)return this._isDiagonal;var l=1/(Math.pow(10,p)*2),c=this._matrix,f=this.size(),d=t(f,2),g=d[0],u=d[1];if(g===0)return this._isDiagonal=!0,!0;for(var h=0;h<g;h++)for(var y=0;y<u;y++)if(h!==y&&Math.abs(c[h][y])>=l)return this.isDiagonal=!1,!1;return this._isDiagonal=!0,!0}return isDiagonal_1=o,isDiagonal_1}var isSkewSymmetric_1,hasRequiredIsSkewSymmetric;function requireIsSkewSymmetric(){if(hasRequiredIsSkewSymmetric)return isSkewSymmetric_1;hasRequiredIsSkewSymmetric=1;function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isSkewSymmetric!==void 0)return this._isSkewSymmetric;if(!this.isSquare())return this._isSkewSymmetric=!1,!1;var r=this._matrix,s=1/(Math.pow(10,e)*2),n=r.length;if(n===0)return this._isSkewSymmetric=!0,!0;for(var i=0;i<n;i++)for(var o=0;o<i;o++)if(Math.abs(r[i][o]+r[o][i])>=s)return this._isSkewSymmetric=!1,!1;return this._isSkewSymmetric=!0,!0}return isSkewSymmetric_1=t,isSkewSymmetric_1}var isSquare_1,hasRequiredIsSquare;function requireIsSquare(){if(hasRequiredIsSquare)return isSquare_1;hasRequiredIsSquare=1;function t(){if(this._isSquare!==void 0)return this._isSquare;var e=this._matrix;return e.length===0?(this._isSquare=!0,!0):(this._isSquare=e.length===e[0].length,this._isSquare)}return isSquare_1=t,isSquare_1}var isSymmetric_1,hasRequiredIsSymmetric;function requireIsSymmetric(){if(hasRequiredIsSymmetric)return isSymmetric_1;hasRequiredIsSymmetric=1;function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isSymmetric!==void 0)return this._isSymmetric;if(!this.isSquare())return!1;for(var r=this._matrix,s=1/(Math.pow(10,e)*2),n=r.length,i=0;i<n;i++)for(var o=0;o<=i;o++)if(Math.abs(r[i][o]-r[o][i])>=s)return this._isSymmetric=!1,!1;return this._isSymmetric=!0,!0}return isSymmetric_1=t,isSymmetric_1}var isLowerTriangular_1,hasRequiredIsLowerTriangular;function requireIsLowerTriangular(){if(hasRequiredIsLowerTriangular)return isLowerTriangular_1;hasRequiredIsLowerTriangular=1;function t(p,l){return i(p)||n(p,l)||r(p,l)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(p,l){if(p){if(typeof p=="string")return s(p,l);var c=Object.prototype.toString.call(p).slice(8,-1);if(c==="Object"&&p.constructor&&(c=p.constructor.name),c==="Map"||c==="Set")return Array.from(p);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return s(p,l)}}function s(p,l){(l==null||l>p.length)&&(l=p.length);for(var c=0,f=new Array(l);c<l;c++)f[c]=p[c];return f}function n(p,l){var c=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(c!=null){var f=[],d=!0,g=!1,u,h;try{for(c=c.call(p);!(d=(u=c.next()).done)&&(f.push(u.value),!(l&&f.length===l));d=!0);}catch(y){g=!0,h=y}finally{try{!d&&c.return!=null&&c.return()}finally{if(g)throw h}}return f}}function i(p){if(Array.isArray(p))return p}function o(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isLowerTriangular!==void 0)return this._isLowerTriangular;var l=1/(Math.pow(10,p)*2),c=this._matrix,f=this.size(),d=t(f,2),g=d[0],u=d[1];if(g===0)return this._isLowerTriangular=!0,!0;for(var h=0;h<g;h++)for(var y=h+1;y<u;y++)if(Math.abs(c[h][y])>=l)return this._isLowerTriangular=!1,!1;return this._isLowerTriangular=!0,!0}return isLowerTriangular_1=o,isLowerTriangular_1}var isUpperTriangular_1,hasRequiredIsUpperTriangular;function requireIsUpperTriangular(){if(hasRequiredIsUpperTriangular)return isUpperTriangular_1;hasRequiredIsUpperTriangular=1;function t(p,l){return i(p)||n(p,l)||r(p,l)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(p,l){if(p){if(typeof p=="string")return s(p,l);var c=Object.prototype.toString.call(p).slice(8,-1);if(c==="Object"&&p.constructor&&(c=p.constructor.name),c==="Map"||c==="Set")return Array.from(p);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return s(p,l)}}function s(p,l){(l==null||l>p.length)&&(l=p.length);for(var c=0,f=new Array(l);c<l;c++)f[c]=p[c];return f}function n(p,l){var c=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(c!=null){var f=[],d=!0,g=!1,u,h;try{for(c=c.call(p);!(d=(u=c.next()).done)&&(f.push(u.value),!(l&&f.length===l));d=!0);}catch(y){g=!0,h=y}finally{try{!d&&c.return!=null&&c.return()}finally{if(g)throw h}}return f}}function i(p){if(Array.isArray(p))return p}function o(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isUpperTriangular!==void 0)return this._isUpperTriangular;var l=1/(Math.pow(10,p)*2),c=this._matrix,f=this.size(),d=t(f,2),g=d[0],u=d[1];if(g===0)return this._isUpperTriangular=!0,!0;for(var h=0;h<g;h++)for(var y=0;y<u;y++)if(!(h<=y)&&Math.abs(c[h][y])>=l)return this._isUpperTriangular=!1,!1;return this._isUpperTriangular=!0,!0}return isUpperTriangular_1=o,isUpperTriangular_1}var isOrthogonal_1,hasRequiredIsOrthogonal;function requireIsOrthogonal(){if(hasRequiredIsOrthogonal)return isOrthogonal_1;hasRequiredIsOrthogonal=1;function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isOrthogonal!==void 0)return this._isOrthogonal;if(!this.isSquare())return this._isOrthogonal=!1,!1;for(var r=this._matrix,s=1/(Math.pow(10,e)*2),n=r.length,i=0;i<n;i++)for(var o=i;o<n;o++){for(var p=0,l=0;l<n;l++)p+=r[i][l]*r[o][l];if(i===o&&Math.abs(p-1)>=s)return this._isOrthogonal=!1,!1;if(i!==o&&Math.abs(p)>=s)return this._isOrthogonal=!1,!1}return this._isOrthogonal=!0,!0}return isOrthogonal_1=t,isOrthogonal_1}var cond_1,hasRequiredCond;function requireCond(){if(hasRequiredCond)return cond_1;hasRequiredCond=1;var t=requireLib(),e=require_Error(),r=e.INVALID_P_NORM,s=e.SINGULAR_MATRIX,n=e.INVALID_SQUARE_MATRIX;function i(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;if(o!==1&&o!==2&&o!==1/0&&o!=="F")throw new Error(r);if(!this.isSquare())throw new Error(n);try{var p=t.inverse(this);return p.norm(o)*this.norm(o)}catch(l){if(l.message===s)return 1/0;throw l}}return cond_1=i,cond_1}var det_1,hasRequiredDet;function requireDet(){if(hasRequiredDet)return det_1;hasRequiredDet=1;function t(f,d){return i(f)||n(f,d)||r(f,d)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(f,d){if(f){if(typeof f=="string")return s(f,d);var g=Object.prototype.toString.call(f).slice(8,-1);if(g==="Object"&&f.constructor&&(g=f.constructor.name),g==="Map"||g==="Set")return Array.from(f);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return s(f,d)}}function s(f,d){(d==null||d>f.length)&&(d=f.length);for(var g=0,u=new Array(d);g<d;g++)u[g]=f[g];return u}function n(f,d){var g=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(g!=null){var u=[],h=!0,y=!1,m,_;try{for(g=g.call(f);!(h=(m=g.next()).done)&&(u.push(m.value),!(d&&u.length===d));h=!0);}catch(b){y=!0,_=b}finally{try{!h&&g.return!=null&&g.return()}finally{if(y)throw _}}return u}}function i(f){if(Array.isArray(f))return f}var o=requireLib(),p=require_Error(),l=p.INVALID_SQUARE_MATRIX;function c(){if(!this.isSquare())throw new Error(l);if(this._det!==void 0)return this._det;var f=this._matrix,d=f.length;if(d===0)return this._det=1,1;if(d===1)return this._det=f[0][0],this._det;if(d===2)return this._det=f[0][0]*f[1][1]-f[0][1]*f[1][0],this._det;if(d===3)return this._det=f[0][0]*f[1][1]*f[2][2]+f[0][1]*f[1][2]*f[2][0]+f[0][2]*f[1][0]*f[2][1]-f[0][2]*f[1][1]*f[2][0]-f[0][1]*f[1][0]*f[2][2]-f[0][0]*f[1][2]*f[2][1],this._det;for(var g=o.LU(this,!0),u=t(g,2),h=u[0],y=u[1],m=y._matrix,_=0,b=0;b<d;b++)if(h[b]!==b)for(;h[b]!==b;){var M=h[b];h[b]=h[M],h[M]=M,_++}for(var S=1,v=0;v<d;v++)S*=m[v][v];return _%2===1?(this._det=S*-1,this._det):(this._det=S,S)}return det_1=c,det_1}var getReal_1,hasRequiredGetReal;function requireGetReal(){if(hasRequiredGetReal)return getReal_1;hasRequiredGetReal=1;function t(){return this.re}return getReal_1=t,getReal_1}var getImaginary_1,hasRequiredGetImaginary;function requireGetImaginary(){if(hasRequiredGetImaginary)return getImaginary_1;hasRequiredGetImaginary=1;function t(){return this.im}return getImaginary_1=t,getImaginary_1}var getModulus_1,hasRequiredGetModulus;function requireGetModulus(){if(hasRequiredGetModulus)return getModulus_1;hasRequiredGetModulus=1;function t(){return Math.sqrt(Math.pow(this.re,2)+Math.pow(this.im,2))}return getModulus_1=t,getModulus_1}var getArgument_1,hasRequiredGetArgument;function requireGetArgument(){if(hasRequiredGetArgument)return getArgument_1;hasRequiredGetArgument=1;function t(){var e=this.re,r=this.im,s=1/(Math.pow(10,15)*2);if(!(Math.abs(e)<s&&Math.abs(r)<s))return e===0?r>0?Math.PI*.5:Math.PI*1.5:r===0?e>0?0:Math.PI:e>0&&r>0?Math.atan(r/e):e<0&&r>0?Math.PI-Math.atan(r/(e*-1)):e<0&&r<0?Math.PI+Math.atan(r*-1/(e*-1)):Math.PI*2-Math.atan(r*-1/e)}return getArgument_1=t,getArgument_1}var toString_1$1,hasRequiredToString$1;function requireToString$1(){if(hasRequiredToString$1)return toString_1$1;hasRequiredToString$1=1;function t(){var e=this.re,r=this.im;return Number.isNaN(e)||Number.isNaN(r)?"NaN":e===0&&r===0?"0":e===0?r===1?"i":r===-1?"-i":"".concat(r,"i"):r===0?"".concat(e):r>0?r===1?"".concat(e," + i"):"".concat(e," + ").concat(r,"i"):r===-1?"".concat(e," - i"):"".concat(e," - ").concat(Math.abs(r),"i")}return toString_1$1=t,toString_1$1}var _isNaN,hasRequired_isNaN;function require_isNaN(){if(hasRequired_isNaN)return _isNaN;hasRequired_isNaN=1;function t(e){if(!(e instanceof this))return!1;var r=e.getReal(),s=e.getImaginary();return!!(Number.isNaN(r)||Number.isNaN(s))}return _isNaN=t,_isNaN}var isEqual_1$1,hasRequiredIsEqual$1;function requireIsEqual$1(){if(hasRequiredIsEqual$1)return isEqual_1$1;hasRequiredIsEqual$1=1;function t(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:15;if(!(e instanceof this)||!(r instanceof this))return!1;if(!Number.isInteger(s)||s<0)throw new Error("Invalid argument: Expected a non-negative integer digit");var n=1/(Math.pow(10,s)*2),i=e.getReal(),o=e.getImaginary(),p=r.getReal(),l=r.getImaginary();return Number.isNaN(i)&&Number.isNaN(o)&&Number.isNaN(p)&&Number.isNaN(l)?!0:Math.abs(i-p)<n&&Math.abs(o-l)<n}return isEqual_1$1=t,isEqual_1$1}var conjugate_1,hasRequiredConjugate;function requireConjugate(){if(hasRequiredConjugate)return conjugate_1;hasRequiredConjugate=1;function t(e){return e instanceof this?new this(e.getReal(),e.getImaginary()*-1):this.NaN}return conjugate_1=t,conjugate_1}var inverse_1$1,hasRequiredInverse$1;function requireInverse$1(){if(hasRequiredInverse$1)return inverse_1$1;hasRequiredInverse$1=1;function t(e){return e instanceof this?this.divide(this.ONE,e):this.NaN}return inverse_1$1=t,inverse_1$1}var add_1$1,hasRequiredAdd$1;function requireAdd$1(){if(hasRequiredAdd$1)return add_1$1;hasRequiredAdd$1=1;function t(e,r){return!(e instanceof this)||!(r instanceof this)?this.NaN:new this(e.re+r.re,e.im+r.im)}return add_1$1=t,add_1$1}var subtract_1,hasRequiredSubtract$1;function requireSubtract$1(){if(hasRequiredSubtract$1)return subtract_1;hasRequiredSubtract$1=1;function t(e,r){return!(e instanceof this)||!(r instanceof this)?this.NaN:new this(e.re-r.re,e.im-r.im)}return subtract_1=t,subtract_1}var multiply_1$1,hasRequiredMultiply$1;function requireMultiply$1(){if(hasRequiredMultiply$1)return multiply_1$1;hasRequiredMultiply$1=1;function t(e,r){if(!(e instanceof this)||!(r instanceof this))return this.NaN;var s=e.re,n=e.im,i=r.re,o=r.im;return new this(s*i-n*o,s*o+n*i)}return multiply_1$1=t,multiply_1$1}var divide_1,hasRequiredDivide;function requireDivide(){if(hasRequiredDivide)return divide_1;hasRequiredDivide=1;function t(e,r){if(!(e instanceof this)||!(r instanceof this))return this.NaN;var s=e.re,n=e.im,i=r.re,o=r.im;if(Math.abs(i)<this.EPSILON&&Math.abs(o)<this.EPSILON)return this.NaN;var p=Math.pow(i,2)+Math.pow(o,2);return new this((s*i+n*o)/p,(n*i-s*o)/p)}return divide_1=t,divide_1}var exp_1,hasRequiredExp;function requireExp(){if(hasRequiredExp)return exp_1;hasRequiredExp=1;function t(e){if(!(e instanceof this))return this.NaN;var r=e.getReal(),s=e.getImaginary(),n=Math.exp(r);return new this(n*Math.cos(s),n*Math.sin(s))}return exp_1=t,exp_1}var log_1,hasRequiredLog;function requireLog(){if(hasRequiredLog)return log_1;hasRequiredLog=1;function t(e){if(!(e instanceof this))return this.NaN;var r=e.getModulus(),s=e.getArgument();return r<this.EPSILON||s===void 0?this.NaN:new this(Math.log(r),s)}return log_1=t,log_1}var pow_1$1,hasRequiredPow$1;function requirePow$1(){if(hasRequiredPow$1)return pow_1$1;hasRequiredPow$1=1;function t(e,r){return!(e instanceof this)||typeof r!="number"&&!(r instanceof this)?this.NaN:typeof r=="number"?!Number.isFinite(r)||Number.isNaN(r)?this.NaN:r===0?this.ONE:this.isEqual(e,this.ZERO)?this.ZERO:this.exp(this.multiply(new this(r,0),this.log(e))):r instanceof this?this.exp(this.multiply(r,this.log(e))):this.NaN}return pow_1$1=t,pow_1$1}var sin_1,hasRequiredSin;function requireSin(){if(hasRequiredSin)return sin_1;hasRequiredSin=1;function t(e){if(!(e instanceof this))return this.NaN;var r=e.getReal(),s=e.getImaginary();return new this(Math.sin(r)*Math.cosh(s),Math.cos(r)*Math.sinh(s))}return sin_1=t,sin_1}var cos_1,hasRequiredCos;function requireCos(){if(hasRequiredCos)return cos_1;hasRequiredCos=1;function t(e){if(!(e instanceof this))return this.NaN;var r=e.getReal(),s=e.getImaginary();return new this(Math.cos(r)*Math.cosh(s),Math.sin(r)*Math.sinh(s)*-1)}return cos_1=t,cos_1}var tan_1,hasRequiredTan;function requireTan(){if(hasRequiredTan)return tan_1;hasRequiredTan=1;function t(e){return this.divide(this.sin(e),this.cos(e))}return tan_1=t,tan_1}var csc_1,hasRequiredCsc;function requireCsc(){if(hasRequiredCsc)return csc_1;hasRequiredCsc=1;function t(e){return this.divide(this.ONE,this.sin(e))}return csc_1=t,csc_1}var sec_1,hasRequiredSec;function requireSec(){if(hasRequiredSec)return sec_1;hasRequiredSec=1;function t(e){return this.divide(this.ONE,this.cos(e))}return sec_1=t,sec_1}var cot_1,hasRequiredCot;function requireCot(){if(hasRequiredCot)return cot_1;hasRequiredCot=1;function t(e){return this.divide(this.ONE,this.tan(e))}return cot_1=t,cot_1}var asin_1,hasRequiredAsin;function requireAsin(){if(hasRequiredAsin)return asin_1;hasRequiredAsin=1;function t(e){return this.multiply(new this(0,-1),this.log(this.add(this.multiply(new this(0,1),e),this.pow(this.subtract(this.ONE,this.pow(e,2)),.5))))}return asin_1=t,asin_1}var acos_1,hasRequiredAcos;function requireAcos(){if(hasRequiredAcos)return acos_1;hasRequiredAcos=1;function t(e){return this.subtract(new this(Math.PI/2),this.asin(e))}return acos_1=t,acos_1}var atan_1,hasRequiredAtan;function requireAtan(){if(hasRequiredAtan)return atan_1;hasRequiredAtan=1;function t(e){return this.multiply(new this(0,1/2),this.subtract(this.log(this.subtract(this.ONE,this.multiply(new this(0,1),e))),this.log(this.add(this.ONE,this.multiply(new this(0,1),e)))))}return atan_1=t,atan_1}var acsc_1,hasRequiredAcsc;function requireAcsc(){if(hasRequiredAcsc)return acsc_1;hasRequiredAcsc=1;function t(e){return this.asin(this.inverse(e))}return acsc_1=t,acsc_1}var asec_1,hasRequiredAsec;function requireAsec(){if(hasRequiredAsec)return asec_1;hasRequiredAsec=1;function t(e){return this.acos(this.inverse(e))}return asec_1=t,asec_1}var acot_1,hasRequiredAcot;function requireAcot(){if(hasRequiredAcot)return acot_1;hasRequiredAcot=1;function t(e){return this.atan(this.inverse(e))}return acot_1=t,acot_1}var lib$1,hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1;hasRequiredLib$1=1;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(n){return typeof n}:t=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(r)}function e(r,s){var n=t(r),i=t(s);return n==="number"&&i==="undefined"?Number.isNaN(r)||!Number.isFinite(r)?(this.re=NaN,this.im=NaN,this):(this.re=r,this.im=0,this):n==="number"&&i==="number"?Number.isNaN(r)||Number.isNaN(s)||!Number.isFinite(r)||!Number.isFinite(s)?(this.re=NaN,this.im=NaN,this):(this.re=r,this.im=s,this):(this.re=NaN,this.im=NaN,this)}return e.prototype.getReal=requireGetReal(),e.prototype.getImaginary=requireGetImaginary(),e.prototype.getModulus=requireGetModulus(),e.prototype.getArgument=requireGetArgument(),e.prototype.toString=requireToString$1(),e.isNaN=require_isNaN(),e.isEqual=requireIsEqual$1(),e.conjugate=requireConjugate(),e.inverse=requireInverse$1(),e.add=requireAdd$1(),e.subtract=requireSubtract$1(),e.multiply=requireMultiply$1(),e.divide=requireDivide(),e.exp=requireExp(),e.log=requireLog(),e.pow=requirePow$1(),e.sin=requireSin(),e.cos=requireCos(),e.tan=requireTan(),e.csc=requireCsc(),e.sec=requireSec(),e.cot=requireCot(),e.asin=requireAsin(),e.acos=requireAcos(),e.atan=requireAtan(),e.acsc=requireAcsc(),e.asec=requireAsec(),e.acot=requireAcot(),e.NaN=new e(NaN),e.ONE=new e(1),e.ZERO=new e(0),e.PI=new e(Math.PI),e.E=new e(Math.E),e.EPSILON=1/(Math.pow(10,15)*2),lib$1=e,lib$1}var eigenvalues_1,hasRequiredEigenvalues;function requireEigenvalues(){if(hasRequiredEigenvalues)return eigenvalues_1;hasRequiredEigenvalues=1;function t(h,y){return i(h)||n(h,y)||r(h,y)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(h,y){if(h){if(typeof h=="string")return s(h,y);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return s(h,y)}}function s(h,y){(y==null||y>h.length)&&(y=h.length);for(var m=0,_=new Array(y);m<y;m++)_[m]=h[m];return _}function n(h,y){var m=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(m!=null){var _=[],b=!0,M=!1,S,v;try{for(m=m.call(h);!(b=(S=m.next()).done)&&(_.push(S.value),!(y&&_.length===y));b=!0);}catch(E){M=!0,v=E}finally{try{!b&&m.return!=null&&m.return()}finally{if(M)throw v}}return _}}function i(h){if(Array.isArray(h))return h}var o=requireLib$1(),p=requireLib(),l=require_Error(),c=l.INVALID_SQUARE_MATRIX;function f(){if(!this.isSquare())throw new Error(c);if(this._eigenvalues!==void 0)return this._eigenvalues;var h=this.size()[0],y=[],m=this._digit,_=1/(Math.pow(10,m)*2),b=p.clone(this)._matrix,M=!0,S=!1;d(b,m);for(var v=h-1;v>0;v--){var E=0,T=void 0;if(S){S=!1;continue}for(var A=b[h-1][h-1];;){M?T=Math.abs(b[v][v-1]):T=u(b[v-1][v-1],b[v-1][v],b[v][v-1],b[v][v]).metric;for(var R=0;R<h;R++)b[R][R]-=A;g(b,m);for(var x=0;x<h;x++)b[x][x]+=A;if(M&&T<Math.abs(b[v][v-1])&&E++,M&&Math.abs(b[v][v-1])<_){y[v]=new o(b[v][v]);break}var C=u(b[v-1][v-1],b[v-1][v],b[v][v-1],b[v][v]),O=C.metric,F=C.eigen1,L=C.eigen2;if(!M&&Math.abs(T-O)<_){M=!0,S=!0;var I=F.re,N=F.im,k=L.re,U=L.im;y[v]=new o(I,N),y[v-1]=new o(k,U);break}E>3&&(M=!1)}}return S||(y[0]=new o(b[0][0])),this._eigenvalues=y,y}function d(h,y){for(var m=h.length,_=1/(Math.pow(10,y)*2),b=0;b<m-2;b++){for(var M=0,S=new Array(m-b-1),v=b+1;v<m;v++){var E=h[v][b];M+=Math.pow(E,2),S[v-b-1]=E}if(M=Math.sqrt(M),!(Math.abs(M)<_)){S[0]>=0?S[0]+=M:S[0]-=M;for(var T=0,A=0;A<S.length;A++)T+=Math.pow(S[A],2);T=Math.sqrt(T);for(var R=0;R<S.length;R++)S[R]/=T;for(var x=b;x<m;x++){for(var C=new Array(m-b-1),O=b+1;O<m;O++)C[O-b-1]=h[O][x];for(var F=0,L=0;L<C.length;L++)F+=C[L]*S[L];F*=2;for(var I=b+1;I<m;I++)x===b&&I!==b+1?h[I][x]=0:h[I][x]=C[I-b-1]-F*S[I-b-1]}for(var N=0;N<m;N++){for(var k=new Array(m-b-1),U=b+1;U<m;U++)k[U-b-1]=h[N][U];for(var H=0,W=0;W<k.length;W++)H+=k[W]*S[W];H*=2;for(var z=b+1;z<m;z++)h[N][z]=k[z-b-1]-H*S[z-b-1]}}}}function g(h,y){for(var m=h.length,_=1/(Math.pow(10,y)*2),b=new Array(m-1),M=0;M<m-1;M++){var S=h[M][M],v=h[M+1][M],E=Math.sqrt(Math.pow(S,2)+Math.pow(v,2));if(!(E<_)){var T=S/E,A=v*-1/E;b[M]=[A,T];for(var R=new Array(m-M),x=new Array(m-M),C=M;C<m;C++)R[C-M]=h[M][C],x[C-M]=h[M+1][C];for(var O=M;O<m;O++)h[M][O]=T*R[O-M]+A*-1*x[O-M],M===O?h[M+1][O]=0:h[M+1][O]=A*R[O-M]+T*x[O-M]}}for(var F=0;F<m-1;F++)if(b[F]){for(var L=t(b[F],2),I=L[0],N=L[1],k=new Array(F+2),U=new Array(F+2),H=0;H<=F+1;H++)k[H]=h[H][F],U[H]=h[H][F+1];for(var W=0;W<=F+1;W++)h[W][F]=k[W]*N-U[W]*I,h[W][F+1]=k[W]*I+U[W]*N}}function u(h,y,m,_){var b=(h+_)*-1,M=h*_-m*y,S=Math.pow(b,2)-4*M,v,E,T,A;return S>=0?(E=0,A=0,b>=0?v=(b*-1-Math.sqrt(S))/2:v=(b*-1+Math.sqrt(S))/2,T=M/v):(v=-b/2,T=v,E=Math.sqrt(S*-1)/2,A=E*-1),{metric:Math.sqrt(Math.pow(v,2)+Math.pow(E,2)),eigen1:{re:v,im:E},eigen2:{re:T,im:A}}}return eigenvalues_1=f,eigenvalues_1}var nullity_1,hasRequiredNullity;function requireNullity(){if(hasRequiredNullity)return nullity_1;hasRequiredNullity=1;function t(){if(this._nullity!==void 0)return this._nullity;var e=this.size()[1],r=this.rank();return this._nullity=e-r,this._nullity}return nullity_1=t,nullity_1}var norm_1,hasRequiredNorm;function requireNorm(){if(hasRequiredNorm)return norm_1;hasRequiredNorm=1;function t(f,d){return i(f)||n(f,d)||r(f,d)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(f,d){if(f){if(typeof f=="string")return s(f,d);var g=Object.prototype.toString.call(f).slice(8,-1);if(g==="Object"&&f.constructor&&(g=f.constructor.name),g==="Map"||g==="Set")return Array.from(f);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return s(f,d)}}function s(f,d){(d==null||d>f.length)&&(d=f.length);for(var g=0,u=new Array(d);g<d;g++)u[g]=f[g];return u}function n(f,d){var g=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(g!=null){var u=[],h=!0,y=!1,m,_;try{for(g=g.call(f);!(h=(m=g.next()).done)&&(u.push(m.value),!(d&&u.length===d));h=!0);}catch(b){y=!0,_=b}finally{try{!h&&g.return!=null&&g.return()}finally{if(y)throw _}}return u}}function i(f){if(Array.isArray(f))return f}var o=requireLib(),p=require_Error(),l=p.INVALID_P_NORM;function c(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,d=this.size(),g=t(d,2),u=g[0],h=g[1];if(f!==1&&f!==2&&f!==1/0&&f!=="F")throw new Error(l);var y=this._matrix,m=0;if(f===1){for(var _=0;_<h;_++){for(var b=0,M=0;M<u;M++)b+=Math.abs(y[M][_]);b>m&&(m=b)}return m}if(f===2){for(var S=o.transpose(this),v=o.multiply(S,this),E=v.eigenvalues(),T=0;T<E.length;T++){var A=E[T].getModulus();A>m&&(m=A)}return Math.sqrt(m)}if(f===1/0){for(var R=0;R<u;R++){for(var x=0,C=0;C<h;C++)x+=Math.abs(y[R][C]);x>m&&(m=x)}return m}for(var O=0;O<u;O++)for(var F=0;F<h;F++)m+=Math.pow(y[O][F],2);return Math.sqrt(m)}return norm_1=c,norm_1}var rank_1,hasRequiredRank;function requireRank(){if(hasRequiredRank)return rank_1;hasRequiredRank=1;function t(l,c){return i(l)||n(l,c)||r(l,c)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(l,c){if(l){if(typeof l=="string")return s(l,c);var f=Object.prototype.toString.call(l).slice(8,-1);if(f==="Object"&&l.constructor&&(f=l.constructor.name),f==="Map"||f==="Set")return Array.from(l);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return s(l,c)}}function s(l,c){(c==null||c>l.length)&&(c=l.length);for(var f=0,d=new Array(c);f<c;f++)d[f]=l[f];return d}function n(l,c){var f=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(f!=null){var d=[],g=!0,u=!1,h,y;try{for(f=f.call(l);!(g=(h=f.next()).done)&&(d.push(h.value),!(c&&d.length===c));g=!0);}catch(m){u=!0,y=m}finally{try{!g&&f.return!=null&&f.return()}finally{if(u)throw y}}return d}}function i(l){if(Array.isArray(l))return l}var o=requireLib();function p(){if(this._rank!==void 0)return this._rank;var l=1/(Math.pow(10,this._digit)*2),c=o.QR(this)[1],f=c._matrix,d=c.size(),g=t(d,2),u=g[0],h=g[1];if(u===0)return this._rank=1,1;for(var y=0,m=0;m<u;m++)for(var _=m;_<h;_++)if(Math.abs(f[m][_])>=l){y++;break}return this._rank=y,y}return rank_1=p,rank_1}var size_1,hasRequiredSize;function requireSize(){if(hasRequiredSize)return size_1;hasRequiredSize=1;function t(){if(this._size!==void 0)return this._size;var e=this._matrix;return e.length===0?(this._size=[0,0],this._size):(this._size=[e.length,e[0].length],this._size)}return size_1=t,size_1}var trace_1,hasRequiredTrace;function requireTrace(){if(hasRequiredTrace)return trace_1;hasRequiredTrace=1;var t=require_Error(),e=t.INVALID_SQUARE_MATRIX;function r(){var s=this._isSquare!==void 0?this._isSquare:this.isSquare();if(!s)throw new Error(e);if(this._trace!==void 0)return this._trace;for(var n=this._matrix,i=n.length,o=0,p=0;p<i;p++)o+=n[p][p];return this._trace=o,o}return trace_1=r,trace_1}var add_1,hasRequiredAdd;function requireAdd(){if(hasRequiredAdd)return add_1;hasRequiredAdd=1;function t(f,d){return i(f)||n(f,d)||r(f,d)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(f,d){if(f){if(typeof f=="string")return s(f,d);var g=Object.prototype.toString.call(f).slice(8,-1);if(g==="Object"&&f.constructor&&(g=f.constructor.name),g==="Map"||g==="Set")return Array.from(f);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return s(f,d)}}function s(f,d){(d==null||d>f.length)&&(d=f.length);for(var g=0,u=new Array(d);g<d;g++)u[g]=f[g];return u}function n(f,d){var g=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(g!=null){var u=[],h=!0,y=!1,m,_;try{for(g=g.call(f);!(h=(m=g.next()).done)&&(u.push(m.value),!(d&&u.length===d));h=!0);}catch(b){y=!0,_=b}finally{try{!h&&g.return!=null&&g.return()}finally{if(y)throw _}}return u}}function i(f){if(Array.isArray(f))return f}var o=require_Error(),p=o.INVALID_MATRIX,l=o.SIZE_INCOMPATIBLE;function c(f,d){if(!(f instanceof this)||!(d instanceof this))throw new Error(p);var g=f.size(),u=t(g,2),h=u[0],y=u[1],m=d.size(),_=t(m,2),b=_[0],M=_[1];if(h!==b||y!==M)throw new Error(l);var S=f._matrix,v=d._matrix;return this.generate(h,y,function(E,T){return S[E][T]+v[E][T]})}return add_1=c,add_1}var inverse_1,hasRequiredInverse;function requireInverse(){if(hasRequiredInverse)return inverse_1;hasRequiredInverse=1;var t=require_Error(),e=t.INVALID_MATRIX,r=t.INVALID_SQUARE_MATRIX,s=t.SINGULAR_MATRIX,n=requireLib();function i(p){if(!(p instanceof this))throw new Error(e);if(!p.isSquare())throw new Error(r);var l=p.size()[0];if(l===0)return new n([]);for(var c=1/(Math.pow(10,p._digit)*2),f=this.identity(l)._matrix,d=this.clone(p)._matrix,g=o(l),u=0;u<l;u++){for(var h=u,y=d[g[u]][u];Math.abs(y)<c&&h<l-1;)h++,y=d[g[h]][u];if(Math.abs(y)<c)throw new Error(s);if(u!==h){var m=g[u];g[u]=g[h],g[h]=m}for(var _=g[u],b=0;b<l;b++){var M=g[b];if(b===u){for(var S=0;S<l;S++)S===u&&(d[M][S]=1),S>u&&(d[M][S]/=y),f[M][S]/=y;y=1}if(b!==u&&Math.abs(d[M][u])>=c)for(var v=d[M][u]/y,E=0;E<l;E++)E===u&&(d[M][E]=0),E>u&&(d[M][E]-=v*d[_][E]),f[M][E]-=v*f[_][E]}}for(var T=0;T<l;T++)d[T]=f[g[T]];return new this(d)}function o(p){for(var l=new Array(p),c=0;c<p;c++)l[c]=c;return l}return inverse_1=i,inverse_1}var empty,hasRequiredEmpty;function requireEmpty(){if(hasRequiredEmpty)return empty;hasRequiredEmpty=1;var t=require_Error(),e=t.INVALID_ROW_COL;return empty=function(s,n){if(!Number.isInteger(s)||s<0||!Number.isInteger(n)||n<0)throw new Error(e);if(s===0||n===0)return[];for(var i=new Array(s),o=0;o<s;o++)i[o]=new Array(n);return i},empty}var multiply_1,hasRequiredMultiply;function requireMultiply(){if(hasRequiredMultiply)return multiply_1;hasRequiredMultiply=1;function t(d,g){return i(d)||n(d,g)||r(d,g)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(d,g){if(d){if(typeof d=="string")return s(d,g);var u=Object.prototype.toString.call(d).slice(8,-1);if(u==="Object"&&d.constructor&&(u=d.constructor.name),u==="Map"||u==="Set")return Array.from(d);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return s(d,g)}}function s(d,g){(g==null||g>d.length)&&(g=d.length);for(var u=0,h=new Array(g);u<g;u++)h[u]=d[u];return h}function n(d,g){var u=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(u!=null){var h=[],y=!0,m=!1,_,b;try{for(u=u.call(d);!(y=(_=u.next()).done)&&(h.push(_.value),!(g&&h.length===g));y=!0);}catch(M){m=!0,b=M}finally{try{!y&&u.return!=null&&u.return()}finally{if(m)throw b}}return h}}function i(d){if(Array.isArray(d))return d}var o=requireEmpty(),p=require_Error(),l=p.INVALID_MATRIX,c=p.SIZE_INCOMPATIBLE;function f(d,g){if(!(d instanceof this)||!(g instanceof this))throw new Error(l);var u=d.size(),h=t(u,2),y=h[0],m=h[1],_=g.size(),b=t(_,2),M=b[0],S=b[1];if(m!==M)throw new Error(c);for(var v=d._matrix,E=g._matrix,T=o(y,S),A=0;A<y;A++)for(var R=0;R<S;R++){T[A][R]=0;for(var x=0;x<M;x++)T[A][R]+=v[A][x]*E[x][R]}return new this(T)}return multiply_1=f,multiply_1}var pow_1,hasRequiredPow;function requirePow(){if(hasRequiredPow)return pow_1;hasRequiredPow=1;var t=require_Error(),e=t.INVALID_MATRIX,r=t.INVALID_SQUARE_MATRIX,s=t.INVALID_EXPONENT;function n(i,o){if(!(i instanceof this))throw new Error(e);if(!i.isSquare())throw new Error(r);if(!Number.isInteger(o)||o<0)throw new Error(s);var p=i.size()[0];if(o===0)return this.identity(p);if(o===1)return this.clone(i);if(o%2===0){var l=this.pow(i,o/2);return this.multiply(l,l)}var c=this.pow(i,(o-1)/2);return this.multiply(this.multiply(c,c),i)}return pow_1=n,pow_1}var subtract,hasRequiredSubtract;function requireSubtract(){if(hasRequiredSubtract)return subtract;hasRequiredSubtract=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.SIZE_INCOMPATIBLE,l=o.INVALID_MATRIX;return subtract=function(f,d){if(!(f instanceof this)||!(d instanceof this))throw new Error(l);var g=f.size(),u=t(g,2),h=u[0],y=u[1],m=d.size(),_=t(m,2),b=_[0],M=_[1];if(h!==b||y!==M)throw new Error(p);var S=f._matrix,v=d._matrix;return this.generate(h,y,function(E,T){return S[E][T]-v[E][T]})},subtract}var transpose_1,hasRequiredTranspose;function requireTranspose(){if(hasRequiredTranspose)return transpose_1;hasRequiredTranspose=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.INVALID_MATRIX;function l(c){if(!(c instanceof this))throw new Error(p);var f=c.size(),d=t(f,2),g=d[0],u=d[1],h=c._matrix;return this.generate(u,g,function(y,m){return h[m][y]})}return transpose_1=l,transpose_1}var backward_1,hasRequiredBackward;function requireBackward(){if(hasRequiredBackward)return backward_1;hasRequiredBackward=1;function t(h,y){return i(h)||n(h,y)||r(h,y)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(h,y){if(h){if(typeof h=="string")return s(h,y);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return s(h,y)}}function s(h,y){(y==null||y>h.length)&&(y=h.length);for(var m=0,_=new Array(y);m<y;m++)_[m]=h[m];return _}function n(h,y){var m=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(m!=null){var _=[],b=!0,M=!1,S,v;try{for(m=m.call(h);!(b=(S=m.next()).done)&&(_.push(S.value),!(y&&_.length===y));b=!0);}catch(E){M=!0,v=E}finally{try{!b&&m.return!=null&&m.return()}finally{if(M)throw v}}return _}}function i(h){if(Array.isArray(h))return h}var o=requireEmpty(),p=require_Error(),l=p.INVALID_MATRIX,c=p.INVALID_UPPER_TRIANGULAR_MATRIX,f=p.INVALID_SQUARE_MATRIX,d=p.SIZE_INCOMPATIBLE,g=p.NO_UNIQUE_SOLUTION;function u(h,y){if(!(h instanceof this)||!(y instanceof this))throw new Error(l);if(!h.isUpperTriangular())throw new Error(c);if(!h.isSquare())throw new Error(f);var m=h.size()[0],_=y.size(),b=t(_,2),M=b[0],S=b[1],v=h._matrix,E=y._matrix;if(M!==m||S!==1)throw new Error(d);for(var T=1/(Math.pow(10,h._digit)*2),A=0;A<m;A++)if(Math.abs(v[A][A])<T)throw new Error(g);for(var R=o(m,1),x=m-1;x>=0;x--){for(var C=0,O=x+1;O<m;O++)C+=R[O][0]*v[x][O];R[x][0]=(E[x][0]-C)/v[x][x]}return new this(R)}return backward_1=u,backward_1}var forward_1,hasRequiredForward;function requireForward(){if(hasRequiredForward)return forward_1;hasRequiredForward=1;function t(h,y){return i(h)||n(h,y)||r(h,y)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(h,y){if(h){if(typeof h=="string")return s(h,y);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return s(h,y)}}function s(h,y){(y==null||y>h.length)&&(y=h.length);for(var m=0,_=new Array(y);m<y;m++)_[m]=h[m];return _}function n(h,y){var m=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(m!=null){var _=[],b=!0,M=!1,S,v;try{for(m=m.call(h);!(b=(S=m.next()).done)&&(_.push(S.value),!(y&&_.length===y));b=!0);}catch(E){M=!0,v=E}finally{try{!b&&m.return!=null&&m.return()}finally{if(M)throw v}}return _}}function i(h){if(Array.isArray(h))return h}var o=requireEmpty(),p=require_Error(),l=p.INVALID_MATRIX,c=p.INVALID_LOWER_TRIANGULAR_MATRIX,f=p.INVALID_SQUARE_MATRIX,d=p.SIZE_INCOMPATIBLE,g=p.NO_UNIQUE_SOLUTION;function u(h,y){if(!(h instanceof this)||!(y instanceof this))throw new Error(l);if(!h.isLowerTriangular())throw new Error(c);if(!h.isSquare())throw new Error(f);var m=h.size()[0],_=y.size(),b=t(_,2),M=b[0],S=b[1],v=h._matrix,E=y._matrix;if(m!==M||S!==1)throw new Error(d);for(var T=1/(Math.pow(10,h._digit)*2),A=0;A<m;A++)if(Math.abs(v[A][A])<T)throw new Error(g);for(var R=o(m,1),x=0;x<m;x++){for(var C=0,O=0;O<x;O++)C+=R[O][0]*v[x][O];R[x][0]=(E[x][0]-C)/v[x][x]}return new this(R)}return forward_1=u,forward_1}var solve_1,hasRequiredSolve;function requireSolve(){if(hasRequiredSolve)return solve_1;hasRequiredSolve=1;function t(g,u){return i(g)||n(g,u)||r(g,u)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(g,u){if(g){if(typeof g=="string")return s(g,u);var h=Object.prototype.toString.call(g).slice(8,-1);if(h==="Object"&&g.constructor&&(h=g.constructor.name),h==="Map"||h==="Set")return Array.from(g);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return s(g,u)}}function s(g,u){(u==null||u>g.length)&&(u=g.length);for(var h=0,y=new Array(u);h<u;h++)y[h]=g[h];return y}function n(g,u){var h=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(h!=null){var y=[],m=!0,_=!1,b,M;try{for(h=h.call(g);!(m=(b=h.next()).done)&&(y.push(b.value),!(u&&y.length===u));m=!0);}catch(S){_=!0,M=S}finally{try{!m&&h.return!=null&&h.return()}finally{if(_)throw M}}return y}}function i(g){if(Array.isArray(g))return g}var o=require_Error(),p=o.INVALID_MATRIX,l=o.NO_UNIQUE_SOLUTION,c=o.INVALID_SQUARE_MATRIX,f=o.SIZE_INCOMPATIBLE;function d(g,u){if(!(g instanceof this)||!(u instanceof this))throw new Error(p);if(!g.isSquare())throw new Error(c);var h=g.size(),y=t(h,2),m=y[0],_=y[1],b=u.size(),M=t(b,2),S=M[0],v=M[1];if(_!==S||v!==1)throw new Error(f);for(var E=1/(Math.pow(10,g._digit)*2),T=this.LU(g,!0),A=t(T,2),R=A[0],x=A[1],C=x._matrix,O=u._matrix,F=m-1;F>=0;F--)if(Math.abs(C[F][F])<E)throw new Error(l);for(var L=new Array(S),I=new Array(S),N=0;N<S;N++)L[N]=O[R[N]][0];for(var k=0;k<m;k++){for(var U=0,H=0;H<k;H++)U+=I[H]*C[k][H];I[k]=L[k]-U}for(var W=m-1;W>=0;W--){for(var z=0,j=W+1;j<m;j++)z+=C[W][j]*L[j];L[W]=(I[W]-z)/C[W][W]}for(var ee=0;ee<S;ee++)I[ee]=[L[ee]];return new this(I)}return solve_1=d,solve_1}var LU_1,hasRequiredLU;function requireLU(){if(hasRequiredLU)return LU_1;hasRequiredLU=1;function t(d,g){return i(d)||n(d,g)||r(d,g)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(d,g){if(d){if(typeof d=="string")return s(d,g);var u=Object.prototype.toString.call(d).slice(8,-1);if(u==="Object"&&d.constructor&&(u=d.constructor.name),u==="Map"||u==="Set")return Array.from(d);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return s(d,g)}}function s(d,g){(g==null||g>d.length)&&(g=d.length);for(var u=0,h=new Array(g);u<g;u++)h[u]=d[u];return h}function n(d,g){var u=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(u!=null){var h=[],y=!0,m=!1,_,b;try{for(u=u.call(d);!(y=(_=u.next()).done)&&(h.push(_.value),!(g&&h.length===g));y=!0);}catch(M){m=!0,b=M}finally{try{!y&&u.return!=null&&u.return()}finally{if(m)throw b}}return h}}function i(d){if(Array.isArray(d))return d}var o=require_Error(),p=o.INVALID_MATRIX;function l(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(d instanceof this))throw new Error(p);for(var u=d.size(),h=t(u,2),y=h[0],m=h[1],_=Math.min(y,m),b=1/(Math.pow(10,d._digit)*2),M=c(y),S=this.clone(d)._matrix,v=0;v<y-1;v++){var E=Math.min(v,m);f(S,M,E,y,m);var T=M[v],A=S[T][E];if(!(Math.abs(A)<b))for(var R=v+1;R<y;R++){var x=M[R],C=S[x][E];if(Math.abs(C)>=b){for(var O=C/A,F=E;F<m;F++)S[x][F]-=O*S[T][F];S[x][E]=O}}}for(var L=new Array(y),I=0;I<y;I++)L[I]=S[M[I]];if(g)return[M,new this(L)];var N=this.generate(y,y,function(H,W){var z=M[H];return W===z?1:0}),k=this.generate(y,_,function(H,W){return H===W?1:H<W?0:L[H][W]}),U=this.generate(_,m,function(H,W){return H>W?0:L[H][W]});return[N,k,U]}function c(d){for(var g=new Array(d),u=0;u<d;u++)g[u]=u;return g}function f(d,g,u,h,y){for(var m=Math.min(u,y),_=u,b=Math.abs(d[g[u]][m]),M=u+1;M<h;M++){var S=Math.abs(d[g[M]][m]);S>b&&(_=M,b=S)}var v=g[u];g[u]=g[_],g[_]=v}return LU_1=l,LU_1}var QR_1,hasRequiredQR;function requireQR(){if(hasRequiredQR)return QR_1;hasRequiredQR=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.INVALID_MATRIX;function l(c){if(!(c instanceof this))throw new Error(p);for(var f=c.size(),d=t(f,2),g=d[0],u=d[1],h=Math.min(g,u),y=1/(Math.pow(10,c._digit)*2),m=this.clone(c)._matrix,_=this.identity(g)._matrix,b=0;b<h;b++){for(var M=!0,S=b+1;S<g;S++)if(Math.abs(m[S][b])>=y){M=!1;break}if(!M){for(var v=0,E=b;E<g;E++)v+=Math.pow(m[E][b],2);v=Math.sqrt(v);var T=-1;m[b][b]<0&&(T=1);for(var A=m[b][b]-T*v,R=new Array(g-b),x=0;x<g-b;x++)R[x]=m[x+b][b]/A;R[0]=1;for(var C=-1*T*A/v,O=new Array(g-b),F=0;F<g-b;F++){for(var L=new Array(u),I=0;I<u;I++)L[I]=m[b+F][I];O[F]=L}for(var N=b;N<g;N++)for(var k=0;k<u;k++){for(var U=0,H=0;H<g-b;H++)U+=O[H][k]*R[H];m[N][k]=O[N-b][k]-C*R[N-b]*U}for(var W=new Array(g),z=0;z<g;z++){for(var j=new Array(g-b),ee=0;ee<g-b;ee++)j[ee]=_[z][b+ee];W[z]=j}for(var te=0;te<g;te++)for(var ie=b;ie<g;ie++){for(var le=0,me=0;me<g-b;me++)le+=W[te][me]*R[me];_[te][ie]=W[te][ie-b]-C*R[ie-b]*le}}}for(var fe=0;fe<g;fe++)for(var Oe=0;Oe<u;Oe++)fe>Oe&&(m[fe][Oe]=0);return[new this(_),new this(m)]}return QR_1=l,QR_1}var clone_1,hasRequiredClone;function requireClone(){if(hasRequiredClone)return clone_1;hasRequiredClone=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.INVALID_MATRIX;function l(c){if(!(c instanceof this))throw new Error(p);var f=c.size(),d=t(f,2),g=d[0],u=d[1],h=c._matrix;return this.generate(g,u,function(y,m){return h[y][m]})}return clone_1=l,clone_1}var column_1,hasRequiredColumn;function requireColumn(){if(hasRequiredColumn)return column_1;hasRequiredColumn=1;function t(d,g){return i(d)||n(d,g)||r(d,g)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(d,g){if(d){if(typeof d=="string")return s(d,g);var u=Object.prototype.toString.call(d).slice(8,-1);if(u==="Object"&&d.constructor&&(u=d.constructor.name),u==="Map"||u==="Set")return Array.from(d);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return s(d,g)}}function s(d,g){(g==null||g>d.length)&&(g=d.length);for(var u=0,h=new Array(g);u<g;u++)h[u]=d[u];return h}function n(d,g){var u=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(u!=null){var h=[],y=!0,m=!1,_,b;try{for(u=u.call(d);!(y=(_=u.next()).done)&&(h.push(_.value),!(g&&h.length===g));y=!0);}catch(M){m=!0,b=M}finally{try{!y&&u.return!=null&&u.return()}finally{if(m)throw b}}return h}}function i(d){if(Array.isArray(d))return d}var o=require_Error(),p=o.INVALID_ROW_COL,l=o.OVERFLOW_COLUMN,c=o.INVALID_MATRIX;function f(d,g){if(!(d instanceof this))throw new Error(c);if(!Number.isInteger(g)||g<0)throw new Error(p);var u=d.size(),h=t(u,2),y=h[0],m=h[1];if(g>=m)throw new Error(l);var _=d._matrix;return this.generate(y,1,function(b){return _[b][g]})}return column_1=f,column_1}var diag_1,hasRequiredDiag;function requireDiag(){if(hasRequiredDiag)return diag_1;hasRequiredDiag=1;var t=requireLib(),e=requireIsNumber(),r=require_Error(),s=r.INVALID_ARRAY,n=r.EXPECTED_ARRAY_OF_NUMBERS_OR_MATRICES,i=r.INVALID_SQUARE_MATRIX;function o(p){if(!Array.isArray(p))throw new Error(s);for(var l=p.length,c,f=0;f<l;f++){var d=p[f];if(!e(d)&&!(d instanceof t))throw new Error(n);if(e(d)){if(!c){c="number";continue}if(c!=="number")throw new Error(n)}else{if(!d.isSquare())throw new Error(i);if(!c){c="square";continue}if(c!=="square")throw new Error(n)}}if(c==="number")return t.generate(l,l,function(M,S){return M===S?p[M]:0});for(var g=0,u=new Array(l),h=0;h<l;h++){var y=p[h].size()[0];g+=y,u[h]=y}var m=0,_=0,b=u[m];return t.generate(g,g,function(M,S){M-_===b&&S-_===b&&(_+=b,m++);var v=M-_,E=S-_;for(b=u[m];b===0;)m++,b=u[m];return v<b&&v>=0&&E<b&&E>=0?p[m]._matrix[v][E]:0})}return diag_1=o,diag_1}var elementwise_1,hasRequiredElementwise;function requireElementwise(){if(hasRequiredElementwise)return elementwise_1;hasRequiredElementwise=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.INVALID_MATRIX;function l(c,f){if(!(c instanceof this))throw new Error(p);var d=c.size(),g=t(d,2),u=g[0],h=g[1],y=c._matrix;return this.generate(u,h,function(m,_){return f(y[m][_])})}return elementwise_1=l,elementwise_1}var generate_1,hasRequiredGenerate;function requireGenerate(){if(hasRequiredGenerate)return generate_1;hasRequiredGenerate=1;var t=requireEmpty();function e(r,s,n){var i=t(r,s);if(r===0||s===0)return new this([]);for(var o=0;o<r;o++)for(var p=0;p<s;p++)i[o][p]=n(o,p);return new this(i)}return generate_1=e,generate_1}var getDiag_1,hasRequiredGetDiag;function requireGetDiag(){if(hasRequiredGetDiag)return getDiag_1;hasRequiredGetDiag=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.INVALID_MATRIX;function l(c){if(!(c instanceof this))throw new Error(p);for(var f=c.size(),d=t(f,2),g=d[0],u=d[1],h=Math.min(g,u),y=c._matrix,m=new Array(h),_=0;_<h;_++)m[_]=y[_][_];return m}return getDiag_1=l,getDiag_1}var getRandomMatrix_1,hasRequiredGetRandomMatrix;function requireGetRandomMatrix(){if(hasRequiredGetRandomMatrix)return getRandomMatrix_1;hasRequiredGetRandomMatrix=1;function t(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.generate(e,r,function(){return Number.parseFloat((Math.random()*(n-s)+s).toFixed(i))})}return getRandomMatrix_1=t,getRandomMatrix_1}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function t(e){return this.generate(e,e,function(r,s){return r===s?1:0})}return identity_1=t,identity_1}var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;function t(c,f){return i(c)||n(c,f)||r(c,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,g=new Array(f);d<f;d++)g[d]=c[d];return g}function n(c,f){var d=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var g=[],u=!0,h=!1,y,m;try{for(d=d.call(c);!(u=(y=d.next()).done)&&(g.push(y.value),!(f&&g.length===f));u=!0);}catch(_){h=!0,m=_}finally{try{!u&&d.return!=null&&d.return()}finally{if(h)throw m}}return g}}function i(c){if(Array.isArray(c))return c}var o=require_Error(),p=o.INVALID_MATRIX;function l(c,f){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;if(!(c instanceof this)||!(f instanceof this))throw new Error(p);var g=c.size(),u=t(g,2),h=u[0],y=u[1],m=f.size(),_=t(m,2),b=_[0],M=_[1];if(h!==b||y!==M)return!1;for(var S=1/(Math.pow(10,d)*2),v=c._matrix,E=f._matrix,T=0;T<h;T++)for(var A=0;A<y;A++)if(Math.abs(v[T][A]-E[T][A])>=S)return!1;return!0}return isEqual_1=l,isEqual_1}var row_1,hasRequiredRow;function requireRow(){if(hasRequiredRow)return row_1;hasRequiredRow=1;function t(d,g){return i(d)||n(d,g)||r(d,g)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(d,g){if(d){if(typeof d=="string")return s(d,g);var u=Object.prototype.toString.call(d).slice(8,-1);if(u==="Object"&&d.constructor&&(u=d.constructor.name),u==="Map"||u==="Set")return Array.from(d);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return s(d,g)}}function s(d,g){(g==null||g>d.length)&&(g=d.length);for(var u=0,h=new Array(g);u<g;u++)h[u]=d[u];return h}function n(d,g){var u=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(u!=null){var h=[],y=!0,m=!1,_,b;try{for(u=u.call(d);!(y=(_=u.next()).done)&&(h.push(_.value),!(g&&h.length===g));y=!0);}catch(M){m=!0,b=M}finally{try{!y&&u.return!=null&&u.return()}finally{if(m)throw b}}return h}}function i(d){if(Array.isArray(d))return d}var o=require_Error(),p=o.INVALID_ROW_COL,l=o.OVERFLOW_ROW,c=o.INVALID_MATRIX;function f(d,g){if(!(d instanceof this))throw new Error(c);if(!Number.isInteger(g)||g<0)throw new Error(p);var u=d.size(),h=t(u,2),y=h[0],m=h[1];if(g>=y)throw new Error(l);var _=d._matrix;return this.generate(1,m,function(b,M){return _[g][M]})}return row_1=f,row_1}var submatrix_1,hasRequiredSubmatrix;function requireSubmatrix(){if(hasRequiredSubmatrix)return submatrix_1;hasRequiredSubmatrix=1;function t(_,b){return i(_)||n(_,b)||r(_,b)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(_,b){if(_){if(typeof _=="string")return s(_,b);var M=Object.prototype.toString.call(_).slice(8,-1);if(M==="Object"&&_.constructor&&(M=_.constructor.name),M==="Map"||M==="Set")return Array.from(_);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return s(_,b)}}function s(_,b){(b==null||b>_.length)&&(b=_.length);for(var M=0,S=new Array(b);M<b;M++)S[M]=_[M];return S}function n(_,b){var M=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(M!=null){var S=[],v=!0,E=!1,T,A;try{for(M=M.call(_);!(v=(T=M.next()).done)&&(S.push(T.value),!(b&&S.length===b));v=!0);}catch(R){E=!0,A=R}finally{try{!v&&M.return!=null&&M.return()}finally{if(E)throw A}}return S}}function i(_){if(Array.isArray(_))return _}function o(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(M){return typeof M}:o=function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},o(_)}var p=require_Error(),l=p.INVALID_MATRIX,c=p.EXPECTED_STRING_NUMBER_AT_POS_1_2,f=p.INVALID_ROW,d=p.INVALID_COLUMN,g=p.OVERFLOW_ROW,u=p.INVALID_ROWS_EXPRESSION,h=p.INVALID_COLUMNS_EXPRESSION,y=p.OVERFLOW_COLUMN;function m(_,b,M){if(!(_ instanceof this))throw new Error(l);var S=o(b),v=o(M);if(S!=="string"&&S!=="number"||v!=="string"&&v!=="number")throw new Error(c);var E=_.size(),T=t(E,2),A=T[0],R=T[1],x,C,O,F;if(S==="number"){if(!Number.isInteger(b)||b<0)throw new Error(f);if(b>=A)throw new Error(g);x=b,C=b}else{var L=b.split(":");if(L.length!==2)throw new Error(u);var I=t(L,2),N=I[0],k=I[1];if(N==="")x=0;else{var U=Number(N);if(!Number.isInteger(U)||U<0)throw new Error(f);if(U>=A)throw new Error(g);x=U}if(k==="")C=A-1;else{var H=Number(k);if(!Number.isInteger(H)||H<0)throw new Error(f);if(H>=A)throw new Error(g);C=H}if(x>C)throw new Error(u)}if(v==="number"){if(!Number.isInteger(M)||M<0)throw new Error(d);if(M>=R)throw new Error(y);O=M,F=M}else{var W=M.split(":");if(W.length!==2)throw new Error(h);var z=t(W,2),j=z[0],ee=z[1];if(j==="")O=0;else{var te=Number(j);if(!Number.isInteger(te)||te<0)throw new Error(d);if(te>=R)throw new Error(y);O=te}if(ee==="")F=R-1;else{var ie=Number(ee);if(!Number.isInteger(ie)||ie<0)throw new Error(d);if(ie>=R)throw new Error(y);F=ie}if(O>F)throw new Error(h)}for(var le=_._matrix,me=C-x+1,fe=F-O+1,Oe=new Array(me),Ue=x;Ue<=C;Ue++){for(var Ee=new Array(fe),q=O;q<=F;q++)Ee[q-O]=le[Ue][q];Oe[Ue-x]=Ee}return new this(Oe)}return submatrix_1=m,submatrix_1}var zero_1,hasRequiredZero;function requireZero(){if(hasRequiredZero)return zero_1;hasRequiredZero=1;function t(e,r){return r===void 0?this.generate(e,e,function(){return 0}):this.generate(e,r,function(){return 0})}return zero_1=t,zero_1}var fromArray_1,hasRequiredFromArray;function requireFromArray(){if(hasRequiredFromArray)return fromArray_1;hasRequiredFromArray=1;var t=require_Error(),e=t.SIZE_INCOMPATIBLE;function r(s,n,i){if(n*i!==s.length)throw new Error(e);return this.generate(n,i,function(o,p){return s[o*i+p]})}return fromArray_1=r,fromArray_1}var flatten_1,hasRequiredFlatten;function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;function t(p,l){return i(p)||n(p,l)||r(p,l)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(p,l){if(p){if(typeof p=="string")return s(p,l);var c=Object.prototype.toString.call(p).slice(8,-1);if(c==="Object"&&p.constructor&&(c=p.constructor.name),c==="Map"||c==="Set")return Array.from(p);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return s(p,l)}}function s(p,l){(l==null||l>p.length)&&(l=p.length);for(var c=0,f=new Array(l);c<l;c++)f[c]=p[c];return f}function n(p,l){var c=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(c!=null){var f=[],d=!0,g=!1,u,h;try{for(c=c.call(p);!(d=(u=c.next()).done)&&(f.push(u.value),!(l&&f.length===l));d=!0);}catch(y){g=!0,h=y}finally{try{!d&&c.return!=null&&c.return()}finally{if(g)throw h}}return f}}function i(p){if(Array.isArray(p))return p}function o(){for(var p=this.size(),l=t(p,2),c=l[0],f=l[1],d=c*f,g=new Array(d),u=0;u<c;u++)for(var h=0;h<f;h++)g[u*f+h]=this._matrix[u][h];return g}return flatten_1=o,flatten_1}var entry_1,hasRequiredEntry;function requireEntry(){if(hasRequiredEntry)return entry_1;hasRequiredEntry=1;function t(f,d){return i(f)||n(f,d)||r(f,d)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(f,d){if(f){if(typeof f=="string")return s(f,d);var g=Object.prototype.toString.call(f).slice(8,-1);if(g==="Object"&&f.constructor&&(g=f.constructor.name),g==="Map"||g==="Set")return Array.from(f);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return s(f,d)}}function s(f,d){(d==null||d>f.length)&&(d=f.length);for(var g=0,u=new Array(d);g<d;g++)u[g]=f[g];return u}function n(f,d){var g=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(g!=null){var u=[],h=!0,y=!1,m,_;try{for(g=g.call(f);!(h=(m=g.next()).done)&&(u.push(m.value),!(d&&u.length===d));h=!0);}catch(b){y=!0,_=b}finally{try{!h&&g.return!=null&&g.return()}finally{if(y)throw _}}return u}}function i(f){if(Array.isArray(f))return f}var o=require_Error(),p=o.INVALID_ROW_COL,l=o.OVERFLOW_INDEX;function c(f,d){if(!Number.isInteger(f)||f<0||!Number.isInteger(d)||d<0)throw new Error(p);var g=this._matrix,u=this.size(),h=t(u,2),y=h[0],m=h[1];if(f>=y||d>=m)throw new Error(l);return g[f][d]}return entry_1=c,entry_1}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;function t(p,l){return i(p)||n(p,l)||r(p,l)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(p,l){if(p){if(typeof p=="string")return s(p,l);var c=Object.prototype.toString.call(p).slice(8,-1);if(c==="Object"&&p.constructor&&(c=p.constructor.name),c==="Map"||c==="Set")return Array.from(p);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return s(p,l)}}function s(p,l){(l==null||l>p.length)&&(l=p.length);for(var c=0,f=new Array(l);c<l;c++)f[c]=p[c];return f}function n(p,l){var c=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(c!=null){var f=[],d=!0,g=!1,u,h;try{for(c=c.call(p);!(d=(u=c.next()).done)&&(f.push(u.value),!(l&&f.length===l));d=!0);}catch(y){g=!0,h=y}finally{try{!d&&c.return!=null&&c.return()}finally{if(g)throw h}}return f}}function i(p){if(Array.isArray(p))return p}function o(){for(var p=this._matrix,l=this.size(),c=t(l,2),f=c[0],d=c[1],g="",u=0;u<f;u++){for(var h=0;h<d;h++)g+=p[u][h].toString(),h!==d-1&&(g+=" ");u!==f-1&&(g+=`
`)}return g}return toString_1=o,toString_1}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var t=requireIsMatrix(),e=require_Error(),r=e.INVALID_MATRIX;function s(n){if(!t(n))throw new Error(r);this._matrix=n,this._digit=8}return lib=s,s.prototype.isDiagonal=requireIsDiagonal(),s.prototype.isSkewSymmetric=requireIsSkewSymmetric(),s.prototype.isSquare=requireIsSquare(),s.prototype.isSymmetric=requireIsSymmetric(),s.prototype.isLowerTriangular=requireIsLowerTriangular(),s.prototype.isUpperTriangular=requireIsUpperTriangular(),s.prototype.isOrthogonal=requireIsOrthogonal(),s.prototype.cond=requireCond(),s.prototype.det=requireDet(),s.prototype.eigenvalues=requireEigenvalues(),s.prototype.nullity=requireNullity(),s.prototype.norm=requireNorm(),s.prototype.rank=requireRank(),s.prototype.size=requireSize(),s.prototype.trace=requireTrace(),s.add=requireAdd(),s.inverse=requireInverse(),s.multiply=requireMultiply(),s.pow=requirePow(),s.subtract=requireSubtract(),s.transpose=requireTranspose(),s.backward=requireBackward(),s.forward=requireForward(),s.solve=requireSolve(),s.LU=requireLU(),s.QR=requireQR(),s.clone=requireClone(),s.column=requireColumn(),s.diag=requireDiag(),s.elementwise=requireElementwise(),s.generate=requireGenerate(),s.getDiag=requireGetDiag(),s.getRandomMatrix=requireGetRandomMatrix(),s.identity=requireIdentity(),s.isEqual=requireIsEqual(),s.row=requireRow(),s.submatrix=requireSubmatrix(),s.zero=requireZero(),s.fromArray=requireFromArray(),s.prototype.flatten=requireFlatten(),s.prototype.entry=requireEntry(),s.prototype.toString=requireToString(),lib}var checkCovariance,hasRequiredCheckCovariance;function requireCheckCovariance(){if(hasRequiredCheckCovariance)return checkCovariance;hasRequiredCheckCovariance=1;const t=.1,e=requireLib(),r=requireCheckMatrix(),s=function(i,o=1e-10){const l=new e(i).eigenvalues();for(const c of l)if(c<=-o)throw console.log(i,c),new Error(`Eigenvalue should be positive (actual: ${c})`);console.log("is definite positive",i)},n=function(i,o="checkSymetric"){for(const[p,l]of i.entries())for(const[c,f]of l.entries()){if(p===c&&f<0)throw new Error(`[${o}] Variance[${c}] should be positive (actual: ${f})`);if(Math.abs(f)>Math.sqrt(i[p][p]*i[c][c]))throw console.log(i),new Error(`[${o}] Covariance[${p}][${c}] should verify Cauchy Schwarz Inequality (expected: |x| <= sqrt(${i[p][p]} * ${i[c][c]}) actual: ${f})`);if(Math.abs(f-i[c][p])>t)throw new Error(`[${o}] Covariance[${p}][${c}] should equal Covariance[${c}][${p}]  (actual diff: ${Math.abs(f-i[c][p])})  = ${f} - ${i[c][p]}
${i.join(`
`)} is invalid`)}};return checkCovariance=function({covariance:i,eigen:o=!1}){r(i),n(i),o&&s(i)},checkCovariance}var correlationToCovariance$1,hasRequiredCorrelationToCovariance;function requireCorrelationToCovariance(){if(hasRequiredCorrelationToCovariance)return correlationToCovariance$1;hasRequiredCorrelationToCovariance=1;const t=requireCheckCovariance();return correlationToCovariance$1=function({correlation:e,variance:r}){return t({covariance:e}),e.map((s,n)=>s.map((i,o)=>i*Math.sqrt(r[o]*r[n])))},correlationToCovariance$1}var covarianceToCorrelation$1,hasRequiredCovarianceToCorrelation;function requireCovarianceToCorrelation(){if(hasRequiredCovarianceToCorrelation)return covarianceToCorrelation$1;hasRequiredCovarianceToCorrelation=1;const t=requireCheckCovariance();return covarianceToCorrelation$1=function(e){t({covariance:e});const r=e.map((s,n)=>e[n][n]);return{variance:r,correlation:e.map((s,n)=>s.map((i,o)=>i/Math.sqrt(r[o]*r[n])))}},covarianceToCorrelation$1}const{identity,matPermutation}=simpleLinalg,correlationToCovariance=requireCorrelationToCovariance(),covarianceToCorrelation=requireCovarianceToCorrelation(),sensorProjected=function({selectedCovariance:t,totalDimension:e,obsIndexes:r,selectedStateProjection:s}){if(!s)s=new Array(r.length).fill(0).map(()=>new Array(r.length).fill(0)),r.forEach((c,f)=>{s[f][f]=1});else if(s.length!==r.length)throw new Error(`[Sensor-projected] Shape mismatch between ${s.length} and ${r.length}`);const n=identity(e);r.forEach((c,f)=>{t&&r.forEach((d,g)=>{n[c][d]=t[f][g]})});const{correlation:i,variance:o}=covarianceToCorrelation(n),p=s[0].length;if(s.length!==r.length)throw new Error(`shape mismatch (${s.length} vs ${r.length})`);const l=matPermutation({outputSize:[e,p],colIndexes:s[0].map((c,f)=>f),rowIndexes:r,matrix:s});return{dimension:e,observedProjection:l,covariance(c){const{variance:f}=c;if(!f)return n;if(f.length!==n.length)throw new Error("variance is difference size from baseCovariance");return correlationToCovariance({correlation:i,variance:o.map((g,u)=>f[u]*g)})}}};var sensorProjected_1=sensorProjected,observation={sensor,"sensor-local-variance":sensorLocalVariance,"sensor-projected":sensorProjected_1},arrayToMatrix,hasRequiredArrayToMatrix;function requireArrayToMatrix(){return hasRequiredArrayToMatrix||(hasRequiredArrayToMatrix=1,arrayToMatrix=function({observation:t,dimension:e}){if(!Array.isArray(t)){if(e===1&&typeof t=="number")return[[t]];throw new TypeError(`The observation (${t}) should be an array (dimension: ${e})`)}if(t.length!==e)throw new TypeError(`Observation (${t.length}) and dimension (${e}) not matching`);return typeof t[0]=="number"||t[0]===null?t.map(r=>[r]):t}),arrayToMatrix}var setDimensions,hasRequiredSetDimensions;function requireSetDimensions(){return hasRequiredSetDimensions||(hasRequiredSetDimensions=1,setDimensions=function({observation:t,dynamic:e}){const{stateProjection:r}=t,{transition:s}=e,n=e.dimension,i=t.dimension;if(n&&i&&Array.isArray(r)&&(n!==r[0].length||i!==r.length))throw new TypeError("stateProjection dimensions not matching with observation and dynamic dimensions");if(n&&Array.isArray(s)&&n!==s.length)throw new TypeError("transition dimension not matching with dynamic dimension");return Array.isArray(r)?{observation:Object.assign({},t,{dimension:r.length}),dynamic:Object.assign({},e,{dimension:r[0].length})}:Array.isArray(s)?{observation:t,dynamic:Object.assign({},e,{dimension:s.length})}:{observation:t,dynamic:e}}),setDimensions}var checkDimensions,hasRequiredCheckDimensions;function requireCheckDimensions(){return hasRequiredCheckDimensions||(hasRequiredCheckDimensions=1,checkDimensions=function({observation:t,dynamic:e}){const r=e.dimension,s=t.dimension;if(!r||!s)throw new TypeError("Dimension is not set");return{observation:t,dynamic:e}}),checkDimensions}var buildStateProjection,hasRequiredBuildStateProjection;function requireBuildStateProjection(){if(hasRequiredBuildStateProjection)return buildStateProjection;hasRequiredBuildStateProjection=1;const{padWithZeroCols:t}=simpleLinalg,{identity:e}=simpleLinalg;return buildStateProjection=function({observation:r,dynamic:s}){const{observedProjection:n,stateProjection:i}=r,o=r.dimension,p=s.dimension;if(n&&i)throw new TypeError("You cannot use both observedProjection and stateProjection");if(n){const l=t(n,{columns:p});return{observation:Object.assign({},r,{stateProjection:l}),dynamic:s}}if(o&&p&&!i){const l=e(o);return{observation:Object.assign({},r,{stateProjection:t(l,{columns:p})}),dynamic:s}}return{observation:r,dynamic:s}},buildStateProjection}var extendDynamicInit,hasRequiredExtendDynamicInit;function requireExtendDynamicInit(){if(hasRequiredExtendDynamicInit)return extendDynamicInit;hasRequiredExtendDynamicInit=1;const{diag:t}=simpleLinalg,e=requirePolymorphMatrix();return extendDynamicInit=function({observation:r,dynamic:s}){if(!s.init){const i=s.dimension,o=new Array(i).fill(0),p=new Array(i).fill(1e6);return{observation:r,dynamic:Object.assign({},s,{init:{mean:o.map(c=>[c]),covariance:t(p),index:-1}})}}if(s.init&&!s.init.mean)throw new Error("dynamic.init should have a mean key");return s.init=Object.assign({},s.init,{covariance:e(s.init.covariance,{dimension:s.dimension})}),{observation:r,dynamic:s}},extendDynamicInit}var toFunction,hasRequiredToFunction;function requireToFunction(){return hasRequiredToFunction||(hasRequiredToFunction=1,toFunction=function(t,{label:e=null}={}){if(typeof t=="function"||Array.isArray(t))return t;throw new Error(`${e===null?"":e+" : "}Only arrays and functions are authorized (got: "${t}")`)}),toFunction}var uniq,hasRequiredUniq;function requireUniq(){return hasRequiredUniq||(hasRequiredUniq=1,uniq=function(t){return t.filter((e,r)=>t.indexOf(e)===r)}),uniq}var deepAssign_1,hasRequiredDeepAssign;function requireDeepAssign(){if(hasRequiredDeepAssign)return deepAssign_1;hasRequiredDeepAssign=1;const t=requireUniq(),e=100,r=function(s,n){if(n>e)throw new Error(`In deepAssign, number of recursive call (${n}) reached limit (${e}), deepAssign is not working on  self-referencing objects`);const i=s.filter(d=>d!=null),o=i[i.length-1];if(i.length===1)return i[0];if(typeof o!="object"||Array.isArray(o))return o;if(i.length===0)return null;const p=i.filter(d=>typeof d=="object");let l=[];for(const d of p)l=l.concat(Object.keys(d));const c=t(l),f={};for(const d of c){const g=p.map(u=>u[d]);f[d]=r(g,n+1)}return f};return deepAssign_1=(...s)=>r(s,0),deepAssign_1}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{subtract:t,transpose:e,matMul:r,invert:s,elemWise:n,subSquareMatrix:i}=simpleLinalg,o=requireArrayToMatrix(),p=requireCheckMatrix(),l=requireCheckCovariance();class c{constructor({mean:d,covariance:g,index:u}){this.mean=d,this.covariance=g,this.index=u}check(d){this.constructor.check(this,d)}static check(d,{dimension:g=null,title:u=null,eigen:h}={}){if(!(d instanceof c))throw new TypeError(`The argument is not a state 
Tips: maybe you are using 2 different version of kalman-filter in your npm deps tree`);const{mean:y,covariance:m}=d,_=y.length;if(typeof g=="number"&&_!==g)throw new Error(`[${u}] State.mean ${y} with dimension ${_} does not match expected dimension (${g})`);p(y,[_,1],u?u+".mean":"mean"),p(m,[_,_],u?u+".covariance":"covariance"),l({covariance:m,eigen:h},u?u+".covariance":"covariance")}static matMul({state:d,matrix:g}){const u=r(r(g,d.covariance),e(g)),h=r(g,d.mean);return new c({mean:h,covariance:u,index:d.index})}subState(d){return new c({mean:d.map(u=>this.mean[u]),covariance:i(this.covariance,d),index:this.index})}rawDetailedMahalanobis(d){const g=t(this.mean,d);this.check();const u=s(this.covariance);if(u===null)throw this.check({eigen:!0}),new Error(`Cannot invert covariance ${JSON.stringify(this.covariance)}`);const h=e(g),y=Math.sqrt(r(r(h,u),g));if(Number.isNaN(y))throw console.log({diff:g,covarianceInvert:u,this:this,point:d},r(r(h,u),g)),new Error("mahalanobis is NaN");return{diff:g,covarianceInvert:u,value:y}}detailedMahalanobis({kf:d,observation:g,obsIndexes:u}){if(g.length!==d.observation.dimension)throw new Error(`Mahalanobis observation ${g} (dimension: ${g.length}) does not match with kf observation dimension (${d.observation.dimension})`);let h=o({observation:g,dimension:g.length});const y=d.getValue(d.observation.stateProjection,{});let m=this.constructor.matMul({state:this,matrix:y});return Array.isArray(u)&&(m=m.subState(u),h=u.map(_=>h[_])),m.rawDetailedMahalanobis(h)}mahalanobis(d){const g=this.detailedMahalanobis(d).value;if(Number.isNaN(g))throw new TypeError("mahalanobis is NaN");return g}obsBhattacharyya({kf:d,state:g,obsIndexes:u}){const h=d.getValue(d.observation.stateProjection,{});let y=this.constructor.matMul({state:this,matrix:h}),m=this.constructor.matMul({state:g,matrix:h});return Array.isArray(u)&&(y=y.subState(u),m=m.subState(u)),y.bhattacharyya(m)}bhattacharyya(d){const{covariance:g,mean:u}=this,h=n([g,d.covariance],([_,b])=>(_+b)/2);let y;try{y=s(h)}catch(_){throw console.log("Cannot invert",h),_}const m=t(u,d.mean);return r(e(m),r(y,m))[0][0]}}return state=c,state}var coreKalmanFilter,hasRequiredCoreKalmanFilter;function requireCoreKalmanFilter(){if(hasRequiredCoreKalmanFilter)return coreKalmanFilter;hasRequiredCoreKalmanFilter=1;const{matMul:t,transpose:e,add:r,invert:s,subtract:n,identity:i}=simpleLinalg,o=requireState(),p=requireCheckMatrix(),l={info:(...f)=>console.log(...f),debug(){},warn:(...f)=>console.log(...f),error:(...f)=>console.log(...f)};class c{constructor(d){const{dynamic:g,observation:u,logger:h=l}=d;this.dynamic=g,this.observation=u,this.logger=h}getValue(d,g){return typeof d=="function"?d(g):d}getInitState(){const{mean:d,covariance:g,index:u}=this.dynamic.init,h=new o({mean:d,covariance:g,index:u});return o.check(h,{title:"dynamic.init"}),h}getPredictedCovariance(d={}){let{previousCorrected:g,index:u}=d;g=g||this.getInitState();const h=Object.assign({},{previousCorrected:g,index:u},d),y=this.getValue(this.dynamic.transition,h);p(y,[this.dynamic.dimension,this.dynamic.dimension],"dynamic.transition");const m=e(y),_=t(y,g.covariance),b=t(_,m),M=this.getValue(this.dynamic.covariance,h),S=r(M,b);return p(S,[this.dynamic.dimension,this.dynamic.dimension],"predicted.covariance"),S}predictMean(d){const g=this.predictMeanWithoutControl(d);if(!this.dynamic.constant)return g;const{opts:u}=d,h=this.dynamic.constant(u);return p(h,[this.dynamic.dimension,1],"dynamic.constant"),r(g,h)}predictMeanWithoutControl({opts:d,transition:g}){if(this.dynamic.fn)return this.dynamic.fn(d);const{previousCorrected:u}=d;return t(g,u.mean)}predict(d={}){let{previousCorrected:g,index:u}=d;g=g||this.getInitState(),typeof u!="number"&&typeof g.index=="number"&&(u=g.index+1),o.check(g,{dimension:this.dynamic.dimension});const h=Object.assign({},d,{previousCorrected:g,index:u}),y=this.getValue(this.dynamic.transition,h),m=this.predictMean({transition:y,opts:h}),_=this.getPredictedCovariance(h),b=new o({mean:m,covariance:_,index:u});if(this.logger.debug("Prediction done",b),Number.isNaN(b.mean[0][0]))throw new TypeError("nan");return b}getGain(d){let{predicted:g,stateProjection:u}=d;const h=Object.assign({},{index:g.index},d);u=u||this.getValue(this.observation.stateProjection,h);const y=this.getValue(this.observation.covariance,h);p(y,[this.observation.dimension,this.observation.dimension],"observation.covariance");const m=e(u);p(u,[this.observation.dimension,this.dynamic.dimension],"observation.stateProjection");const _=t(t(u,g.covariance),m),b=r(_,y);return t(t(g.covariance,m),s(b))}getCorrectedCovariance(d){let{predicted:g,optimalKalmanGain:u,stateProjection:h}=d;const y=i(g.covariance.length);if(!h){const m=Object.assign({},{index:g.index},d);h=this.getValue(this.observation.stateProjection,m)}return u||(u=this.getGain(Object.assign({stateProjection:h},d))),t(n(y,t(u,h)),g.covariance)}getPredictedObservation({opts:d,stateProjection:g}){if(this.observation.fn)return this.observation.fn(d);const{predicted:u}=d;return t(g,u.mean)}correct(d){const{predicted:g,observation:u}=d;if(o.check(g,{dimension:this.dynamic.dimension}),!u)throw new Error("no measure available");const h=Object.assign({},{observation:u,predicted:g,index:g.index},d),y=this.getValue(this.observation.stateProjection,h),m=this.getGain(Object.assign({predicted:g,stateProjection:y},d)),_=n(u,this.getPredictedObservation({stateProjection:y,opts:h})),b=r(g.mean,t(m,_));if(Number.isNaN(b[0][0]))throw console.log({optimalKalmanGain:m,innovation:_,predicted:g}),new TypeError("Mean is NaN after correction");const M=this.getCorrectedCovariance(Object.assign({predicted:g,optimalKalmanGain:m,stateProjection:y},d)),S=new o({mean:b,covariance:M,index:g.index});return this.logger.debug("Correction done",S),S}}return coreKalmanFilter=c,coreKalmanFilter}var kalmanFilter$1,hasRequiredKalmanFilter;function requireKalmanFilter(){if(hasRequiredKalmanFilter)return kalmanFilter$1;hasRequiredKalmanFilter=1;const{frobenius:t}=simpleLinalg,e=requireArrayToMatrix(),r=requireSetDimensions(),s=requireCheckDimensions(),n=requireBuildStateProjection(),i=requireExtendDynamicInit(),o=requireToFunction(),p=requireDeepAssign(),l=requirePolymorphMatrix(),c=requireState(),f=modelCollection$1,d=requireCoreKalmanFilter(),g=function(_){return typeof _=="string"?{name:_}:{name:"constant-position"}},u=function(_){return typeof _=="number"?{name:"sensor",sensorDimension:_}:typeof _=="string"?{name:_}:{name:"sensor"}},h=function({observation:_,dynamic:b}){(typeof _!="object"||_===null)&&(_=u(_)),(typeof b!="object"||b===null)&&(b=g(b)),typeof _.name=="string"&&(_=f.buildObservation(_)),typeof b.name=="string"&&(b=f.buildDynamic(b,_));const M=r({observation:_,dynamic:b}),S=s(M),v=n(S);return i(v)},y=function(_){const{observation:b,dynamic:M}=_;return p(_,{observation:{stateProjection:o(l(b.stateProjection),{label:"observation.stateProjection"}),covariance:o(l(b.covariance,{dimension:b.dimension}),{label:"observation.covariance"})},dynamic:{transition:o(l(M.transition),{label:"dynamic.transition"}),covariance:o(l(M.covariance,{dimension:M.dimension}),{label:"dynamic.covariance"})}})};class m extends d{constructor(b={}){const M=h(b),S=y(M);super(Object.assign({},b,S))}correct(b){const M=e({observation:b.observation,dimension:this.observation.dimension});return super.correct(Object.assign({},b,{observation:M}))}filter(b){const M=super.predict(b);return this.correct(Object.assign({},b,{predicted:M}))}filterAll(b){let M=this.getInitState();const S=[];for(const v of b){const E=this.predict({previousCorrected:M});M=this.correct({predicted:E,observation:v}),S.push(M.mean.map(T=>T[0]))}return S}asymptoticStateCovariance({limitIterations:b=100,tolerance:M=1e-6}={}){let S=super.getInitState(),v;const E=[];for(let T=0;T<b;T++)if(v=new c({mean:null,covariance:super.getPredictedCovariance({previousCorrected:S})}),S=new c({mean:null,covariance:super.getCorrectedCovariance({predicted:v})}),E.push(S.covariance),t(S.covariance,E[T-1])<M)return E[T];throw new Error("The state covariance does not converge asymptotically")}asymptoticGain({tolerance:b=1e-6}={}){const M=this.asymptoticStateCovariance({tolerance:b}),S=new c({mean:Array.from({length:M.length}).fill(0).map(()=>[0]),covariance:M});return super.getGain({predicted:S})}}return kalmanFilter$1=m,kalmanFilter$1}var getCovariance,hasRequiredGetCovariance;function requireGetCovariance(){return hasRequiredGetCovariance||(hasRequiredGetCovariance=1,getCovariance=function({measures:t,averages:e}){const r=t.length,s=t[0].length;if(r===0)throw new Error("Cannot find covariance for empty sample");return new Array(s).fill(1).map((n,i)=>new Array(s).fill(1).map((o,p)=>{const c=t.map((f,d)=>(f[i]-e[d][i])*(f[p]-e[d][p])).reduce((f,d)=>f+d)/r;if(Number.isNaN(c))throw new TypeError("result is NaN");return c}))}),getCovariance}var projectObservation,hasRequiredProjectObservation;function requireProjectObservation(){if(hasRequiredProjectObservation)return projectObservation;hasRequiredProjectObservation=1;const{matMul:t,invert:e}=simpleLinalg;return projectObservation=function({observation:r,obsIndexes:s,selectedStateProjection:n,invertSelectedStateProjection:i}){if(!r)return null;const o=r.observation||r,p=s.map(f=>{if(o[f]===void 0)throw new TypeError(`obsIndexes (${s}) is not matching with observation (${r})`);return[o[f]]}),l=i||e(n);if(l===null)throw new Error("selectedStateProjection is not invertible, please provide invertSelectedStateProjection");return t(l,p).map(f=>f[0]).map(f=>{if(Number.isNaN(f))throw new TypeError("NaN in projection");return f})},projectObservation}const modelCollection=modelCollection$1,defaultDynamicModels=dynamic,defaultObservationModels=observation;Object.keys(defaultDynamicModels).forEach(t=>{modelCollection.registerDynamic(t,defaultDynamicModels[t])});Object.keys(defaultObservationModels).forEach(t=>{modelCollection.registerObservation(t,defaultObservationModels[t])});var kalmanFilter=Object.assign({KalmanFilter:requireKalmanFilter(),getCovariance:requireGetCovariance(),State:requireState(),checkCovariance:requireCheckCovariance(),correlationToCovariance:requireCorrelationToCovariance(),covarianceToCorrelation:requireCovarianceToCorrelation(),projectObservation:requireProjectObservation()},modelCollection);class FaceCamera{constructor(e,r){Xe(this,"video");Xe(this,"diagonalFov");Xe(this,"plane");this.video=document.createElement("video"),e.appendChild(this.video),this.diagonalFov=r}get width(){return this.video.videoWidth}get height(){return this.video.videoHeight}get aspectRatio(){return this.width/this.height}get diagonal(){return Math.hypot(this.width,this.height)}get focalLength(){return this.diagonal/2*(1/Math.tan(this.diagonalFov/2))}async init(){const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"user"},width:{ideal:4096},height:{ideal:2160}}});this.video.srcObject=e,await this.video.play(),this.plane=new Plane(new Vector3(0,0,-1),this.focalLength)}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vision={},fileset_resolver={};let supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;const WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function isSimdSupported(){if(supportsSimd===void 0)try{await WebAssembly.instantiate(WASM_SIMD_CHECK),supportsSimd=!0}catch{supportsSimd=!1}return supportsSimd}async function createFileset(t,e=""){const r=await isSimdSupported()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${r}.js`,wasmBinaryPath:`${e}/${t}_${r}.wasm`}}class FilesetResolver$1{static isSimdSupported(){return isSimdSupported()}static forAudioTasks(e){return createFileset("audio",e)}static forTextTasks(e){return createFileset("text",e)}static forVisionTasks(e){return createFileset("vision",e)}}fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;const DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(t){return t=t||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:t.color}),t)}function resolve(t,e){return t instanceof Function?t(e):t}class DrawingUtils$1{constructor(e){this.ctx=e}static clamp(e,r,s){const n=Math.min(r,s),i=Math.max(r,s);return Math.max(n,Math.min(i,e))}static lerp(e,r,s,n,i){const o=n*(1-(e-r)/(s-r))+i*(1-(s-e)/(s-r));return DrawingUtils$1.clamp(o,n,i)}drawLandmarks(e,r){if(!e)return;const s=this.ctx,n=addDefaultOptions(r);s.save();const i=s.canvas;let o=0;for(const p of e){s.fillStyle=resolve(n.fillColor,{index:o,from:p}),s.strokeStyle=resolve(n.color,{index:o,from:p}),s.lineWidth=resolve(n.lineWidth,{index:o,from:p});const l=new Path2D;l.arc(p.x*i.width,p.y*i.height,resolve(n.radius,{index:o,from:p}),0,2*Math.PI),s.fill(l),s.stroke(l),++o}s.restore()}drawConnectors(e,r,s){if(!e||!r)return;const n=this.ctx,i=addDefaultOptions(s);n.save();const o=n.canvas;let p=0;for(const l of r){n.beginPath();const c=e[l.start],f=e[l.end];c&&f&&(n.strokeStyle=resolve(i.color,{index:p,from:c,to:f}),n.lineWidth=resolve(i.lineWidth,{index:p,from:c,to:f}),n.moveTo(c.x*o.width,c.y*o.height),n.lineTo(f.x*o.width,f.y*o.height)),++p,n.stroke()}n.restore()}drawBoundingBox(e,r){const s=this.ctx,n=addDefaultOptions(r);s.save(),s.beginPath(),s.lineWidth=resolve(n.lineWidth,{}),s.strokeStyle=resolve(n.color,{}),s.fillStyle=resolve(n.fillColor,{}),s.moveTo(e.originX,e.originY),s.lineTo(e.originX+e.width,e.originY),s.lineTo(e.originX+e.width,e.originY+e.height),s.lineTo(e.originX,e.originY+e.height),s.lineTo(e.originX,e.originY),s.stroke(),s.fill(),s.restore()}}drawing_utils.DrawingUtils=DrawingUtils$1;var image={},image_shader_context={};Object.defineProperty(image_shader_context,"__esModule",{value:!0}),image_shader_context.MPImageShaderContext=image_shader_context.assertNotNull=void 0;const VERTEX_SHADER=`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,FRAGMENT_SHADER=`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
   void main() {
     gl_FragColor = texture2D(inputTexture, vTex);
   }
 `;function assertNotNull(t,e){if(t===null)throw new Error(`Unable to obtain required WebGL resource: ${e}`);return t}image_shader_context.assertNotNull=assertNotNull;class MPImageShaderBuffers{constructor(e,r,s,n){this.gl=e,this.vertexArrayObject=r,this.vertexBuffer=s,this.textureBuffer=n}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}}class MPImageShaderContext{compileShader(e,r){const s=this.gl,n=assertNotNull(s.createShader(r),"Failed to create WebGL shader");if(s.shaderSource(n,e),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS)){const i=s.getShaderInfoLog(n);throw new Error(`Could not compile WebGL shader: ${i}`)}return s.attachShader(this.program,n),n}setupShaders(){const e=this.gl;if(this.program=assertNotNull(e.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(VERTEX_SHADER,e.VERTEX_SHADER),this.fragmentShader=this.compileShader(FRAGMENT_SHADER,e.FRAGMENT_SHADER),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){const r=e.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${r}`)}this.aVertex=e.getAttribLocation(this.program,"aVertex"),this.aTex=e.getAttribLocation(this.program,"aTex")}createBuffers(e){const r=this.gl,s=assertNotNull(r.createVertexArray(),"Failed to create vertex array");r.bindVertexArray(s);const n=assertNotNull(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,n),r.enableVertexAttribArray(this.aVertex),r.vertexAttribPointer(this.aVertex,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW);const i=assertNotNull(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,i),r.enableVertexAttribArray(this.aTex),r.vertexAttribPointer(this.aTex,2,r.FLOAT,!1,0,0);const o=e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return r.bufferData(r.ARRAY_BUFFER,new Float32Array(o),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindVertexArray(null),new MPImageShaderBuffers(r,s,n,i)}getShaderBuffers(e){return e?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(e){if(this.gl){if(e!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=e}run(e,r,s){this.maybeInitGL(e),this.program||this.setupShaders();const n=this.getShaderBuffers(r);e.useProgram(this.program),n.bind();const i=s();return n.unbind(),i}bindFramebuffer(e,r){this.maybeInitGL(e),this.framebuffer||(this.framebuffer=assertNotNull(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}unbindFramebuffer(){var e;(e=this.gl)===null||e===void 0||e.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){const e=this.gl;e.deleteProgram(this.program),e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}}image_shader_context.MPImageShaderContext=MPImageShaderContext,Object.defineProperty(image,"__esModule",{value:!0}),image.MPImage=void 0;const image_shader_context_1$2=image_shader_context,INSTANCE_COUNT_WARNING_THRESHOLD$1=250;var MPImageType;(function(t){t[t.IMAGE_DATA=0]="IMAGE_DATA",t[t.IMAGE_BITMAP=1]="IMAGE_BITMAP",t[t.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPImageType||(MPImageType={}));class MPImage$1{constructor(e,r,s,n,i,o,p){this.containers=e,this.ownsImageBitmap=r,this.ownsWebGLTexture=s,this.canvas=n,this.shaderContext=i,this.width=o,this.height=p,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--MPImage$1.instancesBeforeWarning,MPImage$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(MPImageType.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(MPImageType.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(MPImageType.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(e){switch(e){case MPImageType.IMAGE_DATA:return this.containers.find(r=>r instanceof ImageData);case MPImageType.IMAGE_BITMAP:return this.containers.find(r=>typeof ImageBitmap<"u"&&r instanceof ImageBitmap);case MPImageType.WEBGL_TEXTURE:return this.containers.find(r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${e}`)}}clone(){const e=[];for(const r of this.containers){let s;if(r instanceof ImageData)s=new ImageData(r.data,this.width,this.height);else if(r instanceof WebGLTexture){const n=this.getGL(),i=this.getShaderContext();n.activeTexture(n.TEXTURE1),s=(0,image_shader_context_1$2.assertNotNull)(n.createTexture(),"Failed to create texture"),n.bindTexture(n.TEXTURE_2D,s),this.configureTextureParams(),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),i.bindFramebuffer(n,s),i.run(n,!1,()=>{this.bindTexture(),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),this.unbindTexture()}),i.unbindFramebuffer(),this.unbindTexture()}else{if(!(r instanceof ImageBitmap))throw new Error(`Type is not supported: ${r}`);this.convertToWebGLTexture(),this.bindTexture(),s=this.copyTextureToBitmap(),this.unbindTexture()}e.push(s)}return new MPImage$1(e,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$2.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$2.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let e=this.getContainer(MPImageType.IMAGE_BITMAP);return e||(this.convertToWebGLTexture(),e=this.convertWebGLTextureToImageBitmap(),this.containers.push(e),this.ownsImageBitmap=!0),e}convertToImageData(){let e=this.getContainer(MPImageType.IMAGE_DATA);if(!e){const r=this.getGL(),s=this.getShaderContext(),n=new Uint8Array(this.width*this.height*4),i=this.convertToWebGLTexture();s.bindFramebuffer(r,i),r.readPixels(0,0,this.width,this.height,r.RGBA,r.UNSIGNED_BYTE,n),s.unbindFramebuffer(),e=new ImageData(new Uint8ClampedArray(n.buffer),this.width,this.height),this.containers.push(e)}return e}convertToWebGLTexture(){let e=this.getContainer(MPImageType.WEBGL_TEXTURE);if(!e){const r=this.getGL();e=this.bindTexture();const s=this.getContainer(MPImageType.IMAGE_BITMAP)||this.convertToImageData();r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s),this.unbindTexture()}return e}configureTextureParams(){const e=this.getGL();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}bindTexture(){const e=this.getGL();e.viewport(0,0,this.width,this.height),e.activeTexture(e.TEXTURE0);let r=this.getContainer(MPImageType.WEBGL_TEXTURE);return r?e.bindTexture(e.TEXTURE_2D,r):(r=(0,image_shader_context_1$2.assertNotNull)(e.createTexture(),"Failed to create texture"),this.containers.push(r),this.ownsWebGLTexture=!0,e.bindTexture(e.TEXTURE_2D,r),this.configureTextureParams()),r}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){const e=this.getGL();return this.getShaderContext().run(e,!0,()=>this.runWithResizedCanvas(()=>(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))}convertWebGLTextureToImageBitmap(){this.bindTexture();const e=this.copyTextureToBitmap();return this.unbindTexture(),e}runWithResizedCanvas(e){const r=this.canvas;if(r.width===this.width&&r.height===this.height)return e();const s=r.width,n=r.height;r.width=this.width,r.height=this.height;const i=e();return r.width=s,r.height=n,i}close(){this.ownsImageBitmap&&this.getContainer(MPImageType.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPImageType.WEBGL_TEXTURE)),MPImage$1.instancesBeforeWarning=-1}}image.MPImage=MPImage$1,MPImage$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD$1;var mask={},platform_utils={};function isWebKit(t=navigator){const e=t.userAgent;return e.includes("Safari")&&!e.includes("Chrome")}function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isIOS=platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,platform_utils.isIOS=isIOS,Object.defineProperty(mask,"__esModule",{value:!0}),mask.MPMask=void 0;const image_shader_context_1$1=image_shader_context,platform_utils_1$1=platform_utils,INSTANCE_COUNT_WARNING_THRESHOLD=250;var MPMaskType;(function(t){t[t.UINT8_ARRAY=0]="UINT8_ARRAY",t[t.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",t[t.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPMaskType||(MPMaskType={}));class MPMask$1{constructor(e,r,s,n,i,o){this.containers=e,this.ownsWebGLTexture=r,this.canvas=s,this.shaderContext=n,this.width=i,this.height=o,this.ownsWebGLTexture&&(--MPMask$1.instancesBeforeWarning,MPMask$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(MPMaskType.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(MPMaskType.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(MPMaskType.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){const e=this.getGL();if(!MPMask$1.texImage2DFormat)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))MPMask$1.texImage2DFormat=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");MPMask$1.texImage2DFormat=e.R16F}return MPMask$1.texImage2DFormat}getContainer(e){switch(e){case MPMaskType.UINT8_ARRAY:return this.containers.find(r=>r instanceof Uint8Array);case MPMaskType.FLOAT32_ARRAY:return this.containers.find(r=>r instanceof Float32Array);case MPMaskType.WEBGL_TEXTURE:return this.containers.find(r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${e}`)}}clone(){const e=[];for(const r of this.containers){let s;if(r instanceof Uint8Array)s=new Uint8Array(r);else if(r instanceof Float32Array)s=new Float32Array(r);else{if(!(r instanceof WebGLTexture))throw new Error(`Type is not supported: ${r}`);{const n=this.getGL(),i=this.getShaderContext();n.activeTexture(n.TEXTURE1),s=(0,image_shader_context_1$1.assertNotNull)(n.createTexture(),"Failed to create texture"),n.bindTexture(n.TEXTURE_2D,s),this.configureTextureParams();const o=this.getTexImage2DFormat();n.texImage2D(n.TEXTURE_2D,0,o,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),i.bindFramebuffer(n,s),i.run(n,!1,()=>{this.bindTexture(),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),this.unbindTexture()}),i.unbindFramebuffer(),this.unbindTexture()}}e.push(s)}return new MPMask$1(e,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$1.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$1.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let e=this.getContainer(MPMaskType.FLOAT32_ARRAY);if(!e){const r=this.getContainer(MPMaskType.UINT8_ARRAY);if(r)e=new Float32Array(r).map(s=>s/255);else{e=new Float32Array(this.width*this.height);const s=this.getGL(),n=this.getShaderContext(),i=this.convertToWebGLTexture();if(n.bindFramebuffer(s,i),(0,platform_utils_1$1.isIOS)()){const o=new Float32Array(this.width*this.height*4);s.readPixels(0,0,this.width,this.height,s.RGBA,s.FLOAT,o);for(let p=0,l=0;p<e.length;++p,l+=4)e[p]=o[l]}else s.readPixels(0,0,this.width,this.height,s.RED,s.FLOAT,e)}this.containers.push(e)}return e}convertToUint8Array(){let e=this.getContainer(MPMaskType.UINT8_ARRAY);if(!e){const r=this.convertToFloat32Array();e=new Uint8Array(r.map(s=>255*s)),this.containers.push(e)}return e}convertToWebGLTexture(){let e=this.getContainer(MPMaskType.WEBGL_TEXTURE);if(!e){const r=this.getGL();e=this.bindTexture();const s=this.convertToFloat32Array(),n=this.getTexImage2DFormat();r.texImage2D(r.TEXTURE_2D,0,n,this.width,this.height,0,r.RED,r.FLOAT,s),this.unbindTexture()}return e}configureTextureParams(){const e=this.getGL();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}bindTexture(){const e=this.getGL();e.viewport(0,0,this.width,this.height),e.activeTexture(e.TEXTURE0);let r=this.getContainer(MPMaskType.WEBGL_TEXTURE);return r?e.bindTexture(e.TEXTURE_2D,r):(r=(0,image_shader_context_1$1.assertNotNull)(e.createTexture(),"Failed to create texture"),this.containers.push(r),this.ownsWebGLTexture=!0,e.bindTexture(e.TEXTURE_2D,r),this.configureTextureParams()),r}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPMaskType.WEBGL_TEXTURE)),MPMask$1.instancesBeforeWarning=-1}}mask.MPMask=MPMask$1,MPMask$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(t,e,r){t instanceof String&&(t=String(t));for(var s=t.length,n=0;n<s;n++){var i=t[n];if(e.call(r,i,n,t))return{i:n,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,r){t!=Array.prototype&&t!=Object.prototype&&(t[e]=r.value)},$jscomp.getGlobal=function(t){return typeof window<"u"&&window===t?t:commonjsGlobal!==void 0&&commonjsGlobal!=null?commonjsGlobal:t},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(t,e,r,s){if(e){for(r=$jscomp.global,t=t.split("."),s=0;s<t.length-1;s++){var n=t[s];n in r||(r[n]={}),r=r[n]}(e=e(s=r[t=t[t.length-1]]))!=s&&e!=null&&$jscomp.defineProperty(r,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.findIndex",function(t){return t||function(e,r){return $jscomp.findInternal(this,e,r).i}},"es6","es3"),$jscomp.checkStringArgs=function(t,e,r){if(t==null)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.endsWith",function(t){return t||function(e,r){var s=$jscomp.checkStringArgs(this,e,"endsWith");e+="",r===void 0&&(r=s.length),r=Math.max(0,Math.min(0|r,s.length));for(var n=e.length;0<n&&0<r;)if(s[--r]!=e[--n])return!1;return 0>=n}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(t){return t||function(e,r){return $jscomp.findInternal(this,e,r).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(t){return t||function(e,r){var s=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var n=s.length,i=e.length;r=Math.max(0,Math.min(0|r,s.length));for(var o=0;o<i&&r<n;)if(s[r++]!=e[o++])return!1;return o>=i}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(t){return t||function(e){var r=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var s="";e;)1&e&&(s+=r),(e>>>=1)&&(r+=r);return s}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(t,e,r){t=t.split("."),r=r||goog.global,t[0]in r||r.execScript===void 0||r.execScript("var "+t[0]);for(var s;t.length&&(s=t.shift());)t.length||e===void 0?r=r[s]&&r[s]!==Object.prototype[s]?r[s]:r[s]={}:r[s]=e},goog.define=function(t,e){return e},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){goog.exportPath_(t,e)},goog.getScriptNonce=function(t){return t&&t!=goog.global?goog.getScriptNonce_(t.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(t)?t:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(typeof t!="string"||!t||t.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=t},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var t=goog.global.$jscomp;return!!t&&typeof t.getCurrentModulePath=="function"&&!!t.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(t){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=t;else{var e=goog.global.$jscomp;if(!e||typeof e.getCurrentModulePath!="function")throw Error('Module with namespace "'+t+'" has been loaded incorrectly.');e=e.require(e.getCurrentModulePath()),goog.loadedModules_[t]={exports:e,type:goog.ModuleType.ES6,moduleId:t}}},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},goog.getObjectByName=function(t,e){t=t.split("."),e=e||goog.global;for(var r=0;r<t.length;r++)if((e=e[t[r]])==null)return null;return e},goog.globalize=function(t,e){for(var r in e=e||goog.global,t)e[r]=t[r]},goog.addDependency=function(t,e,r,s){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){},goog.requireType=function(t){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(t){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+`
;})();
`},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(t))var r=t.call(void 0,{});else{if(typeof t!="string")throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),r=goog.loadModuleFromSource_.call(void 0,t)}var s=goog.moduleLoaderState_.moduleName;if(typeof s!="string"||!s)throw Error('Invalid module name "'+s+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(s,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof r=="object"&&r!=null&&Object.seal(r),goog.loadedModules_[s]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)t[e]=="."?t.splice(e,1):e&&t[e]==".."&&t[e-1]&&t[e-1]!=".."?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),e.status==0||e.status==200?e.responseText:null}catch{return null}},goog.transpile_=function(t,e,r){var s=goog.global.$jscomp;s||(goog.global.$jscomp=s={});var n=s.transpile;if(!n){var i=goog.basePath+goog.TRANSPILER,o=goog.loadFileSync_(i);if(o){if(function(){(0,eval)(o+`
//# sourceURL=`+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,n=(s=goog.global.$jscomp).transpile}}return n||(n=s.transpile=function(p,l){return goog.logToConsole_(l+" requires transpilation but no transpiler was found."),p}),n(t,e,r)},goog.typeOf=function(t){var e=typeof t;if(e=="object"){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if(r=="[object Window]")return"object";if(r=="[object Array]"||typeof t.length=="number"&&t.splice!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("splice"))return"array";if(r=="[object Function]"||t.call!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("call"))return"function"}else if(e=="function"&&t.call===void 0)return"object";return e},goog.isArray=function(t){return goog.typeOf(t)=="array"},goog.isArrayLike=function(t){var e=goog.typeOf(t);return e=="array"||e=="object"&&typeof t.length=="number"},goog.isDateLike=function(t){return goog.isObject(t)&&typeof t.getFullYear=="function"},goog.isFunction=function(t){return goog.typeOf(t)=="function"},goog.isObject=function(t){var e=typeof t;return e=="object"&&t!=null||e=="function"},goog.getUid=function(t){return Object.prototype.hasOwnProperty.call(t,goog.UID_PROPERTY_)&&t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){t!==null&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var e=goog.typeOf(t);if(e=="object"||e=="array"){if(typeof t.clone=="function")return t.clone();for(var r in e=e=="array"?[]:{},t)e[r]=goog.cloneObject(t[r]);return e}return t},goog.bindNative_=function(t,e,r){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,r){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),t.apply(this,s)}},goog.mixin=function(t,e){for(var r in e)t[r]=e[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,r=e.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(e.createTextNode(t)),e.head.appendChild(r),e.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if(String(t).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var r=function(n){return goog.cssNameMapping_[n]||n},s=function(n){n=n.split("-");for(var i=[],o=0;o<n.length;o++)i.push(r(n[o]));return i.join("-")};return s=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?r:s:function(n){return n},t=e?t+"-"+s(e):s(t),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(t):t},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},goog.getMsg=function(t,e,r){return r&&r.html&&(t=t.replace(/</g,"&lt;")),e&&(t=t.replace(/\{\$([^}]+)}/g,function(s,n){return e!=null&&n in e?e[n]:s})),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,r){goog.exportPath_(t,e,r)},goog.exportProperty=function(t,e,r){t[e]=r},goog.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(s,n,i){for(var o=Array(arguments.length-2),p=2;p<arguments.length;p++)o[p-2]=arguments[p];return e.prototype[n].apply(s,o)}},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");t.call(goog.global)},goog.defineClass=function(t,e){var r=e.constructor,s=e.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,t),t&&goog.inherits(r,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(r.prototype,e),s!=null&&(s instanceof Function?s(r):goog.defineClass.applyProperties_(r,s)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var r=!goog.defineClass.isUnsealable_(e),s=function(){var n=t.apply(this,arguments)||this;return n[goog.UID_PROPERTY_]=n[goog.UID_PROPERTY_],this.constructor===s&&r&&Object.seal instanceof Function&&Object.seal(n),n};return s},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);for(var s=0;s<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;s++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[s],Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},goog.tagUnsealableClass=function(t){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(t){return t},goog.createTrustedTypesPolicy=function(t){var e=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return e;try{e=r.createPolicy(t,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(s){goog.logToConsole_(s.message)}return e},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e},goog.object.forEach=function(t,e,r){for(var s in t)e.call(r,t[s],s,t)},goog.object.filter=function(t,e,r){var s,n={};for(s in t)e.call(r,t[s],s,t)&&(n[s]=t[s]);return n},goog.object.map=function(t,e,r){var s,n={};for(s in t)n[s]=e.call(r,t[s],s,t);return n},goog.object.some=function(t,e,r){for(var s in t)if(e.call(r,t[s],s,t))return!0;return!1},goog.object.every=function(t,e,r){for(var s in t)if(!e.call(r,t[s],s,t))return!1;return!0},goog.object.getCount=function(t){var e,r=0;for(e in t)r++;return r},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,r=[],s=0;for(e in t)r[s++]=t[e];return r},goog.object.getKeys=function(t){var e,r=[],s=0;for(e in t)r[s++]=e;return r},goog.object.getValueByKeys=function(t,e){var r=goog.isArrayLike(e),s=r?e:arguments;for(r=r?0:1;r<s.length;r++){if(t==null)return;t=t[s[r]]}return t},goog.object.containsKey=function(t,e){return t!==null&&e in t},goog.object.containsValue=function(t,e){for(var r in t)if(t[r]==e)return!0;return!1},goog.object.findKey=function(t,e,r){for(var s in t)if(e.call(r,t[s],s,t))return s},goog.object.findValue=function(t,e,r){return(e=goog.object.findKey(t,e,r))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var r;return(r=e in t)&&delete t[e],r},goog.object.add=function(t,e,r){if(t!==null&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,r)},goog.object.get=function(t,e,r){return t!==null&&e in t?t[e]:r},goog.object.set=function(t,e,r){t[e]=r},goog.object.setIfUndefined=function(t,e,r){return e in t?t[e]:t[e]=r},goog.object.setWithReturnValueIfNotSet=function(t,e,r){return e in t?t[e]:(r=r(),t[e]=r)},goog.object.equals=function(t,e){for(var r in t)if(!(r in e)||t[r]!==e[r])return!1;for(var s in e)if(!(s in t))return!1;return!0},goog.object.clone=function(t){var e,r={};for(e in t)r[e]=t[e];return r},goog.object.unsafeClone=function(t){var e=goog.typeOf(t);if(e=="object"||e=="array"){if(goog.isFunction(t.clone))return t.clone();for(var r in e=e=="array"?[]:{},t)e[r]=goog.object.unsafeClone(t[r]);return e}return t},goog.object.transpose=function(t){var e,r={};for(e in t)r[t[e]]=e;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var r,s,n=1;n<arguments.length;n++){for(r in s=arguments[n])t[r]=s[r];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)r=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}},goog.object.create=function(t){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var r={},s=0;s<e;s+=2)r[arguments[s]]=arguments[s+1];return r},goog.object.createSet=function(t){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},s=0;s<e;s++)r[arguments[s]]=!0;return r},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,r){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var s={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||r);){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++)s[n[i]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(s)},goog.object.getSuperClass=function(t){return(t=Object.getPrototypeOf(t.prototype))&&t.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(t,e,r,s){var n="Assertion failed";if(r){n+=": "+r;var i=s}else t&&(n+=": "+t,i=e);throw Error(""+n,i||[])},jspb.asserts.assert=function(t,e,r){for(var s=[],n=2;n<arguments.length;++n)s[n-2]=arguments[n];return t||jspb.asserts.doAssertFailure("",null,e,s),t},jspb.asserts.assertString=function(t,e,r){for(var s=[],n=2;n<arguments.length;++n)s[n-2]=arguments[n];return typeof t!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(t),t],e,s),t},jspb.asserts.assertArray=function(t,e,r){for(var s=[],n=2;n<arguments.length;++n)s[n-2]=arguments[n];return Array.isArray(t)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(t),t],e,s),t},jspb.asserts.fail=function(t,e){for(var r=[],s=1;s<arguments.length;++s)r[s-1]=arguments[s];throw Error("Failure"+(t?": "+t:""),r)},jspb.asserts.assertInstanceof=function(t,e,r,s){for(var n=[],i=3;i<arguments.length;++i)n[i-3]=arguments[i];return t instanceof e||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(e),jspb.asserts.getType(t)],r,n),t},jspb.asserts.getType=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):t===null?"null":typeof t},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(t){var e=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(t){case e.INT32:case e.INT64:case e.UINT32:case e.UINT64:case e.SINT32:case e.SINT64:case e.BOOL:case e.ENUM:case e.VHASH64:return r.VARINT;case e.DOUBLE:case e.FIXED64:case e.SFIXED64:case e.FHASH64:return r.FIXED64;case e.STRING:case e.MESSAGE:case e.BYTES:return r.DELIMITED;case e.FLOAT:case e.FIXED32:case e.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){goog.debug.Error.call(this,goog.asserts.subs_(t,e)),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(t,e){for(var r="",s=(t=t.split("%s")).length-1,n=0;n<s;n++)r+=t[n]+(n<e.length?e[n]:"%s");return r+t[s]},goog.asserts.doAssertFailure_=function(t,e,r,s){var n="Assertion failed";if(r){n+=": "+r;var i=s}else t&&(n+=": "+t,i=e);t=new goog.asserts.AssertionError(""+n,i||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertExists=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&t==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&typeof t!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&typeof t!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&typeof t!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,r,s){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],r,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertFinite=function(t,e,r){return!goog.asserts.ENABLE_ASSERTS||typeof t=="number"&&isFinite(t)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):t===null?"null":typeof t},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(t){return t[t.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.indexOf.call(t,e,r)}:function(t,e,r){if(r=r==null?0:0>r?Math.max(0,t.length+r):r,typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,r);for(;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.lastIndexOf.call(t,e,r??t.length-1)}:function(t,e,r){if(0>(r=r??t.length-1)&&(r=Math.max(0,t.length+r)),typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.lastIndexOf(e,r);for(;0<=r;r--)if(r in t&&t[r]===e)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(t,e,r){goog.asserts.assert(t.length!=null),Array.prototype.forEach.call(t,e,r)}:function(t,e,r){for(var s=t.length,n=typeof t=="string"?t.split(""):t,i=0;i<s;i++)i in n&&e.call(r,n[i],i,t)},goog.array.forEachRight=function(t,e,r){var s=t.length,n=typeof t=="string"?t.split(""):t;for(--s;0<=s;--s)s in n&&e.call(r,n[s],s,t)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.filter.call(t,e,r)}:function(t,e,r){for(var s=t.length,n=[],i=0,o=typeof t=="string"?t.split(""):t,p=0;p<s;p++)if(p in o){var l=o[p];e.call(r,l,p,t)&&(n[i++]=l)}return n},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.map.call(t,e,r)}:function(t,e,r){for(var s=t.length,n=Array(s),i=typeof t=="string"?t.split(""):t,o=0;o<s;o++)o in i&&(n[o]=e.call(r,i[o],o,t));return n},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(t,e,r,s){return goog.asserts.assert(t.length!=null),s&&(e=goog.bind(e,s)),Array.prototype.reduce.call(t,e,r)}:function(t,e,r,s){var n=r;return goog.array.forEach(t,function(i,o){n=e.call(s,n,i,o,t)}),n},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(t,e,r,s){return goog.asserts.assert(t.length!=null),goog.asserts.assert(e!=null),s&&(e=goog.bind(e,s)),Array.prototype.reduceRight.call(t,e,r)}:function(t,e,r,s){var n=r;return goog.array.forEachRight(t,function(i,o){n=e.call(s,n,i,o,t)}),n},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.some.call(t,e,r)}:function(t,e,r){for(var s=t.length,n=typeof t=="string"?t.split(""):t,i=0;i<s;i++)if(i in n&&e.call(r,n[i],i,t))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.every.call(t,e,r)}:function(t,e,r){for(var s=t.length,n=typeof t=="string"?t.split(""):t,i=0;i<s;i++)if(i in n&&!e.call(r,n[i],i,t))return!1;return!0},goog.array.count=function(t,e,r){var s=0;return goog.array.forEach(t,function(n,i,o){e.call(r,n,i,o)&&++s},r),s},goog.array.find=function(t,e,r){return 0>(e=goog.array.findIndex(t,e,r))?null:typeof t=="string"?t.charAt(e):t[e]},goog.array.findIndex=function(t,e,r){for(var s=t.length,n=typeof t=="string"?t.split(""):t,i=0;i<s;i++)if(i in n&&e.call(r,n[i],i,t))return i;return-1},goog.array.findRight=function(t,e,r){return 0>(e=goog.array.findIndexRight(t,e,r))?null:typeof t=="string"?t.charAt(e):t[e]},goog.array.findIndexRight=function(t,e,r){var s=t.length,n=typeof t=="string"?t.split(""):t;for(--s;0<=s;s--)if(s in n&&e.call(r,n[s],s,t))return s;return-1},goog.array.contains=function(t,e){return 0<=goog.array.indexOf(t,e)},goog.array.isEmpty=function(t){return t.length==0},goog.array.clear=function(t){if(!Array.isArray(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0},goog.array.insert=function(t,e){goog.array.contains(t,e)||t.push(e)},goog.array.insertAt=function(t,e,r){goog.array.splice(t,r,0,e)},goog.array.insertArrayAt=function(t,e,r){goog.partial(goog.array.splice,t,r,0).apply(null,e)},goog.array.insertBefore=function(t,e,r){var s;arguments.length==2||0>(s=goog.array.indexOf(t,r))?t.push(e):goog.array.insertAt(t,e,s)},goog.array.remove=function(t,e){var r;return(r=0<=(e=goog.array.indexOf(t,e)))&&goog.array.removeAt(t,e),r},goog.array.removeLast=function(t,e){return 0<=(e=goog.array.lastIndexOf(t,e))&&(goog.array.removeAt(t,e),!0)},goog.array.removeAt=function(t,e){return goog.asserts.assert(t.length!=null),Array.prototype.splice.call(t,e,1).length==1},goog.array.removeIf=function(t,e,r){return 0<=(e=goog.array.findIndex(t,e,r))&&(goog.array.removeAt(t,e),!0)},goog.array.removeAllIf=function(t,e,r){var s=0;return goog.array.forEachRight(t,function(n,i){e.call(r,n,i,t)&&goog.array.removeAt(t,i)&&s++}),s},goog.array.concat=function(t){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(t){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(t){var e=t.length;if(0<e){for(var r=Array(e),s=0;s<e;s++)r[s]=t[s];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(t,e){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(goog.isArrayLike(s)){var n=t.length||0,i=s.length||0;t.length=n+i;for(var o=0;o<i;o++)t[n+o]=s[o]}else t.push(s)}},goog.array.splice=function(t,e,r,s){return goog.asserts.assert(t.length!=null),Array.prototype.splice.apply(t,goog.array.slice(arguments,1))},goog.array.slice=function(t,e,r){return goog.asserts.assert(t.length!=null),2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,r)},goog.array.removeDuplicates=function(t,e,r){e=e||t;var s=function(l){return goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l};r=r||s,s={};for(var n=0,i=0;i<t.length;){var o=t[i++],p=r(o);Object.prototype.hasOwnProperty.call(s,p)||(s[p]=!0,e[n++]=o)}e.length=n},goog.array.binarySearch=function(t,e,r){return goog.array.binarySearch_(t,r||goog.array.defaultCompare,!1,e)},goog.array.binarySelect=function(t,e,r){return goog.array.binarySearch_(t,e,!0,void 0,r)},goog.array.binarySearch_=function(t,e,r,s,n){for(var i,o=0,p=t.length;o<p;){var l=o+(p-o>>>1),c=r?e.call(n,t[l],l,t):e(s,t[l]);0<c?o=l+1:(p=l,i=!c)}return i?o:-o-1},goog.array.sort=function(t,e){t.sort(e||goog.array.defaultCompare)},goog.array.stableSort=function(t,e){for(var r=Array(t.length),s=0;s<t.length;s++)r[s]={index:s,value:t[s]};var n=e||goog.array.defaultCompare;for(goog.array.sort(r,function(i,o){return n(i.value,o.value)||i.index-o.index}),s=0;s<t.length;s++)t[s]=r[s].value},goog.array.sortByKey=function(t,e,r){var s=r||goog.array.defaultCompare;goog.array.sort(t,function(n,i){return s(e(n),e(i))})},goog.array.sortObjectsByKey=function(t,e,r){goog.array.sortByKey(t,function(s){return s[e]},r)},goog.array.isSorted=function(t,e,r){e=e||goog.array.defaultCompare;for(var s=1;s<t.length;s++){var n=e(t[s-1],t[s]);if(0<n||n==0&&r)return!1}return!0},goog.array.equals=function(t,e,r){if(!goog.isArrayLike(t)||!goog.isArrayLike(e)||t.length!=e.length)return!1;var s=t.length;r=r||goog.array.defaultCompareEquality;for(var n=0;n<s;n++)if(!r(t[n],e[n]))return!1;return!0},goog.array.compare3=function(t,e,r){r=r||goog.array.defaultCompare;for(var s=Math.min(t.length,e.length),n=0;n<s;n++){var i=r(t[n],e[n]);if(i!=0)return i}return goog.array.defaultCompare(t.length,e.length)},goog.array.defaultCompare=function(t,e){return t>e?1:t<e?-1:0},goog.array.inverseDefaultCompare=function(t,e){return-goog.array.defaultCompare(t,e)},goog.array.defaultCompareEquality=function(t,e){return t===e},goog.array.binaryInsert=function(t,e,r){return 0>(r=goog.array.binarySearch(t,e,r))&&(goog.array.insertAt(t,e,-(r+1)),!0)},goog.array.binaryRemove=function(t,e,r){return 0<=(e=goog.array.binarySearch(t,e,r))&&goog.array.removeAt(t,e)},goog.array.bucket=function(t,e,r){for(var s={},n=0;n<t.length;n++){var i=t[n],o=e.call(r,i,n,t);o!==void 0&&(s[o]||(s[o]=[])).push(i)}return s},goog.array.toObject=function(t,e,r){var s={};return goog.array.forEach(t,function(n,i){s[e.call(r,n,i,t)]=n}),s},goog.array.range=function(t,e,r){var s=[],n=0,i=t;if(e!==void 0&&(n=t,i=e),0>(r=r||1)*(i-n))return[];if(0<r)for(t=n;t<i;t+=r)s.push(t);else for(t=n;t>i;t+=r)s.push(t);return s},goog.array.repeat=function(t,e){for(var r=[],s=0;s<e;s++)r[s]=t;return r},goog.array.flatten=function(t){for(var e=[],r=0;r<arguments.length;r++){var s=arguments[r];if(Array.isArray(s))for(var n=0;n<s.length;n+=8192){var i=goog.array.slice(s,n,n+8192);i=goog.array.flatten.apply(null,i);for(var o=0;o<i.length;o++)e.push(i[o])}else e.push(s)}return e},goog.array.rotate=function(t,e){return goog.asserts.assert(t.length!=null),t.length&&(0<(e%=t.length)?Array.prototype.unshift.apply(t,t.splice(-e,e)):0>e&&Array.prototype.push.apply(t,t.splice(0,-e))),t},goog.array.moveItem=function(t,e,r){goog.asserts.assert(0<=e&&e<t.length),goog.asserts.assert(0<=r&&r<t.length),e=Array.prototype.splice.call(t,e,1),Array.prototype.splice.call(t,r,0,e[0])},goog.array.zip=function(t){if(!arguments.length)return[];for(var e=[],r=arguments[0].length,s=1;s<arguments.length;s++)arguments[s].length<r&&(r=arguments[s].length);for(s=0;s<r;s++){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i][s]);e.push(n)}return e},goog.array.shuffle=function(t,e){e=e||Math.random;for(var r=t.length-1;0<r;r--){var s=Math.floor(e()*(r+1)),n=t[r];t[r]=t[s],t[s]=n}},goog.array.copyByIndex=function(t,e){var r=[];return goog.array.forEach(e,function(s){r.push(t[s])}),r},goog.array.concatMap=function(t,e,r){return goog.array.concat.apply([],goog.array.map(t,e,r))},goog.crypt={},goog.crypt.stringToByteArray=function(t){for(var e=[],r=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);255<n&&(e[r++]=255&n,n>>=8),e[r++]=n}return e},goog.crypt.byteArrayToString=function(t){if(8192>=t.length)return String.fromCharCode.apply(null,t);for(var e="",r=0;r<t.length;r+=8192){var s=goog.array.slice(t,r,r+8192);e+=String.fromCharCode.apply(null,s)}return e},goog.crypt.byteArrayToHex=function(t,e){return goog.array.map(t,function(r){return 1<(r=r.toString(16)).length?r:"0"+r}).join(e||"")},goog.crypt.hexToByteArray=function(t){goog.asserts.assert(t.length%2==0,"Key string length must be multiple of 2");for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substring(r,r+2),16));return e},goog.crypt.stringToUtf8ByteArray=function(t){for(var e=[],r=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);128>n?e[r++]=n:(2048>n?e[r++]=n>>6|192:((64512&n)==55296&&s+1<t.length&&(64512&t.charCodeAt(s+1))==56320?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++s)),e[r++]=n>>18|240,e[r++]=n>>12&63|128):e[r++]=n>>12|224,e[r++]=n>>6&63|128),e[r++]=63&n|128)}return e},goog.crypt.utf8ByteArrayToString=function(t){for(var e=[],r=0,s=0;r<t.length;){var n=t[r++];if(128>n)e[s++]=String.fromCharCode(n);else if(191<n&&224>n){var i=t[r++];e[s++]=String.fromCharCode((31&n)<<6|63&i)}else if(239<n&&365>n){i=t[r++];var o=t[r++];n=((7&n)<<18|(63&i)<<12|(63&o)<<6|63&t[r++])-65536,e[s++]=String.fromCharCode(55296+(n>>10)),e[s++]=String.fromCharCode(56320+(1023&n))}else i=t[r++],o=t[r++],e[s++]=String.fromCharCode((15&n)<<12|(63&i)<<6|63&o)}return e.join("")},goog.crypt.xorByteArray=function(t,e){goog.asserts.assert(t.length==e.length,"XOR array lengths must match");for(var r=[],s=0;s<t.length;s++)r.push(t[s]^e[s]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);e&&(!t||!(t instanceof e.Location)&&t instanceof e.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsElementType_=function(t,e){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(t);r&&r[e]!==void 0&&(t&&(t instanceof r[e]||!(t instanceof r.Location||t instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,goog.dom.asserts.debugStringForType_(t)))}return t},goog.dom.asserts.assertIsHTMLAnchorElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(t){if(!goog.isObject(t))return t===void 0?"undefined":t===null?"null":typeof t;try{return t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch{return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(t){try{var e=t&&t.ownerDocument,r=e&&(e.defaultView||e.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch{}return null},goog.functions={},goog.functions.constant=function(t){return function(){return t}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(t,e){return t},goog.functions.error=function(t){return function(){throw Error(t)}},goog.functions.fail=function(t){return function(){throw t}},goog.functions.lock=function(t,e){return e=e||0,function(){return t.apply(this,Array.prototype.slice.call(arguments,0,e))}},goog.functions.nth=function(t){return function(){return arguments[t]}},goog.functions.partialRight=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var s=Array.prototype.slice.call(arguments);return s.push.apply(s,r),t.apply(this,s)}},goog.functions.withReturnValue=function(t,e){return goog.functions.sequence(t,goog.functions.constant(e))},goog.functions.equalTo=function(t,e){return function(r){return e?t==r:t===r}},goog.functions.compose=function(t,e){var r=arguments,s=r.length;return function(){var n;s&&(n=r[s-1].apply(this,arguments));for(var i=s-2;0<=i;i--)n=r[i].call(this,n);return n}},goog.functions.sequence=function(t){var e=arguments,r=e.length;return function(){for(var s,n=0;n<r;n++)s=e[n].apply(this,arguments);return s}},goog.functions.and=function(t){var e=arguments,r=e.length;return function(){for(var s=0;s<r;s++)if(!e[s].apply(this,arguments))return!1;return!0}},goog.functions.or=function(t){var e=arguments,r=e.length;return function(){for(var s=0;s<r;s++)if(e[s].apply(this,arguments))return!0;return!1}},goog.functions.not=function(t){return function(){return!t.apply(this,arguments)}},goog.functions.create=function(t,e){var r=function(){};return r.prototype=t.prototype,r=new r,t.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(t){var e,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(e=t(),r=!0),e):t()}},goog.functions.once=function(t){var e=t;return function(){if(e){var r=e;e=null,r()}}},goog.functions.debounce=function(t,e,r){var s=0;return function(n){goog.global.clearTimeout(s);var i=arguments;s=goog.global.setTimeout(function(){t.apply(r,i)},e)}},goog.functions.throttle=function(t,e,r){var s=0,n=!1,i=[],o=function(){s=0,n&&(n=!1,p())},p=function(){s=goog.global.setTimeout(o,e),t.apply(r,i)};return function(l){i=arguments,s?n=!0:p()}},goog.functions.rateLimit=function(t,e,r){var s=0,n=function(){s=0};return function(i){s||(s=goog.global.setTimeout(n,e),t.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(t){this.tagName_=t},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(t){return goog.dom.tags.VOID_TAGS_[t]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(t,e){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=t===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(t){return t instanceof goog.string.Const&&t.constructor===goog.string.Const&&t.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?t.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+t+"'"),"type_error:Const")},goog.string.Const.from=function(t){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,t)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(t){return(t=goog.string.Const.unwrap(t)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeScript.fromConstantAndArgs=function(t,e){for(var r=[],s=1;s<arguments.length;s++)r.push(goog.html.SafeScript.stringify_(arguments[s]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(t)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(t){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(t))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(t){return goog.html.SafeScript.unwrapTrustedScript(t).toString()},goog.html.SafeScript.unwrapTrustedScript=function(t){return t instanceof goog.html.SafeScript&&t.constructor===goog.html.SafeScript&&t.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(t){return JSON.stringify(t).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(t):t,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(t){return goog.fs.url.getUrlObject_().createObjectURL(t)},goog.fs.url.revokeObjectUrl=function(t){goog.fs.url.getUrlObject_().revokeObjectURL(t)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(t){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(t){},goog.fs.url.getUrlObject_=function(){var t=goog.fs.url.findUrlObject_();if(t!=null)return t;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(t){var e=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(e!==void 0){e=new e;for(var r=0;r<arguments.length;r++)e.append(arguments[r]);return e.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(t,e,r){var s=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(s!==void 0){s=new s;for(var n=0;n<t.length;n++)s.append(t[n],r);return s.getBlob(e)}if(goog.global.Blob!==void 0)return s={},e&&(s.type=e),r&&(s.endings=r),new Blob(t,s);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(t,e){return typeof t=="number"?0<t?goog.i18n.bidi.Dir.LTR:0>t?goog.i18n.bidi.Dir.RTL:e?null:goog.i18n.bidi.Dir.NEUTRAL:t==null?null:t?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\uD801\uD804-\uD839\uD83C-\uDBFF---",goog.i18n.bidi.rtlChars_="--\uD802-\uD803\uD83A-\uD83B--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(t,e){return e?t.replace(goog.i18n.bidi.htmlSkipReg_,""):t},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(t,e){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(t,e){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(t){return goog.i18n.bidi.rtlRe_.test(t)},goog.i18n.bidi.isLtrChar=function(t){return goog.i18n.bidi.ltrRe_.test(t)},goog.i18n.bidi.isNeutralChar=function(t){return!goog.i18n.bidi.isLtrChar(t)&&!goog.i18n.bidi.isRtlChar(t)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(t,e){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(t,e){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(t,e){return t=goog.i18n.bidi.stripHtmlIfNeeded_(t,e),goog.i18n.bidi.isRequiredLtrRe_.test(t)||!goog.i18n.bidi.hasAnyLtr(t)&&!goog.i18n.bidi.hasAnyRtl(t)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(t,e){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(t,e){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(t){return goog.i18n.bidi.rtlLocalesRe_.test(t)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(t,e){return e=(e===void 0?goog.i18n.bidi.hasAnyRtl(t):e)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,t.replace(goog.i18n.bidi.bracketGuardTextRe_,e+"$&"+e)},goog.i18n.bidi.enforceRtlInHtml=function(t){return t.charAt(0)=="<"?t.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+t+"</span>"},goog.i18n.bidi.enforceRtlInText=function(t){return goog.i18n.bidi.Format.RLE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(t){return t.charAt(0)=="<"?t.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+t+"</span>"},goog.i18n.bidi.enforceLtrInText=function(t){return goog.i18n.bidi.Format.LRE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(t){return t.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(t){return t.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(t,e){var r=0,s=0,n=!1;for(t=goog.i18n.bidi.stripHtmlIfNeeded_(t,e).split(goog.i18n.bidi.wordSeparatorRe_),e=0;e<t.length;e++){var i=t[e];goog.i18n.bidi.startsWithRtl(i)?(r++,s++):goog.i18n.bidi.isRequiredLtrRe_.test(i)?n=!0:goog.i18n.bidi.hasAnyLtr(i)?s++:goog.i18n.bidi.hasNumeralsRe_.test(i)&&(n=!0)}return s==0?n?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/s>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(t,e){return goog.i18n.bidi.estimateDirection(t,e)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(t,e){t&&(e=goog.i18n.bidi.toDir(e))&&(t.style.textAlign=e==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,t.dir=e==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(t,e){switch(goog.i18n.bidi.estimateDirection(e)){case goog.i18n.bidi.Dir.LTR:t.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:t.dir="rtl";break;default:t.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(t,e){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=t===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(t,e){var r=goog.html.TrustedResourceUrl.unwrap(this),s=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",t)+goog.html.TrustedResourceUrl.stringifyParams_("#",s,e))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(t){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(t){return t instanceof goog.html.TrustedResourceUrl&&t.constructor===goog.html.TrustedResourceUrl&&t.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+t+"' of type "+goog.typeOf(t)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(t,e){var r=goog.string.Const.unwrap(t);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(s,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(e));return(s=e[n])instanceof goog.string.Const?goog.string.Const.unwrap(s):encodeURIComponent(String(s))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(t,e,r,s){return goog.html.TrustedResourceUrl.format(t,e).cloneWithParams(r,s)},goog.html.TrustedResourceUrl.fromConstant=function(t){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(t))},goog.html.TrustedResourceUrl.fromConstants=function(t){for(var e="",r=0;r<t.length;r++)e+=goog.string.Const.unwrap(t[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.fromSafeScript=function(t){return t=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(t)],"text/javascript"),t=goog.fs.url.createObjectUrl(t),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(t){return t=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(t):t,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,t)},goog.html.TrustedResourceUrl.stringifyParams_=function(t,e,r){if(r==null)return e;if(typeof r=="string")return r?t+encodeURIComponent(r):"";for(var s in r){var n=r[s];n=Array.isArray(n)?n:[n];for(var i=0;i<n.length;i++){var o=n[i];o!=null&&(e||(e=t),e+=(e.length>t.length?"&":"")+encodeURIComponent(s)+"="+encodeURIComponent(String(o)))}}return e},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(t,e){return t.lastIndexOf(e,0)==0},goog.string.internal.endsWith=function(t,e){var r=t.length-e.length;return 0<=r&&t.indexOf(e,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(t,e){return goog.string.internal.caseInsensitiveCompare(e,t.substr(0,e.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(t,e){return goog.string.internal.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))==0},goog.string.internal.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},goog.string.internal.caseInsensitiveCompare=function(t,e){return(t=String(t).toLowerCase())<(e=String(e).toLowerCase())?-1:t==e?0:1},goog.string.internal.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.internal.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(t))return t;t.indexOf("&")!=-1&&(t=t.replace(goog.string.internal.AMP_RE_,"&amp;")),t.indexOf("<")!=-1&&(t=t.replace(goog.string.internal.LT_RE_,"&lt;")),t.indexOf(">")!=-1&&(t=t.replace(goog.string.internal.GT_RE_,"&gt;")),t.indexOf('"')!=-1&&(t=t.replace(goog.string.internal.QUOT_RE_,"&quot;")),t.indexOf("'")!=-1&&(t=t.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),t.indexOf("\0")!=-1&&(t=t.replace(goog.string.internal.NULL_RE_,"&#0;"))}return t},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(t,e){return goog.string.internal.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.internal.contains=function(t,e){return t.indexOf(e)!=-1},goog.string.internal.caseInsensitiveContains=function(t,e){return goog.string.internal.contains(t.toLowerCase(),e.toLowerCase())},goog.string.internal.compareVersions=function(t,e){var r=0;t=goog.string.internal.trim(String(t)).split("."),e=goog.string.internal.trim(String(e)).split(".");for(var s=Math.max(t.length,e.length),n=0;r==0&&n<s;n++){var i=t[n]||"",o=e[n]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],i[0].length==0&&o[0].length==0)break;r=i[1].length==0?0:parseInt(i[1],10);var p=o[1].length==0?0:parseInt(o[1],10);r=goog.string.internal.compareElements_(r,p)||goog.string.internal.compareElements_(i[2].length==0,o[2].length==0)||goog.string.internal.compareElements_(i[2],o[2]),i=i[3],o=o[3]}while(r==0)}return r},goog.string.internal.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.html.SafeUrl=function(t,e){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=t===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(t){return t instanceof goog.html.SafeUrl&&t.constructor===goog.html.SafeUrl&&t.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(t){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(t))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(t){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(t)},goog.html.SafeUrl.fromBlob=function(t){return t=goog.html.SafeUrl.isSafeMimeType(t.type)?goog.fs.url.createObjectUrl(t):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromMediaSource=function(t){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),t=t instanceof MediaSource?goog.fs.url.createObjectUrl(t):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(t){var e=(t=t.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return e=e&&goog.html.SafeUrl.isSafeMimeType(e[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e?t:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"tel:")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(t){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(t))||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"fb-messenger://share")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromWhatsAppUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"whatsapp://send")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromSmsUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(t){var e=t.indexOf("#");if(0<e&&(t=t.substring(0,e)),!(e=t.match(/[?&]body=/gi)))return!0;if(1<e.length)return!1;if(!(t=t.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(t)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(t)},goog.html.SafeUrl.fromSshUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"ssh://")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(t,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,t,e)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(t,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,t,e)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(t,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,t,e)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(t,e,r){return(t=t.exec(e))?(t=t[1],(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map(function(s){return goog.string.Const.unwrap(s)})).indexOf(t)==-1&&(e=goog.html.SafeUrl.INNOCUOUS_STRING)):e=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromTrustedResourceUrl=function(t){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(t))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(t){return t instanceof goog.html.SafeUrl?t:(t=typeof t=="object"&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SAFE_URL_PATTERN_.test(t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(t,e){return t instanceof goog.html.SafeUrl?t:(t=typeof t=="object"&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),e&&/^data:/i.test(t)&&(e=goog.html.SafeUrl.fromDataUrl(t)).getTypedStringValue()==t?e:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(t),"%s does not match the safe URL pattern",t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,t)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(t){return(t=goog.string.Const.unwrap(t)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(t,";"),"Last character of style string is not ';': "+t),goog.asserts.assert(goog.string.internal.contains(t,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+t),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(t){return t instanceof goog.html.SafeStyle&&t.constructor===goog.html.SafeStyle&&t.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=t,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(t){var e,r="";for(e in t){if(!/^[-_a-zA-Z0-9]+$/.test(e))throw Error("Name allows only [-_a-zA-Z0-9], got: "+e);var s=t[e];s!=null&&(r+=e+":"+(s=Array.isArray(s)?goog.array.map(s,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(s))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(t){if(t instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(t).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(t=t instanceof goog.string.Const?goog.string.Const.unwrap(t):goog.html.SafeStyle.sanitizePropertyValueString_(String(t)),/[{;}]/.test(t))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[t]);return t},goog.html.SafeStyle.sanitizePropertyValueString_=function(t){var e=t.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(e)?goog.html.SafeStyle.COMMENT_RE_.test(t)?(goog.asserts.fail("String value disallows comments, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(t)?goog.html.SafeStyle.hasBalancedSquareBrackets_(t)?goog.html.SafeStyle.sanitizeUrl_(t):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(t){for(var e=!0,r=!0,s=0;s<t.length;s++){var n=t.charAt(s);n=="'"&&r?e=!e:n=='"'&&e&&(r=!r)}return e&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(t){for(var e=!0,r=/^[-_a-zA-Z0-9]$/,s=0;s<t.length;s++){var n=t.charAt(s);if(n=="]"){if(e)return!1;e=!0}else if(n=="["){if(!e)return!1;e=!1}else if(!e&&!r.test(n))return!1}return e},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(t){return t.replace(goog.html.SafeStyle.URL_RE_,function(e,r,s,n){var i="";return s=s.replace(/^(['"])(.*)\1$/,function(o,p,l){return i=p,l}),e=goog.html.SafeUrl.sanitize(s).getTypedStringValue(),r+i+e+i+n})},goog.html.SafeStyle.concat=function(t){var e="",r=function(s){Array.isArray(s)?goog.array.forEach(s,r):e+=goog.html.SafeStyle.unwrap(s)};return goog.array.forEach(arguments,r),e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(t,e){if(goog.string.internal.contains(t,"<"))throw Error("Selector does not allow '<', got: "+t);var r=t.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+t);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+t);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),t=t+"{"+goog.html.SafeStyle.unwrap(e).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(t){for(var e={"(":")","[":"]"},r=[],s=0;s<t.length;s++){var n=t[s];if(e[n])r.push(e[n]);else if(goog.object.contains(e,n)&&r.pop()!=n)return!1}return r.length==0},goog.html.SafeStyleSheet.concat=function(t){var e="",r=function(s){Array.isArray(s)?goog.array.forEach(s,r):e+=goog.html.SafeStyleSheet.unwrap(s)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.fromConstant=function(t){return(t=goog.string.Const.unwrap(t)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(t,"<"),"Forbidden '<' character in style sheet string: "+t),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(t){return t instanceof goog.html.SafeStyleSheet&&t.constructor===goog.html.SafeStyleSheet&&t.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=t,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var t=goog.labs.userAgent.util.getNavigator_();return t&&(t=t.userAgent)?t:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(t){goog.labs.userAgent.util.userAgent_=t||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(t){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(e,t)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(t){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(e,t)},goog.labs.userAgent.util.extractVersionTuples=function(t){for(var e,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,s=[];e=r.exec(t);)s.push([e[1],e[2],e[3]||void 0]);return s},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function t(n){return n=goog.array.find(n,s),r[n]||""}var e=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(e);e=goog.labs.userAgent.util.extractVersionTuples(e);var r={};goog.array.forEach(e,function(n){r[n[0]]=n[1]});var s=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?t(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?t(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?t(["Edg"]):goog.labs.userAgent.browser.isChrome()?t(["Chrome","CriOS","HeadlessChrome"]):(e=e[2])&&e[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(t){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),t)},goog.labs.userAgent.browser.getIEVersion_=function(t){var e=/rv: *([\d\.]*)/.exec(t);if(e&&e[1])return e[1];e="";var r=/MSIE +([\d\.]+)/.exec(t);if(r&&r[1])if(t=/Trident\/(\d.\d)/.exec(t),r[1]=="7.0")if(t&&t[1])switch(t[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=r[1];return e},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(t){return goog.html.SafeHtml.unwrapTrustedHTML(t).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(t){return t instanceof goog.html.SafeHtml&&t.constructor===goog.html.SafeHtml&&t.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(t){if(t instanceof goog.html.SafeHtml)return t;var e=typeof t=="object",r=null;return e&&t.implementsGoogI18nBidiDirectionalString&&(r=t.getDirection()),t=e&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(t),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(t){return t instanceof goog.html.SafeHtml?t:(t=goog.html.SafeHtml.htmlEscape(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(t)),t.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(t){return t instanceof goog.html.SafeHtml?t:(t=goog.html.SafeHtml.htmlEscape(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(t)),t.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(t){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(t)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(t,e,r){return goog.html.SafeHtml.verifyTagName(String(t)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(t),e,r)},goog.html.SafeHtml.verifyTagName=function(t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+t+">.":"");if(t.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+t+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(t,e,r,s){t&&goog.html.TrustedResourceUrl.unwrap(t);var n={};return n.src=t||null,n.srcdoc=e&&goog.html.SafeHtml.unwrap(e),t=goog.html.SafeHtml.combineAttributes(n,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",t,s)},goog.html.SafeHtml.createSandboxIframe=function(t,e,r,s){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var n={};return n.src=t?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t)):null,n.srcdoc=e||null,n.sandbox="",t=goog.html.SafeHtml.combineAttributes(n,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",t,s)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(t,e){return goog.html.TrustedResourceUrl.unwrap(t),t=goog.html.SafeHtml.combineAttributes({src:t},{},e),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t)},goog.html.SafeHtml.createScript=function(t,e){for(var r in e){var s=r.toLowerCase();if(s=="language"||s=="src"||s=="text"||s=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+s+'" attribute':"")}for(r="",t=goog.array.concat(t),s=0;s<t.length;s++)r+=goog.html.SafeScript.unwrap(t[s]);return t=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e,t)},goog.html.SafeHtml.createStyle=function(t,e){e=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},e);var r="";t=goog.array.concat(t);for(var s=0;s<t.length;s++)r+=goog.html.SafeStyleSheet.unwrap(t[s]);return t=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",e,t)},goog.html.SafeHtml.createMetaRefresh=function(t,e){return t=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(e||0)+"; url="+t})},goog.html.SafeHtml.getAttrNameAndValue_=function(t,e,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if(e.toLowerCase()=="style"){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" requires goog.string.Const value, "'+r+'" given.':"");if(e.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if(typeof r!="string")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" on tag "'+t+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert(typeof r=="string"||typeof r=="number","String or number value expected, got "+typeof r+" with value: "+r),e+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(t){if(!goog.isObject(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof t+" given: "+t:"");return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),goog.html.SafeStyle.unwrap(t)},goog.html.SafeHtml.createWithDir=function(t,e,r,s){return(e=goog.html.SafeHtml.create(e,r,s)).dir_=t,e},goog.html.SafeHtml.join=function(t,e){var r=(t=goog.html.SafeHtml.htmlEscape(t)).getDirection(),s=[],n=function(i){Array.isArray(i)?goog.array.forEach(i,n):(i=goog.html.SafeHtml.htmlEscape(i),s.push(goog.html.SafeHtml.unwrap(i)),i=i.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=i:i!=goog.i18n.bidi.Dir.NEUTRAL&&r!=i&&(r=null))};return goog.array.forEach(e,n),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(s.join(goog.html.SafeHtml.unwrap(t)),r)},goog.html.SafeHtml.concat=function(t){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(t,e){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=t,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(t,e){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(t,e)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t,e){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(t):t,this.dir_=e,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(t,e,r){var s=null,n="<"+t+goog.html.SafeHtml.stringifyAttributes(t,e);return r==null?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(t.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+t+"> does not allow content."),n+=">"):(s=goog.html.SafeHtml.concat(r),n+=">"+goog.html.SafeHtml.unwrap(s)+"</"+t+">",s=s.getDirection()),(t=e&&e.dir)&&(s=/^(ltr|rtl|auto)$/i.test(t)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,s)},goog.html.SafeHtml.stringifyAttributes=function(t,e){var r="";if(e)for(var s in e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(s))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+s+'".':"");var n=e[s];n!=null&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(t,s,n))}return r},goog.html.SafeHtml.combineAttributes=function(t,e,r){var s,n={};for(s in t)goog.asserts.assert(s.toLowerCase()==s,"Must be lower case"),n[s]=t[s];for(s in e)goog.asserts.assert(s.toLowerCase()==s,"Must be lower case"),n[s]=e[s];if(r)for(s in r){var i=s.toLowerCase();if(i in t)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+i+'" attribute, got "'+s+'" with value "'+r[s]+'"':"");i in e&&delete n[i],n[s]=r[s]}return n},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(t,e,r){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(t,e,r){t.insertAdjacentHTML(e,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var t=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),t.appendChild(e),!(goog.DEBUG&&!t.firstChild)&&(e=t.firstChild.firstChild,t.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!e.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(t,e){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;t.lastChild;)t.removeChild(t.lastChild);t.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setInnerHtml=function(t,e){if(goog.asserts.ENABLE_ASSERTS){var r=t.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+t.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(t,e)},goog.dom.safe.setOuterHtml=function(t,e){t.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setFormElementAction=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLFormElement(t).action=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setButtonFormAction=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLButtonElement(t).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setInputFormAction=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLInputElement(t).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setStyle=function(t,e){t.style.cssText=goog.html.SafeStyle.unwrap(e)},goog.dom.safe.documentWrite=function(t,e){t.write(goog.html.SafeHtml.unwrapTrustedHTML(e))},goog.dom.safe.setAnchorHref=function(t,e){goog.dom.asserts.assertIsHTMLAnchorElement(t),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setImageSrc=function(t,e){if(goog.dom.asserts.assertIsHTMLImageElement(t),!(e instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}t.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setAudioSrc=function(t,e){if(goog.dom.asserts.assertIsHTMLAudioElement(t),!(e instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}t.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setVideoSrc=function(t,e){if(goog.dom.asserts.assertIsHTMLVideoElement(t),!(e instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}t.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setEmbedSrc=function(t,e){goog.dom.asserts.assertIsHTMLEmbedElement(t),t.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setFrameSrc=function(t,e){goog.dom.asserts.assertIsHTMLFrameElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrc=function(t,e){goog.dom.asserts.assertIsHTMLIFrameElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrcdoc=function(t,e){goog.dom.asserts.assertIsHTMLIFrameElement(t),t.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setLinkHrefAndRel=function(t,e,r){goog.dom.asserts.assertIsHTMLLinkElement(t),t.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(e instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),t.href=goog.html.TrustedResourceUrl.unwrap(e)):t.href=e instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(e):e instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(e):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(e))},goog.dom.safe.setObjectData=function(t,e){goog.dom.asserts.assertIsHTMLObjectElement(t),t.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setScriptSrc=function(t,e){goog.dom.asserts.assertIsHTMLScriptElement(t),t.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e),(e=goog.getScriptNonce())&&t.setAttribute("nonce",e)},goog.dom.safe.setScriptContent=function(t,e){goog.dom.asserts.assertIsHTMLScriptElement(t),t.text=goog.html.SafeScript.unwrapTrustedScript(e),(e=goog.getScriptNonce())&&t.setAttribute("nonce",e)},goog.dom.safe.setLocationHref=function(t,e){goog.dom.asserts.assertIsLocation(t),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.assignLocation=function(t,e){goog.dom.asserts.assertIsLocation(t),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.assign(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.replaceLocation=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.replace(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.openInWindow=function(t,e,r,s,n){return t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e=e||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",e.open(goog.html.SafeUrl.unwrap(t),r,s,n)},goog.dom.safe.parseFromStringHtml=function(t,e){return goog.dom.safe.parseFromString(t,e,"text/html")},goog.dom.safe.parseFromString=function(t,e,r){return t.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(e),r)},goog.dom.safe.createImageFromBlob=function(t){if(!/^image\/.*/g.test(t.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var e=goog.global.URL.createObjectURL(t);return(t=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(e)},goog.dom.safe.setImageSrc(t,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),e)),t},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(t,e){for(var r=t.split("%s"),s="",n=Array.prototype.slice.call(arguments,1);n.length&&1<r.length;)s+=r.shift()+n.shift();return s+r.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(t){return t.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return t==" "},goog.string.isUnicodeChar=function(t){return t.length==1&&" "<=t&&"~">=t||""<=t&&"">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(t,e,r){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var s=t.toLowerCase().match(r),n=e.toLowerCase().match(r),i=Math.min(s.length,n.length),o=0;o<i;o++){r=s[o];var p=n[o];if(r!=p)return t=parseInt(r,10),!isNaN(t)&&(e=parseInt(p,10),!isNaN(e)&&t-e)?t-e:r<p?-1:1}return s.length!=n.length?s.length-n.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(t,e){return t=goog.string.internal.htmlEscape(t,e),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;")),t},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},s=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,function(n,i){var o=r[n];return o||(i.charAt(0)=="#"&&(i=+("0"+i.substr(1)),isNaN(i)||(o=String.fromCharCode(i))),o||(goog.dom.safe.setInnerHtml(s,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),n+" ")),o=s.firstChild.nodeValue.slice(0,-1)),r[n]=o)})},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(e,r){switch(r){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return r.charAt(0)!="#"||(r=+("0"+r.substr(1)),isNaN(r))?e:String.fromCharCode(r)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var r=e.length,s=0;s<r;s++){var n=r==1?e:e.charAt(s);if(t.charAt(0)==n&&t.charAt(t.length-1)==n)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,r){return r&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),r&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,r,s){if(r&&(t=goog.string.unescapeEntities(t)),s&&t.length>e){s>e&&(s=e);var n=t.length-s;t=t.substring(0,e-s)+"..."+t.substring(n)}else t.length>e&&(s=Math.floor(e/2),n=t.length-s,t=t.substring(0,s+e%2)+"..."+t.substring(n));return r&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],r=0;r<t.length;r++){var s=t.charAt(r),n=s.charCodeAt(0);e[r+1]=goog.string.specialEscapeChars_[s]||(31<n&&127>n?s:goog.string.escapeChar(s))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=goog.string.escapeChar(t.charAt(r));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var r=t;else 256>e?(r="\\x",(16>e||256<e)&&(r+="0")):(r="\\u",4096>e&&(r+="0")),r+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,r){var s=t;return 0<=e&&e<t.length&&0<r&&(s=t.substr(0,e)+t.substr(e+r,t.length-e-r)),s},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,"")},goog.string.replaceAll=function(t,e,r){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,r){return(r=(t=r!==void 0?t.toFixed(r):String(t)).indexOf("."))==-1&&(r=t.length),goog.string.repeat("0",Math.max(0,e-r))+t},goog.string.makeSafe=function(t){return t==null?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(t){for(var e=0,r=0;r<t.length;++r)e=31*e+t.charCodeAt(r)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return e==0&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(e,r){return r.toUpperCase()})},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){return e=typeof e=="string"?goog.string.regExpEscape(e):"\\s",t.replace(new RegExp("(^"+(e?"|["+e+"]+":"")+")([a-z])","g"),function(r,s,n){return s+n.toUpperCase()})},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),typeof t=="string"?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,r){t=t.split(e);for(var s=[];0<r&&t.length;)s.push(t.shift()),r--;return t.length&&s.push(t.join(e)),s},goog.string.lastComponent=function(t,e){if(!e)return t;typeof e=="string"&&(e=[e]);for(var r=-1,s=0;s<e.length;s++)if(e[s]!=""){var n=t.lastIndexOf(e[s]);n>r&&(r=n)}return r==-1?t:t.slice(r+1)},goog.string.editDistance=function(t,e){var r=[],s=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var n=0;n<e.length+1;n++)r[n]=n;for(n=0;n<t.length;n++){s[0]=n+1;for(var i=0;i<e.length;i++)s[i+1]=Math.min(s[i]+1,r[i+1]+1,r[i]+ +(t[n]!=e[i]));for(i=0;i<r.length;i++)r[i]=s[i]}return s[e.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent();if(t){t=goog.labs.userAgent.util.extractVersionTuples(t);var e,r=goog.labs.userAgent.engine.getEngineTuple_(t);if(r)return r[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):r[1];if((t=t[0])&&(e=t[2])&&(e=/Trident\/([^\s;]+)/.exec(e)))return e[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(t){if(!goog.labs.userAgent.engine.isEdge())return t[1];for(var e=0;e<t.length;e++){var r=t[e];if(r[0]=="Edge")return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),t)},goog.labs.userAgent.engine.getVersionForKey_=function(t,e){return(t=goog.array.find(t,function(r){return e==r[0]}))&&t[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent(),e="";return goog.labs.userAgent.platform.isWindows()?e=(t=(e=/Windows (?:NT|Phone) ([0-9.]+)/).exec(t))?t[1]:"0.0":goog.labs.userAgent.platform.isIos()?e=(t=(e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(t))&&t[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?e=(t=(e=/Mac OS X ([0-9_.]+)/).exec(t))?t[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?e=(t=(e=/(?:KaiOS)\/(\S+)/i).exec(t))&&t[1]:goog.labs.userAgent.platform.isAndroid()?e=(t=(e=/Android\s+([^\);]+)(\)|;)/).exec(t))&&t[1]:goog.labs.userAgent.platform.isChromeOS()&&(e=(t=(e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(t))&&t[1]),e||""},goog.labs.userAgent.platform.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),t)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch{}return!1},goog.reflect.cache=function(t,e,r,s){return s=s?s(e):e,Object.prototype.hasOwnProperty.call(t,s)?t[s]:t[s]=r(e)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var t=goog.userAgent.getNavigatorTyped();return t&&t.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var t=goog.userAgent.getNavigatorTyped();return!!t&&goog.string.contains(t.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var t="",e=goog.userAgent.getVersionRegexResult_();return e&&(t=e?e[1]:""),goog.userAgent.IE&&(e=goog.userAgent.getDocumentMode_())!=null&&e>parseFloat(t)?String(e):t},goog.userAgent.getVersionRegexResult_=function(){var t=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(t):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(t):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(t):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(t):void 0},goog.userAgent.getDocumentMode_=function(){var t=goog.global.document;return t?t.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(t,e){return goog.string.compareVersions(t,e)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(t){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,t,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,t)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(t){return Number(goog.userAgent.DOCUMENT_MODE)>=t},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var t=goog.userAgent.getDocumentMode_();return t||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(t){return goog.string.contains(goog.crypt.base64.paddingChars_,t)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(t,e){goog.asserts.assert(goog.isArrayLike(t),"encodeByteArray takes an array as a parameter"),e===void 0&&(e=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),e=goog.crypt.base64.byteToCharMaps_[e];for(var r=[],s=0;s<t.length;s+=3){var n=t[s],i=s+1<t.length,o=i?t[s+1]:0,p=s+2<t.length,l=p?t[s+2]:0,c=n>>2;n=(3&n)<<4|o>>4,o=(15&o)<<2|l>>6,l&=63,p||(l=64,i||(o=64)),r.push(e[c],e[n],e[o]||"",e[l]||"")}return r.join("")},goog.crypt.base64.encodeString=function(t,e){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!e?goog.global.btoa(t):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(t),e)},goog.crypt.base64.decodeString=function(t,e){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!e)return goog.global.atob(t);var r="";return goog.crypt.base64.decodeStringInternal_(t,function(s){r+=String.fromCharCode(s)}),r},goog.crypt.base64.decodeStringToByteArray=function(t,e){var r=[];return goog.crypt.base64.decodeStringInternal_(t,function(s){r.push(s)}),r},goog.crypt.base64.decodeStringToUint8Array=function(t){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var e=t.length,r=3*e/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(t[e-1])&&(r=goog.crypt.base64.isPadding_(t[e-2])?r-2:r-1);var s=new Uint8Array(r),n=0;return goog.crypt.base64.decodeStringInternal_(t,function(i){s[n++]=i}),s.subarray(0,n)},goog.crypt.base64.decodeStringInternal_=function(t,e){function r(l){for(;s<t.length;){var c=t.charAt(s++),f=goog.crypt.base64.charToByteMap_[c];if(f!=null)return f;if(!goog.string.isEmptyOrWhitespace(c))throw Error("Unknown base64 encoding at char: "+c)}return l}goog.crypt.base64.init_();for(var s=0;;){var n=r(-1),i=r(0),o=r(64),p=r(64);if(p===64&&n===-1)break;e(n<<2|i>>4),o!=64&&(e(i<<4&240|o>>2),p!=64&&e(o<<6&192|p))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var t=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),e=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var s=t.concat(e[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=s;for(var n=0;n<s.length;n++){var i=s[n],o=goog.crypt.base64.charToByteMap_[i];o===void 0?goog.crypt.base64.charToByteMap_[i]=n:goog.asserts.assert(o===n)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(t){var e=t>>>0;t=Math.floor((t-e)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=e,jspb.utils.split64High=t},jspb.utils.splitInt64=function(t){var e=0>t,r=(t=Math.abs(t))>>>0;t=Math.floor((t-r)/jspb.BinaryConstants.TWO_TO_32),t>>>=0,e&&(t=~t>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++t&&(t=0))),jspb.utils.split64Low=r,jspb.utils.split64High=t},jspb.utils.splitZigzag64=function(t){var e=0>t;t=2*Math.abs(t),jspb.utils.splitUint64(t),t=jspb.utils.split64Low;var r=jspb.utils.split64High;e&&(t==0?r==0?r=t=4294967295:(r--,t=4294967295):t--),jspb.utils.split64Low=t,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(t){var e=0>t?1:0;if((t=e?-t:t)===0)0<1/t?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(t))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(t>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|2139095040)>>>0;else if(t<jspb.BinaryConstants.FLOAT32_MIN)t=Math.round(t/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|t)>>>0;else{var r=Math.floor(Math.log(t)/Math.LN2);t*=Math.pow(2,-r),16777216<=(t=Math.round(t*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|r+127<<23|8388607&t)>>>0}},jspb.utils.splitFloat64=function(t){var e=0>t?1:0;if((t=e?-t:t)===0)jspb.utils.split64High=0<1/t?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(t))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(t>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(e<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(t<jspb.BinaryConstants.FLOAT64_MIN){var r=t/Math.pow(2,-1074);t=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(e<<31|t)>>>0,jspb.utils.split64Low=r>>>0}else{var s=0;if(2<=(r=t))for(;2<=r&&1023>s;)s++,r/=2;else for(;1>r&&-1022<s;)r*=2,s--;t=(r=t*Math.pow(2,-s))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(e<<31|s+1023<<20|t)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),s=t.charCodeAt(2),n=t.charCodeAt(3),i=t.charCodeAt(4),o=t.charCodeAt(5),p=t.charCodeAt(6);t=t.charCodeAt(7),jspb.utils.split64Low=e+(r<<8)+(s<<16)+(n<<24)>>>0,jspb.utils.split64High=i+(o<<8)+(p<<16)+(t<<24)>>>0},jspb.utils.joinUint64=function(t,e){return e*jspb.BinaryConstants.TWO_TO_32+(t>>>0)},jspb.utils.joinInt64=function(t,e){var r=2147483648&e;return r&&(e=~e>>>0,(t=1+~t>>>0)==0&&(e=e+1>>>0)),t=jspb.utils.joinUint64(t,e),r?-t:t},jspb.utils.toZigzag64=function(t,e,r){var s=e>>31;return r(t<<1^s,(e<<1|t>>>31)^s)},jspb.utils.joinZigzag64=function(t,e){return jspb.utils.fromZigzag64(t,e,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(t,e,r){var s=-(1&t);return r((t>>>1|e<<31)^s,e>>>1^s)},jspb.utils.joinFloat32=function(t,e){e=2*(t>>31)+1;var r=t>>>23&255;return t&=8388607,r==255?t?NaN:1/0*e:r==0?e*Math.pow(2,-149)*t:e*Math.pow(2,r-150)*(t+Math.pow(2,23))},jspb.utils.joinFloat64=function(t,e){var r=2*(e>>31)+1,s=e>>>20&2047;return t=jspb.BinaryConstants.TWO_TO_32*(1048575&e)+t,s==2047?t?NaN:1/0*r:s==0?r*Math.pow(2,-1074)*t:r*Math.pow(2,s-1075)*(t+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(t,e){return String.fromCharCode(t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(t,e){function r(n,i){return n=n?String(n):"",i?"0000000".slice(n.length)+n:n}if(2097151>=e)return""+jspb.utils.joinUint64(t,e);var s=(t>>>24|e<<8)>>>0&16777215;return t=(16777215&t)+6777216*s+6710656*(e=e>>16&65535),s+=8147497*e,e*=2,1e7<=t&&(s+=Math.floor(t/1e7),t%=1e7),1e7<=s&&(e+=Math.floor(s/1e7),s%=1e7),r(e,0)+r(s,e)+r(t,1)},jspb.utils.joinSignedDecimalString=function(t,e){var r=2147483648&e;return r&&(e=~e+((t=1+~t>>>0)==0?1:0)>>>0),t=jspb.utils.joinUnsignedDecimalString(t,e),r?"-"+t:t},jspb.utils.hash64ToDecimalString=function(t,e){jspb.utils.splitHash64(t),t=jspb.utils.split64Low;var r=jspb.utils.split64High;return e?jspb.utils.joinSignedDecimalString(t,r):jspb.utils.joinUnsignedDecimalString(t,r)},jspb.utils.hash64ArrayToDecimalStrings=function(t,e){for(var r=Array(t.length),s=0;s<t.length;s++)r[s]=jspb.utils.hash64ToDecimalString(t[s],e);return r},jspb.utils.decimalStringToHash64=function(t){function e(i,o){for(var p=0;8>p&&(i!==1||0<o);p++)o=i*s[p]+o,s[p]=255&o,o>>>=8}jspb.asserts.assert(0<t.length);var r=!1;t[0]==="-"&&(r=!0,t=t.slice(1));for(var s=[0,0,0,0,0,0,0,0],n=0;n<t.length;n++)e(10,t.charCodeAt(n)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var i=0;8>i;i++)s[i]=255&~s[i]}(),e(1,1)),goog.crypt.byteArrayToString(s)},jspb.utils.splitDecimalString=function(t){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(t))},jspb.utils.toHexDigit_=function(t){return String.fromCharCode(10>t?jspb.utils.ZERO_CHAR_CODE_+t:jspb.utils.A_CHAR_CODE_-10+t)},jspb.utils.fromHexCharCode_=function(t){return t>=jspb.utils.A_CHAR_CODE_?t-jspb.utils.A_CHAR_CODE_+10:t-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(t){var e=Array(18);e[0]="0",e[1]="x";for(var r=0;8>r;r++){var s=t.charCodeAt(7-r);e[2*r+2]=jspb.utils.toHexDigit_(s>>4),e[2*r+3]=jspb.utils.toHexDigit_(15&s)}return e.join("")},jspb.utils.hexStringToHash64=function(t){t=t.toLowerCase(),jspb.asserts.assert(t.length==18),jspb.asserts.assert(t[0]=="0"),jspb.asserts.assert(t[1]=="x");for(var e="",r=0;8>r;r++){var s=jspb.utils.fromHexCharCode_(t.charCodeAt(2*r+2)),n=jspb.utils.fromHexCharCode_(t.charCodeAt(2*r+3));e=String.fromCharCode(16*s+n)+e}return e},jspb.utils.hash64ToNumber=function(t,e){jspb.utils.splitHash64(t),t=jspb.utils.split64Low;var r=jspb.utils.split64High;return e?jspb.utils.joinInt64(t,r):jspb.utils.joinUint64(t,r)},jspb.utils.numberToHash64=function(t){return jspb.utils.splitInt64(t),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(t,e,r){for(var s=0,n=e;n<r;n++)s+=t[n]>>7;return r-e-s},jspb.utils.countVarintFields=function(t,e,r,s){var n=0;if(128>(s=8*s+jspb.BinaryConstants.WireType.VARINT))for(;e<r&&t[e++]==s;)for(n++;;){var i=t[e++];if(!(128&i))break}else for(;e<r;){for(i=s;128<i;){if(t[e]!=(127&i|128))return n;e++,i>>=7}if(t[e++]!=i)break;for(n++;128&(i=t[e++]););}return n},jspb.utils.countFixedFields_=function(t,e,r,s,n){var i=0;if(128>s)for(;e<r&&t[e++]==s;)i++,e+=n;else for(;e<r;){for(var o=s;128<o;){if(t[e++]!=(127&o|128))return i;o>>=7}if(t[e++]!=o)break;i++,e+=n}return i},jspb.utils.countFixed32Fields=function(t,e,r,s){return jspb.utils.countFixedFields_(t,e,r,8*s+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(t,e,r,s){return jspb.utils.countFixedFields_(t,e,r,8*s+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(t,e,r,s){var n=0;for(s=8*s+jspb.BinaryConstants.WireType.DELIMITED;e<r;){for(var i=s;128<i;){if(t[e++]!=(127&i|128))return n;i>>=7}if(t[e++]!=i)break;n++;for(var o=0,p=1;o+=(127&(i=t[e++]))*p,p*=128,(128&i)!=0;);e+=o}return n},jspb.utils.debugBytesToTextFormat=function(t){var e='"';if(t){t=jspb.utils.byteSourceToUint8Array(t);for(var r=0;r<t.length;r++)e+="\\x",16>t[r]&&(e+="0"),e+=t[r].toString(16)}return e+'"'},jspb.utils.debugScalarToTextFormat=function(t){return typeof t=="string"?goog.string.quote(t):t.toString()},jspb.utils.stringToByteArray=function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++){var s=t.charCodeAt(r);if(255<s)throw Error("Conversion error: string contains codepoint outside of byte range");e[r]=s}return e},jspb.utils.byteSourceToUint8Array=function(t){return t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?goog.crypt.base64.decodeStringToUint8Array(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(t,e,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,t&&this.setBlock(t,e,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(t,e,r){if(jspb.BinaryDecoder.instanceCache_.length){var s=jspb.BinaryDecoder.instanceCache_.pop();return t&&s.setBlock(t,e,r),s}return new jspb.BinaryDecoder(t,e,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(t,e,r){this.bytes_=jspb.utils.byteSourceToUint8Array(t),this.start_=e!==void 0?e:0,this.end_=r!==void 0?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(t){this.end_=t},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(t){this.cursor_=t},jspb.BinaryDecoder.prototype.advance=function(t){this.cursor_+=t,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(t){for(var e=128,r=0,s=0,n=0;4>n&&128<=e;n++)r|=(127&(e=this.bytes_[this.cursor_++]))<<7*n;if(128<=e&&(r|=(127&(e=this.bytes_[this.cursor_++]))<<28,s|=(127&e)>>4),128<=e)for(n=0;5>n&&128<=e;n++)s|=(127&(e=this.bytes_[this.cursor_++]))<<7*n+3;if(128>e)return t(r>>>0,s>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(t){return this.readSplitVarint64(function(e,r){return jspb.utils.fromZigzag64(e,r,t)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(t){var e=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var s=0,n=0,i=r+7;i>=r;i--)s=s<<8|e[i],n=n<<8|e[i+4];return t(s,n)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(t){for(;128<t;)this.cursor_--,t>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var t=this.bytes_,e=t[this.cursor_+0],r=127&e;return 128>e?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+1]))<<7,128>e?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+2]))<<14,128>e?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+3]))<<21,128>e?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(e=t[this.cursor_+4]))<<28,128>e?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var t=this.readUnsignedVarint32();return t>>>1^-(1&t)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var t=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readUint16=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),t<<0|e<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],s=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(t<<0|e<<8|r<<16|s<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinUint64(t,e)},jspb.BinaryDecoder.prototype.readUint64String=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinUnsignedDecimalString(t,e)},jspb.BinaryDecoder.prototype.readInt8=function(){var t=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),t<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(t<<0|e<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],s=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),t<<0|e<<8|r<<16|s<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinInt64(t,e)},jspb.BinaryDecoder.prototype.readInt64String=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinSignedDecimalString(t,e)},jspb.BinaryDecoder.prototype.readFloat=function(){var t=this.readUint32();return jspb.utils.joinFloat32(t,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinFloat64(t,e)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(t){var e=this.bytes_,r=this.cursor_;t=r+t;for(var s=[],n="";r<t;){var i=e[r++];if(128>i)s.push(i);else{if(192>i)continue;if(224>i){var o=e[r++];s.push((31&i)<<6|63&o)}else if(240>i){o=e[r++];var p=e[r++];s.push((15&i)<<12|(63&o)<<6|63&p)}else 248>i&&(i=(7&i)<<18|(63&(o=e[r++]))<<12|(63&(p=e[r++]))<<6|63&e[r++],i-=65536,s.push(55296+(i>>10&1023),56320+(1023&i)))}8192<=s.length&&(n+=String.fromCharCode.apply(null,s),s.length=0)}return n+=goog.crypt.byteArrayToString(s),this.cursor_=r,n},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var t=this.readUnsignedVarint32();return this.readString(t)},jspb.BinaryDecoder.prototype.readBytes=function(t){if(0>t||this.cursor_+t>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var e=this.bytes_.subarray(this.cursor_,this.cursor_+t);return this.cursor_+=t,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var t=this.bytes_,e=this.cursor_,r=t[e+0],s=t[e+1],n=t[e+2],i=t[e+3],o=t[e+4],p=t[e+5],l=t[e+6];return t=t[e+7],this.cursor_+=8,String.fromCharCode(r,s,n,i,o,p,l,t)},jspb.BinaryReader=function(t,e,r){this.decoder_=jspb.BinaryDecoder.alloc(t,e,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(t,e,r){if(jspb.BinaryReader.instanceCache_.length){var s=jspb.BinaryReader.instanceCache_.pop();return t&&s.decoder_.setBlock(t,e,r),s}return new jspb.BinaryReader(t,e,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(t,e,r){this.decoder_.setBlock(t,e,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(t){this.decoder_.advance(t)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var t=this.decoder_.readUnsignedVarint32(),e=t>>>3;return(t&=7)!=jspb.BinaryConstants.WireType.VARINT&&t!=jspb.BinaryConstants.WireType.FIXED32&&t!=jspb.BinaryConstants.WireType.FIXED64&&t!=jspb.BinaryConstants.WireType.DELIMITED&&t!=jspb.BinaryConstants.WireType.START_GROUP&&t!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",t,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=e,this.nextWireType_=t,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var t=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==t;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var t=this.decoder_.readUnsignedVarint32();this.decoder_.advance(t)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var t=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=t&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(t,e){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[t]),this.readCallbacks_[t]=e},jspb.BinaryReader.prototype.runReadCallback=function(t){return jspb.asserts.assert(this.readCallbacks_!==null),t=this.readCallbacks_[t],jspb.asserts.assert(t),t(this)},jspb.BinaryReader.prototype.readAny=function(t){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(t);var e=jspb.BinaryConstants.FieldType;switch(t){case e.DOUBLE:return this.readDouble();case e.FLOAT:return this.readFloat();case e.INT64:return this.readInt64();case e.UINT64:return this.readUint64();case e.INT32:return this.readInt32();case e.FIXED64:return this.readFixed64();case e.FIXED32:return this.readFixed32();case e.BOOL:return this.readBool();case e.STRING:return this.readString();case e.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case e.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case e.BYTES:return this.readBytes();case e.UINT32:return this.readUint32();case e.ENUM:return this.readEnum();case e.SFIXED32:return this.readSfixed32();case e.SFIXED64:return this.readSfixed64();case e.SINT32:return this.readSint32();case e.SINT64:return this.readSint64();case e.FHASH64:return this.readFixedHash64();case e.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(t,e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),s=this.decoder_.readUnsignedVarint32();s=this.decoder_.getCursor()+s,this.decoder_.setEnd(s),e(t,this),this.decoder_.setCursor(s),this.decoder_.setEnd(r)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(t,e,r){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==t),r(e,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32(),e=this.decoder_.getCursor(),r=e+t;return t=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),e,t),this.decoder_.setCursor(r),t},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(t)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(t)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(t){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(t)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(t){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(e,r){return jspb.utils.fromZigzag64(e,r,t)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(t){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(t)},jspb.BinaryReader.prototype.readPackedField_=function(t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();e=this.decoder_.getCursor()+e;for(var r=[];this.decoder_.getCursor()<e;)r.push(t.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var t=this.buffer_;return this.buffer_=[],t},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(t,e){for(jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);0<e||127<t;)this.buffer_.push(127&t|128),t=(t>>>7|e<<25)>>>0,e>>>=7;this.buffer_.push(t)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(t,e){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(t),this.writeUint32(e)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(t){for(jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);127<t;)this.buffer_.push(127&t|128),t>>>=7;this.buffer_.push(t)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(t){if(jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),0<=t)this.writeUnsignedVarint32(t);else{for(var e=0;9>e;e++)this.buffer_.push(127&t|128),t>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((t<<1^t>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(t){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(t){var e=this;jspb.utils.splitHash64(t),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(r,s){e.writeSplitVarint64(r>>>0,s>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&256>t),this.buffer_.push(t>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&65536>t),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255),this.buffer_.push(t>>>16&255),this.buffer_.push(t>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(t),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(-128<=t&&128>t),this.buffer_.push(t>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(-32768<=t&&32768>t),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255),this.buffer_.push(t>>>16&255),this.buffer_.push(t>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(t),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(t)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(t){jspb.asserts.assert(1/0===t||-1/0===t||isNaN(t)||t>=-jspb.BinaryConstants.FLOAT32_MAX&&t<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(t),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(t){jspb.asserts.assert(1/0===t||-1/0===t||isNaN(t)||t>=-jspb.BinaryConstants.FLOAT64_MAX&&t<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(t),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(t){jspb.asserts.assert(typeof t=="boolean"||typeof t=="number"),this.buffer_.push(t?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(t)},jspb.BinaryEncoder.prototype.writeBytes=function(t){this.buffer_.push.apply(this.buffer_,t)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(t){jspb.utils.splitHash64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(t){jspb.utils.splitHash64(t),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(t){var e=this.buffer_.length;jspb.asserts.assertString(t);for(var r=0;r<t.length;r++){var s=t.charCodeAt(r);if(128>s)this.buffer_.push(s);else if(2048>s)this.buffer_.push(s>>6|192),this.buffer_.push(63&s|128);else if(65536>s)if(55296<=s&&56319>=s&&r+1<t.length){var n=t.charCodeAt(r+1);56320<=n&&57343>=n&&(s=1024*(s-55296)+n-56320+65536,this.buffer_.push(s>>18|240),this.buffer_.push(s>>12&63|128),this.buffer_.push(s>>6&63|128),this.buffer_.push(63&s|128),r++)}else this.buffer_.push(s>>12|224),this.buffer_.push(s>>6&63|128),this.buffer_.push(63&s|128)}return this.buffer_.length-e},jspb.arith={},jspb.arith.UInt64=function(t,e){this.lo=t,this.hi=e},jspb.arith.UInt64.prototype.cmp=function(t){return this.hi<t.hi||this.hi==t.hi&&this.lo<t.lo?-1:this.hi==t.hi&&this.lo==t.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(t){return new jspb.arith.UInt64((this.lo+t.lo&4294967295)>>>0>>>0,((this.hi+t.hi&4294967295)>>>0)+(4294967296<=this.lo+t.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(t){return new jspb.arith.UInt64((this.lo-t.lo&4294967295)>>>0>>>0,((this.hi-t.hi&4294967295)>>>0)-(0>this.lo-t.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(t,e){var r=65535&t,s=65535&e,n=e>>>16;for(e=r*s+65536*(r*n&65535)+65536*((t>>>=16)*s&65535),r=t*n+(r*n>>>16)+(t*s>>>16);4294967296<=e;)e-=4294967296,r+=1;return new jspb.arith.UInt64(e>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(t){var e=jspb.arith.UInt64.mul32x32(this.lo,t);return(t=jspb.arith.UInt64.mul32x32(this.hi,t)).hi=t.lo,t.lo=0,e.add(t)},jspb.arith.UInt64.prototype.div=function(t){if(t==0)return[];var e=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);t=new jspb.arith.UInt64(t,0);for(var s=new jspb.arith.UInt64(1,0);!t.msb();)t=t.leftShift(),s=s.leftShift();for(;!s.zero();)0>=t.cmp(r)&&(e=e.add(s),r=r.sub(t)),t=t.rightShift(),s=s.rightShift();return[e,r]},jspb.arith.UInt64.prototype.toString=function(){for(var t="",e=this;!e.zero();){var r=(e=e.div(10))[0];t=e[1].lo+t,e=r}return t==""&&(t="0"),t},jspb.arith.UInt64.fromString=function(t){for(var e=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),s=0;s<t.length;s++){if("0">t[s]||"9"<t[s])return null;var n=parseInt(t[s],10);r.lo=n,e=e.mul(10).add(r)}return e},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(t,e){this.lo=t,this.hi=e},jspb.arith.Int64.prototype.add=function(t){return new jspb.arith.Int64((this.lo+t.lo&4294967295)>>>0>>>0,((this.hi+t.hi&4294967295)>>>0)+(4294967296<=this.lo+t.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(t){return new jspb.arith.Int64((this.lo-t.lo&4294967295)>>>0>>>0,((this.hi-t.hi&4294967295)>>>0)-(0>this.lo-t.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var t=(2147483648&this.hi)!=0,e=new jspb.arith.UInt64(this.lo,this.hi);return t&&(e=new jspb.arith.UInt64(0,0).sub(e)),(t?"-":"")+e.toString()},jspb.arith.Int64.fromString=function(t){var e=0<t.length&&t[0]=="-";return e&&(t=t.substring(1)),(t=jspb.arith.UInt64.fromString(t))===null?null:(e&&(t=new jspb.arith.UInt64(0,0).sub(t)),new jspb.arith.Int64(t.lo,t.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(t){var e=this.encoder_.end();this.blocks_.push(e),this.blocks_.push(t),this.totalLength_+=e.length+t.length},jspb.BinaryWriter.prototype.beginDelimited_=function(t){return this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),t=this.encoder_.end(),this.blocks_.push(t),this.totalLength_+=t.length,t.push(this.totalLength_),t},jspb.BinaryWriter.prototype.endDelimited_=function(t){var e=t.pop();for(e=this.totalLength_+this.encoder_.length()-e,jspb.asserts.assert(0<=e);127<e;)t.push(127&e|128),e>>>=7,this.totalLength_++;t.push(e),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(t,e,r){this.appendUint8Array_(t.subarray(e,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(t,e,r){t!=null&&e!=null&&r!=null&&this.writeSerializedMessage(t,e,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var t=new Uint8Array(this.totalLength_+this.encoder_.length()),e=this.blocks_,r=e.length,s=0,n=0;n<r;n++){var i=e[n];t.set(i,s),s+=i.length}return e=this.encoder_.end(),t.set(e,s),s+=e.length,jspb.asserts.assert(s==t.length),this.blocks_=[t],t},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(t){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),t)},jspb.BinaryWriter.prototype.beginSubMessage=function(t){this.bookmarks_.push(this.beginDelimited_(t))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(t,e){jspb.asserts.assert(1<=t&&t==Math.floor(t)),this.encoder_.writeUnsignedVarint32(8*t+e)},jspb.BinaryWriter.prototype.writeAny=function(t,e,r){var s=jspb.BinaryConstants.FieldType;switch(t){case s.DOUBLE:this.writeDouble(e,r);break;case s.FLOAT:this.writeFloat(e,r);break;case s.INT64:this.writeInt64(e,r);break;case s.UINT64:this.writeUint64(e,r);break;case s.INT32:this.writeInt32(e,r);break;case s.FIXED64:this.writeFixed64(e,r);break;case s.FIXED32:this.writeFixed32(e,r);break;case s.BOOL:this.writeBool(e,r);break;case s.STRING:this.writeString(e,r);break;case s.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case s.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case s.BYTES:this.writeBytes(e,r);break;case s.UINT32:this.writeUint32(e,r);break;case s.ENUM:this.writeEnum(e,r);break;case s.SFIXED32:this.writeSfixed32(e,r);break;case s.SFIXED64:this.writeSfixed64(e,r);break;case s.SINT32:this.writeSint32(e,r);break;case s.SINT64:this.writeSint64(e,r);break;case s.FHASH64:this.writeFixedHash64(e,r);break;case s.VHASH64:this.writeVarintHash64(e,r);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(e))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(e))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(e))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(e))},jspb.BinaryWriter.prototype.writeInt32=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(t,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(t,e))},jspb.BinaryWriter.prototype.writeInt64=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(t,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeUint32=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(t,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(t,e))},jspb.BinaryWriter.prototype.writeUint64=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(t,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSint32=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(t,e){e!=null&&this.writeZigzagVarintHash64_(t,e)},jspb.BinaryWriter.prototype.writeSint64String=function(t,e){e!=null&&this.writeZigzagVarint64String_(t,e)},jspb.BinaryWriter.prototype.writeFixed32=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(t,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(t,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeFloat=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(t,e){e!=null&&(jspb.asserts.assert(typeof e=="boolean"||typeof e=="number"),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(t,e){e!=null&&(t=this.beginDelimited_(t),this.encoder_.writeString(e),this.endDelimited_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(t,e){e!=null&&(e=jspb.utils.byteSourceToUint8Array(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),this.appendUint8Array_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(t,e,r){e!=null&&(t=this.beginDelimited_(t),r(e,this),this.endDelimited_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(t,e,r){e!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t),t=this.beginDelimited_(3),r(e,this),this.endDelimited_(t),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(t,e,r){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.START_GROUP),r(e,this),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(t,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(e))},jspb.BinaryWriter.prototype.writeVarintHash64=function(t,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(e))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(t,e,r){this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(t,e,r){this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(t,e,r){this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT);var s=this.encoder_;jspb.utils.toZigzag64(e,r,function(n,i){s.writeSplitVarint64(n>>>0,i>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSignedVarint32_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeInt32String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSignedVarint64_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(t,e,r,s){if(e!=null)for(var n=0;n<e.length;n++)this.writeSplitFixed64(t,r(e[n]),s(e[n]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(t,e,r,s){if(e!=null)for(var n=0;n<e.length;n++)this.writeSplitVarint64(t,r(e[n]),s(e[n]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(t,e,r,s){if(e!=null)for(var n=0;n<e.length;n++)this.writeSplitZigzagVarint64(t,r(e[n]),s(e[n]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeInt64String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUnsignedVarint32_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUint32String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUnsignedVarint64_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUint64String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarint32_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarint64_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarint64String_(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarintHash64_(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixed32(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixed64(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixed64String(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSfixed32(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSfixed64(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSfixed64String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFloat(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeDouble(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeBool(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeEnum(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeString(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeBytes(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(t,e,r){if(e!=null)for(var s=0;s<e.length;s++){var n=this.beginDelimited_(t);r(e[s],this),this.endDelimited_(n)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(t,e,r){if(e!=null)for(var s=0;s<e.length;s++)this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.START_GROUP),r(e[s],this),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixedHash64(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeVarintHash64(t,e[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeSignedVarint32(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeSignedVarint32(parseInt(e[r],10));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedInt64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeSignedVarint64(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(t,e,r,s){if(e!=null){t=this.beginDelimited_(t);for(var n=0;n<e.length;n++)this.encoder_.writeSplitFixed64(r(e[n]),s(e[n]));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(t,e,r,s){if(e!=null){t=this.beginDelimited_(t);for(var n=0;n<e.length;n++)this.encoder_.writeSplitVarint64(r(e[n]),s(e[n]));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(t,e,r,s){if(e!=null){t=this.beginDelimited_(t);for(var n=this.encoder_,i=0;i<e.length;i++)jspb.utils.toZigzag64(r(e[i]),s(e[i]),function(o,p){n.writeSplitVarint64(o>>>0,p>>>0)});this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++){var s=jspb.arith.Int64.fromString(e[r]);this.encoder_.writeSplitVarint64(s.lo,s.hi)}this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedUint32=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeUnsignedVarint32(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(e[r],10));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedUint64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeUnsignedVarint64(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++){var s=jspb.arith.UInt64.fromString(e[r]);this.encoder_.writeSplitVarint64(s.lo,s.hi)}this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSint32=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarint32(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarint64(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e[r]));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarintHash64(e[r]);this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),t=0;t<e.length;t++)this.encoder_.writeUint32(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeUint64(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++){var r=jspb.arith.UInt64.fromString(e[t]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),t=0;t<e.length;t++)this.encoder_.writeInt32(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeInt64(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeInt64String(e[t])},jspb.BinaryWriter.prototype.writePackedFloat=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),t=0;t<e.length;t++)this.encoder_.writeFloat(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeDouble(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),t=0;t<e.length;t++)this.encoder_.writeBool(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeEnum(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeFixedHash64(e[t])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeVarintHash64(e[r]);this.endDelimited_(t)}},jspb.Map=function(t,e){this.arr_=t,this.valueCtor_=e,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var t=0;t<this.arr_.length;t++){var e=this.arr_[t],r=e[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,e[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var t,e=this.map_;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(e=this.stringKeys_()).sort(),t=0;t<e.length;t++){var s=this.map_[e[t]];(r=s.valueWrapper)&&r.toArray(),this.arr_.push([s.key,s.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(t,e){for(var r=this.toArray(),s=[],n=0;n<r.length;n++){var i=this.map_[r[n][0].toString()];this.wrapEntry_(i);var o=i.valueWrapper;o?(jspb.asserts.assert(e),s.push([i.key,e(t,o)])):s.push([i.key,i.value])}return s},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(t,e,r){e=new jspb.Map([],e);for(var s=0;s<t.length;s++){var n=t[s][0],i=r(t[s][1]);e.set(n,i)}return e},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(t){this.idx_=0,this.arr_=t},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(t){t=t.toString();var e=this.map_.hasOwnProperty(t);return delete this.map_[t],this.arrClean=!1,e},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++){var s=this.map_[e[r]];t.push([s.key,s.value])}return t},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++){var s=this.map_[e[r]];t.push([s.key,this.wrapEntry_(s)])}return new jspb.Map.ArrayIteratorIterable_(t)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++)t.push(this.map_[e[r]].key);return new jspb.Map.ArrayIteratorIterable_(t)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++)t.push(this.wrapEntry_(this.map_[e[r]]));return new jspb.Map.ArrayIteratorIterable_(t)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(t,e){var r=this.stringKeys_();r.sort();for(var s=0;s<r.length;s++){var n=this.map_[r[s]];t.call(e,this.wrapEntry_(n),n.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(t,e){var r=new jspb.Map.Entry_(t);return this.valueCtor_?(r.valueWrapper=e,r.value=e.toArray()):r.value=e,this.map_[t.toString()]=r,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(t){return this.valueCtor_?(t.valueWrapper||(t.valueWrapper=new this.valueCtor_(t.value)),t.valueWrapper):t.value},jspb.Map.prototype.get=function(t){if(t=this.map_[t.toString()])return this.wrapEntry_(t)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(t){return t.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(t,e,r,s,n){var i=this.stringKeys_();i.sort();for(var o=0;o<i.length;o++){var p=this.map_[i[o]];e.beginSubMessage(t),r.call(e,1,p.key),this.valueCtor_?s.call(e,2,this.wrapEntry_(p),n):s.call(e,2,p.value),e.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(t,e,r,s,n,i,o){for(;e.nextField()&&!e.isEndGroup();){var p=e.getFieldNumber();p==1?i=r.call(e):p==2&&(t.valueCtor_?(jspb.asserts.assert(n),o||(o=new t.valueCtor_),s.call(e,o,n)):o=s.call(e))}jspb.asserts.assert(i!=null),jspb.asserts.assert(o!=null),t.set(i,o)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var t,e=this.map_,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r},jspb.Map.Entry_=function(t,e){this.key=t,this.value=e,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(t,e,r,s,n){this.fieldIndex=t,this.fieldName=e,this.ctor=r,this.toObjectFn=s,this.isRepeated=n},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(t,e,r,s,n,i){this.fieldInfo=t,this.binaryReaderFn=e,this.binaryWriterFn=r,this.binaryMessageSerializeFn=s,this.binaryMessageDeserializeFn=n,this.isPacked=i},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(t,e){return e+t.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(t,e){return e-t.arrayIndexOffset_},jspb.Message.initialize=function(t,e,r,s,n,i){if(t.wrappers_=null,e||(e=r?[r]:[]),t.messageId_=r?String(r):void 0,t.arrayIndexOffset_=r===0?-1:0,t.array=e,jspb.Message.initPivotAndExtensionObject_(t,s),t.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(t.repeatedFields=n),n)for(e=0;e<n.length;e++)(r=n[e])<t.pivot_?(r=jspb.Message.getIndex_(t,r),t.array[r]=t.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(t),t.extensionObject_[r]=t.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(i&&i.length)for(e=0;e<i.length;e++)jspb.Message.computeOneofCase(t,i[e])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(t){return jspb.Message.ASSUME_LOCAL_ARRAYS?t instanceof Array:Array.isArray(t)},jspb.Message.isExtensionObject_=function(t){return!(t===null||typeof t!="object"||jspb.Message.isArray_(t)||jspb.Message.SUPPORTS_UINT8ARRAY_&&t instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(t,e){var r=t.array.length,s=-1;if(r&&(s=r-1,r=t.array[s],jspb.Message.isExtensionObject_(r)))return t.pivot_=jspb.Message.getFieldNumber_(t,s),void(t.extensionObject_=r);-1<e?(t.pivot_=Math.max(e,jspb.Message.getFieldNumber_(t,s+1)),t.extensionObject_=null):t.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(t){var e=jspb.Message.getIndex_(t,t.pivot_);t.array[e]||(t.extensionObject_=t.array[e]={})},jspb.Message.toObjectList=function(t,e,r){for(var s=[],n=0;n<t.length;n++)s[n]=e.call(t[n],r,t[n]);return s},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(t,e,r,s,n){for(var i in r){var o=r[i],p=s.call(t,o);if(p!=null){for(var l in o.fieldName)if(o.fieldName.hasOwnProperty(l))break;e[l]=o.toObjectFn?o.isRepeated?jspb.Message.toObjectList(p,o.toObjectFn,n):o.toObjectFn(n,p):p}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(t,e,r,s){for(var n in r){var i=r[n],o=i.fieldInfo;if(!i.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var p=s.call(t,o);if(p!=null)if(o.isMessageType()){if(!i.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");i.binaryWriterFn.call(e,o.fieldIndex,p,i.binaryMessageSerializeFn)}else i.binaryWriterFn.call(e,o.fieldIndex,p)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(t,e,r,s,n){var i=r[e.getFieldNumber()];if(i){if(r=i.fieldInfo,!i.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var o=new r.ctor;i.binaryReaderFn.call(e,o,i.binaryMessageDeserializeFn)}else o=i.binaryReaderFn.call(e);r.isRepeated&&!i.isPacked?(e=s.call(t,r))?e.push(o):n.call(t,r,[o]):n.call(t,r,o)}else e.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(t,e){if(e<t.pivot_){e=jspb.Message.getIndex_(t,e);var r=t.array[e];return r===jspb.Message.EMPTY_LIST_SENTINEL_?t.array[e]=[]:r}if(t.extensionObject_)return(r=t.extensionObject_[e])===jspb.Message.EMPTY_LIST_SENTINEL_?t.extensionObject_[e]=[]:r},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(t,e){return jspb.Message.getField(t,e)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(t,e){return(t=jspb.Message.getField(t,e))==null?t:+t},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(t,e){return(t=jspb.Message.getField(t,e))==null?t:!!t},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(t,e){var r=jspb.Message.getRepeatedField(t,e);if(t.convertedPrimitiveFields_||(t.convertedPrimitiveFields_={}),!t.convertedPrimitiveFields_[e]){for(var s=0;s<r.length;s++)r[s]=+r[s];t.convertedPrimitiveFields_[e]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(t,e){var r=jspb.Message.getRepeatedField(t,e);if(t.convertedPrimitiveFields_||(t.convertedPrimitiveFields_={}),!t.convertedPrimitiveFields_[e]){for(var s=0;s<r.length;s++)r[s]=!!r[s];t.convertedPrimitiveFields_[e]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(t){return t==null||typeof t=="string"?t:jspb.Message.SUPPORTS_UINT8ARRAY_&&t instanceof Uint8Array?goog.crypt.base64.encodeByteArray(t):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(t)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(t){return t==null||t instanceof Uint8Array?t:typeof t=="string"?goog.crypt.base64.decodeStringToUint8Array(t):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(t)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(t){return jspb.Message.assertConsistentTypes_(t),t.length&&typeof t[0]!="string"?goog.array.map(t,jspb.Message.bytesAsB64):t},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(t){return jspb.Message.assertConsistentTypes_(t),!t.length||t[0]instanceof Uint8Array?t:goog.array.map(t,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(t){if(goog.DEBUG&&t&&1<t.length){var e=goog.typeOf(t[0]);goog.array.forEach(t,function(r){goog.typeOf(r)!=e&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(r)+" expected "+e)})}},jspb.Message.getFieldWithDefault=function(t,e,r){return(t=jspb.Message.getField(t,e))==null?r:t},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(t,e,r){return(t=jspb.Message.getBooleanField(t,e))==null?r:t},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(t,e,r){return(t=jspb.Message.getOptionalFloatingPointField(t,e))==null?r:t},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(t,e,r,s){if(t.wrappers_||(t.wrappers_={}),e in t.wrappers_)return t.wrappers_[e];var n=jspb.Message.getField(t,e);if(!n){if(r)return;n=[],jspb.Message.setField(t,e,n)}return t.wrappers_[e]=new jspb.Map(n,s)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(t,e,r){return jspb.asserts.assertInstanceof(t,jspb.Message),e<t.pivot_?t.array[jspb.Message.getIndex_(t,e)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(t),t.extensionObject_[e]=r),t},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(t,e,r,s){return jspb.asserts.assertInstanceof(t,jspb.Message),r!==s?jspb.Message.setField(t,e,r):e<t.pivot_?t.array[jspb.Message.getIndex_(t,e)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(t),delete t.extensionObject_[e]),t},jspb.Message.addToRepeatedField=function(t,e,r,s){return jspb.asserts.assertInstanceof(t,jspb.Message),e=jspb.Message.getRepeatedField(t,e),s!=null?e.splice(s,0,r):e.push(r),t},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(t,e,r,s){return jspb.asserts.assertInstanceof(t,jspb.Message),(r=jspb.Message.computeOneofCase(t,r))&&r!==e&&s!==void 0&&(t.wrappers_&&r in t.wrappers_&&(t.wrappers_[r]=void 0),jspb.Message.setField(t,r,void 0)),jspb.Message.setField(t,e,s)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(t,e){for(var r,s,n=0;n<e.length;n++){var i=e[n],o=jspb.Message.getField(t,i);o!=null&&(r=i,s=o,jspb.Message.setField(t,i,void 0))}return r?(jspb.Message.setField(t,r,s),r):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(t,e,r,s){if(t.wrappers_||(t.wrappers_={}),!t.wrappers_[r]){var n=jspb.Message.getField(t,r);(s||n)&&(t.wrappers_[r]=new e(n))}return t.wrappers_[r]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(t,e,r){return jspb.Message.wrapRepeatedField_(t,e,r),(e=t.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(e=t.wrappers_[r]=[]),e},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(t,e,r){if(t.wrappers_||(t.wrappers_={}),!t.wrappers_[r]){for(var s=jspb.Message.getRepeatedField(t,r),n=[],i=0;i<s.length;i++)n[i]=new e(s[i]);t.wrappers_[r]=n}},jspb.Message.setWrapperField=function(t,e,r){jspb.asserts.assertInstanceof(t,jspb.Message),t.wrappers_||(t.wrappers_={});var s=r&&r.toArray();return t.wrappers_[e]=r,jspb.Message.setField(t,e,s)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(t,e,r,s){jspb.asserts.assertInstanceof(t,jspb.Message),t.wrappers_||(t.wrappers_={});var n=s&&s.toArray();return t.wrappers_[e]=s,jspb.Message.setOneofField(t,e,r,n)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(t,e,r){jspb.asserts.assertInstanceof(t,jspb.Message),t.wrappers_||(t.wrappers_={}),r=r||[];for(var s=[],n=0;n<r.length;n++)s[n]=r[n].toArray();return t.wrappers_[e]=r,jspb.Message.setField(t,e,s)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(t,e,r,s,n){jspb.Message.wrapRepeatedField_(t,s,e);var i=t.wrappers_[e];return i||(i=t.wrappers_[e]=[]),r=r||new s,t=jspb.Message.getRepeatedField(t,e),n!=null?(i.splice(n,0,r),t.splice(n,0,r.toArray())):(i.push(r),t.push(r.toArray())),r},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(t,e,r,s){for(var n={},i=0;i<t.length;i++)n[e.call(t[i])]=r?r.call(t[i],s,t[i]):t[i];return n},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var t in this.wrappers_){var e=this.wrappers_[t];if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&e[r].toArray();else e&&e.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(t){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var e=t.fieldIndex;if(t.isRepeated){if(t.isMessageType())return this.wrappers_[e]||(this.wrappers_[e]=goog.array.map(this.extensionObject_[e]||[],function(r){return new t.ctor(r)})),this.wrappers_[e]}else if(t.isMessageType())return!this.wrappers_[e]&&this.extensionObject_[e]&&(this.wrappers_[e]=new t.ctor(this.extensionObject_[e])),this.wrappers_[e];return this.extensionObject_[e]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(t,e){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=t.fieldIndex;return t.isRepeated?(e=e||[],t.isMessageType()?(this.wrappers_[r]=e,this.extensionObject_[r]=goog.array.map(e,function(s){return s.toArray()})):this.extensionObject_[r]=e):t.isMessageType()?(this.wrappers_[r]=e,this.extensionObject_[r]=e&&e.toArray()):this.extensionObject_[r]=e,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(t,e){if(!(t instanceof e.constructor))throw Error("Messages have different types.");var r=t.toArray();e=e.toArray();var s=[],n=0,i=r.length>e.length?r.length:e.length;for(t.getJsPbMessageId()&&(s[0]=t.getJsPbMessageId(),n=1);n<i;n++)jspb.Message.compareFields(r[n],e[n])||(s[n]=e[n]);return new t.constructor(s)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(t,e){return t==e||!(!t||!e)&&t instanceof e.constructor&&jspb.Message.compareFields(t.toArray(),e.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(t,e){t=t||{},e=e||{};var r,s={};for(r in t)s[r]=0;for(r in e)s[r]=0;for(r in s)if(!jspb.Message.compareFields(t[r],e[r]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(t,e){if(t==e)return!0;if(!goog.isObject(t)||!goog.isObject(e))return!!(typeof t=="number"&&isNaN(t)||typeof e=="number"&&isNaN(e))&&String(t)==String(e);if(t.constructor!=e.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&t.constructor===Uint8Array){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}if(t.constructor===Array){var s=void 0,n=void 0,i=Math.max(t.length,e.length);for(r=0;r<i;r++){var o=t[r],p=e[r];if(o&&o.constructor==Object&&(jspb.asserts.assert(s===void 0),jspb.asserts.assert(r===t.length-1),s=o,o=void 0),p&&p.constructor==Object&&(jspb.asserts.assert(n===void 0),jspb.asserts.assert(r===e.length-1),n=p,p=void 0),!jspb.Message.compareFields(o,p))return!1}return!s&&!n||(s=s||{},n=n||{},jspb.Message.compareExtensions(s,n))}if(t.constructor===Object)return jspb.Message.compareExtensions(t,e);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(t){return jspb.Message.cloneMessage(t)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(t){return new t.constructor(jspb.Message.clone_(t.toArray()))},jspb.Message.copyInto=function(t,e){jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assert(t.constructor==e.constructor,"Copy source and target message should have the same type."),t=jspb.Message.clone(t);for(var r=e.toArray(),s=t.toArray(),n=r.length=0;n<s.length;n++)r[n]=s[n];e.wrappers_=t.wrappers_,e.extensionObject_=t.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(t){if(Array.isArray(t)){for(var e=Array(t.length),r=0;r<t.length;r++){var s=t[r];s!=null&&(e[r]=typeof s=="object"?jspb.Message.clone_(jspb.asserts.assert(s)):s)}return e}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&t instanceof Uint8Array)return new Uint8Array(t);for(r in e={},t)(s=t[r])!=null&&(e[r]=typeof s=="object"?jspb.Message.clone_(jspb.asserts.assert(s)):s);return e},jspb.Message.registerMessageType=function(t,e){e.messageId=t},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.CalculatorOptions",null,s),proto.mediapipe.CalculatorOptions=function(n){e.Message.initialize(this,n,0,2,null,null)},r.inherits(proto.mediapipe.CalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(n){return proto.mediapipe.CalculatorOptions.toObject(n,this)},proto.mediapipe.CalculatorOptions.toObject=function(n,i){var o,p={mergeFields:(o=e.Message.getBooleanField(i,1))==null?void 0:o};return e.Message.toObjectExtension(i,p,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,n),n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=i.readBool();n.setMergeFields(o)}else e.Message.readBinaryExtension(n,i,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return n},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(n,i){var o;(o=e.Message.getField(n,1))!=null&&i.writeBool(1,o),e.Message.serializeBinaryExtensions(n,i,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return e.Message.getField(this,1)!=null},r.object.extend(t,proto.mediapipe)})(calculator_options_pb);var any_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.google.protobuf.Any",null,s),proto.google.protobuf.Any=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.google.protobuf.Any,e.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(n){return proto.google.protobuf.Any.toObject(n,this)},proto.google.protobuf.Any.toObject=function(n,i){var o={typeUrl:e.Message.getFieldWithDefault(i,1,""),value:i.getValue_asB64()};return n&&(o.$jspbMessageInstance=i),o}),proto.google.protobuf.Any.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(o,i)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readString();n.setTypeUrl(o);break;case 2:o=i.readBytes(),n.setValue(o);break;default:i.skipField()}return n},proto.google.protobuf.Any.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(n,i){var o=void 0;(o=n.getTypeUrl()).length>0&&i.writeString(1,o),(o=n.getValue_asU8()).length>0&&i.writeBytes(2,o)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(n){return e.Message.setProto3StringField(this,1,n)},proto.google.protobuf.Any.prototype.getValue=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return e.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return e.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(n){return e.Message.setProto3BytesField(this,2,n)},r.object.extend(t,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(n,i,o){o||(o="type.googleapis.com/"),o.substr(-1)!="/"?this.setTypeUrl(o+"/"+i):this.setTypeUrl(o+i),this.setValue(n)},proto.google.protobuf.Any.prototype.unpack=function(n,i){return this.getTypeName()==i?n(this.getValue_asU8()):null}})(any_pb);var mediapipe_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.MediaPipeOptions",null,s),proto.mediapipe.MediaPipeOptions=function(n){e.Message.initialize(this,n,0,1,null,null)},r.inherits(proto.mediapipe.MediaPipeOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(n){return proto.mediapipe.MediaPipeOptions.toObject(n,this)},proto.mediapipe.MediaPipeOptions.toObject=function(n,i){var o={};return e.Message.toObjectExtension(i,o,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,n),n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)i.getFieldNumber(),e.Message.readBinaryExtension(n,i,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return n},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(n,i){e.Message.serializeBinaryExtensions(n,i,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},r.object.extend(t,proto.mediapipe)})(mediapipe_options_pb);var packet_factory_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,s),r.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,s),r.exportSymbol("proto.mediapipe.PacketManagerConfig",null,s),proto.mediapipe.PacketFactoryOptions=function(n){e.Message.initialize(this,n,0,1,null,null)},r.inherits(proto.mediapipe.PacketFactoryOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(n){e.Message.initialize(this,n,0,500,null,null)},r.inherits(proto.mediapipe.PacketFactoryConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.PacketManagerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(n){return proto.mediapipe.PacketFactoryOptions.toObject(n,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(n,i){var o={};return e.Message.toObjectExtension(i,o,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,n),n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)i.getFieldNumber(),e.Message.readBinaryExtension(n,i,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return n},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(n,i){e.Message.serializeBinaryExtensions(n,i,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(n){return proto.mediapipe.PacketFactoryConfig.toObject(n,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(n,i){var o,p={packetFactory:(o=e.Message.getField(i,1))==null?void 0:o,outputSidePacket:(o=e.Message.getField(i,2))==null?void 0:o,externalOutput:(o=e.Message.getField(i,1002))==null?void 0:o,options:(o=i.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(n,o)};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(o,i)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readString();n.setPacketFactory(o);break;case 2:o=i.readString(),n.setOutputSidePacket(o);break;case 1002:o=i.readString(),n.setExternalOutput(o);break;case 3:o=new proto.mediapipe.PacketFactoryOptions,i.readMessage(o,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),n.setOptions(o);break;default:i.skipField()}return n},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeString(1,o),(o=e.Message.getField(n,2))!=null&&i.writeString(2,o),(o=e.Message.getField(n,1002))!=null&&i.writeString(1002,o),(o=n.getOptions())!=null&&i.writeMessage(3,o,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return e.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(n){return e.Message.setField(this,1002,n)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return e.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return e.Message.getField(this,1002)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(n){return e.Message.setWrapperField(this,3,n)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(n){return proto.mediapipe.PacketManagerConfig.toObject(n,this)},proto.mediapipe.PacketManagerConfig.toObject=function(n,i){var o={packetList:e.Message.toObjectList(i.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(o,i)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.PacketFactoryConfig;i.readMessage(o,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),n.addPacket(o)}else i.skipField();return n},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(n,i){var o;(o=n.getPacketList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.PacketFactoryConfig,i)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},r.object.extend(t,proto.mediapipe)})(packet_factory_pb);var packet_generator_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,s),r.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,s),proto.mediapipe.PacketGeneratorOptions=function(n){e.Message.initialize(this,n,0,2,null,null)},r.inherits(proto.mediapipe.PacketGeneratorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(n){e.Message.initialize(this,n,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.PacketGeneratorConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(n){return proto.mediapipe.PacketGeneratorOptions.toObject(n,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(n,i){var o={mergeFields:e.Message.getBooleanFieldWithDefault(i,1,!0)};return e.Message.toObjectExtension(i,o,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,n),n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=i.readBool();n.setMergeFields(o)}else e.Message.readBinaryExtension(n,i,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return n},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(n,i){var o;(o=e.Message.getField(n,1))!=null&&i.writeBool(1,o),e.Message.serializeBinaryExtensions(n,i,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return e.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(n){return proto.mediapipe.PacketGeneratorConfig.toObject(n,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(n,i){var o,p={packetGenerator:(o=e.Message.getField(i,1))==null?void 0:o,inputSidePacketList:(o=e.Message.getRepeatedField(i,2))==null?void 0:o,externalInputList:(o=e.Message.getRepeatedField(i,1002))==null?void 0:o,outputSidePacketList:(o=e.Message.getRepeatedField(i,3))==null?void 0:o,externalOutputList:(o=e.Message.getRepeatedField(i,1003))==null?void 0:o,options:(o=i.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(n,o)};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(o,i)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readString();n.setPacketGenerator(o);break;case 2:o=i.readString(),n.addInputSidePacket(o);break;case 1002:o=i.readString(),n.addExternalInput(o);break;case 3:o=i.readString(),n.addOutputSidePacket(o);break;case 1003:o=i.readString(),n.addExternalOutput(o);break;case 4:o=new proto.mediapipe.PacketGeneratorOptions,i.readMessage(o,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),n.setOptions(o);break;default:i.skipField()}return n},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeString(1,o),(o=n.getInputSidePacketList()).length>0&&i.writeRepeatedString(2,o),(o=n.getExternalInputList()).length>0&&i.writeRepeatedString(1002,o),(o=n.getOutputSidePacketList()).length>0&&i.writeRepeatedString(3,o),(o=n.getExternalOutputList()).length>0&&i.writeRepeatedString(1003,o),(o=n.getOptions())!=null&&i.writeMessage(4,o,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(n){return e.Message.setField(this,2,n||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(n,i){return e.Message.addToRepeatedField(this,2,n,i)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return e.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(n){return e.Message.setField(this,1002,n||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(n,i){return e.Message.addToRepeatedField(this,1002,n,i)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return e.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(n){return e.Message.setField(this,3,n||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(n,i){return e.Message.addToRepeatedField(this,3,n,i)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return e.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(n){return e.Message.setField(this,1003,n||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(n,i){return e.Message.addToRepeatedField(this,1003,n,i)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(n){return e.Message.setWrapperField(this,4,n)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return e.Message.getField(this,4)!=null},r.object.extend(t,proto.mediapipe)})(packet_generator_pb);var status_handler_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=mediapipe_options_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,s),proto.mediapipe.StatusHandlerConfig=function(i){e.Message.initialize(this,i,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.StatusHandlerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(i){return proto.mediapipe.StatusHandlerConfig.toObject(i,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(i,o){var p,l={statusHandler:(p=e.Message.getField(o,1))==null?void 0:p,inputSidePacketList:(p=e.Message.getRepeatedField(o,2))==null?void 0:p,externalInputList:(p=e.Message.getRepeatedField(o,1002))==null?void 0:p,options:(p=o.getOptions())&&n.MediaPipeOptions.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(p,o)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readString();i.setStatusHandler(p);break;case 2:p=o.readString(),i.addInputSidePacket(p);break;case 1002:p=o.readString(),i.addExternalInput(p);break;case 3:p=new n.MediaPipeOptions,o.readMessage(p,n.MediaPipeOptions.deserializeBinaryFromReader),i.setOptions(p);break;default:o.skipField()}return i},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeString(1,p),(p=i.getInputSidePacketList()).length>0&&o.writeRepeatedString(2,p),(p=i.getExternalInputList()).length>0&&o.writeRepeatedString(1002,p),(p=i.getOptions())!=null&&o.writeMessage(3,p,n.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(i){return e.Message.setField(this,2,i||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(i,o){return e.Message.addToRepeatedField(this,2,i,o)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return e.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(i){return e.Message.setField(this,1002,i||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(i,o){return e.Message.addToRepeatedField(this,1002,i,o)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,n.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},r.object.extend(t,proto.mediapipe)})(status_handler_pb);var stream_handler_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=mediapipe_options_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,s),r.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,s),proto.mediapipe.InputStreamHandlerConfig=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.InputStreamHandlerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.OutputStreamHandlerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(i){return proto.mediapipe.InputStreamHandlerConfig.toObject(i,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(i,o){var p,l={inputStreamHandler:e.Message.getFieldWithDefault(o,1,"DefaultInputStreamHandler"),options:(p=o.getOptions())&&n.MediaPipeOptions.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(p,o)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readString();i.setInputStreamHandler(p);break;case 3:p=new n.MediaPipeOptions,o.readMessage(p,n.MediaPipeOptions.deserializeBinaryFromReader),i.setOptions(p);break;default:o.skipField()}return i},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeString(1,p),(p=i.getOptions())!=null&&o.writeMessage(3,p,n.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return e.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,n.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(i){return proto.mediapipe.OutputStreamHandlerConfig.toObject(i,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(i,o){var p,l={outputStreamHandler:e.Message.getFieldWithDefault(o,1,"InOrderOutputStreamHandler"),inputSidePacketList:(p=e.Message.getRepeatedField(o,2))==null?void 0:p,options:(p=o.getOptions())&&n.MediaPipeOptions.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(p,o)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readString();i.setOutputStreamHandler(p);break;case 2:p=o.readString(),i.addInputSidePacket(p);break;case 3:p=new n.MediaPipeOptions,o.readMessage(p,n.MediaPipeOptions.deserializeBinaryFromReader),i.setOptions(p);break;default:o.skipField()}return i},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeString(1,p),(p=i.getInputSidePacketList()).length>0&&o.writeRepeatedString(2,p),(p=i.getOptions())!=null&&o.writeMessage(3,p,n.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return e.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(i){return e.Message.setField(this,2,i||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(i,o){return e.Message.addToRepeatedField(this,2,i,o)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,n.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},r.object.extend(t,proto.mediapipe)})(stream_handler_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_options_pb;r.object.extend(proto,n);var i=any_pb;r.object.extend(proto,i);var o=mediapipe_options_pb;r.object.extend(proto,o);var p=packet_factory_pb;r.object.extend(proto,p);var l=packet_generator_pb;r.object.extend(proto,l);var c=status_handler_pb;r.object.extend(proto,c);var f=stream_handler_pb;r.object.extend(proto,f),r.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,s),r.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,s),r.exportSymbol("proto.mediapipe.ExecutorConfig",null,s),r.exportSymbol("proto.mediapipe.InputCollection",null,s),r.exportSymbol("proto.mediapipe.InputCollection.InputType",null,s),r.exportSymbol("proto.mediapipe.InputCollectionSet",null,s),r.exportSymbol("proto.mediapipe.InputStreamInfo",null,s),r.exportSymbol("proto.mediapipe.ProfilerConfig",null,s),proto.mediapipe.ExecutorConfig=function(d){e.Message.initialize(this,d,0,-1,null,null)},r.inherits(proto.mediapipe.ExecutorConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(d){e.Message.initialize(this,d,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.InputCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(d){e.Message.initialize(this,d,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},r.inherits(proto.mediapipe.InputCollectionSet,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(d){e.Message.initialize(this,d,0,-1,null,null)},r.inherits(proto.mediapipe.InputStreamInfo,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(d){e.Message.initialize(this,d,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.ProfilerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(d){e.Message.initialize(this,d,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.CalculatorGraphConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(d){e.Message.initialize(this,d,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},r.inherits(proto.mediapipe.CalculatorGraphConfig.Node,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(d){return proto.mediapipe.ExecutorConfig.toObject(d,this)},proto.mediapipe.ExecutorConfig.toObject=function(d,g){var u,h={name:e.Message.getFieldWithDefault(g,1,""),type:e.Message.getFieldWithDefault(g,2,""),options:(u=g.getOptions())&&o.MediaPipeOptions.toObject(d,u)};return d&&(h.$jspbMessageInstance=g),h}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(u,g)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var u=g.readString();d.setName(u);break;case 2:u=g.readString(),d.setType(u);break;case 3:u=new o.MediaPipeOptions,g.readMessage(u,o.MediaPipeOptions.deserializeBinaryFromReader),d.setOptions(u);break;default:g.skipField()}return d},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(d,g){var u=void 0;(u=d.getName()).length>0&&g.writeString(1,u),(u=d.getType()).length>0&&g.writeString(2,u),(u=d.getOptions())!=null&&g.writeMessage(3,u,o.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(d){return e.Message.setProto3StringField(this,2,d)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,o.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(d){return e.Message.setWrapperField(this,3,d)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(d){return proto.mediapipe.InputCollection.toObject(d,this)},proto.mediapipe.InputCollection.toObject=function(d,g){var u,h={name:e.Message.getFieldWithDefault(g,1,""),sidePacketNameList:(u=e.Message.getRepeatedField(g,2))==null?void 0:u,externalInputNameList:(u=e.Message.getRepeatedField(g,1002))==null?void 0:u,inputType:e.Message.getFieldWithDefault(g,3,0),fileName:e.Message.getFieldWithDefault(g,4,"")};return d&&(h.$jspbMessageInstance=g),h}),proto.mediapipe.InputCollection.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(u,g)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var u=g.readString();d.setName(u);break;case 2:u=g.readString(),d.addSidePacketName(u);break;case 1002:u=g.readString(),d.addExternalInputName(u);break;case 3:u=g.readEnum(),d.setInputType(u);break;case 4:u=g.readString(),d.setFileName(u);break;default:g.skipField()}return d},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(d,g){var u=void 0;(u=d.getName()).length>0&&g.writeString(1,u),(u=d.getSidePacketNameList()).length>0&&g.writeRepeatedString(2,u),(u=d.getExternalInputNameList()).length>0&&g.writeRepeatedString(1002,u),(u=d.getInputType())!==0&&g.writeEnum(3,u),(u=d.getFileName()).length>0&&g.writeString(4,u)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(d){return e.Message.setField(this,2,d||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(d,g){return e.Message.addToRepeatedField(this,2,d,g)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return e.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(d){return e.Message.setField(this,1002,d||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(d,g){return e.Message.addToRepeatedField(this,1002,d,g)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(d){return e.Message.setProto3EnumField(this,3,d)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(d){return e.Message.setProto3StringField(this,4,d)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(d){return proto.mediapipe.InputCollectionSet.toObject(d,this)},proto.mediapipe.InputCollectionSet.toObject=function(d,g){var u={inputCollectionList:e.Message.toObjectList(g.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,d)};return d&&(u.$jspbMessageInstance=g),u}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(u,g)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var u=new proto.mediapipe.InputCollection;g.readMessage(u,proto.mediapipe.InputCollection.deserializeBinaryFromReader),d.addInputCollection(u)}else g.skipField();return d},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(d,g){var u;(u=d.getInputCollectionList()).length>0&&g.writeRepeatedMessage(1,u,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(d){return e.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(d,g){return e.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.InputCollection,g)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(d){return proto.mediapipe.InputStreamInfo.toObject(d,this)},proto.mediapipe.InputStreamInfo.toObject=function(d,g){var u={tagIndex:e.Message.getFieldWithDefault(g,1,""),backEdge:e.Message.getBooleanFieldWithDefault(g,2,!1)};return d&&(u.$jspbMessageInstance=g),u}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(u,g)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var u=g.readString();d.setTagIndex(u);break;case 2:u=g.readBool(),d.setBackEdge(u);break;default:g.skipField()}return d},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(d,g){var u=void 0;(u=d.getTagIndex()).length>0&&g.writeString(1,u),(u=d.getBackEdge())&&g.writeBool(2,u)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(d){return e.Message.setProto3BooleanField(this,2,d)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(d){return proto.mediapipe.ProfilerConfig.toObject(d,this)},proto.mediapipe.ProfilerConfig.toObject=function(d,g){var u,h={histogramIntervalSizeUsec:e.Message.getFieldWithDefault(g,1,0),numHistogramIntervals:e.Message.getFieldWithDefault(g,2,0),enableInputOutputLatency:e.Message.getBooleanFieldWithDefault(g,3,!1),enableProfiler:e.Message.getBooleanFieldWithDefault(g,4,!1),enableStreamLatency:e.Message.getBooleanFieldWithDefault(g,5,!1),usePacketTimestampForAddedPacket:e.Message.getBooleanFieldWithDefault(g,6,!1),traceLogCapacity:e.Message.getFieldWithDefault(g,7,0),traceEventTypesDisabledList:(u=e.Message.getRepeatedField(g,8))==null?void 0:u,traceLogPath:e.Message.getFieldWithDefault(g,9,""),traceLogCount:e.Message.getFieldWithDefault(g,10,0),traceLogIntervalUsec:e.Message.getFieldWithDefault(g,11,0),traceLogMarginUsec:e.Message.getFieldWithDefault(g,12,0),traceLogDurationEvents:e.Message.getBooleanFieldWithDefault(g,13,!1),traceLogIntervalCount:e.Message.getFieldWithDefault(g,14,0),traceLogDisabled:e.Message.getBooleanFieldWithDefault(g,15,!1),traceEnabled:e.Message.getBooleanFieldWithDefault(g,16,!1),traceLogInstantEvents:e.Message.getBooleanFieldWithDefault(g,17,!1),calculatorFilter:e.Message.getFieldWithDefault(g,18,"")};return d&&(h.$jspbMessageInstance=g),h}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(u,g)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var u=g.readInt64();d.setHistogramIntervalSizeUsec(u);break;case 2:u=g.readInt64(),d.setNumHistogramIntervals(u);break;case 3:u=g.readBool(),d.setEnableInputOutputLatency(u);break;case 4:u=g.readBool(),d.setEnableProfiler(u);break;case 5:u=g.readBool(),d.setEnableStreamLatency(u);break;case 6:u=g.readBool(),d.setUsePacketTimestampForAddedPacket(u);break;case 7:u=g.readInt64(),d.setTraceLogCapacity(u);break;case 8:for(var h=g.isDelimited()?g.readPackedInt32():[g.readInt32()],y=0;y<h.length;y++)d.addTraceEventTypesDisabled(h[y]);break;case 9:u=g.readString(),d.setTraceLogPath(u);break;case 10:u=g.readInt32(),d.setTraceLogCount(u);break;case 11:u=g.readInt64(),d.setTraceLogIntervalUsec(u);break;case 12:u=g.readInt64(),d.setTraceLogMarginUsec(u);break;case 13:u=g.readBool(),d.setTraceLogDurationEvents(u);break;case 14:u=g.readInt32(),d.setTraceLogIntervalCount(u);break;case 15:u=g.readBool(),d.setTraceLogDisabled(u);break;case 16:u=g.readBool(),d.setTraceEnabled(u);break;case 17:u=g.readBool(),d.setTraceLogInstantEvents(u);break;case 18:u=g.readString(),d.setCalculatorFilter(u);break;default:g.skipField()}return d},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(d,g){var u=void 0;(u=d.getHistogramIntervalSizeUsec())!==0&&g.writeInt64(1,u),(u=d.getNumHistogramIntervals())!==0&&g.writeInt64(2,u),(u=d.getEnableInputOutputLatency())&&g.writeBool(3,u),(u=d.getEnableProfiler())&&g.writeBool(4,u),(u=d.getEnableStreamLatency())&&g.writeBool(5,u),(u=d.getUsePacketTimestampForAddedPacket())&&g.writeBool(6,u),(u=d.getTraceLogCapacity())!==0&&g.writeInt64(7,u),(u=d.getTraceEventTypesDisabledList()).length>0&&g.writePackedInt32(8,u),(u=d.getTraceLogPath()).length>0&&g.writeString(9,u),(u=d.getTraceLogCount())!==0&&g.writeInt32(10,u),(u=d.getTraceLogIntervalUsec())!==0&&g.writeInt64(11,u),(u=d.getTraceLogMarginUsec())!==0&&g.writeInt64(12,u),(u=d.getTraceLogDurationEvents())&&g.writeBool(13,u),(u=d.getTraceLogIntervalCount())!==0&&g.writeInt32(14,u),(u=d.getTraceLogDisabled())&&g.writeBool(15,u),(u=d.getTraceEnabled())&&g.writeBool(16,u),(u=d.getTraceLogInstantEvents())&&g.writeBool(17,u),(u=d.getCalculatorFilter()).length>0&&g.writeString(18,u)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(d){return e.Message.setProto3IntField(this,1,d)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(d){return e.Message.setProto3IntField(this,2,d)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(d){return e.Message.setProto3BooleanField(this,3,d)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return e.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(d){return e.Message.setProto3BooleanField(this,4,d)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(d){return e.Message.setProto3BooleanField(this,5,d)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return e.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(d){return e.Message.setProto3BooleanField(this,6,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return e.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(d){return e.Message.setProto3IntField(this,7,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return e.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(d){return e.Message.setField(this,8,d||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(d,g){return e.Message.addToRepeatedField(this,8,d,g)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return e.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(d){return e.Message.setProto3StringField(this,9,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return e.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(d){return e.Message.setProto3IntField(this,10,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return e.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(d){return e.Message.setProto3IntField(this,11,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return e.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(d){return e.Message.setProto3IntField(this,12,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return e.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(d){return e.Message.setProto3BooleanField(this,13,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return e.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(d){return e.Message.setProto3IntField(this,14,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return e.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(d){return e.Message.setProto3BooleanField(this,15,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return e.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(d){return e.Message.setProto3BooleanField(this,16,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return e.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(d){return e.Message.setProto3BooleanField(this,17,d)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return e.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(d){return e.Message.setProto3StringField(this,18,d)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(d){return proto.mediapipe.CalculatorGraphConfig.toObject(d,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(d,g){var u,h={nodeList:e.Message.toObjectList(g.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,d),packetFactoryList:e.Message.toObjectList(g.getPacketFactoryList(),p.PacketFactoryConfig.toObject,d),packetGeneratorList:e.Message.toObjectList(g.getPacketGeneratorList(),l.PacketGeneratorConfig.toObject,d),numThreads:e.Message.getFieldWithDefault(g,8,0),statusHandlerList:e.Message.toObjectList(g.getStatusHandlerList(),c.StatusHandlerConfig.toObject,d),inputStreamList:(u=e.Message.getRepeatedField(g,10))==null?void 0:u,outputStreamList:(u=e.Message.getRepeatedField(g,15))==null?void 0:u,inputSidePacketList:(u=e.Message.getRepeatedField(g,16))==null?void 0:u,outputSidePacketList:(u=e.Message.getRepeatedField(g,17))==null?void 0:u,maxQueueSize:e.Message.getFieldWithDefault(g,11,0),reportDeadlock:e.Message.getBooleanFieldWithDefault(g,21,!1),inputStreamHandler:(u=g.getInputStreamHandler())&&f.InputStreamHandlerConfig.toObject(d,u),outputStreamHandler:(u=g.getOutputStreamHandler())&&f.OutputStreamHandlerConfig.toObject(d,u),executorList:e.Message.toObjectList(g.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,d),profilerConfig:(u=g.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(d,u),pb_package:e.Message.getFieldWithDefault(g,19,""),type:e.Message.getFieldWithDefault(g,20,""),options:(u=g.getOptions())&&o.MediaPipeOptions.toObject(d,u),graphOptionsList:e.Message.toObjectList(g.getGraphOptionsList(),i.Any.toObject,d)};return d&&(h.$jspbMessageInstance=g),h}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(u,g)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var u=new proto.mediapipe.CalculatorGraphConfig.Node;g.readMessage(u,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),d.addNode(u);break;case 6:u=new p.PacketFactoryConfig,g.readMessage(u,p.PacketFactoryConfig.deserializeBinaryFromReader),d.addPacketFactory(u);break;case 7:u=new l.PacketGeneratorConfig,g.readMessage(u,l.PacketGeneratorConfig.deserializeBinaryFromReader),d.addPacketGenerator(u);break;case 8:u=g.readInt32(),d.setNumThreads(u);break;case 9:u=new c.StatusHandlerConfig,g.readMessage(u,c.StatusHandlerConfig.deserializeBinaryFromReader),d.addStatusHandler(u);break;case 10:u=g.readString(),d.addInputStream(u);break;case 15:u=g.readString(),d.addOutputStream(u);break;case 16:u=g.readString(),d.addInputSidePacket(u);break;case 17:u=g.readString(),d.addOutputSidePacket(u);break;case 11:u=g.readInt32(),d.setMaxQueueSize(u);break;case 21:u=g.readBool(),d.setReportDeadlock(u);break;case 12:u=new f.InputStreamHandlerConfig,g.readMessage(u,f.InputStreamHandlerConfig.deserializeBinaryFromReader),d.setInputStreamHandler(u);break;case 13:u=new f.OutputStreamHandlerConfig,g.readMessage(u,f.OutputStreamHandlerConfig.deserializeBinaryFromReader),d.setOutputStreamHandler(u);break;case 14:u=new proto.mediapipe.ExecutorConfig,g.readMessage(u,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),d.addExecutor(u);break;case 18:u=new proto.mediapipe.ProfilerConfig,g.readMessage(u,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),d.setProfilerConfig(u);break;case 19:u=g.readString(),d.setPackage(u);break;case 20:u=g.readString(),d.setType(u);break;case 1001:u=new o.MediaPipeOptions,g.readMessage(u,o.MediaPipeOptions.deserializeBinaryFromReader),d.setOptions(u);break;case 1002:u=new i.Any,g.readMessage(u,i.Any.deserializeBinaryFromReader),d.addGraphOptions(u);break;default:g.skipField()}return d},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(d,g){var u=void 0;(u=d.getNodeList()).length>0&&g.writeRepeatedMessage(1,u,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(u=d.getPacketFactoryList()).length>0&&g.writeRepeatedMessage(6,u,p.PacketFactoryConfig.serializeBinaryToWriter),(u=d.getPacketGeneratorList()).length>0&&g.writeRepeatedMessage(7,u,l.PacketGeneratorConfig.serializeBinaryToWriter),(u=d.getNumThreads())!==0&&g.writeInt32(8,u),(u=d.getStatusHandlerList()).length>0&&g.writeRepeatedMessage(9,u,c.StatusHandlerConfig.serializeBinaryToWriter),(u=d.getInputStreamList()).length>0&&g.writeRepeatedString(10,u),(u=d.getOutputStreamList()).length>0&&g.writeRepeatedString(15,u),(u=d.getInputSidePacketList()).length>0&&g.writeRepeatedString(16,u),(u=d.getOutputSidePacketList()).length>0&&g.writeRepeatedString(17,u),(u=d.getMaxQueueSize())!==0&&g.writeInt32(11,u),(u=d.getReportDeadlock())&&g.writeBool(21,u),(u=d.getInputStreamHandler())!=null&&g.writeMessage(12,u,f.InputStreamHandlerConfig.serializeBinaryToWriter),(u=d.getOutputStreamHandler())!=null&&g.writeMessage(13,u,f.OutputStreamHandlerConfig.serializeBinaryToWriter),(u=d.getExecutorList()).length>0&&g.writeRepeatedMessage(14,u,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),(u=d.getProfilerConfig())!=null&&g.writeMessage(18,u,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(u=d.getPackage()).length>0&&g.writeString(19,u),(u=d.getType()).length>0&&g.writeString(20,u),(u=d.getOptions())!=null&&g.writeMessage(1001,u,o.MediaPipeOptions.serializeBinaryToWriter),(u=d.getGraphOptionsList()).length>0&&g.writeRepeatedMessage(1002,u,i.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(d){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(d,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(d,g){var u,h={name:e.Message.getFieldWithDefault(g,1,""),calculator:e.Message.getFieldWithDefault(g,2,""),inputStreamList:(u=e.Message.getRepeatedField(g,3))==null?void 0:u,outputStreamList:(u=e.Message.getRepeatedField(g,4))==null?void 0:u,inputSidePacketList:(u=e.Message.getRepeatedField(g,5))==null?void 0:u,outputSidePacketList:(u=e.Message.getRepeatedField(g,6))==null?void 0:u,options:(u=g.getOptions())&&n.CalculatorOptions.toObject(d,u),nodeOptionsList:e.Message.toObjectList(g.getNodeOptionsList(),i.Any.toObject,d),sourceLayer:e.Message.getFieldWithDefault(g,9,0),bufferSizeHint:e.Message.getFieldWithDefault(g,10,0),inputStreamHandler:(u=g.getInputStreamHandler())&&f.InputStreamHandlerConfig.toObject(d,u),outputStreamHandler:(u=g.getOutputStreamHandler())&&f.OutputStreamHandlerConfig.toObject(d,u),inputStreamInfoList:e.Message.toObjectList(g.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,d),executor:e.Message.getFieldWithDefault(g,14,""),profilerConfig:(u=g.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(d,u),maxInFlight:e.Message.getFieldWithDefault(g,16,0),optionValueList:(u=e.Message.getRepeatedField(g,17))==null?void 0:u,externalInputList:(u=e.Message.getRepeatedField(g,1005))==null?void 0:u};return d&&(h.$jspbMessageInstance=g),h}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(d){var g=new e.BinaryReader(d),u=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(u,g)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var u=g.readString();d.setName(u);break;case 2:u=g.readString(),d.setCalculator(u);break;case 3:u=g.readString(),d.addInputStream(u);break;case 4:u=g.readString(),d.addOutputStream(u);break;case 5:u=g.readString(),d.addInputSidePacket(u);break;case 6:u=g.readString(),d.addOutputSidePacket(u);break;case 7:u=new n.CalculatorOptions,g.readMessage(u,n.CalculatorOptions.deserializeBinaryFromReader),d.setOptions(u);break;case 8:u=new i.Any,g.readMessage(u,i.Any.deserializeBinaryFromReader),d.addNodeOptions(u);break;case 9:u=g.readInt32(),d.setSourceLayer(u);break;case 10:u=g.readInt32(),d.setBufferSizeHint(u);break;case 11:u=new f.InputStreamHandlerConfig,g.readMessage(u,f.InputStreamHandlerConfig.deserializeBinaryFromReader),d.setInputStreamHandler(u);break;case 12:u=new f.OutputStreamHandlerConfig,g.readMessage(u,f.OutputStreamHandlerConfig.deserializeBinaryFromReader),d.setOutputStreamHandler(u);break;case 13:u=new proto.mediapipe.InputStreamInfo,g.readMessage(u,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),d.addInputStreamInfo(u);break;case 14:u=g.readString(),d.setExecutor(u);break;case 15:u=new proto.mediapipe.ProfilerConfig,g.readMessage(u,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),d.setProfilerConfig(u);break;case 16:u=g.readInt32(),d.setMaxInFlight(u);break;case 17:u=g.readString(),d.addOptionValue(u);break;case 1005:u=g.readString(),d.addExternalInput(u);break;default:g.skipField()}return d},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(d,g){var u=void 0;(u=d.getName()).length>0&&g.writeString(1,u),(u=d.getCalculator()).length>0&&g.writeString(2,u),(u=d.getInputStreamList()).length>0&&g.writeRepeatedString(3,u),(u=d.getOutputStreamList()).length>0&&g.writeRepeatedString(4,u),(u=d.getInputSidePacketList()).length>0&&g.writeRepeatedString(5,u),(u=d.getOutputSidePacketList()).length>0&&g.writeRepeatedString(6,u),(u=d.getOptions())!=null&&g.writeMessage(7,u,n.CalculatorOptions.serializeBinaryToWriter),(u=d.getNodeOptionsList()).length>0&&g.writeRepeatedMessage(8,u,i.Any.serializeBinaryToWriter),(u=d.getSourceLayer())!==0&&g.writeInt32(9,u),(u=d.getBufferSizeHint())!==0&&g.writeInt32(10,u),(u=d.getInputStreamHandler())!=null&&g.writeMessage(11,u,f.InputStreamHandlerConfig.serializeBinaryToWriter),(u=d.getOutputStreamHandler())!=null&&g.writeMessage(12,u,f.OutputStreamHandlerConfig.serializeBinaryToWriter),(u=d.getInputStreamInfoList()).length>0&&g.writeRepeatedMessage(13,u,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(u=d.getExecutor()).length>0&&g.writeString(14,u),(u=d.getProfilerConfig())!=null&&g.writeMessage(15,u,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(u=d.getMaxInFlight())!==0&&g.writeInt32(16,u),(u=d.getOptionValueList()).length>0&&g.writeRepeatedString(17,u),(u=d.getExternalInputList()).length>0&&g.writeRepeatedString(1005,u)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(d){return e.Message.setProto3StringField(this,2,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return e.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(d){return e.Message.setField(this,3,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(d,g){return e.Message.addToRepeatedField(this,3,d,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return e.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(d){return e.Message.setField(this,4,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(d,g){return e.Message.addToRepeatedField(this,4,d,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(d){return e.Message.setField(this,5,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(d,g){return e.Message.addToRepeatedField(this,5,d,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return e.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(d){return e.Message.setField(this,6,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(d,g){return e.Message.addToRepeatedField(this,6,d,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return e.Message.getWrapperField(this,n.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(d){return e.Message.setWrapperField(this,7,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return e.Message.getRepeatedWrapperField(this,i.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(d){return e.Message.setRepeatedWrapperField(this,8,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(d,g){return e.Message.addToRepeatedWrapperField(this,8,d,proto.google.protobuf.Any,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return e.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(d){return e.Message.setProto3IntField(this,9,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return e.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(d){return e.Message.setProto3IntField(this,10,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return e.Message.getWrapperField(this,f.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(d){return e.Message.setWrapperField(this,11,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return e.Message.getField(this,11)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return e.Message.getWrapperField(this,f.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(d){return e.Message.setWrapperField(this,12,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(d){return e.Message.setRepeatedWrapperField(this,13,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(d,g){return e.Message.addToRepeatedWrapperField(this,13,d,proto.mediapipe.InputStreamInfo,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return e.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(d){return e.Message.setProto3StringField(this,14,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return e.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(d){return e.Message.setWrapperField(this,15,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return e.Message.getField(this,15)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return e.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(d){return e.Message.setProto3IntField(this,16,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return e.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(d){return e.Message.setField(this,17,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(d,g){return e.Message.addToRepeatedField(this,17,d,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return e.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(d){return e.Message.setField(this,1005,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(d,g){return e.Message.addToRepeatedField(this,1005,d,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(d){return e.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(d,g){return e.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.CalculatorGraphConfig.Node,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return e.Message.getRepeatedWrapperField(this,p.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(d){return e.Message.setRepeatedWrapperField(this,6,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(d,g){return e.Message.addToRepeatedWrapperField(this,6,d,proto.mediapipe.PacketFactoryConfig,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return e.Message.getRepeatedWrapperField(this,l.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(d){return e.Message.setRepeatedWrapperField(this,7,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(d,g){return e.Message.addToRepeatedWrapperField(this,7,d,proto.mediapipe.PacketGeneratorConfig,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return e.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(d){return e.Message.setProto3IntField(this,8,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return e.Message.getRepeatedWrapperField(this,c.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(d){return e.Message.setRepeatedWrapperField(this,9,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(d,g){return e.Message.addToRepeatedWrapperField(this,9,d,proto.mediapipe.StatusHandlerConfig,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return e.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(d){return e.Message.setField(this,10,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(d,g){return e.Message.addToRepeatedField(this,10,d,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return e.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(d){return e.Message.setField(this,15,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(d,g){return e.Message.addToRepeatedField(this,15,d,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(d){return e.Message.setField(this,16,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(d,g){return e.Message.addToRepeatedField(this,16,d,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return e.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(d){return e.Message.setField(this,17,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(d,g){return e.Message.addToRepeatedField(this,17,d,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return e.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(d){return e.Message.setProto3IntField(this,11,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return e.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(d){return e.Message.setProto3BooleanField(this,21,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return e.Message.getWrapperField(this,f.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(d){return e.Message.setWrapperField(this,12,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return e.Message.getWrapperField(this,f.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(d){return e.Message.setWrapperField(this,13,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return e.Message.getField(this,13)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(d){return e.Message.setRepeatedWrapperField(this,14,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(d,g){return e.Message.addToRepeatedWrapperField(this,14,d,proto.mediapipe.ExecutorConfig,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return e.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(d){return e.Message.setWrapperField(this,18,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return e.Message.getField(this,18)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return e.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(d){return e.Message.setProto3StringField(this,19,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return e.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(d){return e.Message.setProto3StringField(this,20,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,o.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(d){return e.Message.setWrapperField(this,1001,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return e.Message.getField(this,1001)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return e.Message.getRepeatedWrapperField(this,i.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(d){return e.Message.setRepeatedWrapperField(this,1002,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(d,g){return e.Message.addToRepeatedWrapperField(this,1002,d,proto.google.protobuf.Any,g)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},r.object.extend(t,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Rasterization",null,s),r.exportSymbol("proto.mediapipe.Rasterization.Interval",null,s),proto.mediapipe.Rasterization=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},r.inherits(proto.mediapipe.Rasterization,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.Rasterization.Interval,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(n){return proto.mediapipe.Rasterization.toObject(n,this)},proto.mediapipe.Rasterization.toObject=function(n,i){var o={intervalList:e.Message.toObjectList(i.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.Rasterization.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(o,i)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.Rasterization.Interval;i.readMessage(o,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),n.addInterval(o)}else i.skipField();return n},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(n,i){var o;(o=n.getIntervalList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(n){return proto.mediapipe.Rasterization.Interval.toObject(n,this)},proto.mediapipe.Rasterization.Interval.toObject=function(n,i){var o,p={y:(o=e.Message.getField(i,1))==null?void 0:o,leftX:(o=e.Message.getField(i,2))==null?void 0:o,rightX:(o=e.Message.getField(i,3))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(o,i)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readInt32();n.setY(o);break;case 2:o=i.readInt32(),n.setLeftX(o);break;case 3:o=i.readInt32(),n.setRightX(o);break;default:i.skipField()}return n},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeInt32(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt32(2,o),(o=e.Message.getField(n,3))!=null&&i.writeInt32(3,o)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.Rasterization.prototype.addInterval=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.Rasterization.Interval,i)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},r.object.extend(t,proto.mediapipe)})(rasterization_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=rasterization_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.LocationData",null,s),r.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,s),r.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,s),r.exportSymbol("proto.mediapipe.LocationData.Format",null,s),r.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,s),r.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,s),proto.mediapipe.LocationData=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},r.inherits(proto.mediapipe.LocationData,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.BoundingBox,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.BinaryMask,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.RelativeKeypoint,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(i){return proto.mediapipe.LocationData.toObject(i,this)},proto.mediapipe.LocationData.toObject=function(i,o){var p,l={format:(p=e.Message.getField(o,1))==null?void 0:p,boundingBox:(p=o.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(i,p),relativeBoundingBox:(p=o.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(i,p),mask:(p=o.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(i,p),relativeKeypointsList:e.Message.toObjectList(o.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,i)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.LocationData.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(p,o)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readEnum();i.setFormat(p);break;case 2:p=new proto.mediapipe.LocationData.BoundingBox,o.readMessage(p,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),i.setBoundingBox(p);break;case 3:p=new proto.mediapipe.LocationData.RelativeBoundingBox,o.readMessage(p,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),i.setRelativeBoundingBox(p);break;case 4:p=new proto.mediapipe.LocationData.BinaryMask,o.readMessage(p,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),i.setMask(p);break;case 5:p=new proto.mediapipe.LocationData.RelativeKeypoint,o.readMessage(p,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),i.addRelativeKeypoints(p);break;default:o.skipField()}return i},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeEnum(1,p),(p=i.getBoundingBox())!=null&&o.writeMessage(2,p,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),(p=i.getRelativeBoundingBox())!=null&&o.writeMessage(3,p,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),(p=i.getMask())!=null&&o.writeMessage(4,p,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(p=i.getRelativeKeypointsList()).length>0&&o.writeRepeatedMessage(5,p,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(i){return proto.mediapipe.LocationData.BoundingBox.toObject(i,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(i,o){var p,l={xmin:(p=e.Message.getField(o,1))==null?void 0:p,ymin:(p=e.Message.getField(o,2))==null?void 0:p,width:(p=e.Message.getField(o,3))==null?void 0:p,height:(p=e.Message.getField(o,4))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(p,o)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readInt32();i.setXmin(p);break;case 2:p=o.readInt32(),i.setYmin(p);break;case 3:p=o.readInt32(),i.setWidth(p);break;case 4:p=o.readInt32(),i.setHeight(p);break;default:o.skipField()}return i},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeInt32(1,p),(p=e.Message.getField(i,2))!=null&&o.writeInt32(2,p),(p=e.Message.getField(i,3))!=null&&o.writeInt32(3,p),(p=e.Message.getField(i,4))!=null&&o.writeInt32(4,p)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return e.Message.getField(this,4)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(i){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(i,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(i,o){var p,l={xmin:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,ymin:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,width:(p=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:p,height:(p=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(p,o)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readFloat();i.setXmin(p);break;case 2:p=o.readFloat(),i.setYmin(p);break;case 3:p=o.readFloat(),i.setWidth(p);break;case 4:p=o.readFloat(),i.setHeight(p);break;default:o.skipField()}return i},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeFloat(1,p),(p=e.Message.getField(i,2))!=null&&o.writeFloat(2,p),(p=e.Message.getField(i,3))!=null&&o.writeFloat(3,p),(p=e.Message.getField(i,4))!=null&&o.writeFloat(4,p)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return e.Message.getField(this,4)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(i){return proto.mediapipe.LocationData.BinaryMask.toObject(i,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(i,o){var p,l={width:(p=e.Message.getField(o,1))==null?void 0:p,height:(p=e.Message.getField(o,2))==null?void 0:p,rasterization:(p=o.getRasterization())&&n.Rasterization.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(p,o)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readInt32();i.setWidth(p);break;case 2:p=o.readInt32(),i.setHeight(p);break;case 3:p=new n.Rasterization,o.readMessage(p,n.Rasterization.deserializeBinaryFromReader),i.setRasterization(p);break;default:o.skipField()}return i},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeInt32(1,p),(p=e.Message.getField(i,2))!=null&&o.writeInt32(2,p),(p=i.getRasterization())!=null&&o.writeMessage(3,p,n.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return e.Message.getWrapperField(this,n.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(i){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(i,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(i,o){var p,l={x:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,y:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,keypointLabel:(p=e.Message.getField(o,3))==null?void 0:p,score:(p=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(p,o)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readFloat();i.setX(p);break;case 2:p=o.readFloat(),i.setY(p);break;case 3:p=o.readString(),i.setKeypointLabel(p);break;case 4:p=o.readFloat(),i.setScore(p);break;default:o.skipField()}return i},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeFloat(1,p),(p=e.Message.getField(i,2))!=null&&o.writeFloat(2,p),(p=e.Message.getField(i,3))!=null&&o.writeString(3,p),(p=e.Message.getField(i,4))!=null&&o.writeFloat(4,p)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getFormat=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return e.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(i){return e.Message.setWrapperField(this,2,i)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return e.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.prototype.getMask=function(){return e.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(i){return e.Message.setWrapperField(this,4,i)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(i){return e.Message.setRepeatedWrapperField(this,5,i)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(i,o){return e.Message.addToRepeatedWrapperField(this,5,i,proto.mediapipe.LocationData.RelativeKeypoint,o)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},r.object.extend(t,proto.mediapipe)}(location_data_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=location_data_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.Detection",null,s),r.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,s),r.exportSymbol("proto.mediapipe.DetectionList",null,s),proto.mediapipe.Detection=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},r.inherits(proto.mediapipe.Detection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.Detection.AssociatedDetection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},r.inherits(proto.mediapipe.DetectionList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(i){return proto.mediapipe.Detection.toObject(i,this)},proto.mediapipe.Detection.toObject=function(i,o){var p,l={labelList:(p=e.Message.getRepeatedField(o,1))==null?void 0:p,labelIdList:(p=e.Message.getRepeatedField(o,2))==null?void 0:p,scoreList:(p=e.Message.getRepeatedFloatingPointField(o,3))==null?void 0:p,locationData:(p=o.getLocationData())&&n.LocationData.toObject(i,p),featureTag:(p=e.Message.getField(o,5))==null?void 0:p,trackId:(p=e.Message.getField(o,6))==null?void 0:p,detectionId:(p=e.Message.getField(o,7))==null?void 0:p,associatedDetectionsList:e.Message.toObjectList(o.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,i),displayNameList:(p=e.Message.getRepeatedField(o,9))==null?void 0:p,timestampUsec:(p=e.Message.getField(o,10))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.Detection.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(p,o)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readString();i.addLabel(p);break;case 2:for(var l=o.isDelimited()?o.readPackedInt32():[o.readInt32()],c=0;c<l.length;c++)i.addLabelId(l[c]);break;case 3:for(l=o.isDelimited()?o.readPackedFloat():[o.readFloat()],c=0;c<l.length;c++)i.addScore(l[c]);break;case 4:p=new n.LocationData,o.readMessage(p,n.LocationData.deserializeBinaryFromReader),i.setLocationData(p);break;case 5:p=o.readString(),i.setFeatureTag(p);break;case 6:p=o.readString(),i.setTrackId(p);break;case 7:p=o.readInt64(),i.setDetectionId(p);break;case 8:p=new proto.mediapipe.Detection.AssociatedDetection,o.readMessage(p,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),i.addAssociatedDetections(p);break;case 9:p=o.readString(),i.addDisplayName(p);break;case 10:p=o.readInt64(),i.setTimestampUsec(p);break;default:o.skipField()}return i},proto.mediapipe.Detection.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getLabelList()).length>0&&o.writeRepeatedString(1,p),(p=i.getLabelIdList()).length>0&&o.writePackedInt32(2,p),(p=i.getScoreList()).length>0&&o.writePackedFloat(3,p),(p=i.getLocationData())!=null&&o.writeMessage(4,p,n.LocationData.serializeBinaryToWriter),(p=e.Message.getField(i,5))!=null&&o.writeString(5,p),(p=e.Message.getField(i,6))!=null&&o.writeString(6,p),(p=e.Message.getField(i,7))!=null&&o.writeInt64(7,p),(p=i.getAssociatedDetectionsList()).length>0&&o.writeRepeatedMessage(8,p,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(p=i.getDisplayNameList()).length>0&&o.writeRepeatedString(9,p),(p=e.Message.getField(i,10))!=null&&o.writeInt64(10,p)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(i){return proto.mediapipe.Detection.AssociatedDetection.toObject(i,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(i,o){var p,l={id:(p=e.Message.getField(o,1))==null?void 0:p,confidence:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(p,o)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readInt32();i.setId(p);break;case 2:p=o.readFloat(),i.setConfidence(p);break;default:o.skipField()}return i},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeInt32(1,p),(p=e.Message.getField(i,2))!=null&&o.writeFloat(2,p)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Detection.prototype.getLabelList=function(){return e.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(i){return e.Message.setField(this,1,i||[])},proto.mediapipe.Detection.prototype.addLabel=function(i,o){return e.Message.addToRepeatedField(this,1,i,o)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(i){return e.Message.setField(this,2,i||[])},proto.mediapipe.Detection.prototype.addLabelId=function(i,o){return e.Message.addToRepeatedField(this,2,i,o)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return e.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(i){return e.Message.setField(this,3,i||[])},proto.mediapipe.Detection.prototype.addScore=function(i,o){return e.Message.addToRepeatedField(this,3,i,o)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return e.Message.getWrapperField(this,n.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(i){return e.Message.setWrapperField(this,4,i)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return e.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.Detection.prototype.getTrackId=function(){return e.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(i){return e.Message.setField(this,6,i)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.Detection.prototype.getDetectionId=function(){return e.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(i){return e.Message.setField(this,7,i)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(i){return e.Message.setRepeatedWrapperField(this,8,i)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(i,o){return e.Message.addToRepeatedWrapperField(this,8,i,proto.mediapipe.Detection.AssociatedDetection,o)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return e.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(i){return e.Message.setField(this,9,i||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(i,o){return e.Message.addToRepeatedField(this,9,i,o)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return e.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(i){return e.Message.setField(this,10,i)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return e.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return e.Message.getField(this,10)!=null},proto.mediapipe.DetectionList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(i){return proto.mediapipe.DetectionList.toObject(i,this)},proto.mediapipe.DetectionList.toObject=function(i,o){var p={detectionList:e.Message.toObjectList(o.getDetectionList(),proto.mediapipe.Detection.toObject,i)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.DetectionList.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(p,o)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var p=new proto.mediapipe.Detection;o.readMessage(p,proto.mediapipe.Detection.deserializeBinaryFromReader),i.addDetection(p)}else o.skipField();return i},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(i,o){var p;(p=i.getDetectionList()).length>0&&o.writeRepeatedMessage(1,p,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.DetectionList.prototype.addDetection=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.Detection,o)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},r.object.extend(t,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,s),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,s),proto.mediapipe.InferenceCalculatorOptions=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(o){e.Message.initialize(this,o,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(o,p){var l,c={modelPath:(l=e.Message.getField(p,1))==null?void 0:l,useGpu:e.Message.getBooleanFieldWithDefault(p,2,!1),useNnapi:e.Message.getBooleanFieldWithDefault(p,3,!1),cpuNumThread:e.Message.getFieldWithDefault(p,4,-1),delegate:(l=p.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(o,l)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=p.readString();o.setModelPath(l);break;case 2:l=p.readBool(),o.setUseGpu(l);break;case 3:l=p.readBool(),o.setUseNnapi(l);break;case 4:l=p.readInt32(),o.setCpuNumThread(l);break;case 5:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),o.setDelegate(l);break;default:p.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(o,p){var l=void 0;(l=e.Message.getField(o,1))!=null&&p.writeString(1,l),(l=e.Message.getField(o,2))!=null&&p.writeBool(2,l),(l=e.Message.getField(o,3))!=null&&p.writeBool(3,l),(l=e.Message.getField(o,4))!=null&&p.writeInt32(4,l),(l=o.getDelegate())!=null&&p.writeMessage(5,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(o,p){var l,c={tflite:(l=p.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(o,l),gpu:(l=p.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(o,l),nnapi:(l=p.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(o,l),xnnpack:(l=p.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(o,l)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),o.setTflite(l);break;case 2:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),o.setGpu(l);break;case 3:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),o.setNnapi(l);break;case 4:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),o.setXnnpack(l);break;default:p.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(o,p){var l=void 0;(l=o.getTflite())!=null&&p.writeMessage(1,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(l=o.getGpu())!=null&&p.writeMessage(2,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(l=o.getNnapi())!=null&&p.writeMessage(3,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),(l=o.getXnnpack())!=null&&p.writeMessage(4,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(o,p){var l={};return o&&(l.$jspbMessageInstance=p),l}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)p.getFieldNumber(),p.skipField();return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(o,p){},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(o,p){var l,c={useAdvancedGpuApi:e.Message.getBooleanFieldWithDefault(p,1,!1),api:e.Message.getFieldWithDefault(p,4,0),allowPrecisionLoss:e.Message.getBooleanFieldWithDefault(p,3,!0),cachedKernelPath:(l=e.Message.getField(p,2))==null?void 0:l,serializedModelDir:(l=e.Message.getField(p,7))==null?void 0:l,modelToken:(l=e.Message.getField(p,8))==null?void 0:l,usage:e.Message.getFieldWithDefault(p,5,2)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=p.readBool();o.setUseAdvancedGpuApi(l);break;case 4:l=p.readEnum(),o.setApi(l);break;case 3:l=p.readBool(),o.setAllowPrecisionLoss(l);break;case 2:l=p.readString(),o.setCachedKernelPath(l);break;case 7:l=p.readString(),o.setSerializedModelDir(l);break;case 8:l=p.readString(),o.setModelToken(l);break;case 5:l=p.readEnum(),o.setUsage(l);break;default:p.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(o,p){var l=void 0;(l=e.Message.getField(o,1))!=null&&p.writeBool(1,l),(l=e.Message.getField(o,4))!=null&&p.writeEnum(4,l),(l=e.Message.getField(o,3))!=null&&p.writeBool(3,l),(l=e.Message.getField(o,2))!=null&&p.writeString(2,l),(l=e.Message.getField(o,7))!=null&&p.writeString(7,l),(l=e.Message.getField(o,8))!=null&&p.writeString(8,l),(l=e.Message.getField(o,5))!=null&&p.writeEnum(5,l)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return e.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return e.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(o){return e.Message.setField(this,7,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return e.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(o){return e.Message.setField(this,8,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return e.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return e.Message.getField(this,8)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return e.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return e.Message.getField(this,5)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(o,p){var l,c={cacheDir:(l=e.Message.getField(p,1))==null?void 0:l,modelToken:(l=e.Message.getField(p,2))==null?void 0:l,acceleratorName:(l=e.Message.getField(p,3))==null?void 0:l};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=p.readString();o.setCacheDir(l);break;case 2:l=p.readString(),o.setModelToken(l);break;case 3:l=p.readString(),o.setAcceleratorName(l);break;default:p.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(o,p){var l=void 0;(l=e.Message.getField(o,1))!=null&&p.writeString(1,l),(l=e.Message.getField(o,2))!=null&&p.writeString(2,l),(l=e.Message.getField(o,3))!=null&&p.writeString(3,l)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(o,p){var l={numThreads:e.Message.getFieldWithDefault(p,1,-1)};return o&&(l.$jspbMessageInstance=p),l}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)if(p.getFieldNumber()===1){var l=p.readInt32();o.setNumThreads(l)}else p.skipField();return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(o,p){var l;(l=e.Message.getField(o,1))!=null&&p.writeInt32(1,l)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return e.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(o){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(o){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(o){return e.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(o){return e.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new e.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[336783863]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return e.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(o){return e.Message.setWrapperField(this,5,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new e.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[336783863]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,r.object.extend(t,proto.mediapipe)})(inference_calculator_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=inference_calculator_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,s),r.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,s),proto.mediapipe.tasks.core.proto.Acceleration=function(i){e.Message.initialize(this,i,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},r.inherits(proto.mediapipe.tasks.core.proto.Acceleration,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(i){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(i,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(i,o){var p,l={xnnpack:(p=o.getXnnpack())&&n.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(i,p),gpu:(p=o.getGpu())&&n.InferenceCalculatorOptions.Delegate.Gpu.toObject(i,p),tflite:(p=o.getTflite())&&n.InferenceCalculatorOptions.Delegate.TfLite.toObject(i,p),nnapi:(p=o.getNnapi())&&n.InferenceCalculatorOptions.Delegate.Nnapi.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(p,o)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new n.InferenceCalculatorOptions.Delegate.Xnnpack;o.readMessage(p,n.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),i.setXnnpack(p);break;case 2:p=new n.InferenceCalculatorOptions.Delegate.Gpu,o.readMessage(p,n.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),i.setGpu(p);break;case 4:p=new n.InferenceCalculatorOptions.Delegate.TfLite,o.readMessage(p,n.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),i.setTflite(p);break;case 5:p=new n.InferenceCalculatorOptions.Delegate.Nnapi,o.readMessage(p,n.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),i.setNnapi(p);break;default:o.skipField()}return i},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getXnnpack())!=null&&o.writeMessage(1,p,n.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),(p=i.getGpu())!=null&&o.writeMessage(2,p,n.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(p=i.getTflite())!=null&&o.writeMessage(4,p,n.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(p=i.getNnapi())!=null&&o.writeMessage(5,p,n.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return e.Message.getWrapperField(this,n.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(i){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],i)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return e.Message.getWrapperField(this,n.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(i){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],i)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return e.Message.getWrapperField(this,n.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(i){return e.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],i)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return e.Message.getWrapperField(this,n.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(i){return e.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],i)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return e.Message.getField(this,5)!=null},r.object.extend(t,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,s),r.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,s),r.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,s),proto.mediapipe.tasks.core.proto.ExternalFile=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(n){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(n,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(n,i){var o,p={fileContent:i.getFileContent_asB64(),fileName:(o=e.Message.getField(i,2))==null?void 0:o,fileDescriptorMeta:(o=i.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(n,o),filePointerMeta:(o=i.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(n,o)};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readBytes();n.setFileContent(o);break;case 2:o=i.readString(),n.setFileName(o);break;case 3:o=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,i.readMessage(o,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),n.setFileDescriptorMeta(o);break;case 4:o=new proto.mediapipe.tasks.core.proto.FilePointerMeta,i.readMessage(o,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),n.setFilePointerMeta(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeBytes(1,o),(o=e.Message.getField(n,2))!=null&&i.writeString(2,o),(o=n.getFileDescriptorMeta())!=null&&i.writeMessage(3,o,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),(o=n.getFilePointerMeta())!=null&&i.writeMessage(4,o,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return e.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return e.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(n){return e.Message.setWrapperField(this,3,n)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(n){return e.Message.setWrapperField(this,4,n)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return e.Message.getField(this,4)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(n){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(n,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(n,i){var o,p={fd:(o=e.Message.getField(i,1))==null?void 0:o,length:(o=e.Message.getField(i,2))==null?void 0:o,offset:(o=e.Message.getField(i,3))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readInt32();n.setFd(o);break;case 2:o=i.readInt64(),n.setLength(o);break;case 3:o=i.readInt64(),n.setOffset(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeInt32(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt64(2,o),(o=e.Message.getField(n,3))!=null&&i.writeInt64(3,o)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(n){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(n,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(n,i){var o,p={pointer:(o=e.Message.getField(i,1))==null?void 0:o,length:(o=e.Message.getField(i,2))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readUint64();n.setPointer(o);break;case 2:o=i.readInt64(),n.setLength(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeUint64(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt64(2,o)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.core.proto)})(external_file_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=acceleration_pb;r.object.extend(proto,n);var i=external_file_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,s),proto.mediapipe.tasks.core.proto.BaseOptions=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(o){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(o,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(o,p){var l,c={modelAsset:(l=p.getModelAsset())&&i.ExternalFile.toObject(o,l),useStreamMode:e.Message.getBooleanFieldWithDefault(p,2,!1),acceleration:(l=p.getAcceleration())&&n.Acceleration.toObject(o,l)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=new i.ExternalFile;p.readMessage(l,i.ExternalFile.deserializeBinaryFromReader),o.setModelAsset(l);break;case 2:l=p.readBool(),o.setUseStreamMode(l);break;case 3:l=new n.Acceleration,p.readMessage(l,n.Acceleration.deserializeBinaryFromReader),o.setAcceleration(l);break;default:p.skipField()}return o},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(o,p){var l=void 0;(l=o.getModelAsset())!=null&&p.writeMessage(1,l,i.ExternalFile.serializeBinaryToWriter),(l=e.Message.getField(o,2))!=null&&p.writeBool(2,l),(l=o.getAcceleration())!=null&&p.writeMessage(3,l,n.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return e.Message.getWrapperField(this,i.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return e.Message.getWrapperField(this,n.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return e.Message.getField(this,3)!=null},r.object.extend(t,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,s),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5),minSuppressionThreshold:e.Message.getFloatingPointFieldWithDefault(l,3,.5),numFaces:(c=e.Message.getField(l,4))==null?void 0:c};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;case 3:c=l.readFloat(),p.setMinSuppressionThreshold(c);break;case 4:c=l.readInt32(),p.setNumFaces(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c),(c=e.Message.getField(p,3))!=null&&l.writeFloat(3,c),(c=e.Message.getField(p,4))!=null&&l.writeInt32(4,c)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new e.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[502141897]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(p){return e.Message.setField(this,4,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new e.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[502141897]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_detector.proto)})(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;const DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(t){var e,r,s,n,i,o,p,l,c,f,d,g,u;const h=t.getScoreList(),y=t.getLabelIdList(),m=t.getLabelList(),_=t.getDisplayNameList(),b={categories:[],keypoints:[]};for(let S=0;S<h.length;S++)b.categories.push({score:h[S],index:(e=y[S])!==null&&e!==void 0?e:DEFAULT_CATEGORY_INDEX,categoryName:(r=m[S])!==null&&r!==void 0?r:"",displayName:(s=_[S])!==null&&s!==void 0?s:""});const M=(n=t.getLocationData())===null||n===void 0?void 0:n.getBoundingBox();if(M&&(b.boundingBox={originX:(i=M.getXmin())!==null&&i!==void 0?i:0,originY:(o=M.getYmin())!==null&&o!==void 0?o:0,width:(p=M.getWidth())!==null&&p!==void 0?p:0,height:(l=M.getHeight())!==null&&l!==void 0?l:0}),(c=t.getLocationData())===null||c===void 0?void 0:c.getRelativeKeypointsList().length)for(const S of t.getLocationData().getRelativeKeypointsList())b.keypoints.push({x:(f=S.getX())!==null&&f!==void 0?f:0,y:(d=S.getY())!==null&&d!==void 0?d:0,score:(g=S.getScore())!==null&&g!==void 0?g:0,label:(u=S.getKeypointLabel())!==null&&u!==void 0?u:""});return b}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.NormalizedRect",null,s),r.exportSymbol("proto.mediapipe.Rect",null,s),proto.mediapipe.Rect=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.Rect,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.NormalizedRect,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(n){return proto.mediapipe.Rect.toObject(n,this)},proto.mediapipe.Rect.toObject=function(n,i){var o,p={xCenter:(o=e.Message.getField(i,1))==null?void 0:o,yCenter:(o=e.Message.getField(i,2))==null?void 0:o,height:(o=e.Message.getField(i,3))==null?void 0:o,width:(o=e.Message.getField(i,4))==null?void 0:o,rotation:e.Message.getFloatingPointFieldWithDefault(i,5,0),rectId:(o=e.Message.getField(i,6))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.Rect.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(o,i)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readInt32();n.setXCenter(o);break;case 2:o=i.readInt32(),n.setYCenter(o);break;case 3:o=i.readInt32(),n.setHeight(o);break;case 4:o=i.readInt32(),n.setWidth(o);break;case 5:o=i.readFloat(),n.setRotation(o);break;case 6:o=i.readInt64(),n.setRectId(o);break;default:i.skipField()}return n},proto.mediapipe.Rect.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeInt32(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt32(2,o),(o=e.Message.getField(n,3))!=null&&i.writeInt32(3,o),(o=e.Message.getField(n,4))!=null&&i.writeInt32(4,o),(o=e.Message.getField(n,5))!=null&&i.writeFloat(5,o),(o=e.Message.getField(n,6))!=null&&i.writeInt64(6,o)},proto.mediapipe.Rect.prototype.getXCenter=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Rect.prototype.getYCenter=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Rect.prototype.getHeight=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.Rect.prototype.clearHeight=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Rect.prototype.getWidth=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.Rect.prototype.clearWidth=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.Rect.prototype.getRotation=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(n){return e.Message.setField(this,5,n)},proto.mediapipe.Rect.prototype.clearRotation=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.Rect.prototype.getRectId=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(n){return e.Message.setField(this,6,n)},proto.mediapipe.Rect.prototype.clearRectId=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return e.Message.getField(this,6)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(n){return proto.mediapipe.NormalizedRect.toObject(n,this)},proto.mediapipe.NormalizedRect.toObject=function(n,i){var o,p={xCenter:(o=e.Message.getOptionalFloatingPointField(i,1))==null?void 0:o,yCenter:(o=e.Message.getOptionalFloatingPointField(i,2))==null?void 0:o,height:(o=e.Message.getOptionalFloatingPointField(i,3))==null?void 0:o,width:(o=e.Message.getOptionalFloatingPointField(i,4))==null?void 0:o,rotation:e.Message.getFloatingPointFieldWithDefault(i,5,0),rectId:(o=e.Message.getField(i,6))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.NormalizedRect.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(o,i)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readFloat();n.setXCenter(o);break;case 2:o=i.readFloat(),n.setYCenter(o);break;case 3:o=i.readFloat(),n.setHeight(o);break;case 4:o=i.readFloat(),n.setWidth(o);break;case 5:o=i.readFloat(),n.setRotation(o);break;case 6:o=i.readInt64(),n.setRectId(o);break;default:i.skipField()}return n},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeFloat(1,o),(o=e.Message.getField(n,2))!=null&&i.writeFloat(2,o),(o=e.Message.getField(n,3))!=null&&i.writeFloat(3,o),(o=e.Message.getField(n,4))!=null&&i.writeFloat(4,o),(o=e.Message.getField(n,5))!=null&&i.writeFloat(5,o),(o=e.Message.getField(n,6))!=null&&i.writeInt64(6,o)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(n){return e.Message.setField(this,5,n)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(n){return e.Message.setField(this,6,n)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return e.Message.getField(this,6)!=null},r.object.extend(t,proto.mediapipe)})(rect_pb);var task_runner={},graph_runner={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createGraphRunner=t.createMediaPipeLib=t.GraphRunner=t.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;const e=platform_utils;t.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class r{constructor(o,p){this.autoResizeCanvas=!0,this.wasmModule=o,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport=typeof this.wasmModule._addIntToInputStream=="function",p!==void 0?this.wasmModule.canvas=p:typeof OffscreenCanvas>"u"||(0,e.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}async initializeGraph(o){const p=await fetch(o),l=await p.arrayBuffer(),c=!(o.endsWith(".pbtxt")||o.endsWith(".textproto"));this.setGraph(new Uint8Array(l),c)}setGraphFromString(o){this.setGraph(new TextEncoder().encode(o),!1)}setGraph(o,p){const l=o.length,c=this.wasmModule._malloc(l);this.wasmModule.HEAPU8.set(o,c),p?this.wasmModule._changeBinaryGraph(l,c):this.wasmModule._changeTextGraph(l,c),this.wasmModule._free(c)}configureAudio(o,p,l,c,f){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),c=c||"input_audio",this.wrapStringPtr(c,d=>{f=f||"audio_header",this.wrapStringPtr(f,g=>{this.wasmModule._configureAudio(d,g,o,p,l)})})}setAutoResizeCanvas(o){this.autoResizeCanvas=o}setAutoRenderToScreen(o){this.wasmModule._setAutoRenderToScreen(o)}bindTextureToStream(o,p){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");p?this.wasmModule._bindTextureToStream(p):console.assert(this.wasmModule._bindTextureToCanvas());const l=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!l)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let c,f;return l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,o),o.videoWidth?(c=o.videoWidth,f=o.videoHeight):o.naturalWidth?(c=o.naturalWidth,f=o.naturalHeight):(c=o.width,f=o.height),!this.autoResizeCanvas||c===this.wasmModule.canvas.width&&f===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=c,this.wasmModule.canvas.height=f),[c,f]}processGl(o,p){const[l,c]=this.bindTextureToStream(o),f=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[f/4]=l,this.wasmModule.HEAPU32[f/4+1]=c,this.wasmModule.HEAPF64[f/8+1]=p,this.wasmModule._processGl(f),this.wasmModule._free(f)}wrapStringPtr(o,p){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const l=this.wasmModule.stringToNewUTF8(o);p(l),this.wasmModule._free(l)}wrapStringPtrPtr(o,p){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const l=new Uint32Array(o.length);for(let f=0;f<o.length;f++)l[f]=this.wasmModule.stringToNewUTF8(o[f]);const c=this.wasmModule._malloc(4*l.length);this.wasmModule.HEAPU32.set(l,c>>2),p(c);for(const f of l)this.wasmModule._free(f);this.wasmModule._free(c)}getCalculatorGraphConfig(o,p){const l=t.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(l,c=>{o(c)}),this.wrapStringPtr(l,c=>{this.wasmModule._getGraphConfig(c,p)}),delete this.wasmModule.simpleListeners[l]}setListener(o,p){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[o]=p}setVectorListener(o,p){let l=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[o]=(c,f,d)=>{f?(p(l,d),l=[]):l.push(c)}}attachErrorListener(o){this.wasmModule.errorListener=o}attachEmptyPacketListener(o,p){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[o]=p}addAudioToStream(o,p,l){this.addAudioToStreamWithShape(o,0,0,p,l)}addAudioToStreamWithShape(o,p,l,c,f){const d=4*o.length;this.audioSize!==d&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(d),this.audioSize=d),this.wasmModule.HEAPF32.set(o,this.audioPtr/4),this.wrapStringPtr(c,g=>{this.wasmModule._addAudioToInputStream(this.audioPtr,p,l,g,f)})}addGpuBufferToStream(o,p,l){this.wrapStringPtr(p,c=>{const[f,d]=this.bindTextureToStream(o,c);this.wasmModule._addBoundTextureToStream(c,f,d,l)})}addBoolToStream(o,p,l){this.wrapStringPtr(p,c=>{this.wasmModule._addBoolToInputStream(o,c,l)})}addDoubleToStream(o,p,l){this.wrapStringPtr(p,c=>{this.wasmModule._addDoubleToInputStream(o,c,l)})}addFloatToStream(o,p,l){this.wrapStringPtr(p,c=>{this.wasmModule._addFloatToInputStream(o,c,l)})}addIntToStream(o,p,l){this.wrapStringPtr(p,c=>{this.wasmModule._addIntToInputStream(o,c,l)})}addStringToStream(o,p,l){this.wrapStringPtr(p,c=>{this.wrapStringPtr(o,f=>{this.wasmModule._addStringToInputStream(f,c,l)})})}addStringRecordToStream(o,p,l){this.wrapStringPtr(p,c=>{this.wrapStringPtrPtr(Object.keys(o),f=>{this.wrapStringPtrPtr(Object.values(o),d=>{this.wasmModule._addFlatHashMapToInputStream(f,d,Object.keys(o).length,c,l)})})})}addProtoToStream(o,p,l,c){this.wrapStringPtr(l,f=>{this.wrapStringPtr(p,d=>{const g=this.wasmModule._malloc(o.length);this.wasmModule.HEAPU8.set(o,g),this.wasmModule._addProtoToInputStream(g,o.length,d,f,c),this.wasmModule._free(g)})})}addEmptyPacketToStream(o,p){this.wrapStringPtr(o,l=>{this.wasmModule._addEmptyPacketToInputStream(l,p)})}addBoolToInputSidePacket(o,p){this.wrapStringPtr(p,l=>{this.wasmModule._addBoolToInputSidePacket(o,l)})}addDoubleToInputSidePacket(o,p){this.wrapStringPtr(p,l=>{this.wasmModule._addDoubleToInputSidePacket(o,l)})}addFloatToInputSidePacket(o,p){this.wrapStringPtr(p,l=>{this.wasmModule._addFloatToInputSidePacket(o,l)})}addIntToInputSidePacket(o,p){this.wrapStringPtr(p,l=>{this.wasmModule._addIntToInputSidePacket(o,l)})}addStringToInputSidePacket(o,p){this.wrapStringPtr(p,l=>{this.wrapStringPtr(o,c=>{this.wasmModule._addStringToInputSidePacket(c,l)})})}addProtoToInputSidePacket(o,p,l){this.wrapStringPtr(l,c=>{this.wrapStringPtr(p,f=>{const d=this.wasmModule._malloc(o.length);this.wasmModule.HEAPU8.set(o,d),this.wasmModule._addProtoToInputSidePacket(d,o.length,f,c),this.wasmModule._free(d)})})}attachBoolListener(o,p){this.setListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachBoolListener(l)})}attachBoolVectorListener(o,p){this.setVectorListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachBoolVectorListener(l)})}attachIntListener(o,p){this.setListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachIntListener(l)})}attachIntVectorListener(o,p){this.setVectorListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachIntVectorListener(l)})}attachDoubleListener(o,p){this.setListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachDoubleListener(l)})}attachDoubleVectorListener(o,p){this.setVectorListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachDoubleVectorListener(l)})}attachFloatListener(o,p){this.setListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachFloatListener(l)})}attachFloatVectorListener(o,p){this.setVectorListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachFloatVectorListener(l)})}attachStringListener(o,p){this.setListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachStringListener(l)})}attachStringVectorListener(o,p){this.setVectorListener(o,p),this.wrapStringPtr(o,l=>{this.wasmModule._attachStringVectorListener(l)})}attachProtoListener(o,p,l){this.setListener(o,p),this.wrapStringPtr(o,c=>{this.wasmModule._attachProtoListener(c,l||!1)})}attachProtoVectorListener(o,p,l){this.setVectorListener(o,p),this.wrapStringPtr(o,c=>{this.wasmModule._attachProtoVectorListener(c,l||!1)})}attachAudioListener(o,p,l){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(o,(c,f)=>{const d=new Float32Array(c.buffer,c.byteOffset,c.length/4);p(d,f)}),this.wrapStringPtr(o,c=>{this.wasmModule._attachAudioListener(c,l||!1)})}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}async function s(i){if(typeof importScripts!="function"){const o=document.createElement("script");return o.setAttribute("src",i),o.setAttribute("crossorigin","anonymous"),new Promise(p=>{o.addEventListener("load",()=>{p()},!1),o.addEventListener("error",()=>{p()},!1),document.body.appendChild(o)})}importScripts(i.toString())}async function n(i,o,p,l,c){const f=[];if(o&&f.push(o),p&&f.push(p),f.length&&await Promise.all(f.map(s)),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&c){const g=self.Module;g.locateFile=c.locateFile,c.mainScriptUrlOrBlob&&(g.mainScriptUrlOrBlob=c.mainScriptUrlOrBlob)}const d=await self.ModuleFactory(self.Module||c);return self.ModuleFactory=self.Module=void 0,new i(d,l)}t.GraphRunner=r,t.createMediaPipeLib=n,t.createGraphRunner=async function(i,o,p,l){return n(r,i,o,p,l)}})(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(t){return class extends t{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;const inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,NO_ASSETS=void 0,FREE_MEMORY_STREAM="free_memory",UNUSED_STREAM_SUFFIX="_unused_out",CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner);class CachedGraphRunner extends CachedGraphRunnerType{}async function createTaskRunner(t,e,r,s){const n={locateFile:()=>r.wasmBinaryPath.toString()},i=await(0,graph_runner_1$1.createMediaPipeLib)(t,r.wasmLoaderPath,NO_ASSETS,e,n);return await i.setOptions(s),i}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;class TaskRunner{static async createInstance(e,r,s,n){return createTaskRunner(e,r,s,n)}constructor(e){this.graphRunner=e,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(e){var r,s,n,i,o,p;const l=e.baseOptions||{};if(!((r=e.baseOptions)===null||r===void 0)&&r.modelAssetBuffer&&(!((s=e.baseOptions)===null||s===void 0)&&s.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(!((n=this.baseOptions.getModelAsset())===null||n===void 0)&&n.hasFileContent()||!((i=this.baseOptions.getModelAsset())===null||i===void 0)&&i.hasFileName()||!((o=e.baseOptions)===null||o===void 0)&&o.modelAssetBuffer||!((p=e.baseOptions)===null||p===void 0)&&p.modelAssetPath))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(l),l.modelAssetPath?fetch(l.modelAssetPath.toString()).then(c=>{if(c.ok)return c.arrayBuffer();throw new Error(`Failed to fetch model: ${l.modelAssetPath} (${c.status})`)}).then(c=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch{}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array(c),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()}):(this.setExternalFile(l.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}onGraphRefreshed(){}getCalculatorGraphConfig(){let e;if(this.graphRunner.getCalculatorGraphConfig(r=>{e=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(r)}),!e)throw new Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,r){this.graphRunner.attachErrorListener((s,n)=>{this.processingErrors.push(new Error(n))}),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(e,r),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(e){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,e)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{const e=this.processingErrors.length;if(e===1)throw new Error(this.processingErrors[0].message);if(e>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map(r=>r.message).join(", "))}finally{this.processingErrors=[]}}setExternalFile(e){const r=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;typeof e=="string"?(r.setFileName(e),r.clearFileContent()):e instanceof Uint8Array&&(r.setFileContent(e),r.clearFileName()),this.baseOptions.setModelAsset(r)}setAcceleration(e){let r=this.baseOptions.getAcceleration();r||(r=new acceleration_pb_1.Acceleration,r.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in e&&(e.delegate==="GPU"?r.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):r.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(r)}addKeepaliveNode(e){this.keepaliveNode=new calculator_pb_1.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(FREE_MEMORY_STREAM),this.keepaliveNode.addOutputStream(FREE_MEMORY_STREAM+UNUSED_STREAM_SUFFIX),e.addInputStream(FREE_MEMORY_STREAM),e.addNode(this.keepaliveNode)}keepStreamAlive(e){this.keepaliveNode.addInputStream(e),this.keepaliveNode.addOutputStream(e+UNUSED_STREAM_SUFFIX)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,FREE_MEMORY_STREAM,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}}task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(t){return class extends t{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(e,r,s){this.wrapStringPtr(r,n=>{const[i,o]=this.bindTextureToStream(e,n);this.wasmImageModule._addBoundTextureAsImageToStream(n,i,o,s)})}attachImageListener(e,r){this.setListener(e,r),this.wrapStringPtr(e,s=>{this.wasmImageModule._attachImageListener(s)})}attachImageVectorListener(e,r){this.setVectorListener(e,r),this.wrapStringPtr(e,s=>{this.wasmImageModule._attachImageVectorListener(s)})}}}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;const rect_pb_1=rect_pb,task_runner_1=task_runner,image_1$1=image,image_shader_context_1=image_shader_context,mask_1$1=mask,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner));class VisionGraphRunner extends GraphRunnerVisionType{}function createCanvas(){return typeof OffscreenCanvas<"u"&&!(0,platform_utils_1.isWebKit)()?void 0:document.createElement("canvas")}vision_task_runner.VisionGraphRunner=VisionGraphRunner;class VisionTaskRunner extends task_runner_1.TaskRunner{static async createVisionInstance(e,r,s){var n;const i=(n=s.canvas)!==null&&n!==void 0?n:createCanvas();return task_runner_1.TaskRunner.createInstance(e,i,r,s)}constructor(e,r,s,n){super(e),this.graphRunner=e,this.imageStreamName=r,this.normRectStreamName=s,this.roiAllowed=n,this.shaderContext=new image_shader_context_1.MPImageShaderContext}applyOptions(e){if("runningMode"in e){const r=!!e.runningMode&&e.runningMode!=="IMAGE";this.baseOptions.setUseStreamMode(r)}if(e.canvas!==void 0&&this.graphRunner.wasmModule.canvas!==e.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(e)}processImageData(e,r){var s;if(!((s=this.baseOptions)===null||s===void 0)&&s.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(e,r,this.getSynctheticTimestamp())}processVideoData(e,r,s){var n;if(!(!((n=this.baseOptions)===null||n===void 0)&&n.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(e,r,s)}getImageSourceSize(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:[e.width,e.height]}convertToNormalizedRect(e,r){const s=new rect_pb_1.NormalizedRect;if(r!=null&&r.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");const n=r.regionOfInterest;if(n.left>=n.right||n.top>=n.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(n.left<0||n.top<0||n.right>1||n.bottom>1)throw new Error("Expected RectF values to be in [0,1].");s.setXCenter((n.left+n.right)/2),s.setYCenter((n.top+n.bottom)/2),s.setWidth(n.right-n.left),s.setHeight(n.bottom-n.top)}else s.setXCenter(.5),s.setYCenter(.5),s.setWidth(1),s.setHeight(1);if(r!=null&&r.rotationDegrees){if((r==null?void 0:r.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90.");if(s.setRotation(-Math.PI*r.rotationDegrees/180),(r==null?void 0:r.rotationDegrees)%180!=0){const[n,i]=this.getImageSourceSize(e),o=s.getHeight()*i/n,p=s.getWidth()*n/i;s.setWidth(o),s.setHeight(p)}}return s}process(e,r,s){const n=this.convertToNormalizedRect(e,r);this.graphRunner.addProtoToStream(n.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,s),this.graphRunner.addGpuBufferAsImageToStream(e,this.imageStreamName,s??performance.now()),this.finishProcessing()}convertToMPImage(e,r){const{data:s,width:n,height:i}=e,o=n*i;let p;if(s instanceof Uint8Array)if(s.length===3*o){const c=new Uint8ClampedArray(4*o);for(let f=0;f<o;++f)c[4*f]=s[3*f],c[4*f+1]=s[3*f+1],c[4*f+2]=s[3*f+2],c[4*f+3]=255;p=new ImageData(c,n,i)}else{if(s.length!==4*o)throw new Error("Unsupported channel count: "+s.length/o);p=new ImageData(new Uint8ClampedArray(s.buffer,s.byteOffset,s.length),n,i)}else{if(!(s instanceof WebGLTexture))throw new Error(`Unsupported format: ${s.constructor.name}`);p=s}const l=new image_1$1.MPImage([p],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,n,i);return r?l.clone():l}convertToMPMask(e,r){const{data:s,width:n,height:i}=e,o=n*i;let p;if(s instanceof Uint8Array||s instanceof Float32Array){if(s.length!==o)throw new Error("Unsupported channel count: "+s.length/o);p=s}else p=s;const l=new mask_1$1.MPMask([p],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,n,i);return r?l.clone():l}close(){this.shaderContext.close(),super.close()}}vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(h,y,m,_){_===void 0&&(_=m);var b=Object.getOwnPropertyDescriptor(y,m);b&&!("get"in b?!y.__esModule:b.writable||b.configurable)||(b={enumerable:!0,get:function(){return y[m]}}),Object.defineProperty(h,_,b)}:function(h,y,m,_){_===void 0&&(_=m),h[_]=y[m]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(h,y){for(var m in h)m==="default"||Object.prototype.hasOwnProperty.call(y,m)||e(y,h,m)};Object.defineProperty(t,"__esModule",{value:!0}),t.FaceDetector=void 0;const s=calculator_pb,n=calculator_options_pb,i=detection_pb,o=base_options_pb,p=face_detector_graph_options_pb,l=detection_result,c=vision_task_runner,f="image_in",d="norm_rect_in",g="detections";r(face_detector_options,t),r(face_detector_result,t);class u extends c.VisionTaskRunner{static createFromOptions(y,m){return c.VisionTaskRunner.createVisionInstance(u,y,m)}static createFromModelBuffer(y,m){return c.VisionTaskRunner.createVisionInstance(u,y,{baseOptions:{modelAssetBuffer:m}})}static async createFromModelPath(y,m){return c.VisionTaskRunner.createVisionInstance(u,y,{baseOptions:{modelAssetPath:m}})}constructor(y,m){super(new c.VisionGraphRunner(y,m),f,d,!1),this.result={detections:[]},this.options=new p.FaceDetectorGraphOptions,this.options.setBaseOptions(new o.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(y){this.options.setBaseOptions(y)}setOptions(y){var m,_;return"minDetectionConfidence"in y&&this.options.setMinDetectionConfidence((m=y.minDetectionConfidence)!==null&&m!==void 0?m:.5),"minSuppressionThreshold"in y&&this.options.setMinSuppressionThreshold((_=y.minSuppressionThreshold)!==null&&_!==void 0?_:.3),this.applyOptions(y)}detect(y,m){return this.result={detections:[]},this.processImageData(y,m),this.result}detectForVideo(y,m,_){return this.result={detections:[]},this.processVideoData(y,_,m),this.result}addJsFaceDetections(y){for(const m of y){const _=i.Detection.deserializeBinary(m);this.result.detections.push((0,l.convertFromDetectionProto)(_))}}refreshGraph(){const y=new s.CalculatorGraphConfig;y.addInputStream(f),y.addInputStream(d),y.addOutputStream(g);const m=new n.CalculatorOptions;m.setExtension(p.FaceDetectorGraphOptions.ext,this.options);const _=new s.CalculatorGraphConfig.Node;_.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),_.addInputStream("IMAGE:"+f),_.addInputStream("NORM_RECT:"+d),_.addOutputStream("DETECTIONS:"+g),_.setOptions(m),y.addNode(_),this.graphRunner.attachProtoVectorListener(g,(M,S)=>{this.addJsFaceDetections(M),this.setLatestOutputTimestamp(S)}),this.graphRunner.attachEmptyPacketListener(g,M=>{this.setLatestOutputTimestamp(M)});const b=y.serializeBinary();this.setGraph(new Uint8Array(b),!0)}}t.FaceDetector=u}(face_detector);var face_landmarker={},classification_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Classification",null,s),r.exportSymbol("proto.mediapipe.ClassificationList",null,s),r.exportSymbol("proto.mediapipe.ClassificationListCollection",null,s),proto.mediapipe.Classification=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.Classification,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},r.inherits(proto.mediapipe.ClassificationList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.ClassificationListCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(n){return proto.mediapipe.Classification.toObject(n,this)},proto.mediapipe.Classification.toObject=function(n,i){var o,p={index:(o=e.Message.getField(i,1))==null?void 0:o,score:(o=e.Message.getOptionalFloatingPointField(i,2))==null?void 0:o,label:(o=e.Message.getField(i,3))==null?void 0:o,displayName:(o=e.Message.getField(i,4))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.Classification.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(o,i)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readInt32();n.setIndex(o);break;case 2:o=i.readFloat(),n.setScore(o);break;case 3:o=i.readString(),n.setLabel(o);break;case 4:o=i.readString(),n.setDisplayName(o);break;default:i.skipField()}return n},proto.mediapipe.Classification.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeInt32(1,o),(o=e.Message.getField(n,2))!=null&&i.writeFloat(2,o),(o=e.Message.getField(n,3))!=null&&i.writeString(3,o),(o=e.Message.getField(n,4))!=null&&i.writeString(4,o)},proto.mediapipe.Classification.prototype.getIndex=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.Classification.prototype.clearIndex=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Classification.prototype.getScore=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.Classification.prototype.clearScore=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Classification.prototype.getLabel=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.Classification.prototype.clearLabel=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Classification.prototype.getDisplayName=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.ClassificationList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(n){return proto.mediapipe.ClassificationList.toObject(n,this)},proto.mediapipe.ClassificationList.toObject=function(n,i){var o={classificationList:e.Message.toObjectList(i.getClassificationList(),proto.mediapipe.Classification.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.ClassificationList.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(o,i)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.Classification;i.readMessage(o,proto.mediapipe.Classification.deserializeBinaryFromReader),n.addClassification(o)}else i.skipField();return n},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(n,i){var o;(o=n.getClassificationList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.ClassificationList.prototype.addClassification=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.Classification,i)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(n){return proto.mediapipe.ClassificationListCollection.toObject(n,this)},proto.mediapipe.ClassificationListCollection.toObject=function(n,i){var o={classificationListList:e.Message.toObjectList(i.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(o,i)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.ClassificationList;i.readMessage(o,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),n.addClassificationList(o)}else i.skipField();return n},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(n,i){var o;(o=n.getClassificationListList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.ClassificationList,i)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},r.object.extend(t,proto.mediapipe)})(classification_pb);var landmark_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Landmark",null,s),r.exportSymbol("proto.mediapipe.LandmarkList",null,s),r.exportSymbol("proto.mediapipe.LandmarkListCollection",null,s),r.exportSymbol("proto.mediapipe.NormalizedLandmark",null,s),r.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,s),r.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,s),proto.mediapipe.Landmark=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.Landmark,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},r.inherits(proto.mediapipe.LandmarkList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.LandmarkListCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.NormalizedLandmark,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},r.inherits(proto.mediapipe.NormalizedLandmarkList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.NormalizedLandmarkListCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(n){return proto.mediapipe.Landmark.toObject(n,this)},proto.mediapipe.Landmark.toObject=function(n,i){var o,p={x:(o=e.Message.getOptionalFloatingPointField(i,1))==null?void 0:o,y:(o=e.Message.getOptionalFloatingPointField(i,2))==null?void 0:o,z:(o=e.Message.getOptionalFloatingPointField(i,3))==null?void 0:o,visibility:(o=e.Message.getOptionalFloatingPointField(i,4))==null?void 0:o,presence:(o=e.Message.getOptionalFloatingPointField(i,5))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.Landmark.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(o,i)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readFloat();n.setX(o);break;case 2:o=i.readFloat(),n.setY(o);break;case 3:o=i.readFloat(),n.setZ(o);break;case 4:o=i.readFloat(),n.setVisibility(o);break;case 5:o=i.readFloat(),n.setPresence(o);break;default:i.skipField()}return n},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeFloat(1,o),(o=e.Message.getField(n,2))!=null&&i.writeFloat(2,o),(o=e.Message.getField(n,3))!=null&&i.writeFloat(3,o),(o=e.Message.getField(n,4))!=null&&i.writeFloat(4,o),(o=e.Message.getField(n,5))!=null&&i.writeFloat(5,o)},proto.mediapipe.Landmark.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.Landmark.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Landmark.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.Landmark.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Landmark.prototype.getZ=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.Landmark.prototype.clearZ=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Landmark.prototype.getVisibility=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.Landmark.prototype.getPresence=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(n){return e.Message.setField(this,5,n)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.LandmarkList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(n){return proto.mediapipe.LandmarkList.toObject(n,this)},proto.mediapipe.LandmarkList.toObject=function(n,i){var o={landmarkList:e.Message.toObjectList(i.getLandmarkList(),proto.mediapipe.Landmark.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.LandmarkList.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(o,i)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.Landmark;i.readMessage(o,proto.mediapipe.Landmark.deserializeBinaryFromReader),n.addLandmark(o)}else i.skipField();return n},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(n,i){var o;(o=n.getLandmarkList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.Landmark,i)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(n){return proto.mediapipe.LandmarkListCollection.toObject(n,this)},proto.mediapipe.LandmarkListCollection.toObject=function(n,i){var o={landmarkListList:e.Message.toObjectList(i.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(o,i)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.LandmarkList;i.readMessage(o,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),n.addLandmarkList(o)}else i.skipField();return n},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(n,i){var o;(o=n.getLandmarkListList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.LandmarkList,i)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(n){return proto.mediapipe.NormalizedLandmark.toObject(n,this)},proto.mediapipe.NormalizedLandmark.toObject=function(n,i){var o,p={x:(o=e.Message.getOptionalFloatingPointField(i,1))==null?void 0:o,y:(o=e.Message.getOptionalFloatingPointField(i,2))==null?void 0:o,z:(o=e.Message.getOptionalFloatingPointField(i,3))==null?void 0:o,visibility:(o=e.Message.getOptionalFloatingPointField(i,4))==null?void 0:o,presence:(o=e.Message.getOptionalFloatingPointField(i,5))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(o,i)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readFloat();n.setX(o);break;case 2:o=i.readFloat(),n.setY(o);break;case 3:o=i.readFloat(),n.setZ(o);break;case 4:o=i.readFloat(),n.setVisibility(o);break;case 5:o=i.readFloat(),n.setPresence(o);break;default:i.skipField()}return n},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeFloat(1,o),(o=e.Message.getField(n,2))!=null&&i.writeFloat(2,o),(o=e.Message.getField(n,3))!=null&&i.writeFloat(3,o),(o=e.Message.getField(n,4))!=null&&i.writeFloat(4,o),(o=e.Message.getField(n,5))!=null&&i.writeFloat(5,o)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(n){return e.Message.setField(this,5,n)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(n){return proto.mediapipe.NormalizedLandmarkList.toObject(n,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(n,i){var o={landmarkList:e.Message.toObjectList(i.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(o,i)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.NormalizedLandmark;i.readMessage(o,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),n.addLandmark(o)}else i.skipField();return n},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(n,i){var o;(o=n.getLandmarkList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.NormalizedLandmark,i)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(n){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(n,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(n,i){var o={landmarkListList:e.Message.toObjectList(i.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,n)};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(o,i)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=new proto.mediapipe.NormalizedLandmarkList;i.readMessage(o,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),n.addLandmarkList(o)}else i.skipField();return n},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(n,i){var o;(o=n.getLandmarkListList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.NormalizedLandmarkList,i)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},r.object.extend(t,proto.mediapipe)})(landmark_pb);var face_geometry_pb={},matrix_data_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.MatrixData",null,s),r.exportSymbol("proto.mediapipe.MatrixData.Layout",null,s),proto.mediapipe.MatrixData=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},r.inherits(proto.mediapipe.MatrixData,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(n){return proto.mediapipe.MatrixData.toObject(n,this)},proto.mediapipe.MatrixData.toObject=function(n,i){var o,p={rows:(o=e.Message.getField(i,1))==null?void 0:o,cols:(o=e.Message.getField(i,2))==null?void 0:o,packedDataList:(o=e.Message.getRepeatedFloatingPointField(i,3))==null?void 0:o,layout:e.Message.getFieldWithDefault(i,4,0)};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.MatrixData.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(o,i)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readInt32();n.setRows(o);break;case 2:o=i.readInt32(),n.setCols(o);break;case 3:for(var p=i.isDelimited()?i.readPackedFloat():[i.readFloat()],l=0;l<p.length;l++)n.addPackedData(p[l]);break;case 4:o=i.readEnum(),n.setLayout(o);break;default:i.skipField()}return n},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeInt32(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt32(2,o),(o=n.getPackedDataList()).length>0&&i.writePackedFloat(3,o),(o=e.Message.getField(n,4))!=null&&i.writeEnum(4,o)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.MatrixData.prototype.getCols=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return e.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(n){return e.Message.setField(this,3,n||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(n,i){return e.Message.addToRepeatedField(this,3,n,i)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return e.Message.getField(this,4)!=null},r.object.extend(t,proto.mediapipe)})(matrix_data_pb);var mesh_3d_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,s),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,s),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,s),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(n){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(n,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(n,i){var o,p={vertexType:(o=e.Message.getField(i,1))==null?void 0:o,primitiveType:(o=e.Message.getField(i,2))==null?void 0:o,vertexBufferList:(o=e.Message.getRepeatedFloatingPointField(i,3))==null?void 0:o,indexBufferList:(o=e.Message.getRepeatedField(i,4))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readEnum();n.setVertexType(o);break;case 2:o=i.readEnum(),n.setPrimitiveType(o);break;case 3:for(var p=i.isDelimited()?i.readPackedFloat():[i.readFloat()],l=0;l<p.length;l++)n.addVertexBuffer(p[l]);break;case 4:for(p=i.isDelimited()?i.readPackedUint32():[i.readUint32()],l=0;l<p.length;l++)n.addIndexBuffer(p[l]);break;default:i.skipField()}return n},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeEnum(1,o),(o=e.Message.getField(n,2))!=null&&i.writeEnum(2,o),(o=n.getVertexBufferList()).length>0&&i.writeRepeatedFloat(3,o),(o=n.getIndexBufferList()).length>0&&i.writeRepeatedUint32(4,o)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return e.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(n){return e.Message.setField(this,3,n||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(n,i){return e.Message.addToRepeatedField(this,3,n,i)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return e.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(n){return e.Message.setField(this,4,n||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(n,i){return e.Message.addToRepeatedField(this,4,n,i)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry.proto)})(mesh_3d_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=matrix_data_pb;r.object.extend(proto,n);var i=mesh_3d_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,s),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(o){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(o,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(o,p){var l,c={mesh:(l=p.getMesh())&&i.Mesh3d.toObject(o,l),poseTransformMatrix:(l=p.getPoseTransformMatrix())&&n.MatrixData.toObject(o,l)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=new i.Mesh3d;p.readMessage(l,i.Mesh3d.deserializeBinaryFromReader),o.setMesh(l);break;case 2:l=new n.MatrixData,p.readMessage(l,n.MatrixData.deserializeBinaryFromReader),o.setPoseTransformMatrix(l);break;default:p.skipField()}return o},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(o,p){var l=void 0;(l=o.getMesh())!=null&&p.writeMessage(1,l,i.Mesh3d.serializeBinaryToWriter),(l=o.getPoseTransformMatrix())!=null&&p.writeMessage(2,l,n.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return e.Message.getWrapperField(this,i.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return e.Message.getWrapperField(this,n.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(o){return e.Message.setWrapperField(this,2,o)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_options_pb;r.object.extend(proto,n);var i=external_file_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,s),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(o){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(o,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(o,p){var l,c={metadataFile:(l=p.getMetadataFile())&&i.ExternalFile.toObject(o,l)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)if(p.getFieldNumber()===1){var l=new i.ExternalFile;p.readMessage(l,i.ExternalFile.deserializeBinaryFromReader),o.setMetadataFile(l)}else p.skipField();return o},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(o,p){var l;(l=o.getMetadataFile())!=null&&p.writeMessage(1,l,i.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new e.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),n.CalculatorOptions.extensionsBinary[512499200]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),n.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return e.Message.getWrapperField(this,i.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new e.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),n.CalculatorOptions.extensionsBinary[512499200]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),n.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry)})(geometry_pipeline_calculator_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_options_pb;r.object.extend(proto,n);var i=geometry_pipeline_calculator_pb;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,s),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(o){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(o,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(o,p){var l,c={geometryPipelineOptions:(l=p.getGeometryPipelineOptions())&&i.FaceGeometryPipelineCalculatorOptions.toObject(o,l)};return o&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(o){var p=new e.BinaryReader(o),l=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(o,p){for(;p.nextField()&&!p.isEndGroup();)if(p.getFieldNumber()===1){var l=new i.FaceGeometryPipelineCalculatorOptions;p.readMessage(l,i.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),o.setGeometryPipelineOptions(l)}else p.skipField();return o},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(o,p){var l;(l=o.getGeometryPipelineOptions())!=null&&p.writeMessage(1,l,i.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new e.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),n.CalculatorOptions.extensionsBinary[515723506]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),n.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return e.Message.getWrapperField(this,i.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new e.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),n.CalculatorOptions.extensionsBinary[515723506]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),n.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,s),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c)};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)if(l.getFieldNumber()===1){var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c)}else l.skipField();return p},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(p,l){var c;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new e.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[508981768]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new e.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[508981768]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_landmarker.proto)})(face_blendshapes_graph_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=face_blendshapes_graph_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,s),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(l,c){var f,d={baseOptions:(f=c.getBaseOptions())&&o.BaseOptions.toObject(l,f),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(c,2,.5),smoothLandmarks:(f=e.Message.getBooleanField(c,4))==null?void 0:f,faceBlendshapesGraphOptions:(f=c.getFaceBlendshapesGraphOptions())&&p.FaceBlendshapesGraphOptions.toObject(l,f)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),f=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(f,c)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var f=new o.BaseOptions;c.readMessage(f,o.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(f);break;case 2:f=c.readFloat(),l.setMinDetectionConfidence(f);break;case 4:f=c.readBool(),l.setSmoothLandmarks(f);break;case 3:f=new p.FaceBlendshapesGraphOptions,c.readMessage(f,p.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),l.setFaceBlendshapesGraphOptions(f);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(l,c){var f=void 0;(f=l.getBaseOptions())!=null&&c.writeMessage(1,f,o.BaseOptions.serializeBinaryToWriter),(f=e.Message.getField(l,2))!=null&&c.writeFloat(2,f),(f=e.Message.getField(l,4))!=null&&c.writeBool(4,f),(f=l.getFaceBlendshapesGraphOptions())!=null&&c.writeMessage(3,f,p.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[508968149]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(l){return e.Message.setField(this,2,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return e.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(l){return e.Message.setField(this,4,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return e.Message.getWrapperField(this,p.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(l){return e.Message.setWrapperField(this,3,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[508968149]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=face_detector_graph_options_pb;r.object.extend(proto,p);var l=face_geometry_graph_options_pb;r.object.extend(proto,l);var c=face_landmarks_detector_graph_options_pb;r.object.extend(proto,c),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,s),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(f){e.Message.initialize(this,f,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(f){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(f,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(f,d){var g,u={baseOptions:(g=d.getBaseOptions())&&o.BaseOptions.toObject(f,g),faceDetectorGraphOptions:(g=d.getFaceDetectorGraphOptions())&&p.FaceDetectorGraphOptions.toObject(f,g),faceLandmarksDetectorGraphOptions:(g=d.getFaceLandmarksDetectorGraphOptions())&&c.FaceLandmarksDetectorGraphOptions.toObject(f,g),minTrackingConfidence:e.Message.getFloatingPointFieldWithDefault(d,4,.5),faceGeometryGraphOptions:(g=d.getFaceGeometryGraphOptions())&&l.FaceGeometryGraphOptions.toObject(f,g)};return f&&(u.$jspbMessageInstance=d),u}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(f){var d=new e.BinaryReader(f),g=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(g,d)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(f,d){for(;d.nextField()&&!d.isEndGroup();)switch(d.getFieldNumber()){case 1:var g=new o.BaseOptions;d.readMessage(g,o.BaseOptions.deserializeBinaryFromReader),f.setBaseOptions(g);break;case 2:g=new p.FaceDetectorGraphOptions,d.readMessage(g,p.FaceDetectorGraphOptions.deserializeBinaryFromReader),f.setFaceDetectorGraphOptions(g);break;case 3:g=new c.FaceLandmarksDetectorGraphOptions,d.readMessage(g,c.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),f.setFaceLandmarksDetectorGraphOptions(g);break;case 4:g=d.readFloat(),f.setMinTrackingConfidence(g);break;case 5:g=new l.FaceGeometryGraphOptions,d.readMessage(g,l.FaceGeometryGraphOptions.deserializeBinaryFromReader),f.setFaceGeometryGraphOptions(g);break;default:d.skipField()}return f},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var f=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,f),f.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(f,d){var g=void 0;(g=f.getBaseOptions())!=null&&d.writeMessage(1,g,o.BaseOptions.serializeBinaryToWriter),(g=f.getFaceDetectorGraphOptions())!=null&&d.writeMessage(2,g,p.FaceDetectorGraphOptions.serializeBinaryToWriter),(g=f.getFaceLandmarksDetectorGraphOptions())!=null&&d.writeMessage(3,g,c.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),(g=e.Message.getField(f,4))!=null&&d.writeFloat(4,g),(g=f.getFaceGeometryGraphOptions())!=null&&d.writeMessage(5,g,l.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[508968150]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(f){return e.Message.setWrapperField(this,1,f)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return e.Message.getWrapperField(this,p.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(f){return e.Message.setWrapperField(this,2,f)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return e.Message.getWrapperField(this,c.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(f){return e.Message.setWrapperField(this,3,f)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(f){return e.Message.setField(this,4,f)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return e.Message.getWrapperField(this,l.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(f){return e.Message.setWrapperField(this,5,f)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[508968150]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;const DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(t,e=DEFAULT_INDEX$1,r=""){return{categories:t.map(s=>{var n,i,o,p;return{index:(n=s.getIndex())!==null&&n!==void 0?n:DEFAULT_INDEX$1,score:(i=s.getScore())!==null&&i!==void 0?i:DEFAULT_SCORE,categoryName:(o=s.getLabel())!==null&&o!==void 0?o:"",displayName:(p=s.getDisplayName())!==null&&p!==void 0?p:""}}),headIndex:e,headName:r}}function convertFromClassificationsProto(t){var e,r;return convertFromClassifications((r=(e=t.getClassificationList())===null||e===void 0?void 0:e.getClassificationList())!==null&&r!==void 0?r:[],t.getHeadIndex(),t.getHeadName())}function convertFromClassificationResultProto(t){const e={classifications:t.getClassificationsList().map(r=>convertFromClassificationsProto(r))};return t.hasTimestampMs()&&(e.timestampMs=t.getTimestampMs()),e}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var landmark_result={};function convertToLandmarks(t){var e,r,s;const n=[];for(const i of t.getLandmarkList())n.push({x:(e=i.getX())!==null&&e!==void 0?e:0,y:(r=i.getY())!==null&&r!==void 0?r:0,z:(s=i.getZ())!==null&&s!==void 0?s:0});return n}function convertToWorldLandmarks(t){var e,r,s;const n=[];for(const i of t.getLandmarkList())n.push({x:(e=i.getX())!==null&&e!==void 0?e:0,y:(r=i.getY())!==null&&r!==void 0?r:0,z:(s=i.getZ())!==null&&s!==void 0?s:0});return n}Object.defineProperty(landmark_result,"__esModule",{value:!0}),landmark_result.convertToWorldLandmarks=landmark_result.convertToLandmarks=void 0,landmark_result.convertToLandmarks=convertToLandmarks,landmark_result.convertToWorldLandmarks=convertToWorldLandmarks;var face_landmarks_connections={},exports;exports=face_landmarks_connections,Object.defineProperty(exports,"__esModule",{value:!0}),exports.FACE_LANDMARKS_TESSELATION=exports.FACE_LANDMARKS_CONTOURS=exports.FACE_LANDMARKS_FACE_OVAL=exports.FACE_LANDMARKS_RIGHT_IRIS=exports.FACE_LANDMARKS_RIGHT_EYEBROW=exports.FACE_LANDMARKS_RIGHT_EYE=exports.FACE_LANDMARKS_LEFT_IRIS=exports.FACE_LANDMARKS_LEFT_EYEBROW=exports.FACE_LANDMARKS_LEFT_EYE=exports.FACE_LANDMARKS_LIPS=void 0,exports.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],exports.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],exports.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],exports.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],exports.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],exports.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],exports.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],exports.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],exports.FACE_LANDMARKS_CONTOURS=[...exports.FACE_LANDMARKS_LIPS,...exports.FACE_LANDMARKS_LEFT_EYE,...exports.FACE_LANDMARKS_LEFT_EYEBROW,...exports.FACE_LANDMARKS_RIGHT_EYE,...exports.FACE_LANDMARKS_RIGHT_EYEBROW,...exports.FACE_LANDMARKS_FACE_OVAL],exports.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(T,A,R,x){x===void 0&&(x=R);var C=Object.getOwnPropertyDescriptor(A,R);C&&!("get"in C?!A.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return A[R]}}),Object.defineProperty(T,x,C)}:function(T,A,R,x){x===void 0&&(x=R),T[x]=A[R]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(T,A){for(var R in T)R==="default"||Object.prototype.hasOwnProperty.call(A,R)||e(A,T,R)};Object.defineProperty(t,"__esModule",{value:!0}),t.FaceLandmarker=void 0;const s=calculator_pb,n=calculator_options_pb,i=classification_pb,o=landmark_pb,p=base_options_pb,l=face_detector_graph_options_pb,c=face_geometry_pb,f=face_landmarker_graph_options_pb,d=face_landmarks_detector_graph_options_pb,g=classifier_result,u=landmark_result,h=vision_task_runner,y=face_landmarks_connections;r(face_landmarker_options,t),r(face_landmarker_result,t);const m="image_in",_="norm_rect",b="face_landmarks",M="blendshapes",S="face_geometry",v=.5;class E extends h.VisionTaskRunner{static createFromOptions(A,R){return h.VisionTaskRunner.createVisionInstance(E,A,R)}static createFromModelBuffer(A,R){return h.VisionTaskRunner.createVisionInstance(E,A,{baseOptions:{modelAssetBuffer:R}})}static createFromModelPath(A,R){return h.VisionTaskRunner.createVisionInstance(E,A,{baseOptions:{modelAssetPath:R}})}constructor(A,R){super(new h.VisionGraphRunner(A,R),m,_,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new f.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new p.BaseOptions),this.faceLandmarksDetectorGraphOptions=new d.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new l.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(A){this.options.setBaseOptions(A)}setOptions(A){var R,x,C,O;return"numFaces"in A&&this.faceDetectorGraphOptions.setNumFaces((R=A.numFaces)!==null&&R!==void 0?R:1),"minFaceDetectionConfidence"in A&&this.faceDetectorGraphOptions.setMinDetectionConfidence((x=A.minFaceDetectionConfidence)!==null&&x!==void 0?x:v),"minTrackingConfidence"in A&&this.options.setMinTrackingConfidence((C=A.minTrackingConfidence)!==null&&C!==void 0?C:v),"minFacePresenceConfidence"in A&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence((O=A.minFacePresenceConfidence)!==null&&O!==void 0?O:v),"outputFaceBlendshapes"in A&&(this.outputFaceBlendshapes=!!A.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in A&&(this.outputFacialTransformationMatrixes=!!A.outputFacialTransformationMatrixes),this.applyOptions(A)}detect(A,R){return this.resetResults(),this.processImageData(A,R),this.result}detectForVideo(A,R,x){return this.resetResults(),this.processVideoData(A,x,R),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(v),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(v),this.options.setMinTrackingConfidence(v)}addJsLandmarks(A){for(const R of A){const x=o.NormalizedLandmarkList.deserializeBinary(R);this.result.faceLandmarks.push((0,u.convertToLandmarks)(x))}}addBlenshape(A){var R;if(this.outputFaceBlendshapes)for(const x of A){const C=i.ClassificationList.deserializeBinary(x);this.result.faceBlendshapes.push((0,g.convertFromClassifications)((R=C.getClassificationList())!==null&&R!==void 0?R:[]))}}addFacialTransformationMatrixes(A){var R,x,C;if(this.outputFacialTransformationMatrixes)for(const O of A){const F=c.FaceGeometry.deserializeBinary(O).getPoseTransformMatrix();F&&this.result.facialTransformationMatrixes.push({rows:(R=F.getRows())!==null&&R!==void 0?R:0,columns:(x=F.getCols())!==null&&x!==void 0?x:0,data:(C=F.getPackedDataList())!==null&&C!==void 0?C:[]})}}refreshGraph(){const A=new s.CalculatorGraphConfig;A.addInputStream(m),A.addInputStream(_),A.addOutputStream(b);const R=new n.CalculatorOptions;R.setExtension(f.FaceLandmarkerGraphOptions.ext,this.options);const x=new s.CalculatorGraphConfig.Node;x.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),x.addInputStream("IMAGE:"+m),x.addInputStream("NORM_RECT:"+_),x.addOutputStream("NORM_LANDMARKS:"+b),x.setOptions(R),A.addNode(x),this.graphRunner.attachProtoVectorListener(b,(O,F)=>{this.addJsLandmarks(O),this.setLatestOutputTimestamp(F)}),this.graphRunner.attachEmptyPacketListener(b,O=>{this.setLatestOutputTimestamp(O)}),this.outputFaceBlendshapes&&(A.addOutputStream(M),x.addOutputStream("BLENDSHAPES:"+M),this.graphRunner.attachProtoVectorListener(M,(O,F)=>{this.addBlenshape(O),this.setLatestOutputTimestamp(F)}),this.graphRunner.attachEmptyPacketListener(M,O=>{this.setLatestOutputTimestamp(O)})),this.outputFacialTransformationMatrixes&&(A.addOutputStream(S),x.addOutputStream("FACE_GEOMETRY:"+S),this.graphRunner.attachProtoVectorListener(S,(O,F)=>{this.addFacialTransformationMatrixes(O),this.setLatestOutputTimestamp(F)}),this.graphRunner.attachEmptyPacketListener(S,O=>{this.setLatestOutputTimestamp(O)}));const C=A.serializeBinary();this.setGraph(new Uint8Array(C),!0)}}t.FaceLandmarker=E,E.FACE_LANDMARKS_LIPS=y.FACE_LANDMARKS_LIPS,E.FACE_LANDMARKS_LEFT_EYE=y.FACE_LANDMARKS_LEFT_EYE,E.FACE_LANDMARKS_LEFT_EYEBROW=y.FACE_LANDMARKS_LEFT_EYEBROW,E.FACE_LANDMARKS_LEFT_IRIS=y.FACE_LANDMARKS_LEFT_IRIS,E.FACE_LANDMARKS_RIGHT_EYE=y.FACE_LANDMARKS_RIGHT_EYE,E.FACE_LANDMARKS_RIGHT_EYEBROW=y.FACE_LANDMARKS_RIGHT_EYEBROW,E.FACE_LANDMARKS_RIGHT_IRIS=y.FACE_LANDMARKS_RIGHT_IRIS,E.FACE_LANDMARKS_FACE_OVAL=y.FACE_LANDMARKS_FACE_OVAL,E.FACE_LANDMARKS_CONTOURS=y.FACE_LANDMARKS_CONTOURS,E.FACE_LANDMARKS_TESSELATION=y.FACE_LANDMARKS_TESSELATION}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=face_landmarker_graph_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,s),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(l,c){var f,d={baseOptions:(f=c.getBaseOptions())&&o.BaseOptions.toObject(l,f),faceLandmarkerGraphOptions:(f=c.getFaceLandmarkerGraphOptions())&&p.FaceLandmarkerGraphOptions.toObject(l,f),faceAlignmentSize:e.Message.getFieldWithDefault(c,3,256)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),f=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(f,c)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var f=new o.BaseOptions;c.readMessage(f,o.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(f);break;case 2:f=new p.FaceLandmarkerGraphOptions,c.readMessage(f,p.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),l.setFaceLandmarkerGraphOptions(f);break;case 3:f=c.readInt32(),l.setFaceAlignmentSize(f);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(l,c){var f=void 0;(f=l.getBaseOptions())!=null&&c.writeMessage(1,f,o.BaseOptions.serializeBinaryToWriter),(f=l.getFaceLandmarkerGraphOptions())!=null&&c.writeMessage(2,f,p.FaceLandmarkerGraphOptions.serializeBinaryToWriter),(f=e.Message.getField(l,3))!=null&&c.writeInt32(3,f)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new e.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[513916220]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return e.Message.getWrapperField(this,p.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return e.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(l){return e.Message.setField(this,3,l)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new e.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[513916220]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_stylizer.proto)})(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,u,h,y){y===void 0&&(y=h);var m=Object.getOwnPropertyDescriptor(u,h);m&&!("get"in m?!u.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(g,y,m)}:function(g,u,h,y){y===void 0&&(y=h),g[y]=u[h]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(g,u){for(var h in g)h==="default"||Object.prototype.hasOwnProperty.call(u,h)||e(u,g,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.FaceStylizer=void 0;const s=calculator_pb,n=calculator_options_pb,i=base_options_pb,o=face_stylizer_graph_options_pb,p=vision_task_runner;r(face_stylizer_options,t);const l="image_in",c="norm_rect",f="stylized_image";class d extends p.VisionTaskRunner{static createFromOptions(u,h){return p.VisionTaskRunner.createVisionInstance(d,u,h)}static createFromModelBuffer(u,h){return p.VisionTaskRunner.createVisionInstance(d,u,{baseOptions:{modelAssetBuffer:h}})}static createFromModelPath(u,h){return p.VisionTaskRunner.createVisionInstance(d,u,{baseOptions:{modelAssetPath:h}})}constructor(u,h){super(new p.VisionGraphRunner(u,h),l,c,!0),this.options=new o.FaceStylizerGraphOptions,this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(u){this.options.setBaseOptions(u)}setOptions(u){return super.applyOptions(u)}stylize(u,h,y){const m=typeof h!="function"?h:{};if(this.userCallback=typeof h=="function"?h:y,this.processImageData(u,m??{}),!this.userCallback)return this.result}stylizeForVideo(u,h,y,m){const _=typeof y!="function"?y:{};if(this.userCallback=typeof y=="function"?y:m,this.processVideoData(u,_,h),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){const u=new s.CalculatorGraphConfig;u.addInputStream(l),u.addInputStream(c),u.addOutputStream(f);const h=new n.CalculatorOptions;h.setExtension(o.FaceStylizerGraphOptions.ext,this.options);const y=new s.CalculatorGraphConfig.Node;y.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),y.addInputStream("IMAGE:"+l),y.addInputStream("NORM_RECT:"+c),y.addOutputStream("STYLIZED_IMAGE:"+f),y.setOptions(h),u.addNode(y),this.graphRunner.attachImageListener(f,(_,b)=>{const M=this.convertToMPImage(_,!this.userCallback);this.result=M,this.userCallback&&this.userCallback(M),this.setLatestOutputTimestamp(b)}),this.graphRunner.attachEmptyPacketListener(f,_=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(_)});const m=u.serializeBinary();this.setGraph(new Uint8Array(m),!0)}}t.FaceStylizer=d}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,s),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(n){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(n,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(n,i){var o,p={displayNamesLocale:e.Message.getFieldWithDefault(i,1,"en"),maxResults:e.Message.getFieldWithDefault(i,2,-1),scoreThreshold:(o=e.Message.getOptionalFloatingPointField(i,3))==null?void 0:o,categoryAllowlistList:(o=e.Message.getRepeatedField(i,4))==null?void 0:o,categoryDenylistList:(o=e.Message.getRepeatedField(i,5))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readString();n.setDisplayNamesLocale(o);break;case 2:o=i.readInt32(),n.setMaxResults(o);break;case 3:o=i.readFloat(),n.setScoreThreshold(o);break;case 4:o=i.readString(),n.addCategoryAllowlist(o);break;case 5:o=i.readString(),n.addCategoryDenylist(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeString(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt32(2,o),(o=e.Message.getField(n,3))!=null&&i.writeFloat(3,o),(o=n.getCategoryAllowlistList()).length>0&&i.writeRepeatedString(4,o),(o=n.getCategoryDenylistList()).length>0&&i.writeRepeatedString(5,o)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return e.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return e.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return e.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(n){return e.Message.setField(this,4,n||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(n,i){return e.Message.addToRepeatedField(this,4,n,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return e.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(n){return e.Message.setField(this,5,n||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(n,i){return e.Message.addToRepeatedField(this,5,n,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},r.object.extend(t,proto.mediapipe.tasks.components.processors.proto)})(classifier_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=classifier_options_pb;r.object.extend(proto,o);var p=base_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,s),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(l,c){var f,d={baseOptions:(f=c.getBaseOptions())&&p.BaseOptions.toObject(l,f),classifierOptions:(f=c.getClassifierOptions())&&o.ClassifierOptions.toObject(l,f)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),f=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(f,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var f=new p.BaseOptions;c.readMessage(f,p.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(f);break;case 2:f=new o.ClassifierOptions,c.readMessage(f,o.ClassifierOptions.deserializeBinaryFromReader),l.setClassifierOptions(f);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(l,c){var f=void 0;(f=l.getBaseOptions())!=null&&c.writeMessage(1,f,p.BaseOptions.serializeBinaryToWriter),(f=l.getClassifierOptions())!=null&&c.writeMessage(2,f,o.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new e.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[478825465]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,p.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return e.Message.getWrapperField(this,o.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new e.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[478825465]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,s),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c)};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)if(l.getFieldNumber()===1){var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c)}else l.skipField();return p},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(p,l){var c;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[478825422]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[478825422]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(gesture_embedder_graph_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=gesture_classifier_graph_options_pb;r.object.extend(proto,p);var l=gesture_embedder_graph_options_pb;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,s),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(c,f){var d,g={baseOptions:(d=f.getBaseOptions())&&o.BaseOptions.toObject(c,d),gestureEmbedderGraphOptions:(d=f.getGestureEmbedderGraphOptions())&&l.GestureEmbedderGraphOptions.toObject(c,d),cannedGestureClassifierGraphOptions:(d=f.getCannedGestureClassifierGraphOptions())&&p.GestureClassifierGraphOptions.toObject(c,d),customGestureClassifierGraphOptions:(d=f.getCustomGestureClassifierGraphOptions())&&p.GestureClassifierGraphOptions.toObject(c,d)};return c&&(g.$jspbMessageInstance=f),g}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(c){var f=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(d,f)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(c,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var d=new o.BaseOptions;f.readMessage(d,o.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new l.GestureEmbedderGraphOptions,f.readMessage(d,l.GestureEmbedderGraphOptions.deserializeBinaryFromReader),c.setGestureEmbedderGraphOptions(d);break;case 3:d=new p.GestureClassifierGraphOptions,f.readMessage(d,p.GestureClassifierGraphOptions.deserializeBinaryFromReader),c.setCannedGestureClassifierGraphOptions(d);break;case 4:d=new p.GestureClassifierGraphOptions,f.readMessage(d,p.GestureClassifierGraphOptions.deserializeBinaryFromReader),c.setCustomGestureClassifierGraphOptions(d);break;default:f.skipField()}return c},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(c,f){var d=void 0;(d=c.getBaseOptions())!=null&&f.writeMessage(1,d,o.BaseOptions.serializeBinaryToWriter),(d=c.getGestureEmbedderGraphOptions())!=null&&f.writeMessage(2,d,l.GestureEmbedderGraphOptions.serializeBinaryToWriter),(d=c.getCannedGestureClassifierGraphOptions())!=null&&f.writeMessage(3,d,p.GestureClassifierGraphOptions.serializeBinaryToWriter),(d=c.getCustomGestureClassifierGraphOptions())!=null&&f.writeMessage(4,d,p.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[463370452]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return e.Message.getWrapperField(this,l.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return e.Message.getWrapperField(this,p.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return e.Message.getWrapperField(this,p.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(c){return e.Message.setWrapperField(this,4,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[463370452]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,s),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5),numHands:(c=e.Message.getField(l,3))==null?void 0:c};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;case 3:c=l.readInt32(),p.setNumHands(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c),(c=e.Message.getField(p,3))!=null&&l.writeInt32(3,c)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new e.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[464864288]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new e.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[464864288]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.hand_detector.proto)})(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,s),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5)};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[474472470]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[474472470]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(hand_landmarks_detector_graph_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=hand_detector_graph_options_pb;r.object.extend(proto,p);var l=hand_landmarks_detector_graph_options_pb;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,s),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(c,f){var d,g={baseOptions:(d=f.getBaseOptions())&&o.BaseOptions.toObject(c,d),handDetectorGraphOptions:(d=f.getHandDetectorGraphOptions())&&p.HandDetectorGraphOptions.toObject(c,d),handLandmarksDetectorGraphOptions:(d=f.getHandLandmarksDetectorGraphOptions())&&l.HandLandmarksDetectorGraphOptions.toObject(c,d),minTrackingConfidence:e.Message.getFloatingPointFieldWithDefault(f,4,.5)};return c&&(g.$jspbMessageInstance=f),g}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(c){var f=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(d,f)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(c,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var d=new o.BaseOptions;f.readMessage(d,o.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new p.HandDetectorGraphOptions,f.readMessage(d,p.HandDetectorGraphOptions.deserializeBinaryFromReader),c.setHandDetectorGraphOptions(d);break;case 3:d=new l.HandLandmarksDetectorGraphOptions,f.readMessage(d,l.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),c.setHandLandmarksDetectorGraphOptions(d);break;case 4:d=f.readFloat(),c.setMinTrackingConfidence(d);break;default:f.skipField()}return c},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(c,f){var d=void 0;(d=c.getBaseOptions())!=null&&f.writeMessage(1,d,o.BaseOptions.serializeBinaryToWriter),(d=c.getHandDetectorGraphOptions())!=null&&f.writeMessage(2,d,p.HandDetectorGraphOptions.serializeBinaryToWriter),(d=c.getHandLandmarksDetectorGraphOptions())!=null&&f.writeMessage(3,d,l.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),(d=e.Message.getField(c,4))!=null&&f.writeFloat(4,d)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[462713202]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return e.Message.getWrapperField(this,p.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return e.Message.getWrapperField(this,l.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(c){return e.Message.setField(this,4,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[462713202]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=hand_gesture_recognizer_graph_options_pb;r.object.extend(proto,p);var l=hand_landmarker_graph_options_pb;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,s),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(c,f){var d,g={baseOptions:(d=f.getBaseOptions())&&o.BaseOptions.toObject(c,d),handLandmarkerGraphOptions:(d=f.getHandLandmarkerGraphOptions())&&l.HandLandmarkerGraphOptions.toObject(c,d),handGestureRecognizerGraphOptions:(d=f.getHandGestureRecognizerGraphOptions())&&p.HandGestureRecognizerGraphOptions.toObject(c,d)};return c&&(g.$jspbMessageInstance=f),g}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(c){var f=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(d,f)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(c,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var d=new o.BaseOptions;f.readMessage(d,o.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new l.HandLandmarkerGraphOptions,f.readMessage(d,l.HandLandmarkerGraphOptions.deserializeBinaryFromReader),c.setHandLandmarkerGraphOptions(d);break;case 3:d=new p.HandGestureRecognizerGraphOptions,f.readMessage(d,p.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),c.setHandGestureRecognizerGraphOptions(d);break;default:f.skipField()}return c},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(c,f){var d=void 0;(d=c.getBaseOptions())!=null&&f.writeMessage(1,d,o.BaseOptions.serializeBinaryToWriter),(d=c.getHandLandmarkerGraphOptions())!=null&&f.writeMessage(2,d,l.HandLandmarkerGraphOptions.serializeBinaryToWriter),(d=c.getHandGestureRecognizerGraphOptions())!=null&&f.writeMessage(3,d,p.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[479097054]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return e.Message.getWrapperField(this,l.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return e.Message.getWrapperField(this,p.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[479097054]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;const classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(t,e){const r=e?e.clone():new classifier_options_pb_1.ClassifierOptions;return t.displayNamesLocale!==void 0?r.setDisplayNamesLocale(t.displayNamesLocale):t.displayNamesLocale===void 0&&r.clearDisplayNamesLocale(),t.maxResults!==void 0?r.setMaxResults(t.maxResults):"maxResults"in t&&r.clearMaxResults(),t.scoreThreshold!==void 0?r.setScoreThreshold(t.scoreThreshold):"scoreThreshold"in t&&r.clearScoreThreshold(),t.categoryAllowlist!==void 0?r.setCategoryAllowlistList(t.categoryAllowlist):"categoryAllowlist"in t&&r.clearCategoryAllowlistList(),t.categoryDenylist!==void 0?r.setCategoryDenylistList(t.categoryDenylist):"categoryDenylist"in t&&r.clearCategoryDenylistList(),r}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(R,x,C,O){O===void 0&&(O=C);var F=Object.getOwnPropertyDescriptor(x,C);F&&!("get"in F?!x.__esModule:F.writable||F.configurable)||(F={enumerable:!0,get:function(){return x[C]}}),Object.defineProperty(R,O,F)}:function(R,x,C,O){O===void 0&&(O=C),R[O]=x[C]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(R,x){for(var C in R)C==="default"||Object.prototype.hasOwnProperty.call(x,C)||e(x,R,C)};Object.defineProperty(t,"__esModule",{value:!0}),t.GestureRecognizer=void 0;const s=calculator_pb,n=calculator_options_pb,i=classification_pb,o=landmark_pb,p=base_options_pb,l=gesture_classifier_graph_options_pb,c=gesture_recognizer_graph_options_pb,f=hand_gesture_recognizer_graph_options_pb,d=hand_detector_graph_options_pb,g=hand_landmarker_graph_options_pb,u=hand_landmarks_detector_graph_options_pb,h=classifier_options,y=vision_task_runner,m=hand_landmarks_connections;r(gesture_recognizer_options,t),r(gesture_recognizer_result,t);const _="image_in",b="norm_rect",M="hand_gestures",S="hand_landmarks",v="world_hand_landmarks",E="handedness",T=.5;class A extends y.VisionTaskRunner{static createFromOptions(x,C){return y.VisionTaskRunner.createVisionInstance(A,x,C)}static createFromModelBuffer(x,C){return y.VisionTaskRunner.createVisionInstance(A,x,{baseOptions:{modelAssetBuffer:C}})}static createFromModelPath(x,C){return y.VisionTaskRunner.createVisionInstance(A,x,{baseOptions:{modelAssetPath:C}})}constructor(x,C){super(new y.VisionGraphRunner(x,C),_,b,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new c.GestureRecognizerGraphOptions,this.options.setBaseOptions(new p.BaseOptions),this.handLandmarkerGraphOptions=new g.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new u.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new d.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new f.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(T),this.handLandmarkerGraphOptions.setMinTrackingConfidence(T),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(T)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(x){this.options.setBaseOptions(x)}setOptions(x){var C,O,F,L,I,N,k,U;if(this.handDetectorGraphOptions.setNumHands((C=x.numHands)!==null&&C!==void 0?C:1),"minHandDetectionConfidence"in x&&this.handDetectorGraphOptions.setMinDetectionConfidence((O=x.minHandDetectionConfidence)!==null&&O!==void 0?O:T),"minTrackingConfidence"in x&&this.handLandmarkerGraphOptions.setMinTrackingConfidence((F=x.minTrackingConfidence)!==null&&F!==void 0?F:T),"minHandPresenceConfidence"in x&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((L=x.minHandPresenceConfidence)!==null&&L!==void 0?L:T),x.cannedGesturesClassifierOptions){const H=new l.GestureClassifierGraphOptions;H.setClassifierOptions((0,h.convertClassifierOptionsToProto)(x.cannedGesturesClassifierOptions,(I=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||I===void 0?void 0:I.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(H)}else x.cannedGesturesClassifierOptions===void 0&&((N=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||N===void 0||N.clearClassifierOptions());if(x.customGesturesClassifierOptions){const H=new l.GestureClassifierGraphOptions;H.setClassifierOptions((0,h.convertClassifierOptionsToProto)(x.customGesturesClassifierOptions,(k=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||k===void 0?void 0:k.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(H)}else x.customGesturesClassifierOptions===void 0&&((U=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||U===void 0||U.clearClassifierOptions());return this.applyOptions(x)}recognize(x,C){return this.resetResults(),this.processImageData(x,C),this.processResults()}recognizeForVideo(x,C,O){return this.resetResults(),this.processVideoData(x,O,C),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return this.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(x,C=!0){var O,F,L;const I=[];for(const N of x){const k=i.ClassificationList.deserializeBinary(N),U=[];for(const H of k.getClassificationList()){const W=C&&H.hasIndex()?H.getIndex():-1;U.push({score:(O=H.getScore())!==null&&O!==void 0?O:0,index:W,categoryName:(F=H.getLabel())!==null&&F!==void 0?F:"",displayName:(L=H.getDisplayName())!==null&&L!==void 0?L:""})}I.push(U)}return I}addJsLandmarks(x){var C,O,F;for(const L of x){const I=o.NormalizedLandmarkList.deserializeBinary(L),N=[];for(const k of I.getLandmarkList())N.push({x:(C=k.getX())!==null&&C!==void 0?C:0,y:(O=k.getY())!==null&&O!==void 0?O:0,z:(F=k.getZ())!==null&&F!==void 0?F:0});this.landmarks.push(N)}}adddJsWorldLandmarks(x){var C,O,F;for(const L of x){const I=o.LandmarkList.deserializeBinary(L),N=[];for(const k of I.getLandmarkList())N.push({x:(C=k.getX())!==null&&C!==void 0?C:0,y:(O=k.getY())!==null&&O!==void 0?O:0,z:(F=k.getZ())!==null&&F!==void 0?F:0});this.worldLandmarks.push(N)}}refreshGraph(){const x=new s.CalculatorGraphConfig;x.addInputStream(_),x.addInputStream(b),x.addOutputStream(M),x.addOutputStream(S),x.addOutputStream(v),x.addOutputStream(E);const C=new n.CalculatorOptions;C.setExtension(c.GestureRecognizerGraphOptions.ext,this.options);const O=new s.CalculatorGraphConfig.Node;O.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),O.addInputStream("IMAGE:"+_),O.addInputStream("NORM_RECT:"+b),O.addOutputStream("HAND_GESTURES:"+M),O.addOutputStream("LANDMARKS:"+S),O.addOutputStream("WORLD_LANDMARKS:"+v),O.addOutputStream("HANDEDNESS:"+E),O.setOptions(C),x.addNode(O),this.graphRunner.attachProtoVectorListener(S,(L,I)=>{this.addJsLandmarks(L),this.setLatestOutputTimestamp(I)}),this.graphRunner.attachEmptyPacketListener(S,L=>{this.setLatestOutputTimestamp(L)}),this.graphRunner.attachProtoVectorListener(v,(L,I)=>{this.adddJsWorldLandmarks(L),this.setLatestOutputTimestamp(I)}),this.graphRunner.attachEmptyPacketListener(v,L=>{this.setLatestOutputTimestamp(L)}),this.graphRunner.attachProtoVectorListener(M,(L,I)=>{this.gestures.push(...this.toJsCategories(L,!1)),this.setLatestOutputTimestamp(I)}),this.graphRunner.attachEmptyPacketListener(M,L=>{this.setLatestOutputTimestamp(L)}),this.graphRunner.attachProtoVectorListener(E,(L,I)=>{this.handednesses.push(...this.toJsCategories(L)),this.setLatestOutputTimestamp(I)}),this.graphRunner.attachEmptyPacketListener(E,L=>{this.setLatestOutputTimestamp(L)});const F=x.serializeBinary();this.setGraph(new Uint8Array(F),!0)}}t.GestureRecognizer=A,A.HAND_CONNECTIONS=m.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,E,T,A){A===void 0&&(A=T);var R=Object.getOwnPropertyDescriptor(E,T);R&&!("get"in R?!E.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return E[T]}}),Object.defineProperty(v,A,R)}:function(v,E,T,A){A===void 0&&(A=T),v[A]=E[T]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(v,E){for(var T in v)T==="default"||Object.prototype.hasOwnProperty.call(E,T)||e(E,v,T)};Object.defineProperty(t,"__esModule",{value:!0}),t.HandLandmarker=void 0;const s=calculator_pb,n=calculator_options_pb,i=classification_pb,o=landmark_pb,p=base_options_pb,l=hand_detector_graph_options_pb,c=hand_landmarker_graph_options_pb,f=hand_landmarks_detector_graph_options_pb,d=landmark_result,g=vision_task_runner,u=hand_landmarks_connections;r(hand_landmarker_options,t),r(hand_landmarker_result,t);const h="image_in",y="norm_rect",m="hand_landmarks",_="world_hand_landmarks",b="handedness",M=.5;class S extends g.VisionTaskRunner{static createFromOptions(E,T){return g.VisionTaskRunner.createVisionInstance(S,E,T)}static createFromModelBuffer(E,T){return g.VisionTaskRunner.createVisionInstance(S,E,{baseOptions:{modelAssetBuffer:T}})}static createFromModelPath(E,T){return g.VisionTaskRunner.createVisionInstance(S,E,{baseOptions:{modelAssetPath:T}})}constructor(E,T){super(new g.VisionGraphRunner(E,T),h,y,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new c.HandLandmarkerGraphOptions,this.options.setBaseOptions(new p.BaseOptions),this.handLandmarksDetectorGraphOptions=new f.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new l.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(E){this.options.setBaseOptions(E)}setOptions(E){var T,A,R,x;return"numHands"in E&&this.handDetectorGraphOptions.setNumHands((T=E.numHands)!==null&&T!==void 0?T:1),"minHandDetectionConfidence"in E&&this.handDetectorGraphOptions.setMinDetectionConfidence((A=E.minHandDetectionConfidence)!==null&&A!==void 0?A:M),"minTrackingConfidence"in E&&this.options.setMinTrackingConfidence((R=E.minTrackingConfidence)!==null&&R!==void 0?R:M),"minHandPresenceConfidence"in E&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((x=E.minHandPresenceConfidence)!==null&&x!==void 0?x:M),this.applyOptions(E)}detect(E,T){return this.resetResults(),this.processImageData(E,T),this.processResults()}detectForVideo(E,T,A){return this.resetResults(),this.processVideoData(E,A,T),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(M),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(M),this.options.setMinTrackingConfidence(M)}toJsCategories(E){var T,A,R,x;const C=[];for(const O of E){const F=i.ClassificationList.deserializeBinary(O),L=[];for(const I of F.getClassificationList())L.push({score:(T=I.getScore())!==null&&T!==void 0?T:0,index:(A=I.getIndex())!==null&&A!==void 0?A:-1,categoryName:(R=I.getLabel())!==null&&R!==void 0?R:"",displayName:(x=I.getDisplayName())!==null&&x!==void 0?x:""});C.push(L)}return C}addJsLandmarks(E){for(const T of E){const A=o.NormalizedLandmarkList.deserializeBinary(T);this.landmarks.push((0,d.convertToLandmarks)(A))}}adddJsWorldLandmarks(E){for(const T of E){const A=o.LandmarkList.deserializeBinary(T);this.worldLandmarks.push((0,d.convertToWorldLandmarks)(A))}}refreshGraph(){const E=new s.CalculatorGraphConfig;E.addInputStream(h),E.addInputStream(y),E.addOutputStream(m),E.addOutputStream(_),E.addOutputStream(b);const T=new n.CalculatorOptions;T.setExtension(c.HandLandmarkerGraphOptions.ext,this.options);const A=new s.CalculatorGraphConfig.Node;A.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),A.addInputStream("IMAGE:"+h),A.addInputStream("NORM_RECT:"+y),A.addOutputStream("LANDMARKS:"+m),A.addOutputStream("WORLD_LANDMARKS:"+_),A.addOutputStream("HANDEDNESS:"+b),A.setOptions(T),E.addNode(A),this.graphRunner.attachProtoVectorListener(m,(x,C)=>{this.addJsLandmarks(x),this.setLatestOutputTimestamp(C)}),this.graphRunner.attachEmptyPacketListener(m,x=>{this.setLatestOutputTimestamp(x)}),this.graphRunner.attachProtoVectorListener(_,(x,C)=>{this.adddJsWorldLandmarks(x),this.setLatestOutputTimestamp(C)}),this.graphRunner.attachEmptyPacketListener(_,x=>{this.setLatestOutputTimestamp(x)}),this.graphRunner.attachProtoVectorListener(b,(x,C)=>{this.handednesses.push(...this.toJsCategories(x)),this.setLatestOutputTimestamp(C)}),this.graphRunner.attachEmptyPacketListener(b,x=>{this.setLatestOutputTimestamp(x)});const R=E.serializeBinary();this.setGraph(new Uint8Array(R),!0)}}t.HandLandmarker=S,S.HAND_CONNECTIONS=u.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=classification_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,s),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,s),proto.mediapipe.tasks.components.containers.proto.Classifications=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(i){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(i,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(i,o){var p,l={classificationList:(p=o.getClassificationList())&&n.ClassificationList.toObject(i,p),headIndex:(p=e.Message.getField(o,2))==null?void 0:p,headName:(p=e.Message.getField(o,3))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(p,o)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 4:var p=new n.ClassificationList;o.readMessage(p,n.ClassificationList.deserializeBinaryFromReader),i.setClassificationList(p);break;case 2:p=o.readInt32(),i.setHeadIndex(p);break;case 3:p=o.readString(),i.setHeadName(p);break;default:o.skipField()}return i},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getClassificationList())!=null&&o.writeMessage(4,p,n.ClassificationList.serializeBinaryToWriter),(p=e.Message.getField(i,2))!=null&&o.writeInt32(2,p),(p=e.Message.getField(i,3))!=null&&o.writeString(3,p)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return e.Message.getWrapperField(this,n.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(i){return e.Message.setWrapperField(this,4,i)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(i){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(i,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(i,o){var p,l={classificationsList:e.Message.toObjectList(o.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,i),timestampMs:(p=e.Message.getField(o,2))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(p,o)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.tasks.components.containers.proto.Classifications;o.readMessage(p,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),i.addClassifications(p);break;case 2:p=o.readInt64(),i.setTimestampMs(p);break;default:o.skipField()}return i},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getClassificationsList()).length>0&&o.writeRepeatedMessage(1,p,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),(p=e.Message.getField(i,2))!=null&&o.writeInt64(2,p)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.tasks.components.containers.proto.Classifications,o)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.components.containers.proto)})(classifications_pb);var image_classifier_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=classifier_options_pb;r.object.extend(proto,o);var p=base_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,s),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(l,c){var f,d={baseOptions:(f=c.getBaseOptions())&&p.BaseOptions.toObject(l,f),classifierOptions:(f=c.getClassifierOptions())&&o.ClassifierOptions.toObject(l,f)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),f=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(f,c)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var f=new p.BaseOptions;c.readMessage(f,p.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(f);break;case 2:f=new o.ClassifierOptions,c.readMessage(f,o.ClassifierOptions.deserializeBinaryFromReader),l.setClassifierOptions(f);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(l,c){var f=void 0;(f=l.getBaseOptions())!=null&&c.writeMessage(1,f,p.BaseOptions.serializeBinaryToWriter),(f=l.getClassifierOptions())!=null&&c.writeMessage(2,f,o.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new e.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[456383383]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,p.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return e.Message.getWrapperField(this,o.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new e.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[456383383]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.image_classifier.proto)})(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(y,m,_,b){b===void 0&&(b=_);var M=Object.getOwnPropertyDescriptor(m,_);M&&!("get"in M?!m.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return m[_]}}),Object.defineProperty(y,b,M)}:function(y,m,_,b){b===void 0&&(b=_),y[b]=m[_]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(y,m){for(var _ in y)_==="default"||Object.prototype.hasOwnProperty.call(m,_)||e(m,y,_)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageClassifier=void 0;const s=calculator_pb,n=calculator_options_pb,i=classifications_pb,o=base_options_pb,p=image_classifier_graph_options_pb,l=classifier_options,c=classifier_result,f=vision_task_runner,d="input_image",g="norm_rect",u="classifications";r(image_classifier_options,t),r(image_classifier_result,t);class h extends f.VisionTaskRunner{static createFromOptions(m,_){return f.VisionTaskRunner.createVisionInstance(h,m,_)}static createFromModelBuffer(m,_){return f.VisionTaskRunner.createVisionInstance(h,m,{baseOptions:{modelAssetBuffer:_}})}static createFromModelPath(m,_){return f.VisionTaskRunner.createVisionInstance(h,m,{baseOptions:{modelAssetPath:_}})}constructor(m,_){super(new f.VisionGraphRunner(m,_),d,g,!0),this.classificationResult={classifications:[]},this.options=new p.ImageClassifierGraphOptions,this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(m){this.options.setBaseOptions(m)}setOptions(m){return this.options.setClassifierOptions((0,l.convertClassifierOptionsToProto)(m,this.options.getClassifierOptions())),this.applyOptions(m)}classify(m,_){return this.classificationResult={classifications:[]},this.processImageData(m,_),this.classificationResult}classifyForVideo(m,_,b){return this.classificationResult={classifications:[]},this.processVideoData(m,b,_),this.classificationResult}refreshGraph(){const m=new s.CalculatorGraphConfig;m.addInputStream(d),m.addInputStream(g),m.addOutputStream(u);const _=new n.CalculatorOptions;_.setExtension(p.ImageClassifierGraphOptions.ext,this.options);const b=new s.CalculatorGraphConfig.Node;b.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),b.addInputStream("IMAGE:"+d),b.addInputStream("NORM_RECT:"+g),b.addOutputStream("CLASSIFICATIONS:"+u),b.setOptions(_),m.addNode(b),this.graphRunner.attachProtoListener(u,(S,v)=>{this.classificationResult=(0,c.convertFromClassificationResultProto)(i.ClassificationResult.deserializeBinary(S)),this.setLatestOutputTimestamp(v)}),this.graphRunner.attachEmptyPacketListener(u,S=>{this.setLatestOutputTimestamp(S)});const M=m.serializeBinary();this.setGraph(new Uint8Array(M),!0)}}t.ImageClassifier=h}(image_classifier);var image_embedder={},embeddings_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,s),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,s),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,s),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,s),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,s),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(n){e.Message.initialize(this,n,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},r.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(n){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(n,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(n,i){var o,p={valuesList:(o=e.Message.getRepeatedFloatingPointField(i,1))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1)for(var o=i.isDelimited()?i.readPackedFloat():[i.readFloat()],p=0;p<o.length;p++)n.addValues(o[p]);else i.skipField();return n},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(n,i){var o;(o=n.getValuesList()).length>0&&i.writePackedFloat(1,o)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return e.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(n){return e.Message.setField(this,1,n||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(n,i){return e.Message.addToRepeatedField(this,1,n,i)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(n){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(n,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(n,i){var o={values:i.getValues_asB64()};return n&&(o.$jspbMessageInstance=i),o}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=i.readBytes();n.setValues(o)}else i.skipField();return n},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(n,i){var o;(o=e.Message.getField(n,1))!=null&&i.writeBytes(1,o)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return e.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return e.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(n){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(n,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(n,i){var o,p={floatEmbedding:(o=i.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(n,o),quantizedEmbedding:(o=i.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(n,o),headIndex:(o=e.Message.getField(i,3))==null?void 0:o,headName:(o=e.Message.getField(i,4))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;i.readMessage(o,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),n.setFloatEmbedding(o);break;case 2:o=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,i.readMessage(o,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),n.setQuantizedEmbedding(o);break;case 3:o=i.readInt32(),n.setHeadIndex(o);break;case 4:o=i.readString(),n.setHeadName(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(n,i){var o=void 0;(o=n.getFloatEmbedding())!=null&&i.writeMessage(1,o,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),(o=n.getQuantizedEmbedding())!=null&&i.writeMessage(2,o,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),(o=e.Message.getField(n,3))!=null&&i.writeInt32(3,o),(o=e.Message.getField(n,4))!=null&&i.writeString(4,o)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(n){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],n)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(n){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],n)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(n){return e.Message.setField(this,4,n)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(n){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(n,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(n,i){var o,p={embeddingsList:e.Message.toObjectList(i.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,n),timestampMs:(o=e.Message.getField(i,2))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=new proto.mediapipe.tasks.components.containers.proto.Embedding;i.readMessage(o,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),n.addEmbeddings(o);break;case 2:o=i.readInt64(),n.setTimestampMs(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(n,i){var o=void 0;(o=n.getEmbeddingsList()).length>0&&i.writeRepeatedMessage(1,o,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),(o=e.Message.getField(n,2))!=null&&i.writeInt64(2,o)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(n){return e.Message.setRepeatedWrapperField(this,1,n)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(n,i){return e.Message.addToRepeatedWrapperField(this,1,n,proto.mediapipe.tasks.components.containers.proto.Embedding,i)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.components.containers.proto)})(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,s),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(n){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(n,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(n,i){var o,p={l2Normalize:(o=e.Message.getBooleanField(i,1))==null?void 0:o,quantize:(o=e.Message.getBooleanField(i,2))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readBool();n.setL2Normalize(o);break;case 2:o=i.readBool(),n.setQuantize(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeBool(1,o),(o=e.Message.getField(n,2))!=null&&i.writeBool(2,o)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.components.processors.proto)})(embedder_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=embedder_options_pb;r.object.extend(proto,o);var p=base_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,s),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(l,c){var f,d={baseOptions:(f=c.getBaseOptions())&&p.BaseOptions.toObject(l,f),embedderOptions:(f=c.getEmbedderOptions())&&o.EmbedderOptions.toObject(l,f)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),f=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(f,c)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var f=new p.BaseOptions;c.readMessage(f,p.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(f);break;case 2:f=new o.EmbedderOptions,c.readMessage(f,o.EmbedderOptions.deserializeBinaryFromReader),l.setEmbedderOptions(f);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(l,c){var f=void 0;(f=l.getBaseOptions())!=null&&c.writeMessage(1,f,p.BaseOptions.serializeBinaryToWriter),(f=l.getEmbedderOptions())!=null&&c.writeMessage(2,f,o.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[476348187]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,p.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return e.Message.getWrapperField(this,o.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[476348187]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;const embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(t,e){const r=e?e.clone():new embedder_options_pb_1.EmbedderOptions;return t.l2Normalize!==void 0?r.setL2Normalize(t.l2Normalize):"l2Normalize"in t&&r.clearL2Normalize(),t.quantize!==void 0?r.setQuantize(t.quantize):"quantize"in t&&r.clearQuantize(),r}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;const DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(t){var e,r,s,n;const i={headIndex:(e=t.getHeadIndex())!==null&&e!==void 0?e:DEFAULT_INDEX,headName:(r=t.getHeadName())!==null&&r!==void 0?r:""};if(t.hasFloatEmbedding())i.floatEmbedding=t.getFloatEmbedding().getValuesList();else{const o=(n=(s=t.getQuantizedEmbedding())===null||s===void 0?void 0:s.getValues())!==null&&n!==void 0?n:"";i.quantizedEmbedding=typeof o=="string"?Uint8Array.from(atob(o),p=>p.charCodeAt(0)):o}return i}function convertFromEmbeddingResultProto(t){return{embeddings:t.getEmbeddingsList().map(e=>convertFromEmbeddingsProto(e)),timestampMs:t.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(t,e){if(t.floatEmbedding&&e.floatEmbedding)return compute(t.floatEmbedding,e.floatEmbedding);if(t.quantizedEmbedding&&e.quantizedEmbedding)return compute(convertToBytes(t.quantizedEmbedding),convertToBytes(e.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(t){return Array.from(t,e=>e>127?e-256:e)}function compute(t,e){if(t.length!==e.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let r=0,s=0,n=0;for(let i=0;i<t.length;i++)r+=t[i]*e[i],s+=t[i]*t[i],n+=e[i]*e[i];if(s<=0||n<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return r/Math.sqrt(s*n)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,_,b,M){M===void 0&&(M=b);var S=Object.getOwnPropertyDescriptor(_,b);S&&!("get"in S?!_.__esModule:S.writable||S.configurable)||(S={enumerable:!0,get:function(){return _[b]}}),Object.defineProperty(m,M,S)}:function(m,_,b,M){M===void 0&&(M=b),m[M]=_[b]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,_){for(var b in m)b==="default"||Object.prototype.hasOwnProperty.call(_,b)||e(_,m,b)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEmbedder=void 0;const s=calculator_pb,n=calculator_options_pb,i=embeddings_pb,o=base_options_pb,p=image_embedder_graph_options_pb,l=embedder_options,c=embedder_result,f=cosine_similarity,d=vision_task_runner,g="image_in",u="norm_rect",h="embeddings_out";r(image_embedder_options,t),r(image_embedder_result,t);class y extends d.VisionTaskRunner{static createFromOptions(_,b){return d.VisionTaskRunner.createVisionInstance(y,_,b)}static createFromModelBuffer(_,b){return d.VisionTaskRunner.createVisionInstance(y,_,{baseOptions:{modelAssetBuffer:b}})}static createFromModelPath(_,b){return d.VisionTaskRunner.createVisionInstance(y,_,{baseOptions:{modelAssetPath:b}})}constructor(_,b){super(new d.VisionGraphRunner(_,b),g,u,!0),this.options=new p.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(_){this.options.setBaseOptions(_)}setOptions(_){return this.options.setEmbedderOptions((0,l.convertEmbedderOptionsToProto)(_,this.options.getEmbedderOptions())),this.applyOptions(_)}embed(_,b){return this.processImageData(_,b),this.embeddings}embedForVideo(_,b,M){return this.processVideoData(_,M,b),this.embeddings}static cosineSimilarity(_,b){return(0,f.computeCosineSimilarity)(_,b)}addJsImageEmdedding(_){const b=i.EmbeddingResult.deserializeBinary(_);this.embeddings=(0,c.convertFromEmbeddingResultProto)(b)}refreshGraph(){const _=new s.CalculatorGraphConfig;_.addInputStream(g),_.addInputStream(u),_.addOutputStream(h);const b=new n.CalculatorOptions;b.setExtension(p.ImageEmbedderGraphOptions.ext,this.options);const M=new s.CalculatorGraphConfig.Node;M.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),M.addInputStream("IMAGE:"+g),M.addInputStream("NORM_RECT:"+u),M.addOutputStream("EMBEDDINGS:"+h),M.setOptions(b),_.addNode(M),this.graphRunner.attachProtoListener(h,(v,E)=>{this.addJsImageEmdedding(v),this.setLatestOutputTimestamp(E)}),this.graphRunner.attachEmptyPacketListener(h,v=>{this.setLatestOutputTimestamp(v)});const S=_.serializeBinary();this.setGraph(new Uint8Array(S),!0)}}t.ImageEmbedder=y}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,s),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,s),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,s),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(n){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(n,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(n,i){var o,p={outputType:(o=e.Message.getField(i,1))==null?void 0:o,activation:e.Message.getFieldWithDefault(i,2,0)};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(o,i)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readEnum();n.setOutputType(o);break;case 2:o=i.readEnum(),n.setActivation(o);break;default:i.skipField()}return n},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeEnum(1,o),(o=e.Message.getField(n,2))!=null&&i.writeEnum(2,o)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.vision.image_segmenter.proto)})(segmenter_options_pb);var label_map_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.LabelMapItem",null,s),proto.mediapipe.LabelMapItem=function(n){e.Message.initialize(this,n,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},r.inherits(proto.mediapipe.LabelMapItem,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(n){return proto.mediapipe.LabelMapItem.toObject(n,this)},proto.mediapipe.LabelMapItem.toObject=function(n,i){var o,p={name:(o=e.Message.getField(i,1))==null?void 0:o,displayName:(o=e.Message.getField(i,2))==null?void 0:o,childNameList:(o=e.Message.getRepeatedField(i,3))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.LabelMapItem.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(o,i)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readString();n.setName(o);break;case 2:o=i.readString(),n.setDisplayName(o);break;case 3:o=i.readString(),n.addChildName(o);break;default:i.skipField()}return n},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeString(1,o),(o=e.Message.getField(n,2))!=null&&i.writeString(2,o),(o=n.getChildNameList()).length>0&&i.writeRepeatedString(3,o)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return e.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(n){return e.Message.setField(this,3,n||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(n,i){return e.Message.addToRepeatedField(this,3,n,i)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},r.object.extend(t,proto.mediapipe)})(label_map_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_options_pb;r.object.extend(proto,n);var i=segmenter_options_pb;r.object.extend(proto,i);var o=label_map_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,s),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(p,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(p,l){var c,f={segmenterOptions:(c=l.getSegmenterOptions())&&i.SegmenterOptions.toObject(p,c),labelItemsMap:(c=l.getLabelItemsMap())?c.toObject(p,proto.mediapipe.LabelMapItem.toObject):[]};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new i.SegmenterOptions;l.readMessage(c,i.SegmenterOptions.deserializeBinaryFromReader),p.setSegmenterOptions(c);break;case 2:c=p.getLabelItemsMap(),l.readMessage(c,function(f,d){e.Map.deserializeBinary(f,d,e.BinaryReader.prototype.readInt64,e.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)});break;default:l.skipField()}return p},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getSegmenterOptions())!=null&&l.writeMessage(1,c,i.SegmenterOptions.serializeBinaryToWriter),(c=p.getLabelItemsMap(!0))&&c.getLength()>0&&c.serializeBinary(2,l,e.BinaryWriter.prototype.writeInt64,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new e.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),n.CalculatorOptions.extensionsBinary[458105876]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),n.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return e.Message.getWrapperField(this,i.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(p){return e.Message.getMapField(this,2,p,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new e.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),n.CalculatorOptions.extensionsBinary[458105876]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),n.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,r.object.extend(t,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=segmenter_options_pb;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,s),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(l,c){var f,d={baseOptions:(f=c.getBaseOptions())&&o.BaseOptions.toObject(l,f),displayNamesLocale:e.Message.getFieldWithDefault(c,2,"en"),segmenterOptions:(f=c.getSegmenterOptions())&&p.SegmenterOptions.toObject(l,f)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),f=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(f,c)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var f=new o.BaseOptions;c.readMessage(f,o.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(f);break;case 2:f=c.readString(),l.setDisplayNamesLocale(f);break;case 3:f=new p.SegmenterOptions,c.readMessage(f,p.SegmenterOptions.deserializeBinaryFromReader),l.setSegmenterOptions(f);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(l,c){var f=void 0;(f=l.getBaseOptions())!=null&&c.writeMessage(1,f,o.BaseOptions.serializeBinaryToWriter),(f=e.Message.getField(l,2))!=null&&c.writeString(2,f),(f=l.getSegmenterOptions())!=null&&c.writeMessage(3,f,p.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new e.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[458105758]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return e.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(l){return e.Message.setField(this,2,l)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return e.Message.getWrapperField(this,p.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(l){return e.Message.setWrapperField(this,3,l)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new e.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[458105758]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.image_segmenter.proto)})(image_segmenter_graph_options_pb);var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),image_segmenter_result.ImageSegmenterResult=void 0;class ImageSegmenterResult{constructor(e,r,s){this.confidenceMasks=e,this.categoryMask=r,this.qualityScores=s}close(){var e,r;(e=this.confidenceMasks)===null||e===void 0||e.forEach(s=>{s.close()}),(r=this.categoryMask)===null||r===void 0||r.close()}}image_segmenter_result.ImageSegmenterResult=ImageSegmenterResult;var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(b,M,S,v){v===void 0&&(v=S);var E=Object.getOwnPropertyDescriptor(M,S);E&&!("get"in E?!M.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return M[S]}}),Object.defineProperty(b,v,E)}:function(b,M,S,v){v===void 0&&(v=S),b[v]=M[S]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(b,M){for(var S in b)S==="default"||Object.prototype.hasOwnProperty.call(M,S)||e(M,b,S)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSegmenter=void 0;const s=calculator_pb,n=calculator_options_pb,i=base_options_pb,o=tensors_to_segmentation_calculator_pb,p=image_segmenter_graph_options_pb,l=segmenter_options_pb,c=vision_task_runner,f=image_segmenter_result;r(image_segmenter_options,t),r(image_segmenter_result,t);const d="image_in",g="norm_rect",u="confidence_masks",h="category_mask",y="quality_scores",m="mediapipe.tasks.TensorsToSegmentationCalculator";class _ extends c.VisionTaskRunner{static createFromOptions(M,S){return c.VisionTaskRunner.createVisionInstance(_,M,S)}static createFromModelBuffer(M,S){return c.VisionTaskRunner.createVisionInstance(_,M,{baseOptions:{modelAssetBuffer:S}})}static createFromModelPath(M,S){return c.VisionTaskRunner.createVisionInstance(_,M,{baseOptions:{modelAssetPath:S}})}constructor(M,S){super(new c.VisionGraphRunner(M,S),d,g,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new p.ImageSegmenterGraphOptions,this.segmenterOptions=new l.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(M){this.options.setBaseOptions(M)}setOptions(M){var S,v;return M.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(M.displayNamesLocale):"displayNamesLocale"in M&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in M&&(this.outputCategoryMask=(S=M.outputCategoryMask)!==null&&S!==void 0&&S),"outputConfidenceMasks"in M&&(this.outputConfidenceMasks=(v=M.outputConfidenceMasks)===null||v===void 0||v),super.applyOptions(M)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var M,S,v;const E=this.getCalculatorGraphConfig().getNodeList().filter(T=>T.getName().includes(m));if(this.labels=[],E.length>1)throw new Error(`The graph has more than one ${m}.`);E.length===1&&((v=(S=(M=E[0].getOptions())===null||M===void 0?void 0:M.getExtension(o.TensorsToSegmentationCalculatorOptions.ext))===null||S===void 0?void 0:S.getLabelItemsMap())!==null&&v!==void 0?v:new Map).forEach((T,A)=>{this.labels[Number(A)]=T.getName()})}segment(M,S,v){const E=typeof S!="function"?S:{};return this.userCallback=typeof S=="function"?S:v,this.reset(),this.processImageData(M,E),this.processResults()}segmentForVideo(M,S,v,E){const T=typeof v!="function"?v:{};return this.userCallback=typeof v=="function"?v:E,this.reset(),this.processVideoData(M,T,S),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{const M=new f.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return M;this.userCallback(M)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const M=new s.CalculatorGraphConfig;M.addInputStream(d),M.addInputStream(g);const S=new n.CalculatorOptions;S.setExtension(p.ImageSegmenterGraphOptions.ext,this.options);const v=new s.CalculatorGraphConfig.Node;v.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),v.addInputStream("IMAGE:"+d),v.addInputStream("NORM_RECT:"+g),v.setOptions(S),M.addNode(v),this.addKeepaliveNode(M),this.outputConfidenceMasks&&(M.addOutputStream(u),v.addOutputStream("CONFIDENCE_MASKS:"+u),this.keepStreamAlive(u),this.graphRunner.attachImageVectorListener(u,(T,A)=>{this.confidenceMasks=T.map(R=>this.convertToMPMask(R,!this.userCallback)),this.setLatestOutputTimestamp(A)}),this.graphRunner.attachEmptyPacketListener(u,T=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(T)})),this.outputCategoryMask&&(M.addOutputStream(h),v.addOutputStream("CATEGORY_MASK:"+h),this.keepStreamAlive(h),this.graphRunner.attachImageListener(h,(T,A)=>{this.categoryMask=this.convertToMPMask(T,!this.userCallback),this.setLatestOutputTimestamp(A)}),this.graphRunner.attachEmptyPacketListener(h,T=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(T)})),M.addOutputStream(y),v.addOutputStream("QUALITY_SCORES:"+y),this.graphRunner.attachFloatVectorListener(y,(T,A)=>{this.qualityScores=T,this.setLatestOutputTimestamp(A)}),this.graphRunner.attachEmptyPacketListener(y,T=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(T)});const E=M.serializeBinary();this.setGraph(new Uint8Array(E),!0)}}t.ImageSegmenter=_}(image_segmenter);var interactive_segmenter={},color_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Color",null,s),r.exportSymbol("proto.mediapipe.ColorMap",null,s),proto.mediapipe.Color=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.Color,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(n){e.Message.initialize(this,n,0,-1,null,null)},r.inherits(proto.mediapipe.ColorMap,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(n){return proto.mediapipe.Color.toObject(n,this)},proto.mediapipe.Color.toObject=function(n,i){var o,p={r:(o=e.Message.getField(i,1))==null?void 0:o,g:(o=e.Message.getField(i,2))==null?void 0:o,b:(o=e.Message.getField(i,3))==null?void 0:o};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.Color.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(o,i)},proto.mediapipe.Color.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var o=i.readInt32();n.setR(o);break;case 2:o=i.readInt32(),n.setG(o);break;case 3:o=i.readInt32(),n.setB(o);break;default:i.skipField()}return n},proto.mediapipe.Color.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(n,i){var o=void 0;(o=e.Message.getField(n,1))!=null&&i.writeInt32(1,o),(o=e.Message.getField(n,2))!=null&&i.writeInt32(2,o),(o=e.Message.getField(n,3))!=null&&i.writeInt32(3,o)},proto.mediapipe.Color.prototype.getR=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(n){return e.Message.setField(this,1,n)},proto.mediapipe.Color.prototype.clearR=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Color.prototype.getG=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(n){return e.Message.setField(this,2,n)},proto.mediapipe.Color.prototype.clearG=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Color.prototype.getB=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(n){return e.Message.setField(this,3,n)},proto.mediapipe.Color.prototype.clearB=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(n){return proto.mediapipe.ColorMap.toObject(n,this)},proto.mediapipe.ColorMap.toObject=function(n,i){var o,p={labelToColorMap:(o=i.getLabelToColorMap())?o.toObject(n,proto.mediapipe.Color.toObject):[]};return n&&(p.$jspbMessageInstance=i),p}),proto.mediapipe.ColorMap.deserializeBinary=function(n){var i=new e.BinaryReader(n),o=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(o,i)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(n,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var o=n.getLabelToColorMap();i.readMessage(o,function(p,l){e.Map.deserializeBinary(p,l,e.BinaryReader.prototype.readString,e.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)})}else i.skipField();return n},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var n=new e.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,n),n.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(n,i){var o=void 0;(o=n.getLabelToColorMap(!0))&&o.getLength()>0&&o.serializeBinary(1,i,e.BinaryWriter.prototype.writeString,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(n){return e.Message.getMapField(this,1,n,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},r.object.extend(t,proto.mediapipe)})(color_pb);var render_data_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=color_pb;r.object.extend(proto,n),r.exportSymbol("proto.mediapipe.RenderAnnotation",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,s),r.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,s),r.exportSymbol("proto.mediapipe.RenderData",null,s),r.exportSymbol("proto.mediapipe.RenderViewport",null,s),proto.mediapipe.RenderData=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},r.inherits(proto.mediapipe.RenderData,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(i){e.Message.initialize(this,i,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},r.inherits(proto.mediapipe.RenderAnnotation,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Rectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Oval,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledOval,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Point,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Line,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.GradientLine,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},r.inherits(proto.mediapipe.RenderAnnotation.Scribble,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Arrow,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Text,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.RenderViewport,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(i){return proto.mediapipe.RenderData.toObject(i,this)},proto.mediapipe.RenderData.toObject=function(i,o){var p,l={renderAnnotationsList:e.Message.toObjectList(o.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,i),sceneClass:(p=e.Message.getField(o,2))==null?void 0:p,sceneViewport:(p=o.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderData.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation;o.readMessage(p,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),i.addRenderAnnotations(p);break;case 2:p=o.readString(),i.setSceneClass(p);break;case 3:p=new proto.mediapipe.RenderViewport,o.readMessage(p,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),i.setSceneViewport(p);break;default:o.skipField()}return i},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getRenderAnnotationsList()).length>0&&o.writeRepeatedMessage(1,p,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),(p=e.Message.getField(i,2))!=null&&o.writeString(2,p),(p=i.getSceneViewport())!=null&&o.writeMessage(3,p,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.RenderAnnotation,o)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.toObject(i,this)},proto.mediapipe.RenderAnnotation.toObject=function(i,o){var p,l={rectangle:(p=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(i,p),filledRectangle:(p=o.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(i,p),oval:(p=o.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(i,p),filledOval:(p=o.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(i,p),point:(p=o.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(i,p),line:(p=o.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(i,p),arrow:(p=o.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(i,p),text:(p=o.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(i,p),roundedRectangle:(p=o.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(i,p),filledRoundedRectangle:(p=o.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(i,p),gradientLine:(p=o.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(i,p),scribble:(p=o.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(i,p),thickness:e.Message.getFloatingPointFieldWithDefault(o,11,1),color:(p=o.getColor())&&n.Color.toObject(i,p),sceneTag:(p=e.Message.getField(o,13))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),i.setRectangle(p);break;case 2:p=new proto.mediapipe.RenderAnnotation.FilledRectangle,o.readMessage(p,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),i.setFilledRectangle(p);break;case 3:p=new proto.mediapipe.RenderAnnotation.Oval,o.readMessage(p,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),i.setOval(p);break;case 4:p=new proto.mediapipe.RenderAnnotation.FilledOval,o.readMessage(p,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),i.setFilledOval(p);break;case 5:p=new proto.mediapipe.RenderAnnotation.Point,o.readMessage(p,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),i.setPoint(p);break;case 6:p=new proto.mediapipe.RenderAnnotation.Line,o.readMessage(p,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),i.setLine(p);break;case 7:p=new proto.mediapipe.RenderAnnotation.Arrow,o.readMessage(p,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),i.setArrow(p);break;case 8:p=new proto.mediapipe.RenderAnnotation.Text,o.readMessage(p,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),i.setText(p);break;case 9:p=new proto.mediapipe.RenderAnnotation.RoundedRectangle,o.readMessage(p,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),i.setRoundedRectangle(p);break;case 10:p=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,o.readMessage(p,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),i.setFilledRoundedRectangle(p);break;case 14:p=new proto.mediapipe.RenderAnnotation.GradientLine,o.readMessage(p,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),i.setGradientLine(p);break;case 15:p=new proto.mediapipe.RenderAnnotation.Scribble,o.readMessage(p,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),i.setScribble(p);break;case 11:p=o.readDouble(),i.setThickness(p);break;case 12:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setColor(p);break;case 13:p=o.readString(),i.setSceneTag(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getRectangle())!=null&&o.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(p=i.getFilledRectangle())!=null&&o.writeMessage(2,p,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),(p=i.getOval())!=null&&o.writeMessage(3,p,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(p=i.getFilledOval())!=null&&o.writeMessage(4,p,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),(p=i.getPoint())!=null&&o.writeMessage(5,p,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),(p=i.getLine())!=null&&o.writeMessage(6,p,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),(p=i.getArrow())!=null&&o.writeMessage(7,p,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),(p=i.getText())!=null&&o.writeMessage(8,p,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),(p=i.getRoundedRectangle())!=null&&o.writeMessage(9,p,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(p=i.getFilledRoundedRectangle())!=null&&o.writeMessage(10,p,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),(p=i.getGradientLine())!=null&&o.writeMessage(14,p,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),(p=i.getScribble())!=null&&o.writeMessage(15,p,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),(p=e.Message.getField(i,11))!=null&&o.writeDouble(11,p),(p=i.getColor())!=null&&o.writeMessage(12,p,n.Color.serializeBinaryToWriter),(p=e.Message.getField(i,13))!=null&&o.writeString(13,p)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(i,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(i,o){var p,l={left:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,top:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,right:(p=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:p,bottom:(p=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(o,5,!1),rotation:(p=e.Message.getOptionalFloatingPointField(o,6))==null?void 0:p,topLeftThickness:(p=e.Message.getOptionalFloatingPointField(o,7))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readDouble();i.setLeft(p);break;case 2:p=o.readDouble(),i.setTop(p);break;case 3:p=o.readDouble(),i.setRight(p);break;case 4:p=o.readDouble(),i.setBottom(p);break;case 5:p=o.readBool(),i.setNormalized(p);break;case 6:p=o.readDouble(),i.setRotation(p);break;case 7:p=o.readDouble(),i.setTopLeftThickness(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeDouble(1,p),(p=e.Message.getField(i,2))!=null&&o.writeDouble(2,p),(p=e.Message.getField(i,3))!=null&&o.writeDouble(3,p),(p=e.Message.getField(i,4))!=null&&o.writeDouble(4,p),(p=e.Message.getField(i,5))!=null&&o.writeBool(5,p),(p=e.Message.getField(i,6))!=null&&o.writeDouble(6,p),(p=e.Message.getField(i,7))!=null&&o.writeDouble(7,p)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return e.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(i){return e.Message.setField(this,6,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return e.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(i){return e.Message.setField(this,7,i)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return e.Message.getField(this,7)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(i,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(i,o){var p,l={rectangle:(p=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(i,p),fillColor:(p=o.getFillColor())&&n.Color.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),i.setRectangle(p);break;case 2:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setFillColor(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getRectangle())!=null&&o.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(p=i.getFillColor())!=null&&o.writeMessage(2,p,n.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(i){return e.Message.setWrapperField(this,1,i)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return e.Message.getWrapperField(this,n.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(i){return e.Message.setWrapperField(this,2,i)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return e.Message.getField(this,2)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(i,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(i,o){var p,l={rectangle:(p=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(i,p),cornerRadius:e.Message.getFieldWithDefault(o,2,0),lineType:e.Message.getFieldWithDefault(o,3,4)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),i.setRectangle(p);break;case 2:p=o.readInt32(),i.setCornerRadius(p);break;case 3:p=o.readInt32(),i.setLineType(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getRectangle())!=null&&o.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(p=e.Message.getField(i,2))!=null&&o.writeInt32(2,p),(p=e.Message.getField(i,3))!=null&&o.writeInt32(3,p)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(i){return e.Message.setWrapperField(this,1,i)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return e.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(i,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(i,o){var p,l={roundedRectangle:(p=o.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(i,p),fillColor:(p=o.getFillColor())&&n.Color.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.RoundedRectangle;o.readMessage(p,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),i.setRoundedRectangle(p);break;case 2:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setFillColor(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getRoundedRectangle())!=null&&o.writeMessage(1,p,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(p=i.getFillColor())!=null&&o.writeMessage(2,p,n.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(i){return e.Message.setWrapperField(this,1,i)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return e.Message.getWrapperField(this,n.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(i){return e.Message.setWrapperField(this,2,i)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return e.Message.getField(this,2)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Oval.toObject(i,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(i,o){var p,l={rectangle:(p=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var p=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),i.setRectangle(p)}else o.skipField();return i},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(i,o){var p;(p=i.getRectangle())!=null&&o.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(i){return e.Message.setWrapperField(this,1,i)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(i,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(i,o){var p,l={oval:(p=o.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(i,p),fillColor:(p=o.getFillColor())&&n.Color.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Oval;o.readMessage(p,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),i.setOval(p);break;case 2:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setFillColor(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(i,o){var p=void 0;(p=i.getOval())!=null&&o.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(p=i.getFillColor())!=null&&o.writeMessage(2,p,n.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(i){return e.Message.setWrapperField(this,1,i)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return e.Message.getWrapperField(this,n.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(i){return e.Message.setWrapperField(this,2,i)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return e.Message.getField(this,2)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Point.toObject(i,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(i,o){var p,l={x:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,y:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(o,3,!1)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readDouble();i.setX(p);break;case 2:p=o.readDouble(),i.setY(p);break;case 3:p=o.readBool(),i.setNormalized(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeDouble(1,p),(p=e.Message.getField(i,2))!=null&&o.writeDouble(2,p),(p=e.Message.getField(i,3))!=null&&o.writeBool(3,p)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Line.toObject(i,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(i,o){var p,l={xStart:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,yStart:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,xEnd:(p=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:p,yEnd:(p=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(o,5,!1),lineType:e.Message.getFieldWithDefault(o,6,1)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readDouble();i.setXStart(p);break;case 2:p=o.readDouble(),i.setYStart(p);break;case 3:p=o.readDouble(),i.setXEnd(p);break;case 4:p=o.readDouble(),i.setYEnd(p);break;case 5:p=o.readBool(),i.setNormalized(p);break;case 6:p=o.readEnum(),i.setLineType(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeDouble(1,p),(p=e.Message.getField(i,2))!=null&&o.writeDouble(2,p),(p=e.Message.getField(i,3))!=null&&o.writeDouble(3,p),(p=e.Message.getField(i,4))!=null&&o.writeDouble(4,p),(p=e.Message.getField(i,5))!=null&&o.writeBool(5,p),(p=e.Message.getField(i,6))!=null&&o.writeEnum(6,p)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return e.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(i){return e.Message.setField(this,6,i)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return e.Message.getField(this,6)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(i,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(i,o){var p,l={xStart:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,yStart:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,xEnd:(p=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:p,yEnd:(p=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(o,5,!1),color1:(p=o.getColor1())&&n.Color.toObject(i,p),color2:(p=o.getColor2())&&n.Color.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readDouble();i.setXStart(p);break;case 2:p=o.readDouble(),i.setYStart(p);break;case 3:p=o.readDouble(),i.setXEnd(p);break;case 4:p=o.readDouble(),i.setYEnd(p);break;case 5:p=o.readBool(),i.setNormalized(p);break;case 6:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setColor1(p);break;case 7:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setColor2(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeDouble(1,p),(p=e.Message.getField(i,2))!=null&&o.writeDouble(2,p),(p=e.Message.getField(i,3))!=null&&o.writeDouble(3,p),(p=e.Message.getField(i,4))!=null&&o.writeDouble(4,p),(p=e.Message.getField(i,5))!=null&&o.writeBool(5,p),(p=i.getColor1())!=null&&o.writeMessage(6,p,n.Color.serializeBinaryToWriter),(p=i.getColor2())!=null&&o.writeMessage(7,p,n.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return e.Message.getWrapperField(this,n.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(i){return e.Message.setWrapperField(this,6,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return e.Message.getWrapperField(this,n.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(i){return e.Message.setWrapperField(this,7,i)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Scribble.toObject(i,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(i,o){var p={pointList:e.Message.toObjectList(o.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,i)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var p=new proto.mediapipe.RenderAnnotation.Point;o.readMessage(p,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),i.addPoint(p)}else o.skipField();return i},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(i,o){var p;(p=i.getPointList()).length>0&&o.writeRepeatedMessage(1,p,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.RenderAnnotation.Point,o)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Arrow.toObject(i,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(i,o){var p,l={xStart:(p=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:p,yStart:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,xEnd:(p=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:p,yEnd:(p=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(o,5,!1)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readDouble();i.setXStart(p);break;case 2:p=o.readDouble(),i.setYStart(p);break;case 3:p=o.readDouble(),i.setXEnd(p);break;case 4:p=o.readDouble(),i.setYEnd(p);break;case 5:p=o.readBool(),i.setNormalized(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeDouble(1,p),(p=e.Message.getField(i,2))!=null&&o.writeDouble(2,p),(p=e.Message.getField(i,3))!=null&&o.writeDouble(3,p),(p=e.Message.getField(i,4))!=null&&o.writeDouble(4,p),(p=e.Message.getField(i,5))!=null&&o.writeBool(5,p)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(i){return proto.mediapipe.RenderAnnotation.Text.toObject(i,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(i,o){var p,l={displayText:(p=e.Message.getField(o,1))==null?void 0:p,left:(p=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:p,baseline:(p=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:p,fontHeight:e.Message.getFloatingPointFieldWithDefault(o,4,8),normalized:e.Message.getBooleanFieldWithDefault(o,5,!1),fontFace:e.Message.getFieldWithDefault(o,6,0),centerHorizontally:e.Message.getBooleanFieldWithDefault(o,7,!1),centerVertically:e.Message.getBooleanFieldWithDefault(o,8,!1),outlineThickness:e.Message.getFloatingPointFieldWithDefault(o,11,0),outlineColor:(p=o.getOutlineColor())&&n.Color.toObject(i,p)};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readString();i.setDisplayText(p);break;case 2:p=o.readDouble(),i.setLeft(p);break;case 3:p=o.readDouble(),i.setBaseline(p);break;case 4:p=o.readDouble(),i.setFontHeight(p);break;case 5:p=o.readBool(),i.setNormalized(p);break;case 6:p=o.readInt32(),i.setFontFace(p);break;case 7:p=o.readBool(),i.setCenterHorizontally(p);break;case 8:p=o.readBool(),i.setCenterVertically(p);break;case 11:p=o.readDouble(),i.setOutlineThickness(p);break;case 12:p=new n.Color,o.readMessage(p,n.Color.deserializeBinaryFromReader),i.setOutlineColor(p);break;default:o.skipField()}return i},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeString(1,p),(p=e.Message.getField(i,2))!=null&&o.writeDouble(2,p),(p=e.Message.getField(i,3))!=null&&o.writeDouble(3,p),(p=e.Message.getField(i,4))!=null&&o.writeDouble(4,p),(p=e.Message.getField(i,5))!=null&&o.writeBool(5,p),(p=e.Message.getField(i,6))!=null&&o.writeInt32(6,p),(p=e.Message.getField(i,7))!=null&&o.writeBool(7,p),(p=e.Message.getField(i,8))!=null&&o.writeBool(8,p),(p=e.Message.getField(i,11))!=null&&o.writeDouble(11,p),(p=i.getOutlineColor())!=null&&o.writeMessage(12,p,n.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(i){return e.Message.setField(this,6,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return e.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(i){return e.Message.setField(this,7,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return e.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(i){return e.Message.setField(this,8,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return e.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return e.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return e.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(i){return e.Message.setField(this,11,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return e.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return e.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return e.Message.getWrapperField(this,n.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(i){return e.Message.setWrapperField(this,12,i)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(i){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(i){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(i){return e.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(i){return e.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(i){return e.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(i){return e.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(i){return e.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(i){return e.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return e.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(i){return e.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return e.Message.getField(this,9)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(i){return e.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return e.Message.getField(this,10)!=null},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(i){return e.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return e.Message.getField(this,14)!=null},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(i){return e.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],i)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return e.Message.getField(this,15)!=null},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return e.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(i){return e.Message.setField(this,11,i)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return e.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return e.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return e.Message.getWrapperField(this,n.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(i){return e.Message.setWrapperField(this,12,i)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return e.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(i){return e.Message.setField(this,13,i)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return e.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return e.Message.getField(this,13)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(i){return proto.mediapipe.RenderViewport.toObject(i,this)},proto.mediapipe.RenderViewport.toObject=function(i,o){var p,l={id:(p=e.Message.getField(o,1))==null?void 0:p,widthPx:(p=e.Message.getField(o,2))==null?void 0:p,heightPx:(p=e.Message.getField(o,3))==null?void 0:p,composeOnVideo:(p=e.Message.getBooleanField(o,4))==null?void 0:p};return i&&(l.$jspbMessageInstance=o),l}),proto.mediapipe.RenderViewport.deserializeBinary=function(i){var o=new e.BinaryReader(i),p=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(p,o)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var p=o.readString();i.setId(p);break;case 2:p=o.readInt32(),i.setWidthPx(p);break;case 3:p=o.readInt32(),i.setHeightPx(p);break;case 4:p=o.readBool(),i.setComposeOnVideo(p);break;default:o.skipField()}return i},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(i,o){var p=void 0;(p=e.Message.getField(i,1))!=null&&o.writeString(1,p),(p=e.Message.getField(i,2))!=null&&o.writeInt32(2,p),(p=e.Message.getField(i,3))!=null&&o.writeInt32(3,p),(p=e.Message.getField(i,4))!=null&&o.writeBool(4,p)},proto.mediapipe.RenderViewport.prototype.getId=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return e.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return e.Message.getField(this,4)!=null},r.object.extend(t,proto.mediapipe)})(render_data_pb);var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),interactive_segmenter_result.InteractiveSegmenterResult=void 0;class InteractiveSegmenterResult{constructor(e,r,s){this.confidenceMasks=e,this.categoryMask=r,this.qualityScores=s}close(){var e,r;(e=this.confidenceMasks)===null||e===void 0||e.forEach(s=>{s.close()}),(r=this.categoryMask)===null||r===void 0||r.close()}}interactive_segmenter_result.InteractiveSegmenterResult=InteractiveSegmenterResult;var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(M,S,v,E){E===void 0&&(E=v);var T=Object.getOwnPropertyDescriptor(S,v);T&&!("get"in T?!S.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return S[v]}}),Object.defineProperty(M,E,T)}:function(M,S,v,E){E===void 0&&(E=v),M[E]=S[v]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(M,S){for(var v in M)v==="default"||Object.prototype.hasOwnProperty.call(S,v)||e(S,M,v)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveSegmenter=void 0;const s=calculator_pb,n=calculator_options_pb,i=base_options_pb,o=image_segmenter_graph_options_pb,p=segmenter_options_pb,l=vision_task_runner,c=color_pb,f=render_data_pb,d=interactive_segmenter_result;r(interactive_segmenter_options,t),r(interactive_segmenter_result,t);const g="image_in",u="norm_rect_in",h="roi_in",y="confidence_masks",m="category_mask",_="quality_scores";class b extends l.VisionTaskRunner{static createFromOptions(S,v){return l.VisionTaskRunner.createVisionInstance(b,S,v)}static createFromModelBuffer(S,v){return l.VisionTaskRunner.createVisionInstance(b,S,{baseOptions:{modelAssetBuffer:v}})}static createFromModelPath(S,v){return l.VisionTaskRunner.createVisionInstance(b,S,{baseOptions:{modelAssetPath:v}})}constructor(S,v){super(new l.VisionGraphRunner(S,v),g,u,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new o.ImageSegmenterGraphOptions,this.segmenterOptions=new p.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(S){this.options.setBaseOptions(S)}setOptions(S){var v,E;return"outputCategoryMask"in S&&(this.outputCategoryMask=(v=S.outputCategoryMask)!==null&&v!==void 0&&v),"outputConfidenceMasks"in S&&(this.outputConfidenceMasks=(E=S.outputConfidenceMasks)===null||E===void 0||E),super.applyOptions(S)}segment(S,v,E,T){const A=typeof E!="function"?E:{};return this.userCallback=typeof E=="function"?E:T,this.reset(),this.processRenderData(v,this.getSynctheticTimestamp()),this.processImageData(S,A),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{const S=new d.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return S;this.userCallback(S)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const S=new s.CalculatorGraphConfig;S.addInputStream(g),S.addInputStream(h),S.addInputStream(u);const v=new n.CalculatorOptions;v.setExtension(o.ImageSegmenterGraphOptions.ext,this.options);const E=new s.CalculatorGraphConfig.Node;E.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),E.addInputStream("IMAGE:"+g),E.addInputStream("ROI:"+h),E.addInputStream("NORM_RECT:"+u),E.setOptions(v),S.addNode(E),this.addKeepaliveNode(S),this.outputConfidenceMasks&&(S.addOutputStream(y),E.addOutputStream("CONFIDENCE_MASKS:"+y),this.keepStreamAlive(y),this.graphRunner.attachImageVectorListener(y,(A,R)=>{this.confidenceMasks=A.map(x=>this.convertToMPMask(x,!this.userCallback)),this.setLatestOutputTimestamp(R)}),this.graphRunner.attachEmptyPacketListener(y,A=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(A)})),this.outputCategoryMask&&(S.addOutputStream(m),E.addOutputStream("CATEGORY_MASK:"+m),this.keepStreamAlive(m),this.graphRunner.attachImageListener(m,(A,R)=>{this.categoryMask=this.convertToMPMask(A,!this.userCallback),this.setLatestOutputTimestamp(R)}),this.graphRunner.attachEmptyPacketListener(m,A=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(A)})),S.addOutputStream(_),E.addOutputStream("QUALITY_SCORES:"+_),this.graphRunner.attachFloatVectorListener(_,(A,R)=>{this.qualityScores=A,this.setLatestOutputTimestamp(R)}),this.graphRunner.attachEmptyPacketListener(_,A=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(A)});const T=S.serializeBinary();this.setGraph(new Uint8Array(T),!0)}processRenderData(S,v){const E=new f.RenderData,T=new f.RenderAnnotation,A=new c.Color;if(A.setR(255),T.setColor(A),S.keypoint&&S.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(S.keypoint){const R=new f.RenderAnnotation.Point;R.setNormalized(!0),R.setX(S.keypoint.x),R.setY(S.keypoint.y),T.setPoint(R)}else{if(!S.scribble)throw new Error("Must provide either a keypoint or a scribble.");{const R=new f.RenderAnnotation.Scribble;for(const x of S.scribble){const C=new f.RenderAnnotation.Point;C.setNormalized(!0),C.setX(x.x),C.setY(x.y),R.addPoint(C)}T.setScribble(R)}}E.addRenderAnnotations(T),this.graphRunner.addProtoToStream(E.serializeBinary(),"drishti.RenderData",h,v)}}t.InteractiveSegmenter=b}(interactive_segmenter);var object_detector={},object_detector_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,s),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(p){e.Message.initialize(this,p,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(p,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c),displayNamesLocale:e.Message.getFieldWithDefault(l,2,"en"),maxResults:e.Message.getFieldWithDefault(l,3,-1),scoreThreshold:(c=e.Message.getOptionalFloatingPointField(l,4))==null?void 0:c,categoryAllowlistList:(c=e.Message.getRepeatedField(l,5))==null?void 0:c,categoryDenylistList:(c=e.Message.getRepeatedField(l,6))==null?void 0:c};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readString(),p.setDisplayNamesLocale(c);break;case 3:c=l.readInt32(),p.setMaxResults(c);break;case 4:c=l.readFloat(),p.setScoreThreshold(c);break;case 5:c=l.readString(),p.addCategoryAllowlist(c);break;case 6:c=l.readString(),p.addCategoryDenylist(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeString(2,c),(c=e.Message.getField(p,3))!=null&&l.writeInt32(3,c),(c=e.Message.getField(p,4))!=null&&l.writeFloat(4,c),(c=p.getCategoryAllowlistList()).length>0&&l.writeRepeatedString(5,c),(c=p.getCategoryDenylistList()).length>0&&l.writeRepeatedString(6,c)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new e.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[443442058]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return e.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return e.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(p){return e.Message.setField(this,4,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return e.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(p){return e.Message.setField(this,5,p||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(p,l){return e.Message.addToRepeatedField(this,5,p,l)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return e.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(p){return e.Message.setField(this,6,p||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(p,l){return e.Message.addToRepeatedField(this,6,p,l)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new e.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[443442058]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.object_detector.proto)})(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(h,y,m,_){_===void 0&&(_=m);var b=Object.getOwnPropertyDescriptor(y,m);b&&!("get"in b?!y.__esModule:b.writable||b.configurable)||(b={enumerable:!0,get:function(){return y[m]}}),Object.defineProperty(h,_,b)}:function(h,y,m,_){_===void 0&&(_=m),h[_]=y[m]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(h,y){for(var m in h)m==="default"||Object.prototype.hasOwnProperty.call(y,m)||e(y,h,m)};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDetector=void 0;const s=calculator_pb,n=calculator_options_pb,i=detection_pb,o=base_options_pb,p=object_detector_options_pb,l=detection_result,c=vision_task_runner,f="input_frame_gpu",d="norm_rect",g="detections";r(object_detector_options,t),r(object_detector_result,t);class u extends c.VisionTaskRunner{static createFromOptions(y,m){return c.VisionTaskRunner.createVisionInstance(u,y,m)}static createFromModelBuffer(y,m){return c.VisionTaskRunner.createVisionInstance(u,y,{baseOptions:{modelAssetBuffer:m}})}static async createFromModelPath(y,m){return c.VisionTaskRunner.createVisionInstance(u,y,{baseOptions:{modelAssetPath:m}})}constructor(y,m){super(new c.VisionGraphRunner(y,m),f,d,!1),this.result={detections:[]},this.options=new p.ObjectDetectorOptions,this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(y){this.options.setBaseOptions(y)}setOptions(y){return y.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(y.displayNamesLocale):"displayNamesLocale"in y&&this.options.clearDisplayNamesLocale(),y.maxResults!==void 0?this.options.setMaxResults(y.maxResults):"maxResults"in y&&this.options.clearMaxResults(),y.scoreThreshold!==void 0?this.options.setScoreThreshold(y.scoreThreshold):"scoreThreshold"in y&&this.options.clearScoreThreshold(),y.categoryAllowlist!==void 0?this.options.setCategoryAllowlistList(y.categoryAllowlist):"categoryAllowlist"in y&&this.options.clearCategoryAllowlistList(),y.categoryDenylist!==void 0?this.options.setCategoryDenylistList(y.categoryDenylist):"categoryDenylist"in y&&this.options.clearCategoryDenylistList(),this.applyOptions(y)}detect(y,m){return this.result={detections:[]},this.processImageData(y,m),this.result}detectForVideo(y,m,_){return this.result={detections:[]},this.processVideoData(y,_,m),this.result}addJsObjectDetections(y){for(const m of y){const _=i.Detection.deserializeBinary(m);this.result.detections.push((0,l.convertFromDetectionProto)(_))}}refreshGraph(){const y=new s.CalculatorGraphConfig;y.addInputStream(f),y.addInputStream(d),y.addOutputStream(g);const m=new n.CalculatorOptions;m.setExtension(p.ObjectDetectorOptions.ext,this.options);const _=new s.CalculatorGraphConfig.Node;_.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),_.addInputStream("IMAGE:"+f),_.addInputStream("NORM_RECT:"+d),_.addOutputStream("DETECTIONS:"+g),_.setOptions(m),y.addNode(_),this.graphRunner.attachProtoVectorListener(g,(M,S)=>{this.addJsObjectDetections(M),this.setLatestOutputTimestamp(S)}),this.graphRunner.attachEmptyPacketListener(g,M=>{this.setLatestOutputTimestamp(M)});const b=y.serializeBinary();this.setGraph(new Uint8Array(b),!0)}}t.ObjectDetector=u}(object_detector);var pose_landmarker={},pose_detector_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,s),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5),minSuppressionThreshold:e.Message.getFloatingPointFieldWithDefault(l,3,.5),numPoses:(c=e.Message.getField(l,4))==null?void 0:c};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;case 3:c=l.readFloat(),p.setMinSuppressionThreshold(c);break;case 4:c=l.readInt32(),p.setNumPoses(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c),(c=e.Message.getField(p,3))!=null&&l.writeFloat(3,c),(c=e.Message.getField(p,4))!=null&&l.writeInt32(4,c)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new e.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[514774813]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(p){return e.Message.setField(this,4,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new e.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[514774813]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.pose_detector.proto)})(pose_detector_graph_options_pb);var pose_landmarker_graph_options_pb={},pose_landmarks_detector_graph_options_pb={};(function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,s),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(p,l){var c,f={baseOptions:(c=l.getBaseOptions())&&o.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5)};return p&&(f.$jspbMessageInstance=l),f}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.BaseOptions;l.readMessage(c,o.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,o.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[518928384]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[518928384]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(pose_landmarks_detector_graph_options_pb),function(t){var e=googleProtobuf,r=e,s=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||s!==void 0&&s||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),n=calculator_pb;r.object.extend(proto,n);var i=calculator_options_pb;r.object.extend(proto,i);var o=base_options_pb;r.object.extend(proto,o);var p=pose_detector_graph_options_pb;r.object.extend(proto,p);var l=pose_landmarks_detector_graph_options_pb;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,s),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function(c,f){var d,g={baseOptions:(d=f.getBaseOptions())&&o.BaseOptions.toObject(c,d),poseDetectorGraphOptions:(d=f.getPoseDetectorGraphOptions())&&p.PoseDetectorGraphOptions.toObject(c,d),poseLandmarksDetectorGraphOptions:(d=f.getPoseLandmarksDetectorGraphOptions())&&l.PoseLandmarksDetectorGraphOptions.toObject(c,d),minTrackingConfidence:e.Message.getFloatingPointFieldWithDefault(f,4,.5)};return c&&(g.$jspbMessageInstance=f),g}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function(c){var f=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(d,f)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function(c,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var d=new o.BaseOptions;f.readMessage(d,o.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new p.PoseDetectorGraphOptions,f.readMessage(d,p.PoseDetectorGraphOptions.deserializeBinaryFromReader),c.setPoseDetectorGraphOptions(d);break;case 3:d=new l.PoseLandmarksDetectorGraphOptions,f.readMessage(d,l.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),c.setPoseLandmarksDetectorGraphOptions(d);break;case 4:d=f.readFloat(),c.setMinTrackingConfidence(d);break;default:f.skipField()}return c},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function(c,f){var d=void 0;(d=c.getBaseOptions())!=null&&f.writeMessage(1,d,o.BaseOptions.serializeBinaryToWriter),(d=c.getPoseDetectorGraphOptions())!=null&&f.writeMessage(2,d,p.PoseDetectorGraphOptions.serializeBinaryToWriter),(d=c.getPoseLandmarksDetectorGraphOptions())!=null&&f.writeMessage(3,d,l.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),(d=e.Message.getField(c,4))!=null&&f.writeFloat(4,d)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[516587230]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return e.Message.getWrapperField(this,p.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return e.Message.getWrapperField(this,l.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(c){return e.Message.setField(this,4,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[516587230]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarker_graph_options_pb);var pose_landmarker_result={};Object.defineProperty(pose_landmarker_result,"__esModule",{value:!0}),pose_landmarker_result.PoseLandmarkerResult=void 0;class PoseLandmarkerResult{constructor(e,r,s){this.landmarks=e,this.worldLandmarks=r,this.segmentationMasks=s}close(){var e;(e=this.segmentationMasks)===null||e===void 0||e.forEach(r=>{r.close()})}}pose_landmarker_result.PoseLandmarkerResult=PoseLandmarkerResult;var pose_landmarker_options={};Object.defineProperty(pose_landmarker_options,"__esModule",{value:!0}),function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(S,v,E,T){T===void 0&&(T=E);var A=Object.getOwnPropertyDescriptor(v,E);A&&!("get"in A?!v.__esModule:A.writable||A.configurable)||(A={enumerable:!0,get:function(){return v[E]}}),Object.defineProperty(S,T,A)}:function(S,v,E,T){T===void 0&&(T=E),S[T]=v[E]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(S,v){for(var E in S)E==="default"||Object.prototype.hasOwnProperty.call(v,E)||e(v,S,E)};Object.defineProperty(t,"__esModule",{value:!0}),t.PoseLandmarker=void 0;const s=calculator_pb,n=calculator_options_pb,i=landmark_pb,o=base_options_pb,p=pose_detector_graph_options_pb,l=pose_landmarker_graph_options_pb,c=pose_landmarks_detector_graph_options_pb,f=landmark_result,d=vision_task_runner,g=pose_landmarker_result;r(pose_landmarker_options,t),r(pose_landmarker_result,t);const u="image_in",h="norm_rect",y="normalized_landmarks",m="world_landmarks",_="segmentation_masks",b=.5;class M extends d.VisionTaskRunner{static createFromOptions(v,E){return d.VisionTaskRunner.createVisionInstance(M,v,E)}static createFromModelBuffer(v,E){return d.VisionTaskRunner.createVisionInstance(M,v,{baseOptions:{modelAssetBuffer:E}})}static createFromModelPath(v,E){return d.VisionTaskRunner.createVisionInstance(M,v,{baseOptions:{modelAssetPath:E}})}constructor(v,E){super(new d.VisionGraphRunner(v,E),u,h,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new l.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new o.BaseOptions),this.poseLandmarksDetectorGraphOptions=new c.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new p.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(v){this.options.setBaseOptions(v)}setOptions(v){var E,T,A,R,x;return"numPoses"in v&&this.poseDetectorGraphOptions.setNumPoses((E=v.numPoses)!==null&&E!==void 0?E:1),"minPoseDetectionConfidence"in v&&this.poseDetectorGraphOptions.setMinDetectionConfidence((T=v.minPoseDetectionConfidence)!==null&&T!==void 0?T:b),"minTrackingConfidence"in v&&this.options.setMinTrackingConfidence((A=v.minTrackingConfidence)!==null&&A!==void 0?A:b),"minPosePresenceConfidence"in v&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence((R=v.minPosePresenceConfidence)!==null&&R!==void 0?R:b),"outputSegmentationMasks"in v&&(this.outputSegmentationMasks=(x=v.outputSegmentationMasks)!==null&&x!==void 0&&x),this.applyOptions(v)}detect(v,E,T){const A=typeof E!="function"?E:{};return this.userCallback=typeof E=="function"?E:T,this.resetResults(),this.processImageData(v,A),this.processResults()}detectForVideo(v,E,T,A){const R=typeof T!="function"?T:{};return this.userCallback=typeof T=="function"?T:A,this.resetResults(),this.processVideoData(v,R,E),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{const v=new g.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return v;this.userCallback(v)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(b),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(b),this.options.setMinTrackingConfidence(b)}addJsLandmarks(v){this.landmarks=[];for(const E of v){const T=i.NormalizedLandmarkList.deserializeBinary(E);this.landmarks.push((0,f.convertToLandmarks)(T))}}adddJsWorldLandmarks(v){this.worldLandmarks=[];for(const E of v){const T=i.LandmarkList.deserializeBinary(E);this.worldLandmarks.push((0,f.convertToWorldLandmarks)(T))}}refreshGraph(){const v=new s.CalculatorGraphConfig;v.addInputStream(u),v.addInputStream(h),v.addOutputStream(y),v.addOutputStream(m),v.addOutputStream(_);const E=new n.CalculatorOptions;E.setExtension(l.PoseLandmarkerGraphOptions.ext,this.options);const T=new s.CalculatorGraphConfig.Node;T.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),T.addInputStream("IMAGE:"+u),T.addInputStream("NORM_RECT:"+h),T.addOutputStream("NORM_LANDMARKS:"+y),T.addOutputStream("WORLD_LANDMARKS:"+m),T.setOptions(E),v.addNode(T),this.addKeepaliveNode(v),this.graphRunner.attachProtoVectorListener(y,(R,x)=>{this.addJsLandmarks(R),this.setLatestOutputTimestamp(x)}),this.graphRunner.attachEmptyPacketListener(y,R=>{this.landmarks=[],this.setLatestOutputTimestamp(R)}),this.graphRunner.attachProtoVectorListener(m,(R,x)=>{this.adddJsWorldLandmarks(R),this.setLatestOutputTimestamp(x)}),this.graphRunner.attachEmptyPacketListener(m,R=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(R)}),this.outputSegmentationMasks&&(T.addOutputStream("SEGMENTATION_MASK:"+_),this.keepStreamAlive(_),this.graphRunner.attachImageVectorListener(_,(R,x)=>{this.segmentationMasks=R.map(C=>this.convertToMPMask(C,!this.userCallback)),this.setLatestOutputTimestamp(x)}),this.graphRunner.attachEmptyPacketListener(_,R=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(R)}));const A=v.serializeBinary();this.setGraph(new Uint8Array(A),!0)}}t.PoseLandmarker=M,M.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]}(pose_landmarker),Object.defineProperty(vision,"__esModule",{value:!0});vision.PoseLandmarker=vision.ObjectDetector=vision.InteractiveSegmenter=vision.ImageSegmenter=vision.ImageEmbedder=vision.ImageClassifier=vision.HandLandmarker=vision.GestureRecognizer=vision.FaceStylizer=FaceLandmarker_1=vision.FaceLandmarker=vision.FaceDetector=vision.MPMask=vision.MPImage=FilesetResolver_1=vision.FilesetResolver=vision.DrawingUtils=void 0;const fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,image_1=image,mask_1=mask,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,pose_landmarker_1=pose_landmarker,DrawingUtils=drawing_utils_1.DrawingUtils;vision.DrawingUtils=DrawingUtils;const FilesetResolver=fileset_resolver_1.FilesetResolver;var FilesetResolver_1=vision.FilesetResolver=FilesetResolver;const MPImage=image_1.MPImage;vision.MPImage=MPImage;const MPMask=mask_1.MPMask;vision.MPMask=MPMask;const FaceDetector=face_detector_1.FaceDetector;vision.FaceDetector=FaceDetector;const FaceLandmarker=face_landmarker_1.FaceLandmarker;var FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker;const FaceStylizer=face_stylizer_1.FaceStylizer;vision.FaceStylizer=FaceStylizer;const GestureRecognizer=gesture_recognizer_1.GestureRecognizer;vision.GestureRecognizer=GestureRecognizer;const HandLandmarker=hand_landmarker_1.HandLandmarker;vision.HandLandmarker=HandLandmarker;const ImageClassifier=image_classifier_1.ImageClassifier;vision.ImageClassifier=ImageClassifier;const ImageEmbedder=image_embedder_1.ImageEmbedder;vision.ImageEmbedder=ImageEmbedder;const ImageSegmenter=image_segmenter_1.ImageSegmenter;vision.ImageSegmenter=ImageSegmenter;const InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter;vision.InteractiveSegmenter=InteractiveSegmenter;const ObjectDetector=object_detector_1.ObjectDetector;vision.ObjectDetector=ObjectDetector;const PoseLandmarker=pose_landmarker_1.PoseLandmarker;vision.PoseLandmarker=PoseLandmarker;class FaceTracker{constructor(){Xe(this,"landmarker");Xe(this,"points",Array.from({length:468+10},()=>new Vector3));Xe(this,"transform",new Matrix4);Xe(this,"direction",new Vector3);Xe(this,"ray",new Ray);Xe(this,"intersection",new Vector3)}async init(){const e=await FilesetResolver_1.forVisionTasks("./wasm");this.landmarker=await FaceLandmarker_1.createFromOptions(e,{baseOptions:{modelAssetPath:"./face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numFaces:1,outputFacialTransformationMatrixes:!0,outputFaceBlendshapes:!1})}update(e){const{faceLandmarks:[r],facialTransformationMatrixes:[s]}=this.landmarker.detectForVideo(e.video,performance.now());r&&(r.forEach(({x:n,y:i,z:o},p)=>{this.points[p].set((n-.5)*e.width*1,(i-.5)*e.height*-1,o*e.width*-1)}),this.transform.fromArray(s.data),this.direction.setFromMatrixColumn(this.transform,2),this.ray.set(this.points[168],this.direction),this.ray.intersectPlane(e.plane,this.intersection))}get irisWidthInPx(){const e=this.points[469].distanceTo(this.points[471]),r=this.points[474].distanceTo(this.points[476]);return(e+r)/2}}const SCREEN_HALF_WIDTH=window.screen.width/2,SCREEN_HALF_HEIGHT=window.screen.height/2;class FaceControls{constructor({containerId:e,diagonalFov:r,irisWidth:s=12,screenDiagonal:n,cb:i}){Xe(this,"container");Xe(this,"camera");Xe(this,"tracker");Xe(this,"irisWidth");Xe(this,"screenHalfScaleReal");Xe(this,"screen",{halfScale:new Vector3,center:new Vector3(0,0,0)});Xe(this,"target",new Vector3);Xe(this,"kalman",new kalmanFilter.KalmanFilter({observation:{name:"sensor",sensorDimension:2},dynamic:{name:"constant-position",covariance:[.005,.005]}}));Xe(this,"kalmanState");this.container=document.createElement("div"),this.container.id=e,document.body.appendChild(this.container),this.irisWidth=s;const o=Math.hypot(window.screen.width,window.screen.height)/(n*2.54*10);this.screenHalfScaleReal=new Vector3(SCREEN_HALF_WIDTH/o,SCREEN_HALF_HEIGHT/o),this.camera=new FaceCamera(this.container,r),this.camera.init().then(async()=>{this.tracker=new FaceTracker,await this.tracker.init(),this.loop(),i(this)})}get irisRatio(){return this.tracker.irisWidthInPx/this.irisWidth}loop(){if(this.tracker.update(this.camera),this.screen.halfScale.copy(this.screenHalfScaleReal).multiplyScalar(this.irisRatio),this.screen.center.setY(-this.screen.halfScale.y),this.target.copy(this.tracker.intersection).sub(this.screen.center).divide(this.screen.halfScale),!isNaN(this.target.x)){this.target.setX((1-this.target.x)*SCREEN_HALF_WIDTH),this.target.setY((1-this.target.y)*SCREEN_HALF_HEIGHT),this.kalmanState=this.kalman.filter({previousCorrected:this.kalmanState,observation:[this.target.x,this.target.y]});const{mean:e}=this.kalmanState;this.target.setX(e[0][0]),this.target.setY(e[1][0])}requestAnimationFrame(()=>this.loop())}}const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"},_ray=new Ray,_plane=new Plane,TILT_LIMIT=Math.cos(70*MathUtils.DEG2RAD);class OrbitControls extends EventDispatcher{constructor(e,r){super(),this.object=e,this.domElement=r,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(P){P.addEventListener("keydown",w),this._domElementKeyEvents=P},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",w),this._domElementKeyEvents=null},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(_changeEvent),s.update(),i=n.NONE},this.update=function(){const P=new Vector3,Q=new Quaternion().setFromUnitVectors(e.up,new Vector3(0,1,0)),ge=Q.clone().invert(),pe=new Vector3,ue=new Quaternion,Ae=new Vector3,De=2*Math.PI;return function(){const de=s.object.position;P.copy(de).sub(s.target),P.applyQuaternion(Q),p.setFromVector3(P),s.autoRotate&&i===n.NONE&&C(R()),s.enableDamping?(p.theta+=l.theta*s.dampingFactor,p.phi+=l.phi*s.dampingFactor):(p.theta+=l.theta,p.phi+=l.phi);let Y=s.minAzimuthAngle,oe=s.maxAzimuthAngle;isFinite(Y)&&isFinite(oe)&&(Y<-Math.PI?Y+=De:Y>Math.PI&&(Y-=De),oe<-Math.PI?oe+=De:oe>Math.PI&&(oe-=De),Y<=oe?p.theta=Math.max(Y,Math.min(oe,p.theta)):p.theta=p.theta>(Y+oe)/2?Math.max(Y,p.theta):Math.min(oe,p.theta)),p.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,p.phi)),p.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(f,s.dampingFactor):s.target.add(f),s.zoomToCursor&&E||s.object.isOrthographicCamera?p.radius=H(p.radius):p.radius=H(p.radius*c),P.setFromSpherical(p),P.applyQuaternion(ge),de.copy(s.target).add(P),s.object.lookAt(s.target),s.enableDamping===!0?(l.theta*=1-s.dampingFactor,l.phi*=1-s.dampingFactor,f.multiplyScalar(1-s.dampingFactor)):(l.set(0,0,0),f.set(0,0,0));let ce=!1;if(s.zoomToCursor&&E){let we=null;if(s.object.isPerspectiveCamera){const Pe=P.length();we=H(Pe*c);const Ne=Pe-we;s.object.position.addScaledVector(S,Ne),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Pe=new Vector3(v.x,v.y,0);Pe.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/c)),s.object.updateProjectionMatrix(),ce=!0;const Ne=new Vector3(v.x,v.y,0);Ne.unproject(s.object),s.object.position.sub(Ne).add(Pe),s.object.updateMatrixWorld(),we=P.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;we!==null&&(this.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(we).add(s.object.position):(_ray.origin.copy(s.object.position),_ray.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(_ray.direction))<TILT_LIMIT?e.lookAt(s.target):(_plane.setFromNormalAndCoplanarPoint(s.object.up,s.target),_ray.intersectPlane(_plane,s.target))))}else s.object.isOrthographicCamera&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/c)),s.object.updateProjectionMatrix(),ce=!0);return c=1,E=!1,ce||pe.distanceToSquared(s.object.position)>o||8*(1-ue.dot(s.object.quaternion))>o||Ae.distanceToSquared(s.target)>0?(s.dispatchEvent(_changeEvent),pe.copy(s.object.position),ue.copy(s.object.quaternion),Ae.copy(s.target),ce=!1,!0):!1}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",re),s.domElement.removeEventListener("pointerdown",Ce),s.domElement.removeEventListener("pointercancel",Ie),s.domElement.removeEventListener("wheel",D),s.domElement.removeEventListener("pointermove",Te),s.domElement.removeEventListener("pointerup",Ie),s._domElementKeyEvents!==null&&(s._domElementKeyEvents.removeEventListener("keydown",w),s._domElementKeyEvents=null)};const s=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=n.NONE;const o=1e-6,p=new Spherical,l=new Spherical;let c=1;const f=new Vector3,d=new Vector2,g=new Vector2,u=new Vector2,h=new Vector2,y=new Vector2,m=new Vector2,_=new Vector2,b=new Vector2,M=new Vector2,S=new Vector3,v=new Vector2;let E=!1;const T=[],A={};function R(){return 2*Math.PI/60/60*s.autoRotateSpeed}function x(){return Math.pow(.95,s.zoomSpeed)}function C(P){l.theta-=P}function O(P){l.phi-=P}const F=function(){const P=new Vector3;return function(ge,pe){P.setFromMatrixColumn(pe,0),P.multiplyScalar(-ge),f.add(P)}}(),L=function(){const P=new Vector3;return function(ge,pe){s.screenSpacePanning===!0?P.setFromMatrixColumn(pe,1):(P.setFromMatrixColumn(pe,0),P.crossVectors(s.object.up,P)),P.multiplyScalar(ge),f.add(P)}}(),I=function(){const P=new Vector3;return function(ge,pe){const ue=s.domElement;if(s.object.isPerspectiveCamera){const Ae=s.object.position;P.copy(Ae).sub(s.target);let De=P.length();De*=Math.tan(s.object.fov/2*Math.PI/180),F(2*ge*De/ue.clientHeight,s.object.matrix),L(2*pe*De/ue.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(F(ge*(s.object.right-s.object.left)/s.object.zoom/ue.clientWidth,s.object.matrix),L(pe*(s.object.top-s.object.bottom)/s.object.zoom/ue.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function N(P){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?c/=P:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function k(P){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?c*=P:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function U(P){if(!s.zoomToCursor)return;E=!0;const Q=s.domElement.getBoundingClientRect(),ge=P.clientX-Q.left,pe=P.clientY-Q.top,ue=Q.width,Ae=Q.height;v.x=ge/ue*2-1,v.y=-(pe/Ae)*2+1,S.set(v.x,v.y,1).unproject(e).sub(e.position).normalize()}function H(P){return Math.max(s.minDistance,Math.min(s.maxDistance,P))}function W(P){d.set(P.clientX,P.clientY)}function z(P){U(P),_.set(P.clientX,P.clientY)}function j(P){h.set(P.clientX,P.clientY)}function ee(P){g.set(P.clientX,P.clientY),u.subVectors(g,d).multiplyScalar(s.rotateSpeed);const Q=s.domElement;C(2*Math.PI*u.x/Q.clientHeight),O(2*Math.PI*u.y/Q.clientHeight),d.copy(g),s.update()}function te(P){b.set(P.clientX,P.clientY),M.subVectors(b,_),M.y>0?N(x()):M.y<0&&k(x()),_.copy(b),s.update()}function ie(P){y.set(P.clientX,P.clientY),m.subVectors(y,h).multiplyScalar(s.panSpeed),I(m.x,m.y),h.copy(y),s.update()}function le(P){U(P),P.deltaY<0?k(x()):P.deltaY>0&&N(x()),s.update()}function me(P){let Q=!1;switch(P.code){case s.keys.UP:P.ctrlKey||P.metaKey||P.shiftKey?O(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):I(0,s.keyPanSpeed),Q=!0;break;case s.keys.BOTTOM:P.ctrlKey||P.metaKey||P.shiftKey?O(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):I(0,-s.keyPanSpeed),Q=!0;break;case s.keys.LEFT:P.ctrlKey||P.metaKey||P.shiftKey?C(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):I(s.keyPanSpeed,0),Q=!0;break;case s.keys.RIGHT:P.ctrlKey||P.metaKey||P.shiftKey?C(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):I(-s.keyPanSpeed,0),Q=!0;break}Q&&(P.preventDefault(),s.update())}function fe(){if(T.length===1)d.set(T[0].pageX,T[0].pageY);else{const P=.5*(T[0].pageX+T[1].pageX),Q=.5*(T[0].pageY+T[1].pageY);d.set(P,Q)}}function Oe(){if(T.length===1)h.set(T[0].pageX,T[0].pageY);else{const P=.5*(T[0].pageX+T[1].pageX),Q=.5*(T[0].pageY+T[1].pageY);h.set(P,Q)}}function Ue(){const P=T[0].pageX-T[1].pageX,Q=T[0].pageY-T[1].pageY,ge=Math.sqrt(P*P+Q*Q);_.set(0,ge)}function Ee(){s.enableZoom&&Ue(),s.enablePan&&Oe()}function q(){s.enableZoom&&Ue(),s.enableRotate&&fe()}function je(P){if(T.length==1)g.set(P.pageX,P.pageY);else{const ge=K(P),pe=.5*(P.pageX+ge.x),ue=.5*(P.pageY+ge.y);g.set(pe,ue)}u.subVectors(g,d).multiplyScalar(s.rotateSpeed);const Q=s.domElement;C(2*Math.PI*u.x/Q.clientHeight),O(2*Math.PI*u.y/Q.clientHeight),d.copy(g)}function _e(P){if(T.length===1)y.set(P.pageX,P.pageY);else{const Q=K(P),ge=.5*(P.pageX+Q.x),pe=.5*(P.pageY+Q.y);y.set(ge,pe)}m.subVectors(y,h).multiplyScalar(s.panSpeed),I(m.x,m.y),h.copy(y)}function ve(P){const Q=K(P),ge=P.pageX-Q.x,pe=P.pageY-Q.y,ue=Math.sqrt(ge*ge+pe*pe);b.set(0,ue),M.set(0,Math.pow(b.y/_.y,s.zoomSpeed)),N(M.y),_.copy(b)}function Me(P){s.enableZoom&&ve(P),s.enablePan&&_e(P)}function ke(P){s.enableZoom&&ve(P),s.enableRotate&&je(P)}function Ce(P){s.enabled!==!1&&(T.length===0&&(s.domElement.setPointerCapture(P.pointerId),s.domElement.addEventListener("pointermove",Te),s.domElement.addEventListener("pointerup",Ie)),ae(P),P.pointerType==="touch"?X(P):We(P))}function Te(P){s.enabled!==!1&&(P.pointerType==="touch"?ne(P):ze(P))}function Ie(P){ye(P),T.length===0&&(s.domElement.releasePointerCapture(P.pointerId),s.domElement.removeEventListener("pointermove",Te),s.domElement.removeEventListener("pointerup",Ie)),s.dispatchEvent(_endEvent),i=n.NONE}function We(P){let Q;switch(P.button){case 0:Q=s.mouseButtons.LEFT;break;case 1:Q=s.mouseButtons.MIDDLE;break;case 2:Q=s.mouseButtons.RIGHT;break;default:Q=-1}switch(Q){case MOUSE.DOLLY:if(s.enableZoom===!1)return;z(P),i=n.DOLLY;break;case MOUSE.ROTATE:if(P.ctrlKey||P.metaKey||P.shiftKey){if(s.enablePan===!1)return;j(P),i=n.PAN}else{if(s.enableRotate===!1)return;W(P),i=n.ROTATE}break;case MOUSE.PAN:if(P.ctrlKey||P.metaKey||P.shiftKey){if(s.enableRotate===!1)return;W(P),i=n.ROTATE}else{if(s.enablePan===!1)return;j(P),i=n.PAN}break;default:i=n.NONE}i!==n.NONE&&s.dispatchEvent(_startEvent)}function ze(P){switch(i){case n.ROTATE:if(s.enableRotate===!1)return;ee(P);break;case n.DOLLY:if(s.enableZoom===!1)return;te(P);break;case n.PAN:if(s.enablePan===!1)return;ie(P);break}}function D(P){s.enabled===!1||s.enableZoom===!1||i!==n.NONE||(P.preventDefault(),s.dispatchEvent(_startEvent),le(P),s.dispatchEvent(_endEvent))}function w(P){s.enabled===!1||s.enablePan===!1||me(P)}function X(P){switch(se(P),T.length){case 1:switch(s.touches.ONE){case TOUCH.ROTATE:if(s.enableRotate===!1)return;fe(),i=n.TOUCH_ROTATE;break;case TOUCH.PAN:if(s.enablePan===!1)return;Oe(),i=n.TOUCH_PAN;break;default:i=n.NONE}break;case 2:switch(s.touches.TWO){case TOUCH.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Ee(),i=n.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;q(),i=n.TOUCH_DOLLY_ROTATE;break;default:i=n.NONE}break;default:i=n.NONE}i!==n.NONE&&s.dispatchEvent(_startEvent)}function ne(P){switch(se(P),i){case n.TOUCH_ROTATE:if(s.enableRotate===!1)return;je(P),s.update();break;case n.TOUCH_PAN:if(s.enablePan===!1)return;_e(P),s.update();break;case n.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Me(P),s.update();break;case n.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;ke(P),s.update();break;default:i=n.NONE}}function re(P){s.enabled!==!1&&P.preventDefault()}function ae(P){T.push(P)}function ye(P){delete A[P.pointerId];for(let Q=0;Q<T.length;Q++)if(T[Q].pointerId==P.pointerId){T.splice(Q,1);return}}function se(P){let Q=A[P.pointerId];Q===void 0&&(Q=new Vector2,A[P.pointerId]=Q),Q.set(P.pageX,P.pageY)}function K(P){const Q=P.pointerId===T[0].pointerId?T[1]:T[0];return A[Q.pointerId]}s.domElement.addEventListener("contextmenu",re),s.domElement.addEventListener("pointerdown",Ce),s.domElement.addEventListener("pointercancel",Ie),s.domElement.addEventListener("wheel",D,{passive:!1}),this.update()}}class CSS2DObject extends Object3D{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Vector2(.5,.5),this.addEventListener("removed",function(){this.traverse(function(r){r.element instanceof Element&&r.element.parentNode!==null&&r.element.parentNode.removeChild(r.element)})})}copy(e,r){return super.copy(e,r),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const _vector=new Vector3,_viewMatrix=new Matrix4,_viewProjectionMatrix=new Matrix4,_a=new Vector3,_b=new Vector3;class CSS2DRenderer{constructor(e={}){const r=this;let s,n,i,o;const p={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:s,height:n}},this.render=function(u,h){u.matrixWorldAutoUpdate===!0&&u.updateMatrixWorld(),h.parent===null&&h.matrixWorldAutoUpdate===!0&&h.updateMatrixWorld(),_viewMatrix.copy(h.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(h.projectionMatrix,_viewMatrix),c(u,u,h),g(u)},this.setSize=function(u,h){s=u,n=h,i=s/2,o=n/2,l.style.width=u+"px",l.style.height=h+"px"};function c(u,h,y){if(u.isCSS2DObject){_vector.setFromMatrixPosition(u.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const m=u.visible===!0&&_vector.z>=-1&&_vector.z<=1&&u.layers.test(y.layers)===!0;if(u.element.style.display=m===!0?"":"none",m===!0){u.onBeforeRender(r,h,y);const b=u.element;b.style.transform="translate("+-100*u.center.x+"%,"+-100*u.center.y+"%)translate("+(_vector.x*i+i)+"px,"+(-_vector.y*o+o)+"px)",b.parentNode!==l&&l.appendChild(b),u.onAfterRender(r,h,y)}const _={distanceToCameraSquared:f(y,u)};p.objects.set(u,_)}for(let m=0,_=u.children.length;m<_;m++)c(u.children[m],h,y)}function f(u,h){return _a.setFromMatrixPosition(u.matrixWorld),_b.setFromMatrixPosition(h.matrixWorld),_a.distanceToSquared(_b)}function d(u){const h=[];return u.traverse(function(y){y.isCSS2DObject&&h.push(y)}),h}function g(u){const h=d(u).sort(function(m,_){if(m.renderOrder!==_.renderOrder)return _.renderOrder-m.renderOrder;const b=p.objects.get(m).distanceToCameraSquared,M=p.objects.get(_).distanceToCameraSquared;return b-M}),y=h.length;for(let m=0,_=h.length;m<_;m++)h[m].element.style.zIndex=y-m}}}const diagonalToVerticalFov=(t,e)=>MathUtils.radToDeg(2*Math.atan(Math.tan(t/2)*Math.sin(Math.atan(1/e)))),createScene=t=>{const e=diagonalToVerticalFov(t.camera.diagonalFov,t.camera.aspectRatio),r=new PerspectiveCamera(e,t.camera.aspectRatio,.1,t.camera.focalLength*5);r.position.setZ(t.camera.focalLength),r.lookAt(0,0,0);const s=new WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});s.setSize(t.camera.width,t.camera.height),t.container.appendChild(s.domElement);const n=new Scene;new OrbitControls(r,s.domElement);const i=new BufferGeometry;i.setIndex(FaceLandmarker_1.FACE_LANDMARKS_TESSELATION.map(({start:b})=>b));const o=new Mesh(i,new MeshNormalMaterial({side:DoubleSide}));n.add(o);const p=new ArrowHelper(new Vector3,new Vector3,1e3,15549252,15,10);o.add(p);const l=r.clone();l.far=t.camera.focalLength;const c=new CameraHelper(l);n.add(c),r.position.set(500,200,1100),r.lookAt(0,0,0),r.position.set(450,180,1120),new Mesh(new PlaneGeometry(1e3,500),new MeshBasicMaterial({color:1401481,side:DoubleSide,transparent:!0,opacity:.5})).position.set(0,0,t.camera.plane.constant);const d=new Mesh(new SphereGeometry(10),new MeshNormalMaterial({side:DoubleSide}));n.add(d);const g=[...new Array(2)].map(()=>new Mesh(new CircleGeometry(1),new MeshBasicMaterial({color:15549252})));n.add(...g);const u=new Mesh(new PlaneGeometry,new MeshBasicMaterial({color:16773632,side:DoubleSide,transparent:!0,opacity:.5}));u.position.setZ(t.camera.focalLength),n.add(u);const h=document.createElement("div");h.id="coords";const y=new CSS2DObject(h);y.position.set(0,0,0),y.center.set(-.3,.1),d.add(y);const m=new CSS2DRenderer;m.setSize(t.container.clientWidth,t.container.clientHeight),t.container.appendChild(m.domElement);const _=()=>{o.geometry.setFromPoints(t.tracker.points),o.geometry.computeVertexNormals(),p.position.copy(t.tracker.ray.origin),p.setDirection(t.tracker.ray.direction),d.position.copy(t.tracker.intersection),h.textContent=[t.target.x,t.target.y].map(b=>b.toFixed(2)).join(", "),g.forEach((b,M)=>{const S=M?473:468;b.position.copy(t.tracker.points[S]),b.scale.set(t.tracker.irisWidthInPx/2,t.tracker.irisWidthInPx/2,1)}),u.position.setX(t.screen.center.x),u.position.setY(t.screen.center.y),u.scale.copy(t.screen.halfScale).multiplyScalar(2),s.render(n,r),m.render(n,r),requestAnimationFrame(_)};_()};var matter={exports:{}};/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(s,n){t.exports=n()})(commonjsGlobal$1,function(){return function(r){var s={};function n(i){if(s[i])return s[i].exports;var o=s[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=r,n.c=s,n.d=function(i,o,p){n.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:p})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,o){if(o&1&&(i=n(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var p=Object.create(null);if(n.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var l in i)n.d(p,l,function(c){return i[c]}.bind(null,l));return p},n.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(o,"a",o),o},n.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},n.p="",n(n.s=20)}([function(r,s){var n={};r.exports=n,function(){n._baseDelta=1e3/60,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(o,p){var l,c;typeof p=="boolean"?(l=2,c=p):(l=1,c=!0);for(var f=l;f<arguments.length;f++){var d=arguments[f];if(d)for(var g in d)c&&d[g]&&d[g].constructor===Object&&(!o[g]||o[g].constructor===Object)?(o[g]=o[g]||{},n.extend(o[g],c,d[g])):o[g]=d[g]}return o},n.clone=function(o,p){return n.extend({},p,o)},n.keys=function(o){if(Object.keys)return Object.keys(o);var p=[];for(var l in o)p.push(l);return p},n.values=function(o){var p=[];if(Object.keys){for(var l=Object.keys(o),c=0;c<l.length;c++)p.push(o[l[c]]);return p}for(var f in o)p.push(o[f]);return p},n.get=function(o,p,l,c){p=p.split(".").slice(l,c);for(var f=0;f<p.length;f+=1)o=o[p[f]];return o},n.set=function(o,p,l,c,f){var d=p.split(".").slice(c,f);return n.get(o,p,0,-1)[d[d.length-1]]=l,l},n.shuffle=function(o){for(var p=o.length-1;p>0;p--){var l=Math.floor(n.random()*(p+1)),c=o[p];o[p]=o[l],o[l]=c}return o},n.choose=function(o){return o[Math.floor(n.random()*o.length)]},n.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},n.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},n.isFunction=function(o){return typeof o=="function"},n.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},n.isString=function(o){return toString.call(o)==="[object String]"},n.clamp=function(o,p,l){return o<p?p:o>l?l:o},n.sign=function(o){return o<0?-1:1},n.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(o,p){return o=typeof o<"u"?o:0,p=typeof p<"u"?p:1,o+i()*(p-o)};var i=function(){return n._seed=(n._seed*9301+49297)%233280,n._seed/233280};n.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[o]||(n.warn(o),n._warnedOnce[o]=!0)},n.deprecated=function(o,p,l){o[p]=n.chain(function(){n.warnOnce(" deprecated ",l)},o[p])},n.nextId=function(){return n._nextId++},n.indexOf=function(o,p){if(o.indexOf)return o.indexOf(p);for(var l=0;l<o.length;l++)if(o[l]===p)return l;return-1},n.map=function(o,p){if(o.map)return o.map(p);for(var l=[],c=0;c<o.length;c+=1)l.push(p(o[c]));return l},n.topologicalSort=function(o){var p=[],l=[],c=[];for(var f in o)!l[f]&&!c[f]&&n._topologicalSort(f,l,c,o,p);return p},n._topologicalSort=function(o,p,l,c,f){var d=c[o]||[];l[o]=!0;for(var g=0;g<d.length;g+=1){var u=d[g];l[u]||p[u]||n._topologicalSort(u,p,l,c,f)}l[o]=!1,p[o]=!0,f.push(o)},n.chain=function(){for(var o=[],p=0;p<arguments.length;p+=1){var l=arguments[p];l._chained?o.push.apply(o,l._chained):o.push(l)}var c=function(){for(var f,d=new Array(arguments.length),g=0,u=arguments.length;g<u;g++)d[g]=arguments[g];for(g=0;g<o.length;g+=1){var h=o[g].apply(f,d);typeof h<"u"&&(f=h)}return f};return c._chained=o,c},n.chainPathBefore=function(o,p,l){return n.set(o,p,n.chain(l,n.get(o,p)))},n.chainPathAfter=function(o,p,l){return n.set(o,p,n.chain(n.get(o,p),l))},n.setDecomp=function(o){n._decomp=o},n.getDecomp=function(){var o=n._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof commonjsGlobal$1<"u"&&(o=commonjsGlobal$1.decomp)}catch{o=null}return o}}()},function(r,s){var n={};r.exports=n,function(){n.create=function(i){var o={min:{x:0,y:0},max:{x:0,y:0}};return i&&n.update(o,i),o},n.update=function(i,o,p){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var l=0;l<o.length;l++){var c=o[l];c.x>i.max.x&&(i.max.x=c.x),c.x<i.min.x&&(i.min.x=c.x),c.y>i.max.y&&(i.max.y=c.y),c.y<i.min.y&&(i.min.y=c.y)}p&&(p.x>0?i.max.x+=p.x:i.min.x+=p.x,p.y>0?i.max.y+=p.y:i.min.y+=p.y)},n.contains=function(i,o){return o.x>=i.min.x&&o.x<=i.max.x&&o.y>=i.min.y&&o.y<=i.max.y},n.overlaps=function(i,o){return i.min.x<=o.max.x&&i.max.x>=o.min.x&&i.max.y>=o.min.y&&i.min.y<=o.max.y},n.translate=function(i,o){i.min.x+=o.x,i.max.x+=o.x,i.min.y+=o.y,i.max.y+=o.y},n.shift=function(i,o){var p=i.max.x-i.min.x,l=i.max.y-i.min.y;i.min.x=o.x,i.max.x=o.x+p,i.min.y=o.y,i.max.y=o.y+l}}()},function(r,s){var n={};r.exports=n,function(){n.create=function(i,o){return{x:i||0,y:o||0}},n.clone=function(i){return{x:i.x,y:i.y}},n.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},n.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},n.rotate=function(i,o,p){var l=Math.cos(o),c=Math.sin(o);p||(p={});var f=i.x*l-i.y*c;return p.y=i.x*c+i.y*l,p.x=f,p},n.rotateAbout=function(i,o,p,l){var c=Math.cos(o),f=Math.sin(o);l||(l={});var d=p.x+((i.x-p.x)*c-(i.y-p.y)*f);return l.y=p.y+((i.x-p.x)*f+(i.y-p.y)*c),l.x=d,l},n.normalise=function(i){var o=n.magnitude(i);return o===0?{x:0,y:0}:{x:i.x/o,y:i.y/o}},n.dot=function(i,o){return i.x*o.x+i.y*o.y},n.cross=function(i,o){return i.x*o.y-i.y*o.x},n.cross3=function(i,o,p){return(o.x-i.x)*(p.y-i.y)-(o.y-i.y)*(p.x-i.x)},n.add=function(i,o,p){return p||(p={}),p.x=i.x+o.x,p.y=i.y+o.y,p},n.sub=function(i,o,p){return p||(p={}),p.x=i.x-o.x,p.y=i.y-o.y,p},n.mult=function(i,o){return{x:i.x*o,y:i.y*o}},n.div=function(i,o){return{x:i.x/o,y:i.y/o}},n.perp=function(i,o){return o=o===!0?-1:1,{x:o*-i.y,y:o*i.x}},n.neg=function(i){return{x:-i.x,y:-i.y}},n.angle=function(i,o){return Math.atan2(o.y-i.y,o.x-i.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}()},function(r,s,n){var i={};r.exports=i;var o=n(2),p=n(0);(function(){i.create=function(l,c){for(var f=[],d=0;d<l.length;d++){var g=l[d],u={x:g.x,y:g.y,index:d,body:c,isInternal:!1};f.push(u)}return f},i.fromPath=function(l,c){var f=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,d=[];return l.replace(f,function(g,u,h){d.push({x:parseFloat(u),y:parseFloat(h)})}),i.create(d,c)},i.centre=function(l){for(var c=i.area(l,!0),f={x:0,y:0},d,g,u,h=0;h<l.length;h++)u=(h+1)%l.length,d=o.cross(l[h],l[u]),g=o.mult(o.add(l[h],l[u]),d),f=o.add(f,g);return o.div(f,6*c)},i.mean=function(l){for(var c={x:0,y:0},f=0;f<l.length;f++)c.x+=l[f].x,c.y+=l[f].y;return o.div(c,l.length)},i.area=function(l,c){for(var f=0,d=l.length-1,g=0;g<l.length;g++)f+=(l[d].x-l[g].x)*(l[d].y+l[g].y),d=g;return c?f/2:Math.abs(f)/2},i.inertia=function(l,c){for(var f=0,d=0,g=l,u,h,y=0;y<g.length;y++)h=(y+1)%g.length,u=Math.abs(o.cross(g[h],g[y])),f+=u*(o.dot(g[h],g[h])+o.dot(g[h],g[y])+o.dot(g[y],g[y])),d+=u;return c/6*(f/d)},i.translate=function(l,c,f){f=typeof f<"u"?f:1;var d=l.length,g=c.x*f,u=c.y*f,h;for(h=0;h<d;h++)l[h].x+=g,l[h].y+=u;return l},i.rotate=function(l,c,f){if(c!==0){var d=Math.cos(c),g=Math.sin(c),u=f.x,h=f.y,y=l.length,m,_,b,M;for(M=0;M<y;M++)m=l[M],_=m.x-u,b=m.y-h,m.x=u+(_*d-b*g),m.y=h+(_*g+b*d);return l}},i.contains=function(l,c){for(var f=c.x,d=c.y,g=l.length,u=l[g-1],h,y=0;y<g;y++){if(h=l[y],(f-u.x)*(h.y-u.y)+(d-u.y)*(u.x-h.x)>0)return!1;u=h}return!0},i.scale=function(l,c,f,d){if(c===1&&f===1)return l;d=d||i.centre(l);for(var g,u,h=0;h<l.length;h++)g=l[h],u=o.sub(g,d),l[h].x=d.x+u.x*c,l[h].y=d.y+u.y*f;return l},i.chamfer=function(l,c,f,d,g){typeof c=="number"?c=[c]:c=c||[8],f=typeof f<"u"?f:-1,d=d||2,g=g||14;for(var u=[],h=0;h<l.length;h++){var y=l[h-1>=0?h-1:l.length-1],m=l[h],_=l[(h+1)%l.length],b=c[h<c.length?h:c.length-1];if(b===0){u.push(m);continue}var M=o.normalise({x:m.y-y.y,y:y.x-m.x}),S=o.normalise({x:_.y-m.y,y:m.x-_.x}),v=Math.sqrt(2*Math.pow(b,2)),E=o.mult(p.clone(M),b),T=o.normalise(o.mult(o.add(M,S),.5)),A=o.sub(m,o.mult(T,v)),R=f;f===-1&&(R=Math.pow(b,.32)*1.75),R=p.clamp(R,d,g),R%2===1&&(R+=1);for(var x=Math.acos(o.dot(M,S)),C=x/R,O=0;O<R;O++)u.push(o.add(o.rotate(E,C*O),A))}return u},i.clockwiseSort=function(l){var c=i.mean(l);return l.sort(function(f,d){return o.angle(c,f)-o.angle(c,d)}),l},i.isConvex=function(l){var c=0,f=l.length,d,g,u,h;if(f<3)return null;for(d=0;d<f;d++)if(g=(d+1)%f,u=(d+2)%f,h=(l[g].x-l[d].x)*(l[u].y-l[g].y),h-=(l[g].y-l[d].y)*(l[u].x-l[g].x),h<0?c|=1:h>0&&(c|=2),c===3)return!1;return c!==0?!0:null},i.hull=function(l){var c=[],f=[],d,g;for(l=l.slice(0),l.sort(function(u,h){var y=u.x-h.x;return y!==0?y:u.y-h.y}),g=0;g<l.length;g+=1){for(d=l[g];f.length>=2&&o.cross3(f[f.length-2],f[f.length-1],d)<=0;)f.pop();f.push(d)}for(g=l.length-1;g>=0;g-=1){for(d=l[g];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],d)<=0;)c.pop();c.push(d)}return c.pop(),f.pop(),c.concat(f)}})()},function(r,s,n){var i={};r.exports=i;var o=n(3),p=n(2),l=n(7),c=n(0),f=n(1),d=n(11);(function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(u){var h={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},y=c.extend(h,u);return g(y,u),y},i.nextGroup=function(u){return u?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var g=function(u,h){h=h||{},i.set(u,{bounds:u.bounds||f.create(u.vertices),positionPrev:u.positionPrev||p.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),o.rotate(u.vertices,u.angle,u.position),d.rotate(u.axes,u.angle),f.update(u.bounds,u.vertices,u.velocity),i.set(u,{axes:h.axes||u.axes,area:h.area||u.area,mass:h.mass||u.mass,inertia:h.inertia||u.inertia});var y=u.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=u.isStatic?"#555":"#ccc",_=u.isStatic&&u.render.fillStyle===null?1:0;u.render.fillStyle=u.render.fillStyle||y,u.render.strokeStyle=u.render.strokeStyle||m,u.render.lineWidth=u.render.lineWidth||_,u.render.sprite.xOffset+=-(u.bounds.min.x-u.position.x)/(u.bounds.max.x-u.bounds.min.x),u.render.sprite.yOffset+=-(u.bounds.min.y-u.position.y)/(u.bounds.max.y-u.bounds.min.y)};i.set=function(u,h,y){var m;typeof h=="string"&&(m=h,h={},h[m]=y);for(m in h)if(Object.prototype.hasOwnProperty.call(h,m))switch(y=h[m],m){case"isStatic":i.setStatic(u,y);break;case"isSleeping":l.set(u,y);break;case"mass":i.setMass(u,y);break;case"density":i.setDensity(u,y);break;case"inertia":i.setInertia(u,y);break;case"vertices":i.setVertices(u,y);break;case"position":i.setPosition(u,y);break;case"angle":i.setAngle(u,y);break;case"velocity":i.setVelocity(u,y);break;case"angularVelocity":i.setAngularVelocity(u,y);break;case"speed":i.setSpeed(u,y);break;case"angularSpeed":i.setAngularSpeed(u,y);break;case"parts":i.setParts(u,y);break;case"centre":i.setCentre(u,y);break;default:u[m]=y}},i.setStatic=function(u,h){for(var y=0;y<u.parts.length;y++){var m=u.parts[y];m.isStatic=h,h?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},i.setMass=function(u,h){var y=u.inertia/(u.mass/6);u.inertia=y*(h/6),u.inverseInertia=1/u.inertia,u.mass=h,u.inverseMass=1/u.mass,u.density=u.mass/u.area},i.setDensity=function(u,h){i.setMass(u,h*u.area),u.density=h},i.setInertia=function(u,h){u.inertia=h,u.inverseInertia=1/u.inertia},i.setVertices=function(u,h){h[0].body===u?u.vertices=h:u.vertices=o.create(h,u),u.axes=d.fromVertices(u.vertices),u.area=o.area(u.vertices),i.setMass(u,u.density*u.area);var y=o.centre(u.vertices);o.translate(u.vertices,y,-1),i.setInertia(u,i._inertiaScale*o.inertia(u.vertices,u.mass)),o.translate(u.vertices,u.position),f.update(u.bounds,u.vertices,u.velocity)},i.setParts=function(u,h,y){var m;for(h=h.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,m=0;m<h.length;m++){var _=h[m];_!==u&&(_.parent=u,u.parts.push(_))}if(u.parts.length!==1){if(y=typeof y<"u"?y:!0,y){var b=[];for(m=0;m<h.length;m++)b=b.concat(h[m].vertices);o.clockwiseSort(b);var M=o.hull(b),S=o.centre(M);i.setVertices(u,M),o.translate(u.vertices,S)}var v=i._totalProperties(u);u.area=v.area,u.parent=u,u.position.x=v.centre.x,u.position.y=v.centre.y,u.positionPrev.x=v.centre.x,u.positionPrev.y=v.centre.y,i.setMass(u,v.mass),i.setInertia(u,v.inertia),i.setPosition(u,v.centre)}},i.setCentre=function(u,h,y){y?(u.positionPrev.x+=h.x,u.positionPrev.y+=h.y,u.position.x+=h.x,u.position.y+=h.y):(u.positionPrev.x=h.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=h.y-(u.position.y-u.positionPrev.y),u.position.x=h.x,u.position.y=h.y)},i.setPosition=function(u,h,y){var m=p.sub(h,u.position);y?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=m.x,u.velocity.y=m.y,u.speed=p.magnitude(m)):(u.positionPrev.x+=m.x,u.positionPrev.y+=m.y);for(var _=0;_<u.parts.length;_++){var b=u.parts[_];b.position.x+=m.x,b.position.y+=m.y,o.translate(b.vertices,m),f.update(b.bounds,b.vertices,u.velocity)}},i.setAngle=function(u,h,y){var m=h-u.angle;y?(u.anglePrev=u.angle,u.angularVelocity=m,u.angularSpeed=Math.abs(m)):u.anglePrev+=m;for(var _=0;_<u.parts.length;_++){var b=u.parts[_];b.angle+=m,o.rotate(b.vertices,m,u.position),d.rotate(b.axes,m),f.update(b.bounds,b.vertices,u.velocity),_>0&&p.rotateAbout(b.position,m,u.position,b.position)}},i.setVelocity=function(u,h){var y=u.deltaTime/i._baseDelta;u.positionPrev.x=u.position.x-h.x*y,u.positionPrev.y=u.position.y-h.y*y,u.velocity.x=(u.position.x-u.positionPrev.x)/y,u.velocity.y=(u.position.y-u.positionPrev.y)/y,u.speed=p.magnitude(u.velocity)},i.getVelocity=function(u){var h=i._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*h,y:(u.position.y-u.positionPrev.y)*h}},i.getSpeed=function(u){return p.magnitude(i.getVelocity(u))},i.setSpeed=function(u,h){i.setVelocity(u,p.mult(p.normalise(i.getVelocity(u)),h))},i.setAngularVelocity=function(u,h){var y=u.deltaTime/i._baseDelta;u.anglePrev=u.angle-h*y,u.angularVelocity=(u.angle-u.anglePrev)/y,u.angularSpeed=Math.abs(u.angularVelocity)},i.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*i._baseDelta/u.deltaTime},i.getAngularSpeed=function(u){return Math.abs(i.getAngularVelocity(u))},i.setAngularSpeed=function(u,h){i.setAngularVelocity(u,c.sign(i.getAngularVelocity(u))*h)},i.translate=function(u,h,y){i.setPosition(u,p.add(u.position,h),y)},i.rotate=function(u,h,y,m){if(!y)i.setAngle(u,u.angle+h,m);else{var _=Math.cos(h),b=Math.sin(h),M=u.position.x-y.x,S=u.position.y-y.y;i.setPosition(u,{x:y.x+(M*_-S*b),y:y.y+(M*b+S*_)},m),i.setAngle(u,u.angle+h,m)}},i.scale=function(u,h,y,m){var _=0,b=0;m=m||u.position;for(var M=0;M<u.parts.length;M++){var S=u.parts[M];o.scale(S.vertices,h,y,m),S.axes=d.fromVertices(S.vertices),S.area=o.area(S.vertices),i.setMass(S,u.density*S.area),o.translate(S.vertices,{x:-S.position.x,y:-S.position.y}),i.setInertia(S,i._inertiaScale*o.inertia(S.vertices,S.mass)),o.translate(S.vertices,{x:S.position.x,y:S.position.y}),M>0&&(_+=S.area,b+=S.inertia),S.position.x=m.x+(S.position.x-m.x)*h,S.position.y=m.y+(S.position.y-m.y)*y,f.update(S.bounds,S.vertices,u.velocity)}u.parts.length>1&&(u.area=_,u.isStatic||(i.setMass(u,u.density*_),i.setInertia(u,b))),u.circleRadius&&(h===y?u.circleRadius*=h:u.circleRadius=null)},i.update=function(u,h){h=(typeof h<"u"?h:1e3/60)*u.timeScale;var y=h*h,m=i._timeCorrection?h/(u.deltaTime||h):1,_=1-u.frictionAir*(h/c._baseDelta),b=(u.position.x-u.positionPrev.x)*m,M=(u.position.y-u.positionPrev.y)*m;u.velocity.x=b*_+u.force.x/u.mass*y,u.velocity.y=M*_+u.force.y/u.mass*y,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=h,u.angularVelocity=(u.angle-u.anglePrev)*_*m+u.torque/u.inertia*y,u.anglePrev=u.angle,u.angle+=u.angularVelocity;for(var S=0;S<u.parts.length;S++){var v=u.parts[S];o.translate(v.vertices,u.velocity),S>0&&(v.position.x+=u.velocity.x,v.position.y+=u.velocity.y),u.angularVelocity!==0&&(o.rotate(v.vertices,u.angularVelocity,u.position),d.rotate(v.axes,u.angularVelocity),S>0&&p.rotateAbout(v.position,u.angularVelocity,u.position,v.position)),f.update(v.bounds,v.vertices,u.velocity)}},i.updateVelocities=function(u){var h=i._baseDelta/u.deltaTime,y=u.velocity;y.x=(u.position.x-u.positionPrev.x)*h,y.y=(u.position.y-u.positionPrev.y)*h,u.speed=Math.sqrt(y.x*y.x+y.y*y.y),u.angularVelocity=(u.angle-u.anglePrev)*h,u.angularSpeed=Math.abs(u.angularVelocity)},i.applyForce=function(u,h,y){var m={x:h.x-u.position.x,y:h.y-u.position.y};u.force.x+=y.x,u.force.y+=y.y,u.torque+=m.x*y.y-m.y*y.x},i._totalProperties=function(u){for(var h={mass:0,area:0,inertia:0,centre:{x:0,y:0}},y=u.parts.length===1?0:1;y<u.parts.length;y++){var m=u.parts[y],_=m.mass!==1/0?m.mass:1;h.mass+=_,h.area+=m.area,h.inertia+=m.inertia,h.centre=p.add(h.centre,p.mult(m.position,_))}return h.centre=p.div(h.centre,h.mass),h}})()},function(r,s,n){var i={};r.exports=i;var o=n(0);(function(){i.on=function(p,l,c){for(var f=l.split(" "),d,g=0;g<f.length;g++)d=f[g],p.events=p.events||{},p.events[d]=p.events[d]||[],p.events[d].push(c);return c},i.off=function(p,l,c){if(!l){p.events={};return}typeof l=="function"&&(c=l,l=o.keys(p.events).join(" "));for(var f=l.split(" "),d=0;d<f.length;d++){var g=p.events[f[d]],u=[];if(c&&g)for(var h=0;h<g.length;h++)g[h]!==c&&u.push(g[h]);p.events[f[d]]=u}},i.trigger=function(p,l,c){var f,d,g,u,h=p.events;if(h&&o.keys(h).length>0){c||(c={}),f=l.split(" ");for(var y=0;y<f.length;y++)if(d=f[y],g=h[d],g){u=o.clone(c,!1),u.name=d,u.source=p;for(var m=0;m<g.length;m++)g[m].apply(p,[u])}}}})()},function(r,s,n){var i={};r.exports=i;var o=n(5),p=n(0),l=n(1),c=n(4);(function(){i.create=function(f){return p.extend({id:p.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},f)},i.setModified=function(f,d,g,u){if(f.isModified=d,d&&f.cache&&(f.cache.allBodies=null,f.cache.allConstraints=null,f.cache.allComposites=null),g&&f.parent&&i.setModified(f.parent,d,g,u),u)for(var h=0;h<f.composites.length;h++){var y=f.composites[h];i.setModified(y,d,g,u)}},i.add=function(f,d){var g=[].concat(d);o.trigger(f,"beforeAdd",{object:d});for(var u=0;u<g.length;u++){var h=g[u];switch(h.type){case"body":if(h.parent!==h){p.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(f,h);break;case"constraint":i.addConstraint(f,h);break;case"composite":i.addComposite(f,h);break;case"mouseConstraint":i.addConstraint(f,h.constraint);break}}return o.trigger(f,"afterAdd",{object:d}),f},i.remove=function(f,d,g){var u=[].concat(d);o.trigger(f,"beforeRemove",{object:d});for(var h=0;h<u.length;h++){var y=u[h];switch(y.type){case"body":i.removeBody(f,y,g);break;case"constraint":i.removeConstraint(f,y,g);break;case"composite":i.removeComposite(f,y,g);break;case"mouseConstraint":i.removeConstraint(f,y.constraint);break}}return o.trigger(f,"afterRemove",{object:d}),f},i.addComposite=function(f,d){return f.composites.push(d),d.parent=f,i.setModified(f,!0,!0,!1),f},i.removeComposite=function(f,d,g){var u=p.indexOf(f.composites,d);if(u!==-1&&i.removeCompositeAt(f,u),g)for(var h=0;h<f.composites.length;h++)i.removeComposite(f.composites[h],d,!0);return f},i.removeCompositeAt=function(f,d){return f.composites.splice(d,1),i.setModified(f,!0,!0,!1),f},i.addBody=function(f,d){return f.bodies.push(d),i.setModified(f,!0,!0,!1),f},i.removeBody=function(f,d,g){var u=p.indexOf(f.bodies,d);if(u!==-1&&i.removeBodyAt(f,u),g)for(var h=0;h<f.composites.length;h++)i.removeBody(f.composites[h],d,!0);return f},i.removeBodyAt=function(f,d){return f.bodies.splice(d,1),i.setModified(f,!0,!0,!1),f},i.addConstraint=function(f,d){return f.constraints.push(d),i.setModified(f,!0,!0,!1),f},i.removeConstraint=function(f,d,g){var u=p.indexOf(f.constraints,d);if(u!==-1&&i.removeConstraintAt(f,u),g)for(var h=0;h<f.composites.length;h++)i.removeConstraint(f.composites[h],d,!0);return f},i.removeConstraintAt=function(f,d){return f.constraints.splice(d,1),i.setModified(f,!0,!0,!1),f},i.clear=function(f,d,g){if(g)for(var u=0;u<f.composites.length;u++)i.clear(f.composites[u],d,!0);return d?f.bodies=f.bodies.filter(function(h){return h.isStatic}):f.bodies.length=0,f.constraints.length=0,f.composites.length=0,i.setModified(f,!0,!0,!1),f},i.allBodies=function(f){if(f.cache&&f.cache.allBodies)return f.cache.allBodies;for(var d=[].concat(f.bodies),g=0;g<f.composites.length;g++)d=d.concat(i.allBodies(f.composites[g]));return f.cache&&(f.cache.allBodies=d),d},i.allConstraints=function(f){if(f.cache&&f.cache.allConstraints)return f.cache.allConstraints;for(var d=[].concat(f.constraints),g=0;g<f.composites.length;g++)d=d.concat(i.allConstraints(f.composites[g]));return f.cache&&(f.cache.allConstraints=d),d},i.allComposites=function(f){if(f.cache&&f.cache.allComposites)return f.cache.allComposites;for(var d=[].concat(f.composites),g=0;g<f.composites.length;g++)d=d.concat(i.allComposites(f.composites[g]));return f.cache&&(f.cache.allComposites=d),d},i.get=function(f,d,g){var u,h;switch(g){case"body":u=i.allBodies(f);break;case"constraint":u=i.allConstraints(f);break;case"composite":u=i.allComposites(f).concat(f);break}return u?(h=u.filter(function(y){return y.id.toString()===d.toString()}),h.length===0?null:h[0]):null},i.move=function(f,d,g){return i.remove(f,d),i.add(g,d),f},i.rebase=function(f){for(var d=i.allBodies(f).concat(i.allConstraints(f)).concat(i.allComposites(f)),g=0;g<d.length;g++)d[g].id=p.nextId();return f},i.translate=function(f,d,g){for(var u=g?i.allBodies(f):f.bodies,h=0;h<u.length;h++)c.translate(u[h],d);return f},i.rotate=function(f,d,g,u){for(var h=Math.cos(d),y=Math.sin(d),m=u?i.allBodies(f):f.bodies,_=0;_<m.length;_++){var b=m[_],M=b.position.x-g.x,S=b.position.y-g.y;c.setPosition(b,{x:g.x+(M*h-S*y),y:g.y+(M*y+S*h)}),c.rotate(b,d)}return f},i.scale=function(f,d,g,u,h){for(var y=h?i.allBodies(f):f.bodies,m=0;m<y.length;m++){var _=y[m],b=_.position.x-u.x,M=_.position.y-u.y;c.setPosition(_,{x:u.x+b*d,y:u.y+M*g}),c.scale(_,d,g)}return f},i.bounds=function(f){for(var d=i.allBodies(f),g=[],u=0;u<d.length;u+=1){var h=d[u];g.push(h.bounds.min,h.bounds.max)}return l.create(g)}})()},function(r,s,n){var i={};r.exports=i;var o=n(4),p=n(5),l=n(0);(function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(c,f){for(var d=f/l._baseDelta,g=i._motionSleepThreshold,u=0;u<c.length;u++){var h=c[u],y=o.getSpeed(h),m=o.getAngularSpeed(h),_=y*y+m*m;if(h.force.x!==0||h.force.y!==0){i.set(h,!1);continue}var b=Math.min(h.motion,_),M=Math.max(h.motion,_);h.motion=i._minBias*b+(1-i._minBias)*M,h.sleepThreshold>0&&h.motion<g?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold/d&&i.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}},i.afterCollisions=function(c){for(var f=i._motionSleepThreshold,d=0;d<c.length;d++){var g=c[d];if(g.isActive){var u=g.collision,h=u.bodyA.parent,y=u.bodyB.parent;if(!(h.isSleeping&&y.isSleeping||h.isStatic||y.isStatic)&&(h.isSleeping||y.isSleeping)){var m=h.isSleeping&&!h.isStatic?h:y,_=m===h?y:h;!m.isStatic&&_.motion>f&&i.set(m,!1)}}}},i.set=function(c,f){var d=c.isSleeping;f?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,d||p.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,d&&p.trigger(c,"sleepEnd"))}})()},function(r,s,n){var i={};r.exports=i;var o=n(3),p=n(9);(function(){var l=[],c={overlap:0,axis:null},f={overlap:0,axis:null};i.create=function(d,g){return{pair:null,collided:!1,bodyA:d,bodyB:g,parentA:d.parent,parentB:g.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},i.collides=function(d,g,u){if(i._overlapAxes(c,d.vertices,g.vertices,d.axes),c.overlap<=0||(i._overlapAxes(f,g.vertices,d.vertices,g.axes),f.overlap<=0))return null;var h=u&&u.table[p.id(d,g)],y;h?y=h.collision:(y=i.create(d,g),y.collided=!0,y.bodyA=d.id<g.id?d:g,y.bodyB=d.id<g.id?g:d,y.parentA=y.bodyA.parent,y.parentB=y.bodyB.parent),d=y.bodyA,g=y.bodyB;var m;c.overlap<f.overlap?m=c:m=f;var _=y.normal,b=y.supports,M=m.axis,S=M.x,v=M.y;S*(g.position.x-d.position.x)+v*(g.position.y-d.position.y)<0?(_.x=S,_.y=v):(_.x=-S,_.y=-v),y.tangent.x=-_.y,y.tangent.y=_.x,y.depth=m.overlap,y.penetration.x=_.x*y.depth,y.penetration.y=_.y*y.depth;var E=i._findSupports(d,g,_,1),T=0;if(o.contains(d.vertices,E[0])&&(b[T++]=E[0]),o.contains(d.vertices,E[1])&&(b[T++]=E[1]),T<2){var A=i._findSupports(g,d,_,-1);o.contains(g.vertices,A[0])&&(b[T++]=A[0]),T<2&&o.contains(g.vertices,A[1])&&(b[T++]=A[1])}return T===0&&(b[T++]=E[0]),b.length=T,y},i._overlapAxes=function(d,g,u,h){var y=g.length,m=u.length,_=g[0].x,b=g[0].y,M=u[0].x,S=u[0].y,v=h.length,E=Number.MAX_VALUE,T=0,A,R,x,C,O,F;for(O=0;O<v;O++){var L=h[O],I=L.x,N=L.y,k=_*I+b*N,U=M*I+S*N,H=k,W=U;for(F=1;F<y;F+=1)C=g[F].x*I+g[F].y*N,C>H?H=C:C<k&&(k=C);for(F=1;F<m;F+=1)C=u[F].x*I+u[F].y*N,C>W?W=C:C<U&&(U=C);if(R=H-U,x=W-k,A=R<x?R:x,A<E&&(E=A,T=O,A<=0))break}d.axis=h[T],d.overlap=E},i._projectToAxis=function(d,g,u){for(var h=g[0].x*u.x+g[0].y*u.y,y=h,m=1;m<g.length;m+=1){var _=g[m].x*u.x+g[m].y*u.y;_>y?y=_:_<h&&(h=_)}d.min=h,d.max=y},i._findSupports=function(d,g,u,h){var y=g.vertices,m=y.length,_=d.position.x,b=d.position.y,M=u.x*h,S=u.y*h,v=Number.MAX_VALUE,E,T,A,R,x;for(x=0;x<m;x+=1)T=y[x],R=M*(_-T.x)+S*(b-T.y),R<v&&(v=R,E=T);return A=y[(m+E.index-1)%m],v=M*(_-A.x)+S*(b-A.y),T=y[(E.index+1)%m],M*(_-T.x)+S*(b-T.y)<v?(l[0]=E,l[1]=T,l):(l[0]=E,l[1]=A,l)}})()},function(r,s,n){var i={};r.exports=i;var o=n(16);(function(){i.create=function(p,l){var c=p.bodyA,f=p.bodyB,d={id:i.id(c,f),bodyA:c,bodyB:f,collision:p,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||f.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(d,p,l),d},i.update=function(p,l,c){var f=p.contacts,d=l.supports,g=p.activeContacts,u=l.parentA,h=l.parentB,y=u.vertices.length;p.isActive=!0,p.timeUpdated=c,p.collision=l,p.separation=l.depth,p.inverseMass=u.inverseMass+h.inverseMass,p.friction=u.friction<h.friction?u.friction:h.friction,p.frictionStatic=u.frictionStatic>h.frictionStatic?u.frictionStatic:h.frictionStatic,p.restitution=u.restitution>h.restitution?u.restitution:h.restitution,p.slop=u.slop>h.slop?u.slop:h.slop,l.pair=p,g.length=0;for(var m=0;m<d.length;m++){var _=d[m],b=_.body===u?_.index:y+_.index,M=f[b];M?g.push(M):g.push(f[b]=o.create(_))}},i.setActive=function(p,l,c){l?(p.isActive=!0,p.timeUpdated=c):(p.isActive=!1,p.activeContacts.length=0)},i.id=function(p,l){return p.id<l.id?"A"+p.id+"B"+l.id:"A"+l.id+"B"+p.id}})()},function(r,s,n){var i={};r.exports=i;var o=n(3),p=n(2),l=n(7),c=n(1),f=n(11),d=n(0);(function(){i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(g){var u=g;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var h=u.bodyA?p.add(u.bodyA.position,u.pointA):u.pointA,y=u.bodyB?p.add(u.bodyB.position,u.pointB):u.pointB,m=p.magnitude(p.sub(h,y));u.length=typeof u.length<"u"?u.length:m,u.id=u.id||d.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var _={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return u.length===0&&u.stiffness>.1?(_.type="pin",_.anchors=!1):u.stiffness<.9&&(_.type="spring"),u.render=d.extend(_,u.render),u},i.preSolveAll=function(g){for(var u=0;u<g.length;u+=1){var h=g[u],y=h.constraintImpulse;h.isStatic||y.x===0&&y.y===0&&y.angle===0||(h.position.x+=y.x,h.position.y+=y.y,h.angle+=y.angle)}},i.solveAll=function(g,u){for(var h=d.clamp(u/d._baseDelta,0,1),y=0;y<g.length;y+=1){var m=g[y],_=!m.bodyA||m.bodyA&&m.bodyA.isStatic,b=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(_||b)&&i.solve(g[y],h)}for(y=0;y<g.length;y+=1)m=g[y],_=!m.bodyA||m.bodyA&&m.bodyA.isStatic,b=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!_&&!b&&i.solve(g[y],h)},i.solve=function(g,u){var h=g.bodyA,y=g.bodyB,m=g.pointA,_=g.pointB;if(!(!h&&!y)){h&&!h.isStatic&&(p.rotate(m,h.angle-g.angleA,m),g.angleA=h.angle),y&&!y.isStatic&&(p.rotate(_,y.angle-g.angleB,_),g.angleB=y.angle);var b=m,M=_;if(h&&(b=p.add(h.position,m)),y&&(M=p.add(y.position,_)),!(!b||!M)){var S=p.sub(b,M),v=p.magnitude(S);v<i._minLength&&(v=i._minLength);var E=(v-g.length)/v,T=g.stiffness>=1||g.length===0,A=T?g.stiffness*u:g.stiffness*u*u,R=g.damping*u,x=p.mult(S,E*A),C=(h?h.inverseMass:0)+(y?y.inverseMass:0),O=(h?h.inverseInertia:0)+(y?y.inverseInertia:0),F=C+O,L,I,N,k,U;if(R>0){var H=p.create();N=p.div(S,v),U=p.sub(y&&p.sub(y.position,y.positionPrev)||H,h&&p.sub(h.position,h.positionPrev)||H),k=p.dot(N,U)}h&&!h.isStatic&&(I=h.inverseMass/C,h.constraintImpulse.x-=x.x*I,h.constraintImpulse.y-=x.y*I,h.position.x-=x.x*I,h.position.y-=x.y*I,R>0&&(h.positionPrev.x-=R*N.x*k*I,h.positionPrev.y-=R*N.y*k*I),L=p.cross(m,x)/F*i._torqueDampen*h.inverseInertia*(1-g.angularStiffness),h.constraintImpulse.angle-=L,h.angle-=L),y&&!y.isStatic&&(I=y.inverseMass/C,y.constraintImpulse.x+=x.x*I,y.constraintImpulse.y+=x.y*I,y.position.x+=x.x*I,y.position.y+=x.y*I,R>0&&(y.positionPrev.x+=R*N.x*k*I,y.positionPrev.y+=R*N.y*k*I),L=p.cross(_,x)/F*i._torqueDampen*y.inverseInertia*(1-g.angularStiffness),y.constraintImpulse.angle+=L,y.angle+=L)}}},i.postSolveAll=function(g){for(var u=0;u<g.length;u++){var h=g[u],y=h.constraintImpulse;if(!(h.isStatic||y.x===0&&y.y===0&&y.angle===0)){l.set(h,!1);for(var m=0;m<h.parts.length;m++){var _=h.parts[m];o.translate(_.vertices,y),m>0&&(_.position.x+=y.x,_.position.y+=y.y),y.angle!==0&&(o.rotate(_.vertices,y.angle,h.position),f.rotate(_.axes,y.angle),m>0&&p.rotateAbout(_.position,y.angle,h.position,_.position)),c.update(_.bounds,_.vertices,h.velocity)}y.angle*=i._warming,y.x*=i._warming,y.y*=i._warming}}},i.pointAWorld=function(g){return{x:(g.bodyA?g.bodyA.position.x:0)+(g.pointA?g.pointA.x:0),y:(g.bodyA?g.bodyA.position.y:0)+(g.pointA?g.pointA.y:0)}},i.pointBWorld=function(g){return{x:(g.bodyB?g.bodyB.position.x:0)+(g.pointB?g.pointB.x:0),y:(g.bodyB?g.bodyB.position.y:0)+(g.pointB?g.pointB.y:0)}}})()},function(r,s,n){var i={};r.exports=i;var o=n(2),p=n(0);(function(){i.fromVertices=function(l){for(var c={},f=0;f<l.length;f++){var d=(f+1)%l.length,g=o.normalise({x:l[d].y-l[f].y,y:l[f].x-l[d].x}),u=g.y===0?1/0:g.x/g.y;u=u.toFixed(3).toString(),c[u]=g}return p.values(c)},i.rotate=function(l,c){if(c!==0)for(var f=Math.cos(c),d=Math.sin(c),g=0;g<l.length;g++){var u=l[g],h;h=u.x*f-u.y*d,u.y=u.x*d+u.y*f,u.x=h}}})()},function(r,s,n){var i={};r.exports=i;var o=n(3),p=n(0),l=n(4),c=n(1),f=n(2);(function(){i.rectangle=function(d,g,u,h,y){y=y||{};var m={label:"Rectangle Body",position:{x:d,y:g},vertices:o.fromPath("L 0 0 L "+u+" 0 L "+u+" "+h+" L 0 "+h)};if(y.chamfer){var _=y.chamfer;m.vertices=o.chamfer(m.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete y.chamfer}return l.create(p.extend({},m,y))},i.trapezoid=function(d,g,u,h,y,m){m=m||{},y*=.5;var _=(1-y*2)*u,b=u*y,M=b+_,S=M+b,v;y<.5?v="L 0 0 L "+b+" "+-h+" L "+M+" "+-h+" L "+S+" 0":v="L 0 0 L "+M+" "+-h+" L "+S+" 0";var E={label:"Trapezoid Body",position:{x:d,y:g},vertices:o.fromPath(v)};if(m.chamfer){var T=m.chamfer;E.vertices=o.chamfer(E.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete m.chamfer}return l.create(p.extend({},E,m))},i.circle=function(d,g,u,h,y){h=h||{};var m={label:"Circle Body",circleRadius:u};y=y||25;var _=Math.ceil(Math.max(10,Math.min(y,u)));return _%2===1&&(_+=1),i.polygon(d,g,_,u,p.extend({},m,h))},i.polygon=function(d,g,u,h,y){if(y=y||{},u<3)return i.circle(d,g,h,y);for(var m=2*Math.PI/u,_="",b=m*.5,M=0;M<u;M+=1){var S=b+M*m,v=Math.cos(S)*h,E=Math.sin(S)*h;_+="L "+v.toFixed(3)+" "+E.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:d,y:g},vertices:o.fromPath(_)};if(y.chamfer){var A=y.chamfer;T.vertices=o.chamfer(T.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete y.chamfer}return l.create(p.extend({},T,y))},i.fromVertices=function(d,g,u,h,y,m,_,b){var M=p.getDecomp(),S,v,E,T,A,R,x,C,O,F,L;for(S=!!(M&&M.quickDecomp),h=h||{},E=[],y=typeof y<"u"?y:!1,m=typeof m<"u"?m:.01,_=typeof _<"u"?_:10,b=typeof b<"u"?b:.01,p.isArray(u[0])||(u=[u]),F=0;F<u.length;F+=1)if(R=u[F],T=o.isConvex(R),A=!T,A&&!S&&p.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!S)T?R=o.clockwiseSort(R):R=o.hull(R),E.push({position:{x:d,y:g},vertices:R});else{var I=R.map(function(le){return[le.x,le.y]});M.makeCCW(I),m!==!1&&M.removeCollinearPoints(I,m),b!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(I,b);var N=M.quickDecomp(I);for(x=0;x<N.length;x++){var k=N[x],U=k.map(function(le){return{x:le[0],y:le[1]}});_>0&&o.area(U)<_||E.push({position:o.centre(U),vertices:U})}}for(x=0;x<E.length;x++)E[x]=l.create(p.extend(E[x],h));if(y){var H=5;for(x=0;x<E.length;x++){var W=E[x];for(C=x+1;C<E.length;C++){var z=E[C];if(c.overlaps(W.bounds,z.bounds)){var j=W.vertices,ee=z.vertices;for(O=0;O<W.vertices.length;O++)for(L=0;L<z.vertices.length;L++){var te=f.magnitudeSquared(f.sub(j[(O+1)%j.length],ee[L])),ie=f.magnitudeSquared(f.sub(j[O],ee[(L+1)%ee.length]));te<H&&ie<H&&(j[O].isInternal=!0,ee[L].isInternal=!0)}}}}}return E.length>1?(v=l.create(p.extend({parts:E.slice(0)},h)),l.setPosition(v,{x:d,y:g}),v):E[0]}})()},function(r,s,n){var i={};r.exports=i;var o=n(0),p=n(8);(function(){i.create=function(l){var c={bodies:[],pairs:null};return o.extend(c,l)},i.setBodies=function(l,c){l.bodies=c.slice(0)},i.clear=function(l){l.bodies=[]},i.collisions=function(l){var c=[],f=l.pairs,d=l.bodies,g=d.length,u=i.canCollide,h=p.collides,y,m;for(d.sort(i._compareBoundsX),y=0;y<g;y++){var _=d[y],b=_.bounds,M=_.bounds.max.x,S=_.bounds.max.y,v=_.bounds.min.y,E=_.isStatic||_.isSleeping,T=_.parts.length,A=T===1;for(m=y+1;m<g;m++){var R=d[m],x=R.bounds;if(x.min.x>M)break;if(!(S<x.min.y||v>x.max.y)&&!(E&&(R.isStatic||R.isSleeping))&&u(_.collisionFilter,R.collisionFilter)){var C=R.parts.length;if(A&&C===1){var O=h(_,R,f);O&&c.push(O)}else for(var F=T>1?1:0,L=C>1?1:0,I=F;I<T;I++)for(var N=_.parts[I],b=N.bounds,k=L;k<C;k++){var U=R.parts[k],x=U.bounds;if(!(b.min.x>x.max.x||b.max.x<x.min.x||b.max.y<x.min.y||b.min.y>x.max.y)){var O=h(N,U,f);O&&c.push(O)}}}}}return c},i.canCollide=function(l,c){return l.group===c.group&&l.group!==0?l.group>0:(l.mask&c.category)!==0&&(c.mask&l.category)!==0},i._compareBoundsX=function(l,c){return l.bounds.min.x-c.bounds.min.x}})()},function(r,s,n){var i={};r.exports=i;var o=n(0);(function(){i.create=function(p){var l={};return p||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=p||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(c){var f=i._getRelativeMousePosition(c,l.element,l.pixelRatio),d=c.changedTouches;d&&(l.button=0,c.preventDefault()),l.absolute.x=f.x,l.absolute.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=c},l.mousedown=function(c){var f=i._getRelativeMousePosition(c,l.element,l.pixelRatio),d=c.changedTouches;d?(l.button=0,c.preventDefault()):l.button=c.button,l.absolute.x=f.x,l.absolute.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=c},l.mouseup=function(c){var f=i._getRelativeMousePosition(c,l.element,l.pixelRatio),d=c.changedTouches;d&&c.preventDefault(),l.button=-1,l.absolute.x=f.x,l.absolute.y=f.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=c},l.mousewheel=function(c){l.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},i.setElement(l,l.element),l},i.setElement=function(p,l){p.element=l,l.addEventListener("mousemove",p.mousemove),l.addEventListener("mousedown",p.mousedown),l.addEventListener("mouseup",p.mouseup),l.addEventListener("mousewheel",p.mousewheel),l.addEventListener("DOMMouseScroll",p.mousewheel),l.addEventListener("touchmove",p.mousemove),l.addEventListener("touchstart",p.mousedown),l.addEventListener("touchend",p.mouseup)},i.clearSourceEvents=function(p){p.sourceEvents.mousemove=null,p.sourceEvents.mousedown=null,p.sourceEvents.mouseup=null,p.sourceEvents.mousewheel=null,p.wheelDelta=0},i.setOffset=function(p,l){p.offset.x=l.x,p.offset.y=l.y,p.position.x=p.absolute.x*p.scale.x+p.offset.x,p.position.y=p.absolute.y*p.scale.y+p.offset.y},i.setScale=function(p,l){p.scale.x=l.x,p.scale.y=l.y,p.position.x=p.absolute.x*p.scale.x+p.offset.x,p.position.y=p.absolute.y*p.scale.y+p.offset.y},i._getRelativeMousePosition=function(p,l,c){var f=l.getBoundingClientRect(),d=document.documentElement||document.body.parentNode||document.body,g=window.pageXOffset!==void 0?window.pageXOffset:d.scrollLeft,u=window.pageYOffset!==void 0?window.pageYOffset:d.scrollTop,h=p.changedTouches,y,m;return h?(y=h[0].pageX-f.left-g,m=h[0].pageY-f.top-u):(y=p.pageX-f.left-g,m=p.pageY-f.top-u),{x:y/(l.clientWidth/(l.width||l.clientWidth)*c),y:m/(l.clientHeight/(l.height||l.clientHeight)*c)}}})()},function(r,s,n){var i={};r.exports=i;var o=n(0);(function(){i._registry={},i.register=function(p){if(i.isPlugin(p)||o.warn("Plugin.register:",i.toString(p),"does not implement all required fields."),p.name in i._registry){var l=i._registry[p.name],c=i.versionParse(p.version).number,f=i.versionParse(l.version).number;c>f?(o.warn("Plugin.register:",i.toString(l),"was upgraded to",i.toString(p)),i._registry[p.name]=p):c<f?o.warn("Plugin.register:",i.toString(l),"can not be downgraded to",i.toString(p)):p!==l&&o.warn("Plugin.register:",i.toString(p),"is already registered to different plugin object")}else i._registry[p.name]=p;return p},i.resolve=function(p){return i._registry[i.dependencyParse(p).name]},i.toString=function(p){return typeof p=="string"?p:(p.name||"anonymous")+"@"+(p.version||p.range||"0.0.0")},i.isPlugin=function(p){return p&&p.name&&p.version&&p.install},i.isUsed=function(p,l){return p.used.indexOf(l)>-1},i.isFor=function(p,l){var c=p.for&&i.dependencyParse(p.for);return!p.for||l.name===c.name&&i.versionSatisfies(l.version,c.range)},i.use=function(p,l){if(p.uses=(p.uses||[]).concat(l||[]),p.uses.length===0){o.warn("Plugin.use:",i.toString(p),"does not specify any dependencies to install.");return}for(var c=i.dependencies(p),f=o.topologicalSort(c),d=[],g=0;g<f.length;g+=1)if(f[g]!==p.name){var u=i.resolve(f[g]);if(!u){d.push(" "+f[g]);continue}i.isUsed(p,u.name)||(i.isFor(u,p)||(o.warn("Plugin.use:",i.toString(u),"is for",u.for,"but installed on",i.toString(p)+"."),u._warned=!0),u.install?u.install(p):(o.warn("Plugin.use:",i.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(d.push(" "+i.toString(u)),delete u._warned):d.push(" "+i.toString(u)),p.used.push(u.name))}d.length>0&&o.info(d.join("  "))},i.dependencies=function(p,l){var c=i.dependencyParse(p),f=c.name;if(l=l||{},!(f in l)){p=i.resolve(p)||p,l[f]=o.map(p.uses||[],function(g){i.isPlugin(g)&&i.register(g);var u=i.dependencyParse(g),h=i.resolve(g);return h&&!i.versionSatisfies(h.version,u.range)?(o.warn("Plugin.dependencies:",i.toString(h),"does not satisfy",i.toString(u),"used by",i.toString(c)+"."),h._warned=!0,p._warned=!0):h||(o.warn("Plugin.dependencies:",i.toString(g),"used by",i.toString(c),"could not be resolved."),p._warned=!0),u.name});for(var d=0;d<l[f].length;d+=1)i.dependencies(l[f][d],l);return l}},i.dependencyParse=function(p){if(o.isString(p)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(p)||o.warn("Plugin.dependencyParse:",p,"is not a valid dependency string."),{name:p.split("@")[0],range:p.split("@")[1]||"*"}}return{name:p.name,range:p.range||p.version}},i.versionParse=function(p){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(p)||o.warn("Plugin.versionParse:",p,"is not a valid version or range.");var c=l.exec(p),f=Number(c[4]),d=Number(c[5]),g=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:p,operator:c[1]||c[2]||"",major:f,minor:d,patch:g,parts:[f,d,g],prerelease:c[7],number:f*1e8+d*1e4+g}},i.versionSatisfies=function(p,l){l=l||"*";var c=i.versionParse(l),f=i.versionParse(p);if(c.isRange){if(c.operator==="*"||p==="*")return!0;if(c.operator===">")return f.number>c.number;if(c.operator===">=")return f.number>=c.number;if(c.operator==="~")return f.major===c.major&&f.minor===c.minor&&f.patch>=c.patch;if(c.operator==="^")return c.major>0?f.major===c.major&&f.number>=c.number:c.minor>0?f.minor===c.minor&&f.patch>=c.patch:f.patch===c.patch}return p===l||p==="*"}})()},function(r,s){var n={};r.exports=n,function(){n.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},function(r,s,n){var i={};r.exports=i;var o=n(7),p=n(18),l=n(13),c=n(19),f=n(5),d=n(6),g=n(10),u=n(0),h=n(4);(function(){i.create=function(y){y=y||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},_=u.extend(m,y);return _.world=y.world||d.create({label:"World"}),_.pairs=y.pairs||c.create(),_.detector=y.detector||l.create(),_.grid={buckets:[]},_.world.gravity=_.gravity,_.broadphase=_.grid,_.metrics={},_},i.update=function(y,m){var _=u.now(),b=y.world,M=y.detector,S=y.pairs,v=y.timing,E=v.timestamp,T;m=typeof m<"u"?m:u._baseDelta,m*=v.timeScale,v.timestamp+=m,v.lastDelta=m;var A={timestamp:v.timestamp,delta:m};f.trigger(y,"beforeUpdate",A);var R=d.allBodies(b),x=d.allConstraints(b);for(b.isModified&&(l.setBodies(M,R),d.setModified(b,!1,!1,!0)),y.enableSleeping&&o.update(R,m),i._bodiesApplyGravity(R,y.gravity),m>0&&i._bodiesUpdate(R,m),g.preSolveAll(R),T=0;T<y.constraintIterations;T++)g.solveAll(x,m);g.postSolveAll(R),M.pairs=y.pairs;var C=l.collisions(M);c.update(S,C,E),y.enableSleeping&&o.afterCollisions(S.list),S.collisionStart.length>0&&f.trigger(y,"collisionStart",{pairs:S.collisionStart});var O=u.clamp(20/y.positionIterations,0,1);for(p.preSolvePosition(S.list),T=0;T<y.positionIterations;T++)p.solvePosition(S.list,m,O);for(p.postSolvePosition(R),g.preSolveAll(R),T=0;T<y.constraintIterations;T++)g.solveAll(x,m);for(g.postSolveAll(R),p.preSolveVelocity(S.list),T=0;T<y.velocityIterations;T++)p.solveVelocity(S.list,m);return i._bodiesUpdateVelocities(R),S.collisionActive.length>0&&f.trigger(y,"collisionActive",{pairs:S.collisionActive}),S.collisionEnd.length>0&&f.trigger(y,"collisionEnd",{pairs:S.collisionEnd}),i._bodiesClearForces(R),f.trigger(y,"afterUpdate",A),y.timing.lastElapsed=u.now()-_,y},i.merge=function(y,m){if(u.extend(y,m),m.world){y.world=m.world,i.clear(y);for(var _=d.allBodies(y.world),b=0;b<_.length;b++){var M=_[b];o.set(M,!1),M.id=u.nextId()}}},i.clear=function(y){c.clear(y.pairs),l.clear(y.detector)},i._bodiesClearForces=function(y){for(var m=y.length,_=0;_<m;_++){var b=y[_];b.force.x=0,b.force.y=0,b.torque=0}},i._bodiesApplyGravity=function(y,m){var _=typeof m.scale<"u"?m.scale:.001,b=y.length;if(!(m.x===0&&m.y===0||_===0))for(var M=0;M<b;M++){var S=y[M];S.isStatic||S.isSleeping||(S.force.y+=S.mass*m.y*_,S.force.x+=S.mass*m.x*_)}},i._bodiesUpdate=function(y,m){for(var _=y.length,b=0;b<_;b++){var M=y[b];M.isStatic||M.isSleeping||h.update(M,m)}},i._bodiesUpdateVelocities=function(y){for(var m=y.length,_=0;_<m;_++)h.updateVelocities(y[_])}})()},function(r,s,n){var i={};r.exports=i;var o=n(3),p=n(0),l=n(1);(function(){i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(c){var f,d,g,u=c.length;for(f=0;f<u;f++)d=c[f],d.isActive&&(g=d.activeContacts.length,d.collision.parentA.totalContacts+=g,d.collision.parentB.totalContacts+=g)},i.solvePosition=function(c,f,d){var g,u,h,y,m,_,b,M,S=i._positionDampen*(d||1),v=p.clamp(f/p._baseDelta,0,1),E=c.length;for(g=0;g<E;g++)u=c[g],!(!u.isActive||u.isSensor)&&(h=u.collision,y=h.parentA,m=h.parentB,_=h.normal,u.separation=_.x*(m.positionImpulse.x+h.penetration.x-y.positionImpulse.x)+_.y*(m.positionImpulse.y+h.penetration.y-y.positionImpulse.y));for(g=0;g<E;g++)u=c[g],!(!u.isActive||u.isSensor)&&(h=u.collision,y=h.parentA,m=h.parentB,_=h.normal,M=u.separation-u.slop*v,(y.isStatic||m.isStatic)&&(M*=2),y.isStatic||y.isSleeping||(b=S/y.totalContacts,y.positionImpulse.x+=_.x*M*b,y.positionImpulse.y+=_.y*M*b),m.isStatic||m.isSleeping||(b=S/m.totalContacts,m.positionImpulse.x-=_.x*M*b,m.positionImpulse.y-=_.y*M*b))},i.postSolvePosition=function(c){for(var f=i._positionWarming,d=c.length,g=o.translate,u=l.update,h=0;h<d;h++){var y=c[h],m=y.positionImpulse,_=m.x,b=m.y,M=y.velocity;if(y.totalContacts=0,_!==0||b!==0){for(var S=0;S<y.parts.length;S++){var v=y.parts[S];g(v.vertices,m),u(v.bounds,v.vertices,M),v.position.x+=_,v.position.y+=b}y.positionPrev.x+=_,y.positionPrev.y+=b,_*M.x+b*M.y<0?(m.x=0,m.y=0):(m.x*=f,m.y*=f)}}},i.preSolveVelocity=function(c){var f=c.length,d,g;for(d=0;d<f;d++){var u=c[d];if(!(!u.isActive||u.isSensor)){var h=u.activeContacts,y=h.length,m=u.collision,_=m.parentA,b=m.parentB,M=m.normal,S=m.tangent;for(g=0;g<y;g++){var v=h[g],E=v.vertex,T=v.normalImpulse,A=v.tangentImpulse;if(T!==0||A!==0){var R=M.x*T+S.x*A,x=M.y*T+S.y*A;_.isStatic||_.isSleeping||(_.positionPrev.x+=R*_.inverseMass,_.positionPrev.y+=x*_.inverseMass,_.anglePrev+=_.inverseInertia*((E.x-_.position.x)*x-(E.y-_.position.y)*R)),b.isStatic||b.isSleeping||(b.positionPrev.x-=R*b.inverseMass,b.positionPrev.y-=x*b.inverseMass,b.anglePrev-=b.inverseInertia*((E.x-b.position.x)*x-(E.y-b.position.y)*R))}}}}},i.solveVelocity=function(c,f){var d=f/p._baseDelta,g=d*d,u=g*d,h=-i._restingThresh*d,y=i._restingThreshTangent,m=i._frictionNormalMultiplier*d,_=i._frictionMaxStatic,b=c.length,M,S,v,E;for(v=0;v<b;v++){var T=c[v];if(!(!T.isActive||T.isSensor)){var A=T.collision,R=A.parentA,x=A.parentB,C=R.velocity,O=x.velocity,F=A.normal.x,L=A.normal.y,I=A.tangent.x,N=A.tangent.y,k=T.activeContacts,U=k.length,H=1/U,W=R.inverseMass+x.inverseMass,z=T.friction*T.frictionStatic*m;for(C.x=R.position.x-R.positionPrev.x,C.y=R.position.y-R.positionPrev.y,O.x=x.position.x-x.positionPrev.x,O.y=x.position.y-x.positionPrev.y,R.angularVelocity=R.angle-R.anglePrev,x.angularVelocity=x.angle-x.anglePrev,E=0;E<U;E++){var j=k[E],ee=j.vertex,te=ee.x-R.position.x,ie=ee.y-R.position.y,le=ee.x-x.position.x,me=ee.y-x.position.y,fe=C.x-ie*R.angularVelocity,Oe=C.y+te*R.angularVelocity,Ue=O.x-me*x.angularVelocity,Ee=O.y+le*x.angularVelocity,q=fe-Ue,je=Oe-Ee,_e=F*q+L*je,ve=I*q+N*je,Me=T.separation+_e,ke=Math.min(Me,1);ke=Me<0?0:ke;var Ce=ke*z;ve<-Ce||ve>Ce?(S=ve>0?ve:-ve,M=T.friction*(ve>0?1:-1)*u,M<-S?M=-S:M>S&&(M=S)):(M=ve,S=_);var Te=te*L-ie*F,Ie=le*L-me*F,We=H/(W+R.inverseInertia*Te*Te+x.inverseInertia*Ie*Ie),ze=(1+T.restitution)*_e*We;if(M*=We,_e<h)j.normalImpulse=0;else{var D=j.normalImpulse;j.normalImpulse+=ze,j.normalImpulse>0&&(j.normalImpulse=0),ze=j.normalImpulse-D}if(ve<-y||ve>y)j.tangentImpulse=0;else{var w=j.tangentImpulse;j.tangentImpulse+=M,j.tangentImpulse<-S&&(j.tangentImpulse=-S),j.tangentImpulse>S&&(j.tangentImpulse=S),M=j.tangentImpulse-w}var X=F*ze+I*M,ne=L*ze+N*M;R.isStatic||R.isSleeping||(R.positionPrev.x+=X*R.inverseMass,R.positionPrev.y+=ne*R.inverseMass,R.anglePrev+=(te*ne-ie*X)*R.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=X*x.inverseMass,x.positionPrev.y-=ne*x.inverseMass,x.anglePrev-=(le*ne-me*X)*x.inverseInertia)}}}}})()},function(r,s,n){var i={};r.exports=i;var o=n(9),p=n(0);(function(){i.create=function(l){return p.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},i.update=function(l,c,f){var d=l.list,g=d.length,u=l.table,h=c.length,y=l.collisionStart,m=l.collisionEnd,_=l.collisionActive,b,M,S,v;for(y.length=0,m.length=0,_.length=0,v=0;v<g;v++)d[v].confirmedActive=!1;for(v=0;v<h;v++)b=c[v],S=b.pair,S?(S.isActive?_.push(S):y.push(S),o.update(S,b,f),S.confirmedActive=!0):(S=o.create(b,f),u[S.id]=S,y.push(S),d.push(S));var E=[];for(g=d.length,v=0;v<g;v++)S=d[v],S.confirmedActive||(o.setActive(S,!1,f),m.push(S),!S.collision.bodyA.isSleeping&&!S.collision.bodyB.isSleeping&&E.push(v));for(v=0;v<E.length;v++)M=E[v]-v,S=d[M],d.splice(M,1),delete u[S.id]},i.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(r,s,n){var i=r.exports=n(21);i.Axes=n(11),i.Bodies=n(12),i.Body=n(4),i.Bounds=n(1),i.Collision=n(8),i.Common=n(0),i.Composite=n(6),i.Composites=n(22),i.Constraint=n(10),i.Contact=n(16),i.Detector=n(13),i.Engine=n(17),i.Events=n(5),i.Grid=n(23),i.Mouse=n(14),i.MouseConstraint=n(24),i.Pair=n(9),i.Pairs=n(19),i.Plugin=n(15),i.Query=n(25),i.Render=n(26),i.Resolver=n(18),i.Runner=n(27),i.SAT=n(28),i.Sleeping=n(7),i.Svg=n(29),i.Vector=n(2),i.Vertices=n(3),i.World=n(30),i.Engine.run=i.Runner.run,i.Common.deprecated(i.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(r,s,n){var i={};r.exports=i;var o=n(15),p=n(0);(function(){i.name="matter-js",i.version="0.19.0",i.uses=[],i.used=[],i.use=function(){o.use(i,Array.prototype.slice.call(arguments))},i.before=function(l,c){return l=l.replace(/^Matter./,""),p.chainPathBefore(i,l,c)},i.after=function(l,c){return l=l.replace(/^Matter./,""),p.chainPathAfter(i,l,c)}})()},function(r,s,n){var i={};r.exports=i;var o=n(6),p=n(10),l=n(0),c=n(4),f=n(12),d=l.deprecated;(function(){i.stack=function(g,u,h,y,m,_,b){for(var M=o.create({label:"Stack"}),S=g,v=u,E,T=0,A=0;A<y;A++){for(var R=0,x=0;x<h;x++){var C=b(S,v,x,A,E,T);if(C){var O=C.bounds.max.y-C.bounds.min.y,F=C.bounds.max.x-C.bounds.min.x;O>R&&(R=O),c.translate(C,{x:F*.5,y:O*.5}),S=C.bounds.max.x+m,o.addBody(M,C),E=C,T+=1}else S+=m}v+=R+_,S=g}return M},i.chain=function(g,u,h,y,m,_){for(var b=g.bodies,M=1;M<b.length;M++){var S=b[M-1],v=b[M],E=S.bounds.max.y-S.bounds.min.y,T=S.bounds.max.x-S.bounds.min.x,A=v.bounds.max.y-v.bounds.min.y,R=v.bounds.max.x-v.bounds.min.x,x={bodyA:S,pointA:{x:T*u,y:E*h},bodyB:v,pointB:{x:R*y,y:A*m}},C=l.extend(x,_);o.addConstraint(g,p.create(C))}return g.label+=" Chain",g},i.mesh=function(g,u,h,y,m){var _=g.bodies,b,M,S,v,E;for(b=0;b<h;b++){for(M=1;M<u;M++)S=_[M-1+b*u],v=_[M+b*u],o.addConstraint(g,p.create(l.extend({bodyA:S,bodyB:v},m)));if(b>0)for(M=0;M<u;M++)S=_[M+(b-1)*u],v=_[M+b*u],o.addConstraint(g,p.create(l.extend({bodyA:S,bodyB:v},m))),y&&M>0&&(E=_[M-1+(b-1)*u],o.addConstraint(g,p.create(l.extend({bodyA:E,bodyB:v},m)))),y&&M<u-1&&(E=_[M+1+(b-1)*u],o.addConstraint(g,p.create(l.extend({bodyA:E,bodyB:v},m))))}return g.label+=" Mesh",g},i.pyramid=function(g,u,h,y,m,_,b){return i.stack(g,u,h,y,m,_,function(M,S,v,E,T,A){var R=Math.min(y,Math.ceil(h/2)),x=T?T.bounds.max.x-T.bounds.min.x:0;if(!(E>R)){E=R-E;var C=E,O=h-1-E;if(!(v<C||v>O)){A===1&&c.translate(T,{x:(v+(h%2===1?1:-1))*x,y:0});var F=T?v*x:0;return b(g+F+v*m,S,v,E,T,A)}}})},i.newtonsCradle=function(g,u,h,y,m){for(var _=o.create({label:"Newtons Cradle"}),b=0;b<h;b++){var M=1.9,S=f.circle(g+b*(y*M),u+m,y,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),v=p.create({pointA:{x:g+b*(y*M),y:u},bodyB:S});o.addBody(_,S),o.addConstraint(_,v)}return _},d(i,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),i.car=function(g,u,h,y,m){var _=c.nextGroup(!0),b=20,M=-h*.5+b,S=h*.5-b,v=0,E=o.create({label:"Car"}),T=f.rectangle(g,u,h,y,{collisionFilter:{group:_},chamfer:{radius:y*.5},density:2e-4}),A=f.circle(g+M,u+v,m,{collisionFilter:{group:_},friction:.8}),R=f.circle(g+S,u+v,m,{collisionFilter:{group:_},friction:.8}),x=p.create({bodyB:T,pointB:{x:M,y:v},bodyA:A,stiffness:1,length:0}),C=p.create({bodyB:T,pointB:{x:S,y:v},bodyA:R,stiffness:1,length:0});return o.addBody(E,T),o.addBody(E,A),o.addBody(E,R),o.addConstraint(E,x),o.addConstraint(E,C),E},d(i,"car","Composites.car  moved to car example"),i.softBody=function(g,u,h,y,m,_,b,M,S,v){S=l.extend({inertia:1/0},S),v=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},v);var E=i.stack(g,u,h,y,m,_,function(T,A){return f.circle(T,A,M,S)});return i.mesh(E,h,y,b,v),E.label="Soft Body",E},d(i,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(r,s,n){var i={};r.exports=i;var o=n(9),p=n(0),l=p.deprecated;(function(){i.create=function(c){var f={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return p.extend(f,c)},i.update=function(c,f,d,g){var u,h,y,m=d.world,_=c.buckets,b,M,S=!1;for(u=0;u<f.length;u++){var v=f[u];if(!(v.isSleeping&&!g)&&!(m.bounds&&(v.bounds.max.x<m.bounds.min.x||v.bounds.min.x>m.bounds.max.x||v.bounds.max.y<m.bounds.min.y||v.bounds.min.y>m.bounds.max.y))){var E=i._getRegion(c,v);if(!v.region||E.id!==v.region.id||g){(!v.region||g)&&(v.region=E);var T=i._regionUnion(E,v.region);for(h=T.startCol;h<=T.endCol;h++)for(y=T.startRow;y<=T.endRow;y++){M=i._getBucketId(h,y),b=_[M];var A=h>=E.startCol&&h<=E.endCol&&y>=E.startRow&&y<=E.endRow,R=h>=v.region.startCol&&h<=v.region.endCol&&y>=v.region.startRow&&y<=v.region.endRow;!A&&R&&R&&b&&i._bucketRemoveBody(c,b,v),(v.region===E||A&&!R||g)&&(b||(b=i._createBucket(_,M)),i._bucketAddBody(c,b,v))}v.region=E,S=!0}}}S&&(c.pairsList=i._createActivePairsList(c))},l(i,"update","Grid.update  replaced by Matter.Detector"),i.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},l(i,"clear","Grid.clear  replaced by Matter.Detector"),i._regionUnion=function(c,f){var d=Math.min(c.startCol,f.startCol),g=Math.max(c.endCol,f.endCol),u=Math.min(c.startRow,f.startRow),h=Math.max(c.endRow,f.endRow);return i._createRegion(d,g,u,h)},i._getRegion=function(c,f){var d=f.bounds,g=Math.floor(d.min.x/c.bucketWidth),u=Math.floor(d.max.x/c.bucketWidth),h=Math.floor(d.min.y/c.bucketHeight),y=Math.floor(d.max.y/c.bucketHeight);return i._createRegion(g,u,h,y)},i._createRegion=function(c,f,d,g){return{id:c+","+f+","+d+","+g,startCol:c,endCol:f,startRow:d,endRow:g}},i._getBucketId=function(c,f){return"C"+c+"R"+f},i._createBucket=function(c,f){var d=c[f]=[];return d},i._bucketAddBody=function(c,f,d){var g=c.pairs,u=o.id,h=f.length,y;for(y=0;y<h;y++){var m=f[y];if(!(d.id===m.id||d.isStatic&&m.isStatic)){var _=u(d,m),b=g[_];b?b[2]+=1:g[_]=[d,m,1]}}f.push(d)},i._bucketRemoveBody=function(c,f,d){var g=c.pairs,u=o.id,h;f.splice(p.indexOf(f,d),1);var y=f.length;for(h=0;h<y;h++){var m=g[u(d,f[h])];m&&(m[2]-=1)}},i._createActivePairsList=function(c){var f,d=c.pairs,g=p.keys(d),u=g.length,h=[],y;for(y=0;y<u;y++)f=d[g[y]],f[2]>0?h.push(f):delete d[g[y]];return h}})()},function(r,s,n){var i={};r.exports=i;var o=n(3),p=n(7),l=n(14),c=n(5),f=n(13),d=n(10),g=n(6),u=n(0),h=n(1);(function(){i.create=function(y,m){var _=(y?y.mouse:null)||(m?m.mouse:null);_||(y&&y.render&&y.render.canvas?_=l.create(y.render.canvas):m&&m.element?_=l.create(m.element):(_=l.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var b=d.create({label:"Mouse Constraint",pointA:_.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),M={type:"mouseConstraint",mouse:_,element:null,body:null,constraint:b,collisionFilter:{category:1,mask:4294967295,group:0}},S=u.extend(M,m);return c.on(y,"beforeUpdate",function(){var v=g.allBodies(y.world);i.update(S,v),i._triggerEvents(S)}),S},i.update=function(y,m){var _=y.mouse,b=y.constraint,M=y.body;if(_.button===0){if(b.bodyB)p.set(b.bodyB,!1),b.pointA=_.position;else for(var S=0;S<m.length;S++)if(M=m[S],h.contains(M.bounds,_.position)&&f.canCollide(M.collisionFilter,y.collisionFilter))for(var v=M.parts.length>1?1:0;v<M.parts.length;v++){var E=M.parts[v];if(o.contains(E.vertices,_.position)){b.pointA=_.position,b.bodyB=y.body=M,b.pointB={x:_.position.x-M.position.x,y:_.position.y-M.position.y},b.angleB=M.angle,p.set(M,!1),c.trigger(y,"startdrag",{mouse:_,body:M});break}}}else b.bodyB=y.body=null,b.pointB=null,M&&c.trigger(y,"enddrag",{mouse:_,body:M})},i._triggerEvents=function(y){var m=y.mouse,_=m.sourceEvents;_.mousemove&&c.trigger(y,"mousemove",{mouse:m}),_.mousedown&&c.trigger(y,"mousedown",{mouse:m}),_.mouseup&&c.trigger(y,"mouseup",{mouse:m}),l.clearSourceEvents(m)}})()},function(r,s,n){var i={};r.exports=i;var o=n(2),p=n(8),l=n(1),c=n(12),f=n(3);(function(){i.collides=function(d,g){for(var u=[],h=g.length,y=d.bounds,m=p.collides,_=l.overlaps,b=0;b<h;b++){var M=g[b],S=M.parts.length,v=S===1?0:1;if(_(M.bounds,y))for(var E=v;E<S;E++){var T=M.parts[E];if(_(T.bounds,y)){var A=m(T,d);if(A){u.push(A);break}}}}return u},i.ray=function(d,g,u,h){h=h||1e-100;for(var y=o.angle(g,u),m=o.magnitude(o.sub(g,u)),_=(u.x+g.x)*.5,b=(u.y+g.y)*.5,M=c.rectangle(_,b,m,h,{angle:y}),S=i.collides(M,d),v=0;v<S.length;v+=1){var E=S[v];E.body=E.bodyB=E.bodyA}return S},i.region=function(d,g,u){for(var h=[],y=0;y<d.length;y++){var m=d[y],_=l.overlaps(m.bounds,g);(_&&!u||!_&&u)&&h.push(m)}return h},i.point=function(d,g){for(var u=[],h=0;h<d.length;h++){var y=d[h];if(l.contains(y.bounds,g))for(var m=y.parts.length===1?0:1;m<y.parts.length;m++){var _=y.parts[m];if(l.contains(_.bounds,g)&&f.contains(_.vertices,g)){u.push(y);break}}}return u}})()},function(r,s,n){var i={};r.exports=i;var o=n(4),p=n(0),l=n(6),c=n(1),f=n(5),d=n(2),g=n(14);(function(){var u,h;typeof window<"u"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(p.now())},1e3/60)},h=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i._goodFps=30,i._goodDelta=1e3/60,i.create=function(v){var E={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},T=p.extend(E,v);return T.canvas&&(T.canvas.width=T.options.width||T.canvas.width,T.canvas.height=T.options.height||T.canvas.height),T.mouse=v.mouse,T.engine=v.engine,T.canvas=T.canvas||_(T.options.width,T.options.height),T.context=T.canvas.getContext("2d"),T.textures={},T.bounds=T.bounds||{min:{x:0,y:0},max:{x:T.canvas.width,y:T.canvas.height}},T.controller=i,T.options.showBroadphase=!1,T.options.pixelRatio!==1&&i.setPixelRatio(T,T.options.pixelRatio),p.isElement(T.element)&&T.element.appendChild(T.canvas),T},i.run=function(v){(function E(T){v.frameRequestId=u(E),y(v,T),i.world(v,T),(v.options.showStats||v.options.showDebug)&&i.stats(v,v.context,T),(v.options.showPerformance||v.options.showDebug)&&i.performance(v,v.context,T)})()},i.stop=function(v){h(v.frameRequestId)},i.setPixelRatio=function(v,E){var T=v.options,A=v.canvas;E==="auto"&&(E=b(A)),T.pixelRatio=E,A.setAttribute("data-pixel-ratio",E),A.width=T.width*E,A.height=T.height*E,A.style.width=T.width+"px",A.style.height=T.height+"px"},i.lookAt=function(v,E,T,A){A=typeof A<"u"?A:!0,E=p.isArray(E)?E:[E],T=T||{x:0,y:0};for(var R={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},x=0;x<E.length;x+=1){var C=E[x],O=C.bounds?C.bounds.min:C.min||C.position||C,F=C.bounds?C.bounds.max:C.max||C.position||C;O&&F&&(O.x<R.min.x&&(R.min.x=O.x),F.x>R.max.x&&(R.max.x=F.x),O.y<R.min.y&&(R.min.y=O.y),F.y>R.max.y&&(R.max.y=F.y))}var L=R.max.x-R.min.x+2*T.x,I=R.max.y-R.min.y+2*T.y,N=v.canvas.height,k=v.canvas.width,U=k/N,H=L/I,W=1,z=1;H>U?z=H/U:W=U/H,v.options.hasBounds=!0,v.bounds.min.x=R.min.x,v.bounds.max.x=R.min.x+L*W,v.bounds.min.y=R.min.y,v.bounds.max.y=R.min.y+I*z,A&&(v.bounds.min.x+=L*.5-L*W*.5,v.bounds.max.x+=L*.5-L*W*.5,v.bounds.min.y+=I*.5-I*z*.5,v.bounds.max.y+=I*.5-I*z*.5),v.bounds.min.x-=T.x,v.bounds.max.x-=T.x,v.bounds.min.y-=T.y,v.bounds.max.y-=T.y,v.mouse&&(g.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),g.setOffset(v.mouse,v.bounds.min))},i.startViewTransform=function(v){var E=v.bounds.max.x-v.bounds.min.x,T=v.bounds.max.y-v.bounds.min.y,A=E/v.options.width,R=T/v.options.height;v.context.setTransform(v.options.pixelRatio/A,0,0,v.options.pixelRatio/R,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},i.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},i.world=function(v,E){var T=p.now(),A=v.engine,R=A.world,x=v.canvas,C=v.context,O=v.options,F=v.timing,L=l.allBodies(R),I=l.allConstraints(R),N=O.wireframes?O.wireframeBackground:O.background,k=[],U=[],H,W={timestamp:A.timing.timestamp};if(f.trigger(v,"beforeRender",W),v.currentBackground!==N&&S(v,N),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,x.width,x.height),C.globalCompositeOperation="source-over",O.hasBounds){for(H=0;H<L.length;H++){var z=L[H];c.overlaps(z.bounds,v.bounds)&&k.push(z)}for(H=0;H<I.length;H++){var j=I[H],ee=j.bodyA,te=j.bodyB,ie=j.pointA,le=j.pointB;ee&&(ie=d.add(ee.position,j.pointA)),te&&(le=d.add(te.position,j.pointB)),!(!ie||!le)&&(c.contains(v.bounds,ie)||c.contains(v.bounds,le))&&U.push(j)}i.startViewTransform(v),v.mouse&&(g.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),g.setOffset(v.mouse,v.bounds.min))}else U=I,k=L,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!O.wireframes||A.enableSleeping&&O.showSleeping?i.bodies(v,k,C):(O.showConvexHulls&&i.bodyConvexHulls(v,k,C),i.bodyWireframes(v,k,C)),O.showBounds&&i.bodyBounds(v,k,C),(O.showAxes||O.showAngleIndicator)&&i.bodyAxes(v,k,C),O.showPositions&&i.bodyPositions(v,k,C),O.showVelocity&&i.bodyVelocity(v,k,C),O.showIds&&i.bodyIds(v,k,C),O.showSeparations&&i.separations(v,A.pairs.list,C),O.showCollisions&&i.collisions(v,A.pairs.list,C),O.showVertexNumbers&&i.vertexNumbers(v,k,C),O.showMousePosition&&i.mousePosition(v,v.mouse,C),i.constraints(U,C),O.hasBounds&&i.endViewTransform(v),f.trigger(v,"afterRender",W),F.lastElapsed=p.now()-T},i.stats=function(v,E,T){for(var A=v.engine,R=A.world,x=l.allBodies(R),C=0,O=55,F=44,L=0,I=0,N=0;N<x.length;N+=1)C+=x[N].parts.length;var k={Part:C,Body:x.length,Cons:l.allConstraints(R).length,Comp:l.allComposites(R).length,Pair:A.pairs.list.length};E.fillStyle="#0e0f19",E.fillRect(L,I,O*5.5,F),E.font="12px Arial",E.textBaseline="top",E.textAlign="right";for(var U in k){var H=k[U];E.fillStyle="#aaa",E.fillText(U,L+O,I+8),E.fillStyle="#eee",E.fillText(H,L+O,I+26),L+=O}},i.performance=function(v,E){var T=v.engine,A=v.timing,R=A.deltaHistory,x=A.elapsedHistory,C=A.timestampElapsedHistory,O=A.engineDeltaHistory,F=A.engineElapsedHistory,L=T.timing.lastDelta,I=m(R),N=m(x),k=m(O),U=m(F),H=m(C),W=H/I||0,z=1e3/I||0,j=4,ee=12,te=60,ie=34,le=10,me=69;E.fillStyle="#0e0f19",E.fillRect(0,50,ee*4+te*5+22,ie),i.status(E,le,me,te,j,R.length,Math.round(z)+" fps",z/i._goodFps,function(fe){return R[fe]/I-1}),i.status(E,le+ee+te,me,te,j,O.length,L.toFixed(2)+" dt",i._goodDelta/L,function(fe){return O[fe]/k-1}),i.status(E,le+(ee+te)*2,me,te,j,F.length,U.toFixed(2)+" ut",1-U/i._goodFps,function(fe){return F[fe]/U-1}),i.status(E,le+(ee+te)*3,me,te,j,x.length,N.toFixed(2)+" rt",1-N/i._goodFps,function(fe){return x[fe]/N-1}),i.status(E,le+(ee+te)*4,me,te,j,C.length,W.toFixed(2)+" x",W*W*W,function(fe){return(C[fe]/R[fe]/W||0)-1})},i.status=function(v,E,T,A,R,x,C,O,F){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(E,T+7,A,1),v.beginPath(),v.moveTo(E,T+7-R*p.clamp(.4*F(0),-2,2));for(var L=0;L<A;L+=1)v.lineTo(E+L,T+7-(L<x?R*p.clamp(.4*F(L),-2,2):0));v.stroke(),v.fillStyle="hsl("+p.clamp(25+95*O,0,120)+",100%,60%)",v.fillRect(E,T-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(C,E+A,T-5)},i.constraints=function(v,E){for(var T=E,A=0;A<v.length;A++){var R=v[A];if(!(!R.render.visible||!R.pointA||!R.pointB)){var x=R.bodyA,C=R.bodyB,O,F;if(x?O=d.add(x.position,R.pointA):O=R.pointA,R.render.type==="pin")T.beginPath(),T.arc(O.x,O.y,3,0,2*Math.PI),T.closePath();else{if(C?F=d.add(C.position,R.pointB):F=R.pointB,T.beginPath(),T.moveTo(O.x,O.y),R.render.type==="spring")for(var L=d.sub(F,O),I=d.perp(d.normalise(L)),N=Math.ceil(p.clamp(R.length/5,12,20)),k,U=1;U<N;U+=1)k=U%2===0?1:-1,T.lineTo(O.x+L.x*(U/N)+I.x*k*4,O.y+L.y*(U/N)+I.y*k*4);T.lineTo(F.x,F.y)}R.render.lineWidth&&(T.lineWidth=R.render.lineWidth,T.strokeStyle=R.render.strokeStyle,T.stroke()),R.render.anchors&&(T.fillStyle=R.render.strokeStyle,T.beginPath(),T.arc(O.x,O.y,3,0,2*Math.PI),T.arc(F.x,F.y,3,0,2*Math.PI),T.closePath(),T.fill())}}},i.bodies=function(v,E,T){var A=T;v.engine;var R=v.options,x=R.showInternalEdges||!R.wireframes,C,O,F,L;for(F=0;F<E.length;F++)if(C=E[F],!!C.render.visible){for(L=C.parts.length>1?1:0;L<C.parts.length;L++)if(O=C.parts[L],!!O.render.visible){if(R.showSleeping&&C.isSleeping?A.globalAlpha=.5*O.render.opacity:O.render.opacity!==1&&(A.globalAlpha=O.render.opacity),O.render.sprite&&O.render.sprite.texture&&!R.wireframes){var I=O.render.sprite,N=M(v,I.texture);A.translate(O.position.x,O.position.y),A.rotate(O.angle),A.drawImage(N,N.width*-I.xOffset*I.xScale,N.height*-I.yOffset*I.yScale,N.width*I.xScale,N.height*I.yScale),A.rotate(-O.angle),A.translate(-O.position.x,-O.position.y)}else{if(O.circleRadius)A.beginPath(),A.arc(O.position.x,O.position.y,O.circleRadius,0,2*Math.PI);else{A.beginPath(),A.moveTo(O.vertices[0].x,O.vertices[0].y);for(var k=1;k<O.vertices.length;k++)!O.vertices[k-1].isInternal||x?A.lineTo(O.vertices[k].x,O.vertices[k].y):A.moveTo(O.vertices[k].x,O.vertices[k].y),O.vertices[k].isInternal&&!x&&A.moveTo(O.vertices[(k+1)%O.vertices.length].x,O.vertices[(k+1)%O.vertices.length].y);A.lineTo(O.vertices[0].x,O.vertices[0].y),A.closePath()}R.wireframes?(A.lineWidth=1,A.strokeStyle="#bbb",A.stroke()):(A.fillStyle=O.render.fillStyle,O.render.lineWidth&&(A.lineWidth=O.render.lineWidth,A.strokeStyle=O.render.strokeStyle,A.stroke()),A.fill())}A.globalAlpha=1}}},i.bodyWireframes=function(v,E,T){var A=T,R=v.options.showInternalEdges,x,C,O,F,L;for(A.beginPath(),O=0;O<E.length;O++)if(x=E[O],!!x.render.visible)for(L=x.parts.length>1?1:0;L<x.parts.length;L++){for(C=x.parts[L],A.moveTo(C.vertices[0].x,C.vertices[0].y),F=1;F<C.vertices.length;F++)!C.vertices[F-1].isInternal||R?A.lineTo(C.vertices[F].x,C.vertices[F].y):A.moveTo(C.vertices[F].x,C.vertices[F].y),C.vertices[F].isInternal&&!R&&A.moveTo(C.vertices[(F+1)%C.vertices.length].x,C.vertices[(F+1)%C.vertices.length].y);A.lineTo(C.vertices[0].x,C.vertices[0].y)}A.lineWidth=1,A.strokeStyle="#bbb",A.stroke()},i.bodyConvexHulls=function(v,E,T){var A=T,R,x,C;for(A.beginPath(),x=0;x<E.length;x++)if(R=E[x],!(!R.render.visible||R.parts.length===1)){for(A.moveTo(R.vertices[0].x,R.vertices[0].y),C=1;C<R.vertices.length;C++)A.lineTo(R.vertices[C].x,R.vertices[C].y);A.lineTo(R.vertices[0].x,R.vertices[0].y)}A.lineWidth=1,A.strokeStyle="rgba(255,255,255,0.2)",A.stroke()},i.vertexNumbers=function(v,E,T){var A=T,R,x,C;for(R=0;R<E.length;R++){var O=E[R].parts;for(C=O.length>1?1:0;C<O.length;C++){var F=O[C];for(x=0;x<F.vertices.length;x++)A.fillStyle="rgba(255,255,255,0.2)",A.fillText(R+"_"+x,F.position.x+(F.vertices[x].x-F.position.x)*.8,F.position.y+(F.vertices[x].y-F.position.y)*.8)}}},i.mousePosition=function(v,E,T){var A=T;A.fillStyle="rgba(255,255,255,0.8)",A.fillText(E.position.x+"  "+E.position.y,E.position.x+5,E.position.y-5)},i.bodyBounds=function(v,E,T){var A=T;v.engine;var R=v.options;A.beginPath();for(var x=0;x<E.length;x++){var C=E[x];if(C.render.visible)for(var O=E[x].parts,F=O.length>1?1:0;F<O.length;F++){var L=O[F];A.rect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}R.wireframes?A.strokeStyle="rgba(255,255,255,0.08)":A.strokeStyle="rgba(0,0,0,0.1)",A.lineWidth=1,A.stroke()},i.bodyAxes=function(v,E,T){var A=T;v.engine;var R=v.options,x,C,O,F;for(A.beginPath(),C=0;C<E.length;C++){var L=E[C],I=L.parts;if(L.render.visible)if(R.showAxes)for(O=I.length>1?1:0;O<I.length;O++)for(x=I[O],F=0;F<x.axes.length;F++){var N=x.axes[F];A.moveTo(x.position.x,x.position.y),A.lineTo(x.position.x+N.x*20,x.position.y+N.y*20)}else for(O=I.length>1?1:0;O<I.length;O++)for(x=I[O],F=0;F<x.axes.length;F++)A.moveTo(x.position.x,x.position.y),A.lineTo((x.vertices[0].x+x.vertices[x.vertices.length-1].x)/2,(x.vertices[0].y+x.vertices[x.vertices.length-1].y)/2)}R.wireframes?(A.strokeStyle="indianred",A.lineWidth=1):(A.strokeStyle="rgba(255, 255, 255, 0.4)",A.globalCompositeOperation="overlay",A.lineWidth=2),A.stroke(),A.globalCompositeOperation="source-over"},i.bodyPositions=function(v,E,T){var A=T;v.engine;var R=v.options,x,C,O,F;for(A.beginPath(),O=0;O<E.length;O++)if(x=E[O],!!x.render.visible)for(F=0;F<x.parts.length;F++)C=x.parts[F],A.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),A.closePath();for(R.wireframes?A.fillStyle="indianred":A.fillStyle="rgba(0,0,0,0.5)",A.fill(),A.beginPath(),O=0;O<E.length;O++)x=E[O],x.render.visible&&(A.arc(x.positionPrev.x,x.positionPrev.y,2,0,2*Math.PI,!1),A.closePath());A.fillStyle="rgba(255,165,0,0.8)",A.fill()},i.bodyVelocity=function(v,E,T){var A=T;A.beginPath();for(var R=0;R<E.length;R++){var x=E[R];if(x.render.visible){var C=o.getVelocity(x);A.moveTo(x.position.x,x.position.y),A.lineTo(x.position.x+C.x,x.position.y+C.y)}}A.lineWidth=3,A.strokeStyle="cornflowerblue",A.stroke()},i.bodyIds=function(v,E,T){var A=T,R,x;for(R=0;R<E.length;R++)if(E[R].render.visible){var C=E[R].parts;for(x=C.length>1?1:0;x<C.length;x++){var O=C[x];A.font="12px Arial",A.fillStyle="rgba(255,255,255,0.5)",A.fillText(O.id,O.position.x+10,O.position.y-10)}}},i.collisions=function(v,E,T){var A=T,R=v.options,x,C,O,F;for(A.beginPath(),O=0;O<E.length;O++)if(x=E[O],!!x.isActive)for(C=x.collision,F=0;F<x.activeContacts.length;F++){var L=x.activeContacts[F],I=L.vertex;A.rect(I.x-1.5,I.y-1.5,3.5,3.5)}for(R.wireframes?A.fillStyle="rgba(255,255,255,0.7)":A.fillStyle="orange",A.fill(),A.beginPath(),O=0;O<E.length;O++)if(x=E[O],!!x.isActive&&(C=x.collision,x.activeContacts.length>0)){var N=x.activeContacts[0].vertex.x,k=x.activeContacts[0].vertex.y;x.activeContacts.length===2&&(N=(x.activeContacts[0].vertex.x+x.activeContacts[1].vertex.x)/2,k=(x.activeContacts[0].vertex.y+x.activeContacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?A.moveTo(N-C.normal.x*8,k-C.normal.y*8):A.moveTo(N+C.normal.x*8,k+C.normal.y*8),A.lineTo(N,k)}R.wireframes?A.strokeStyle="rgba(255,165,0,0.7)":A.strokeStyle="orange",A.lineWidth=1,A.stroke()},i.separations=function(v,E,T){var A=T,R=v.options,x,C,O,F,L;for(A.beginPath(),L=0;L<E.length;L++)if(x=E[L],!!x.isActive){C=x.collision,O=C.bodyA,F=C.bodyB;var I=1;!F.isStatic&&!O.isStatic&&(I=.5),F.isStatic&&(I=0),A.moveTo(F.position.x,F.position.y),A.lineTo(F.position.x-C.penetration.x*I,F.position.y-C.penetration.y*I),I=1,!F.isStatic&&!O.isStatic&&(I=.5),O.isStatic&&(I=0),A.moveTo(O.position.x,O.position.y),A.lineTo(O.position.x+C.penetration.x*I,O.position.y+C.penetration.y*I)}R.wireframes?A.strokeStyle="rgba(255,165,0,0.5)":A.strokeStyle="orange",A.stroke()},i.inspector=function(v,E){v.engine;var T=v.selected,A=v.render,R=A.options,x;if(R.hasBounds){var C=A.bounds.max.x-A.bounds.min.x,O=A.bounds.max.y-A.bounds.min.y,F=C/A.options.width,L=O/A.options.height;E.scale(1/F,1/L),E.translate(-A.bounds.min.x,-A.bounds.min.y)}for(var I=0;I<T.length;I++){var N=T[I].data;switch(E.translate(.5,.5),E.lineWidth=1,E.strokeStyle="rgba(255,165,0,0.9)",E.setLineDash([1,2]),N.type){case"body":x=N.bounds,E.beginPath(),E.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),E.closePath(),E.stroke();break;case"constraint":var k=N.pointA;N.bodyA&&(k=N.pointB),E.beginPath(),E.arc(k.x,k.y,10,0,2*Math.PI),E.closePath(),E.stroke();break}E.setLineDash([]),E.translate(-.5,-.5)}v.selectStart!==null&&(E.translate(.5,.5),E.lineWidth=1,E.strokeStyle="rgba(255,165,0,0.6)",E.fillStyle="rgba(255,165,0,0.1)",x=v.selectBounds,E.beginPath(),E.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),E.closePath(),E.stroke(),E.fill(),E.translate(-.5,-.5)),R.hasBounds&&E.setTransform(1,0,0,1,0,0)};var y=function(v,E){var T=v.engine,A=v.timing,R=A.historySize,x=T.timing.timestamp;A.delta=E-A.lastTime||i._goodDelta,A.lastTime=E,A.timestampElapsed=x-A.lastTimestamp||0,A.lastTimestamp=x,A.deltaHistory.unshift(A.delta),A.deltaHistory.length=Math.min(A.deltaHistory.length,R),A.engineDeltaHistory.unshift(T.timing.lastDelta),A.engineDeltaHistory.length=Math.min(A.engineDeltaHistory.length,R),A.timestampElapsedHistory.unshift(A.timestampElapsed),A.timestampElapsedHistory.length=Math.min(A.timestampElapsedHistory.length,R),A.engineElapsedHistory.unshift(T.timing.lastElapsed),A.engineElapsedHistory.length=Math.min(A.engineElapsedHistory.length,R),A.elapsedHistory.unshift(A.lastElapsed),A.elapsedHistory.length=Math.min(A.elapsedHistory.length,R)},m=function(v){for(var E=0,T=0;T<v.length;T+=1)E+=v[T];return E/v.length||0},_=function(v,E){var T=document.createElement("canvas");return T.width=v,T.height=E,T.oncontextmenu=function(){return!1},T.onselectstart=function(){return!1},T},b=function(v){var E=v.getContext("2d"),T=window.devicePixelRatio||1,A=E.webkitBackingStorePixelRatio||E.mozBackingStorePixelRatio||E.msBackingStorePixelRatio||E.oBackingStorePixelRatio||E.backingStorePixelRatio||1;return T/A},M=function(v,E){var T=v.textures[E];return T||(T=v.textures[E]=new Image,T.src=E,T)},S=function(v,E){var T=E;/(jpg|gif|png)$/.test(E)&&(T="url("+E+")"),v.canvas.style.background=T,v.canvas.style.backgroundSize="contain",v.currentBackground=E}})()},function(r,s,n){var i={};r.exports=i;var o=n(5),p=n(17),l=n(0);(function(){var c,f;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,f=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var d;c=function(g){d=setTimeout(function(){g(l.now())},1e3/60)},f=function(){clearTimeout(d)}}i.create=function(g){var u={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},h=l.extend(u,g);return h.delta=h.delta||1e3/h.fps,h.deltaMin=h.deltaMin||1e3/h.fps,h.deltaMax=h.deltaMax||1e3/(h.fps*.5),h.fps=1e3/h.delta,h},i.run=function(g,u){return typeof g.positionIterations<"u"&&(u=g,g=i.create()),function h(y){g.frameRequestId=c(h),y&&g.enabled&&i.tick(g,u,y)}(),g},i.tick=function(g,u,h){var y=u.timing,m;g.isFixed?m=g.delta:(m=h-g.timePrev||g.delta,g.timePrev=h,g.deltaHistory.push(m),g.deltaHistory=g.deltaHistory.slice(-g.deltaSampleSize),m=Math.min.apply(null,g.deltaHistory),m=m<g.deltaMin?g.deltaMin:m,m=m>g.deltaMax?g.deltaMax:m,g.delta=m);var _={timestamp:y.timestamp};o.trigger(g,"beforeTick",_),g.frameCounter+=1,h-g.counterTimestamp>=1e3&&(g.fps=g.frameCounter*((h-g.counterTimestamp)/1e3),g.counterTimestamp=h,g.frameCounter=0),o.trigger(g,"tick",_),o.trigger(g,"beforeUpdate",_),p.update(u,m),o.trigger(g,"afterUpdate",_),o.trigger(g,"afterTick",_)},i.stop=function(g){f(g.frameRequestId)},i.start=function(g,u){i.run(g,u)}})()},function(r,s,n){var i={};r.exports=i;var o=n(8),p=n(0),l=p.deprecated;(function(){i.collides=function(c,f){return o.collides(c,f)},l(i,"collides","SAT.collides  replaced by Collision.collides")})()},function(r,s,n){var i={};r.exports=i,n(1);var o=n(0);(function(){i.pathToVertices=function(p,l){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,f,d,g,u,h,y,m,_,b,M=[],S,v,E=0,T=0,A=0;l=l||15;var R=function(C,O,F){var L=F%2===1&&F>1;if(!_||C!=_.x||O!=_.y){_&&L?(S=_.x,v=_.y):(S=0,v=0);var I={x:S+C,y:v+O};(L||!_)&&(_=I),M.push(I),T=S+C,A=v+O}},x=function(C){var O=C.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":T=C.x,A=C.y;break;case"H":T=C.x;break;case"V":A=C.y;break}R(T,A,C.pathSegType)}};for(i._svgPathToAbsolute(p),d=p.getTotalLength(),h=[],c=0;c<p.pathSegList.numberOfItems;c+=1)h.push(p.pathSegList.getItem(c));for(y=h.concat();E<d;){if(b=p.getPathSegAtLength(E),u=h[b],u!=m){for(;y.length&&y[0]!=u;)x(y.shift());m=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":g=p.getPointAtLength(E),R(g.x,g.y,0);break}E+=l}for(c=0,f=y.length;c<f;++c)x(y[c]);return M},i._svgPathToAbsolute=function(p){for(var l,c,f,d,g,u,h=p.pathSegList,y=0,m=0,_=h.numberOfItems,b=0;b<_;++b){var M=h.getItem(b),S=M.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(S))"x"in M&&(y=M.x),"y"in M&&(m=M.y);else switch("x1"in M&&(f=y+M.x1),"x2"in M&&(g=y+M.x2),"y1"in M&&(d=m+M.y1),"y2"in M&&(u=m+M.y2),"x"in M&&(y+=M.x),"y"in M&&(m+=M.y),S){case"m":h.replaceItem(p.createSVGPathSegMovetoAbs(y,m),b);break;case"l":h.replaceItem(p.createSVGPathSegLinetoAbs(y,m),b);break;case"h":h.replaceItem(p.createSVGPathSegLinetoHorizontalAbs(y),b);break;case"v":h.replaceItem(p.createSVGPathSegLinetoVerticalAbs(m),b);break;case"c":h.replaceItem(p.createSVGPathSegCurvetoCubicAbs(y,m,f,d,g,u),b);break;case"s":h.replaceItem(p.createSVGPathSegCurvetoCubicSmoothAbs(y,m,g,u),b);break;case"q":h.replaceItem(p.createSVGPathSegCurvetoQuadraticAbs(y,m,f,d),b);break;case"t":h.replaceItem(p.createSVGPathSegCurvetoQuadraticSmoothAbs(y,m),b);break;case"a":h.replaceItem(p.createSVGPathSegArcAbs(y,m,M.r1,M.r2,M.angle,M.largeArcFlag,M.sweepFlag),b);break;case"z":case"Z":y=l,m=c;break}(S=="M"||S=="m")&&(l=y,c=m)}}})()},function(r,s,n){var i={};r.exports=i;var o=n(6);n(0),function(){i.create=o.create,i.add=o.add,i.remove=o.remove,i.clear=o.clear,i.addComposite=o.addComposite,i.addBody=o.addBody,i.addConstraint=o.addConstraint}()}])})})(matter);var matterExports=matter.exports;const Matter=getDefaultExportFromCjs(matterExports),WIDTH=window.screen.width,HEIGHT=window.screen.height,BLADE={TRAIL_LENGTH:10,HEAD_RADIUS:10,COLOR:"#ed4344"},FRUIT={RADIUS:40,COLOR:"#fff200"},SLING={X:WIDTH/2,Y:HEIGHT+FRUIT.RADIUS*2},DEFAULT_DELAY=60*3,DELAY_STEP=5,CIRCLE_VERTICES_NUMBER=50,createCircle=(t,e,r=0,s=Math.PI*2)=>{let n=Math.floor(Math.abs(s/(Math.PI*2)*CIRCLE_VERTICES_NUMBER));const i=s/n;n!==CIRCLE_VERTICES_NUMBER&&n++;const o=Array.from({length:n},(p,l)=>{const c=r+l*i;return Matter.Vector.create(t+FRUIT.RADIUS*Math.cos(c),e+FRUIT.RADIUS*Math.sin(c))});return Matter.Bodies.fromVertices(t,e,[o],{render:{fillStyle:FRUIT.COLOR}})},getPointsDeltas=(t,e)=>({dx:e.x-t.x,dy:e.y-t.y}),getDistanceBetweenPoints=(t,e)=>{const{dx:r,dy:s}=getPointsDeltas(t,e);return Math.sqrt(r**2+s**2)},getAngleBetweenPoints=(t,e)=>{const{dx:r,dy:s}=getPointsDeltas(t,e);return Math.atan2(s,r)},areCirclesColliding=(t,e)=>getDistanceBetweenPoints(t,e)<t.r+e.r;class Blade{constructor(){Xe(this,"trail",[{x:0,y:0},{x:0,y:0}])}get angle(){return getAngleBetweenPoints(this.trail[0],this.trail[1])}get velocity(){return getDistanceBetweenPoints(this.trail[0],this.trail[1])}update({x:e,y:r}){this.trail=[{x:e,y:r},...this.trail.slice(0,BLADE.TRAIL_LENGTH-1)]}render(e){this.trail.forEach((r,s)=>{const n=this.trail[s+1];n&&(e.lineWidth=(this.trail.length-s-1)/(this.trail.length-1)*BLADE.HEAD_RADIUS*2,e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(n.x,n.y),e.stroke(),e.closePath())}),e.fillStyle=BLADE.COLOR,e.beginPath(),e.arc(this.trail[0].x,this.trail[0].y,BLADE.HEAD_RADIUS,0,Math.PI*2),e.closePath(),e.fill()}}const fruitNinja=t=>{const e=document.createElement("canvas");e.id="fruit",document.body.appendChild(e);const r=Matter.Engine.create({gravity:{y:.5}}),s=Matter.Render.create({canvas:e,engine:r,options:{width:WIDTH,height:HEIGHT,wireframes:!1}});Matter.Render.run(s);const n=new Blade;let i=[],o=[],p=0,l=DEFAULT_DELAY,c=0;const f=s.context;f.font="bold 20px sans-serif",f.textAlign="center",f.textBaseline="middle",f.strokeStyle=BLADE.COLOR,f.lineCap="round";const d=()=>{if(Matter.Engine.update(r),c++,c>l){const u=createCircle(SLING.X,SLING.Y);i.push(u),Matter.Composite.add(r.world,u),Matter.Body.applyForce(u,u.position,Matter.Vector.create(Matter.Common.random(-.1,.1),Matter.Common.random(-.3,-.5))),c=0}n.update(t.target);const g={...n.trail[0],r:BLADE.HEAD_RADIUS};i=i.filter(u=>{if(u.position.y>SLING.Y)return Matter.World.remove(r.world,u),p--,l+=DELAY_STEP,!1;const h={x:u.position.x,y:u.position.y,r:FRUIT.RADIUS};if(areCirclesColliding(g,h)){const y=n.angle,m=n.velocity*.002,_=[y,y+Math.PI].map((b,M)=>{const S=b+Math.PI/2,v=u.position.x+FRUIT.RADIUS/2.4*Math.cos(S),E=u.position.y+FRUIT.RADIUS/2.4*Math.sin(S),T=createCircle(v,E,b,Math.PI);return Matter.Body.setVelocity(T,u.velocity),Matter.Body.applyForce(T,T.position,Matter.Vector.create(m*Math.cos(S),m*Math.sin(S))),Matter.Body.setAngularVelocity(T,Matter.Common.random(.1,.2)*(M?-1:1)),T});return o.push(..._),Matter.Composite.add(r.world,_),Matter.World.remove(r.world,u),p++,l-=DELAY_STEP,!1}return!0}),o=o.filter(u=>{const h=(u.render.opacity||1)-.02;return h<=0?(Matter.World.remove(r.world,u),!1):(u.render.opacity=h,!0)}),n.render(f),f.fillStyle="#fff",f.fillText(String(p),WIDTH/2,30),requestAnimationFrame(d)};d()};new FaceControls({containerId:"faceContainer",diagonalFov:MathUtils.degToRad(80),screenDiagonal:16,cb:t=>{createScene(t),fruitNinja(t)}})});export default Rt();
